!function(e){function t(t){for(var i,s,a=t[0],o=t[1],r=0,d=[];r<a.length;r++)s=a[r],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&d.push(n[s][0]),n[s]=0;for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i]);for(c&&c(t);d.length;)d.shift()()}var i={},n={3:0};function s(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],i=n[e];if(0!==i)if(i)t.push(i[2]);else{var a=new Promise((function(t,s){i=n[e]=[t,s]}));t.push(i[2]=a);var o,r=document.createElement("script");r.charset="utf-8",r.timeout=120,s.nc&&r.setAttribute("nonce",s.nc),r.src=function(e){return s.p+""+({}[e]||e)+".js"}(e);var c=new Error;o=function(t){r.onerror=r.onload=null,clearTimeout(d);var i=n[e];if(0!==i){if(i){var s=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+s+": "+a+")",c.name="ChunkLoadError",c.type=s,c.request=a,i[1](c)}n[e]=void 0}};var d=setTimeout((function(){o({type:"timeout",target:r})}),12e4);r.onerror=r.onload=o,document.head.appendChild(r)}return Promise.all(t)},s.m=e,s.c=i,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(i,n,function(t){return e[t]}.bind(null,n));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s.oe=function(e){throw console.error(e),e};var a=window.webpackJsonp=window.webpackJsonp||[],o=a.push.bind(a);a.push=t,a=a.slice();for(var r=0;r<a.length;r++)t(a[r]);var c=o;s(s.s=23)}([function(e,t,i){"use strict";i.d(t,"d",(function(){return o})),i.d(t,"c",(function(){return r})),i.d(t,"e",(function(){return c})),i.d(t,"w",(function(){return l})),i.d(t,"m",(function(){return u})),i.d(t,"a",(function(){return h})),i.d(t,"b",(function(){return m})),i.d(t,"z",(function(){return p})),i.d(t,"i",(function(){return g})),i.d(t,"y",(function(){return _})),i.d(t,"F",(function(){return f})),i.d(t,"E",(function(){return b})),i.d(t,"q",(function(){return v})),i.d(t,"s",(function(){return y})),i.d(t,"r",(function(){return E})),i.d(t,"v",(function(){return C})),i.d(t,"t",(function(){return I})),i.d(t,"l",(function(){return A})),i.d(t,"p",(function(){return T})),i.d(t,"o",(function(){return O})),i.d(t,"u",(function(){return S})),i.d(t,"C",(function(){return w})),i.d(t,"j",(function(){return M})),i.d(t,"k",(function(){return P})),i.d(t,"h",(function(){return D})),i.d(t,"D",(function(){return x})),i.d(t,"x",(function(){return N})),i.d(t,"A",(function(){return F})),i.d(t,"f",(function(){return R})),i.d(t,"g",(function(){return k})),i.d(t,"B",(function(){return j})),i.d(t,"n",(function(){return H}));var n=i(14),s=i(26),a=i(9);class o{static get(e){try{return JSON.parse(localStorage.getItem(e))}catch(e){return null}}static set(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(e){}}static remove(e){try{localStorage.removeItem(e)}catch(e){}}}class r{constructor(){var e,t,i;e=this,t="port",i=(new MessageChannel).port1,t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}on(e,t){this.port.addEventListener(e,t)}off(e,t){this.port.removeEventListener(e,t)}trigger(e,t){this.port.dispatchEvent(new CustomEvent(e,{detail:t}))}}class c{static html(e,...t){let i="";for(const n of e)i+=n+this.stringifyValue(t.shift());return new d(i)}static stringifyValue(e){return void 0===e?"":e instanceof d?e.toString():Array.isArray(e)?e.map(e=>this.stringifyValue(e)).join(""):this.sanitize(e)}static raw(...e){return new d(String.raw(...e))}static sanitize(e){const t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return String(e).replace(/[&<>"']/g,e=>t[e])}}class d{constructor(e){this.html=e}appendHtml(...e){const t=c.html(...e);return this.html+=t.html,this}prependHtml(...e){const t=c.html(...e);return this.html=t.html+this.html,this}replaceLineBreaks(){return this.html=this.html.replace(/\n/g,"<br>"),this}valueOf(){return this.html}toString(){return this.html}get length(){return this.html.length}buildFragment(){const e=document.createElement("template");return e.innerHTML=this.html,e.content}buildElement(){return this.buildFragment().firstElementChild}}function l(){const e={};return e.promise=new Promise((t,i)=>{e.resolve=(...i)=>(t(...i),e.promise),e.reject=(...t)=>(i(...t),e.promise)}),e}function u(e,t,i){let n;return function(...s){const a=i&&!n;clearTimeout(n),n=setTimeout(()=>{n=null,i||e(...s)},t),a&&e(...s)}}function h(e,t=document){return t.querySelector(e)}function m(e,t=document){return t.querySelectorAll(e)}function p(e){const t=h("#template_"+e);return document.importNode(t.content,!0)}function _(e){const t={};if(e.childElementCount)for(const i of e.children){i.dataset.jsLabel&&(t[i.dataset.jsLabel]=i),Object.assign(t,_(i))}return t}function g(e=null){const t=c.html`
    <svg class="circular-loader" viewBox="25 25 50 50" xmlns="http://www.w3.org/2000/svg">
      <circle class="loader-path" cx="50" cy="50" r="20" fill="none" stroke-width="3" />
    </svg>
  `.buildElement();return e&&e.appendChild(t),t}function f(e){return new Promise(t=>setTimeout(t,e))}function b(){return crypto.getRandomValues(new Uint32Array(2))}function v(e,{withYear:t=!0,longMonth:i=!0}={}){return new Intl.DateTimeFormat("en-US",{day:"numeric",month:i?"long":"short",year:t?"numeric":void 0}).format(1e3*e)}function y(e){return new Intl.DateTimeFormat("en-US",{weekday:"short"}).format(1e3*e)}function E(e,t){if(t-e<3600){const i=Math.floor((t-e)/60);return i>0?a.a.getPlural("date_n_minutes_ago",i):"just now"}const i=new Date(1e3*t);return i.setHours(0,0,0,0),e>i.getTime()/1e3?"today at "+C(e):(i.setDate(i.getDate()-1),e>i.getTime()/1e3?"yesterday at "+C(e):v(e))}function C(e,{withSeconds:t=!1}={}){return new Intl.DateTimeFormat("en-GB",{hour:"numeric",minute:"numeric",second:t?"numeric":void 0}).format(1e3*e)}function I(e,t=0){const i=t?e.toFixed(t).substr(-t):"";e=Math.floor(e);const n=Math.floor(e/3600);return(n?`${n}:`:"")+`${String(Math.floor(e/60)%60).padStart(n?2:1,"0")}:${String(e%60).padStart(2,"0")}`+(i?`,${i}`:"")}function A(e,t,i){return e&&e.length>t?e.substr(0,i)+"...":e}function T(e){return new Intl.NumberFormat("en-US",{notation:"compact",compactDisplay:"short"}).format(e)}function O(e){return new Intl.NumberFormat("en-US").format(e)}function S(e){const t=0===e?0:Math.floor(Math.log(e)/Math.log(1024));return`${(e/Math.pow(1024,t)).toFixed(1)} ${["B","KB","MB","GB","TB"][t]}`}function w(){return"ontouchstart"in window}const M=(()=>{const e=new Promise(e=>{const t=new Image;function i(i){e(!(!i||"load"!==i.type)&&1===t.width)}t.onerror=i,t.onload=i,t.src="data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoBAAEAAwA0JaQAA3AA/vuUAAA="},0);return()=>e})(),L=(()=>{let e,t;const i=(()=>{let e=0;return()=>++e})(),n={};return async(s,a)=>{e||(t=t||new Promise(t=>{new Worker("./webp_worker.js").addEventListener("message",i=>{if("ready"===i.data)e=i.target,t(e);else{const e=n[i.data.taskId];delete n[i.data.taskId],i.data.error?e.reject(i.data.error):e.resolve(i.data.result)}})}),await t);const o=i(),r=l();return n[o]=r,e.postMessage({taskId:o,task:s,params:a}),r.promise}})();async function P(e){const t=new Uint8Array(e);return function({output:e,width:t,height:i}){return new Promise(n=>{const s=new ImageData(new Uint8ClampedArray(e.buffer),t,i),a=document.createElement("canvas");a.width=t,a.height=i,a.getContext("2d").putImageData(s,0,0),a.toBlob(n,"image/png")})}(await L("decode",{data:t}))}function D(e){return e.arrayBuffer?e.arrayBuffer():new Promise((t,i)=>{const n=new FileReader;n.onload=e=>{t(e.target.result)},n.onerror=e=>{console.error(e),i()},n.readAsArrayBuffer(e)})}function x(e){return new Promise((t,i)=>{const n=document.createElement("script");n.onload=()=>t(),n.onerror=e=>(console.log(e),i(new Error("Could not load script"))),n.src=e,document.head.appendChild(n)})}function N(e){const{pageX:t,pageY:i}=e.touches?e.touches[0]:e;return{pageX:t,pageY:i}}function F(e){let t,i;function n(){cancelAnimationFrame(i)}function s(){e(...t),i=requestAnimationFrame(s)}return[function(...e){n(),t=e,s()},n]}function R(e,t){if(w()){let i;e.addEventListener("touchstart",n=>{const s=t=>{i?clearTimeout(i):t.preventDefault(),e.removeEventListener("touchend",s),e.removeEventListener("touchmove",s)};e.addEventListener("touchend",s),e.addEventListener("touchmove",s),i=setTimeout(()=>{i=null,t(n)},300)})}else e.addEventListener("contextmenu",e=>{e.preventDefault(),t(e)})}function k(...e){return e.map(e=>{const t=new n.a(e);return e.classList.contains("mdc-icon-button")&&(t.unbounded=!0),t})}function j(e){return k(...m(".mdc-list-item",e)),new s.a(e)}function H(e,t){const i=window.document.createElement("a");i.href=e,i.download=t,i.click()}},function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i(3),s=i(0),a=i(4);function o(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const r=new class{constructor(){o(this,"dialogs",[]),o(this,"archivedDialogs",[]),o(this,"messages",new Map),o(this,"chats",new Map),o(this,"users",new Map),o(this,"peerDialogs",new Map),o(this,"chatMessages",new Map),o(this,"chatsFull",new Map),o(this,"usersFull",new Map),o(this,"emitter",n.a.emitter),n.a.emitter.on("updates",e=>{this.onUpdates(e.detail)})}onUpdates(e){switch(e._){case"updates":case"updatesCombined":this.updateChats(e.chats),this.updateUsers(e.users);for(const t of e.updates)this.handleUpdate(t);break;case"updateShort":this.handleUpdate(e.update);break;case"updateShortMessage":case"updateShortChatMessage":this.handleUpdateShortMessage(e)}}handleUpdate(e){switch(e._){case"updateNewMessage":case"updateNewChannelMessage":{const t=e.message;this.updateMessages([t]);const i=this.getMessageDialogPeerId(t),n=this.peerDialogs.get(i);n?(n.top_message=t.id,!t.out&&t.id>n.read_inbox_max_id&&n.unread_count++,this.updateChatMessages(n,[t]),this.handleDialogOrder(n),this.emitter.trigger("dialogNewMessage",{dialog:n,message:t})):this.handleNewDialog(t)}break;case"updateEditMessage":case"updateEditChannelMessage":{const t=e.message.id,i=this.messages.get(t);if(i){this.messages.set(t,e.message);const n=this.getMessageDialogPeerId(i);this.updateChatEditedMessage(n,i,e.message)}}break;case"updateDeleteMessages":case"updateDeleteChannelMessages":for(let t of e.messages){const e=this.messages.get(t);if(e){this.messages.delete(t);const i=this.getMessageDialogPeerId(e);this.updateChatDeletedMessage(i,e)}}break;case"updateReadHistoryInbox":case"updateReadChannelInbox":{const t=e.channel_id||this.getPeerId(e.peer),i=this.peerDialogs.get(t);i&&(i.unread_count=e.still_unread_count,i.read_inbox_max_id=e.max_id,console.log("dialogUnreadCountUpdate",{dialog:i},i.read_inbox_max_id,i.unread_count),this.emitter.trigger("dialogUnreadCountUpdate",{dialog:i}))}break;case"updateReadHistoryOutbox":{const t=this.getPeerId(e.peer),i=this.peerDialogs.get(t);i&&(i.read_outbox_max_id=e.max_id,this.emitter.trigger("dialogOutboxReadUpdate",{dialog:i}))}break;case"updateUserStatus":{const t=this.users.get(e.user_id);t&&(t.status=e.status,this.emitter.trigger("userStatusUpdate",{user:t}))}break;case"updatePinnedDialogs":e.order&&this.handlePinnedDialogsOrder(e.order,e.folder_id);break;case"updateDialogPinned":{const t=this.getPeerId(e.peer),i=this.peerDialogs.get(t);i&&(i.pinned=e.pinned,this.handleDialogOrder(i),this.emitter.trigger("dialogPinnedUpdate",{dialog:i}))}break;case"updateDraftMessage":{const t=this.getPeerId(e.peer),i=this.peerDialogs.get(t);i&&(i.draft=e.draft)}break;case"updateMessagePoll":this.emitter.trigger("messagePollUpdate",e);break;case"updateNotifySettings":if("notifyPeer"===e.peer._){e.peer.peer;const t=this.getPeerId(e.peer),i=this.peerDialogs.get(t);i&&(i.notify_settings=e.notify_settings,this.emitter.trigger("dialogNotifySettingsUpdate",{dialog:i}))}break;case"updateFolderPeers":for(const{peer:t,folder_id:i}of e.folder_peers){const e=this.getPeerId(t),n=this.peerDialogs.get(e);if(n){const e=n.folder_id;n.folder_id=i,this.emitter.trigger("dialogFolderChange",{dialog:n,oldFolderId:e});for(const e of[this.dialogs,this.archivedDialogs]){const t=e.indexOf(n);t>-1&&e.splice(t,1)}this.handleDialogOrder(n)}}break;default:console.log("Unhandled update",e._,e)}}handleUpdateShortMessage(e){const t=e.out,i=e.from_id||(t?a.a.getAuthUserId():e.user_id);let n;if(e.chat_id)n={_:"peerChat",chat_id:e.chat_id};else{n={_:"peerUser",user_id:t?e.user_id:a.a.getAuthUserId()}}const s={_:"message",from_id:i,to_id:n},o=["flags","out","mentioned","media_unread","silent","id","message","date","fwd_from","via_bot_id","reply_to_msg_id","entities"];for(const t of o)s[t]=e[t];this.handleUpdate({_:"updateNewMessage",message:s,pts:e.pts,pts_count:e.pts_count})}handleUpdateShortSentMessage(e,t,i,n){this.handleUpdate({_:"updateMessageID",random_id:n,id:e.id});const s=!!t.channel_id,o=s&&this.isMegagroup(t),r={_:"message",flags:e.flags,out:e.out,id:e.id,date:e.date,entities:e.entities,from_id:s&&!o?0:a.a.getAuthUserId(),to_id:t,message:i};e.media&&"messageMediaEmpty"!==e.media._&&(r.media=e.media),this.handleUpdate({_:s?"updateNewChannelMessage":"updateNewMessage",message:r,pts:e.pts,pts_count:e.pts_count})}async handleNewDialog(e){"peerChannel"===e.to_id._&&await this.reloadChannel(e.to_id.channel_id);const t=await this.loadPeerDialog(this.getMessageDialogPeer(e));t&&(this.handleDialogOrder(t),this.emitter.trigger("dialogNewMessage",{dialog:t,message:e}))}async handlePinnedDialogsOrder(e,t){const i=[],n=[],s=1===t?this.archivedDialogs:this.dialogs;for(const t of e){let e=this.peerDialogs.get(this.getPeerId(t.peer));e||(e=await this.loadPeerDialog(t.peer)),e.pinned=!0,n.push(e)}let a=0;for(const e of s){if(!e.pinned)break;a++,-1===n.indexOf(e)&&(delete e.pinned,i.push(e))}s.splice(0,a,...n),n.forEach((e,i)=>{this.emitter.trigger("dialogOrderUpdate",{dialog:e,index:i,folderId:t})}),i.forEach(e=>{this.handleDialogOrder(e)})}handleDialogOrder(e){if(e.pinned)return;const t=e.top_message&&this.messages.get(e.top_message);if(!t)return;const i=e.folder_id,n=1===i?this.archivedDialogs:this.dialogs,s=this.getDialogIndex(e);s>-1&&n.splice(s,1);let a=n.findIndex(e=>{if(!e.pinned&&e.top_message){const i=this.messages.get(e.top_message);return i&&i.date<t.date}return!1});a<0&&(a=n.length),n.splice(a,0,e),this.emitter.trigger("dialogOrderUpdate",{dialog:e,index:a,folderId:i})}async loadDialogs(e={},t=20,i=0){const{dialogs:s,messages:a,chats:o,users:r}=await n.a.callMethod("messages.getDialogs",{folder_id:i,exclude_pinned:!!i,offset_date:e.date||0,offset_id:e.id||0,offset_peer:this.getInputPeer(e.peer),limit:t});this.updateUsers(r),this.updateChats(o),this.updateMessages(a),this.updateDialogs(s);for(const e of s)1===e.folder_id?this.archivedDialogs.push(e):this.dialogs.push(e);const c=i?this.archivedDialogs:this.dialogs;return this.emitter.trigger("dialogsUpdate",{dialogs:c,folderId:i}),this.loadPinnedDialogs(),this.preloadDialogsMessages(s),s}async loadPinnedDialogs(){let{dialogs:e}=await n.a.callMethod("messages.getPinnedDialogs");e=e.filter(e=>"dialog"===e._),this.updateDialogs(e)}loadArchivedDialogs(e={},t=20){return this.loadDialogs(e,t,1)}async loadChatHistory(e,t,i){const n=this.getPeerId(e.peer);let s;if(this.chatMessages.has(n)){if(s=this.chatMessages.get(n),!t||t>s[s.length-1].id)return this.emitter.trigger("chatMessagesUpdate",{dialog:e,messages:s}),s}else{s=[];const i=this.messages.get(e.top_message);i&&(s.push(i),t||(t=i.id)),this.chatMessages.set(n,s),this.emitter.trigger("chatMessagesUpdate",{dialog:e,messages:s})}const a=await this.loadMessages(e.peer,t,i);return this.updateChatMessages(e,a,!0),a}async loadMessages(e,t,i=20,s=0){const a=await n.a.callMethod("messages.getHistory",{peer:this.getInputPeer(e),offset_id:t,limit:i,add_offset:s});return this.updateMessages(a.messages),this.updateUsers(a.users),this.updateChats(a.chats),a.messages}async preloadDialogsMessages(e){if(!this.dialogsPreloaded){this.dialogsPreloaded=!0;for(const t of e)this.chatMessages.has(this.getPeerId(t.peer))||(await this.loadChatHistory(t,0,10),await Object(s.F)(500))}}async loadPeerDialog(e){const t=await n.a.callMethod("messages.getPeerDialogs",{peers:[this.getInputDialogPeer(e)]});return this.updateUsers(t.users),this.updateChats(t.chats),this.updateMessages(t.messages),this.updateDialogs(t.dialogs),t.dialogs[0]}updateDialogs(e){for(const t of e){const e=this.getPeerId(t.peer),i=this.peerDialogs.get(t);i?(Object.keys(i).forEach(e=>delete i[e]),Object.assign(i,t)):this.peerDialogs.set(e,t)}}updateUsers(e){for(const t of e)this.users.set(t.id,t)}updateChats(e,t=!1){for(const i of e)!t&&"channel"===i._&&this.chats.has(i.id)||this.chats.set(i.id,i)}updateMessages(e){for(const t of e)this.messages.set(t.id,t)}updateChatMessages(e,t,i=!1){const n=this.getPeerId(e.peer),s=this.chatMessages.get(n);s&&(i?s.push(...t):s.unshift(...t),this.emitter.trigger("chatMessagesUpdate",{dialog:e,messages:s}))}updateChatEditedMessage(e,t,i){const n=this.peerDialogs.get(e);if(!n)return;const s=this.chatMessages.get(e);if(s){const e=s.indexOf(t);e>-1&&s.splice(e,1,i),this.emitter.trigger("chatEditMessage",{dialog:n,message:i})}n.top_message===t.id&&this.emitter.trigger("dialogTopMessageUpdate",{dialog:n})}updateChatDeletedMessage(e,t){const i=this.peerDialogs.get(e);if(!i)return;const n=this.chatMessages.get(e);if(n){const e=n.indexOf(t);e>-1&&n.splice(e,1),this.emitter.trigger("chatDeleteMessage",{dialog:i,message:t})}i.top_message===t.id&&(n&&n.length?i.top_message=n[0].id:(console.log("delete dialog.top_message",{dialog:i,chatMessages:n,chatId:e,message:t}),delete i.top_message),this.emitter.trigger("dialogTopMessageUpdate",{dialog:i}))}async sendMessage(e,t){const i=Object(s.E)(),a=await n.a.callMethod("messages.sendMessage",{message:t,peer:this.getInputPeer(e),random_id:i});"updateShortSentMessage"===a._?this.handleUpdateShortSentMessage(a,e,t,i):this.onUpdates(a)}async sendMedia(e,t,i=""){const a=Object(s.E)(),o=await n.a.callMethod("messages.sendMedia",{message:i,media:t,peer:this.getInputPeer(e),random_id:a});"updateShortSentMessage"===o._?this.handleUpdateShortSentMessage(o,e,i,a):this.onUpdates(o)}async readHistory(e,t,i){e.peer.channel_id?await n.a.callMethod("channels.readHistory",{channel:this.getInputPeer(e.peer),max_id:t}):await n.a.callMethod("messages.readHistory",{peer:this.getInputPeer(e.peer),max_id:t}),e.unread_count=Math.max(0,e.unread_count-i),e.read_inbox_max_id=t,this.emitter.trigger("dialogUnreadCountUpdate",{dialog:e})}saveDraft(e,t){return n.a.callMethod("messages.saveDraft",{message:t,peer:this.getInputPeer(e)})}getDialog(e){return this.peerDialogs.get(e)}getDialogIndex(e,t=0){return(1===t?this.archivedDialogs:this.dialogs).findIndex(t=>this.cmpDialogs(t,e))}replaceDialog(e){const t=e.folder_id,i=this.getDialogIndex(e,t);if(i>-1){(1===t?this.archivedDialogs:this.dialogs).splice(i,1,e)}}cmpDialogs(e,t){return e.peer._===t.peer._&&this.getPeerId(e.peer)===this.getPeerId(t.peer)}getMessageAuthorPeer(e){return e.from_id?this.getPeerById(e.from_id):e.to_id}getMessageAuthorPeerId(e){return this.getPeerId(this.getMessageAuthorPeer(e))}getMessageDialogPeer(e){return"peerUser"===e.to_id._?e.out?e.to_id:{_:"peerUser",user_id:e.from_id}:e.to_id}getMessageDialogPeerId(e){return this.getPeerId(this.getMessageDialogPeer(e))}getPeerId(e){switch(e._){case"peerUser":return e.user_id;case"peerChat":return e.chat_id;case"peerChannel":return e.channel_id}}getPeerData(e){switch(e._){case"peerUser":return this.users.get(e.user_id);case"peerChat":return this.chats.get(e.chat_id);case"peerChannel":return this.chats.get(e.channel_id)}}getPeerName(e,t=!0){const i=this.getPeerData(e);return i?"peerUser"===e._?this.getUserName(i,t):this.getChatName(i):""}getUserName(e,t=!0){return e.deleted?"Deleted Account":t?[e.first_name,e.last_name].join(" ").trim():e.first_name||e.last_name||""}getChatName(e){return e.title||""}getInputPeer(e){if(!e)return{_:"inputPeerEmpty"};const t=this.getPeerData(e);switch(e._){case"peerUser":return e.user_id===a.a.getAuthUserId()?{_:"inputPeerSelf"}:{_:"inputPeerUser",user_id:e.user_id,access_hash:t&&t.access_hash||0};case"peerChat":return{_:"inputPeerChat",chat_id:e.chat_id,access_hash:t&&t.access_hash||0};case"peerChannel":return{_:"inputPeerChannel",channel_id:e.channel_id,access_hash:t&&t.access_hash||0}}}getInputUser(e){return{_:"inputUser",user_id:e.id,access_hash:e.access_hash||0}}getInputPeerById(e){return this.getInputPeer(this.getPeerById(e))}getInputDialogPeer(e){return{_:"inputDialogPeer",peer:this.getInputPeer(e)}}getInputMessagesFilter(e){switch(e){case"media":return{_:"inputMessagesFilterPhotos"};case"docs":return{_:"inputMessagesFilterDocument"};case"links":return{_:"inputMessagesFilterUrl"};case"audio":return{_:"inputMessagesFilterMusic"}}}getUserPeer(e){return{_:"peerUser",user_id:e.id}}getChatPeer(e){return"channel"===e._?{_:"peerChannel",channel_id:e.id}:{_:"peerChat",chat_id:e.id}}getPeerById(e,t=""){return this.chats.has(e)?this.getChatPeer(this.chats.get(e)):"channel"===t?{_:"peerChannel",channel_id:e}:"chat"===t?{_:"peerChat",chat_id:e}:{_:"peerUser",user_id:e}}isMegagroup(e){return!!this.chats.get(e.channel_id).megagroup}async reloadChannel(e){const t=await n.a.callMethod("channels.getChannels",{id:[this.getInputPeerById(e)]});this.updateChats(t.chats,!0)}async reloadUser(e){const t=await n.a.callMethod("users.getUsers",{id:[this.getInputPeerById(e)]});this.updateUsers(t)}async loadChatFull(e){const t=this.getPeerId(e);if(this.chatsFull.has(t))return this.chatsFull.get(t);const i=this.getInputPeerById(t);let s;s="inputPeerChannel"===i._?await n.a.callMethod("channels.getFullChannel",{channel:i}):await n.a.callMethod("messages.getFullChat",{chat_id:t}),this.updateUsers(s.users),this.updateChats(s.chats);const a=s.full_chat;return this.chatsFull.set(t,a),a}async loadUserFull(e){const t=this.getPeerId(e);if(this.usersFull.has(t))return this.usersFull.get(t);const i=this.getInputPeer(e),s=await n.a.callMethod("users.getFullUser",{id:i});return this.usersFull.set(t,s),s}async loadMessagesById(e,...t){let i;if(e&&e.channel_id){const s=this.chats.get(e.channel_id);i=await n.a.callMethod("channels.getMessages",{channel:{_:"inputChannel",channel_id:s.id,access_hash:s.access_hash},id:t.map(e=>({_:"inputMessageID",id:e}))})}else i=await n.a.callMethod("messages.getMessages",{id:t.map(e=>({_:"inputMessageID",id:e}))});return this.updateUsers(i.users),this.updateChats(i.chats),this.updateMessages(i.messages),i.messages}};window.MessagesApiManager=r},function(e,t,i){"use strict";i.d(t,"b",(function(){return s})),i.d(t,"a",(function(){return a})),i.d(t,"d",(function(){return o})),i.d(t,"c",(function(){return c}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};function s(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}var a=function(){return(a=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)};function o(e){var t="function"==typeof Symbol&&e[Symbol.iterator],i=0;return t?t.call(e):{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}}}function r(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var n,s,a=i.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)o.push(n.value)}catch(e){s={error:e}}finally{try{n&&!n.done&&(i=a.return)&&i.call(a)}finally{if(s)throw s.error}}return o}function c(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e}},function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));const n=new(i(19).a);window.ApiClient=n},function(e,t,i){"use strict";var n=i(0),s=i(3),a=i(9),o=i(2),r=i(6),c=i(12),d=i(10),l=i(5),u={LABEL_FLOAT_ABOVE:"mdc-floating-label--float-above",LABEL_SHAKE:"mdc-floating-label--shake",ROOT:"mdc-floating-label"},h=function(e){function t(i){var n=e.call(this,o.a({},t.defaultAdapter,i))||this;return n.shakeAnimationEndHandler_=function(){return n.handleShakeAnimationEnd_()},n}return o.b(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return u},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},getWidth:function(){return 0},registerInteractionHandler:function(){},deregisterInteractionHandler:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.adapter_.registerInteractionHandler("animationend",this.shakeAnimationEndHandler_)},t.prototype.destroy=function(){this.adapter_.deregisterInteractionHandler("animationend",this.shakeAnimationEndHandler_)},t.prototype.getWidth=function(){return this.adapter_.getWidth()},t.prototype.shake=function(e){var i=t.cssClasses.LABEL_SHAKE;e?this.adapter_.addClass(i):this.adapter_.removeClass(i)},t.prototype.float=function(e){var i=t.cssClasses,n=i.LABEL_FLOAT_ABOVE,s=i.LABEL_SHAKE;e?this.adapter_.addClass(n):(this.adapter_.removeClass(n),this.adapter_.removeClass(s))},t.prototype.handleShakeAnimationEnd_=function(){var e=t.cssClasses.LABEL_SHAKE;this.adapter_.removeClass(e)},t}(l.a),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.b(t,e),t.attachTo=function(e){return new t(e)},t.prototype.shake=function(e){this.foundation_.shake(e)},t.prototype.float=function(e){this.foundation_.float(e)},t.prototype.getWidth=function(){return this.foundation_.getWidth()},t.prototype.getDefaultFoundation=function(){var e=this;return new h({addClass:function(t){return e.root_.classList.add(t)},removeClass:function(t){return e.root_.classList.remove(t)},getWidth:function(){return e.root_.scrollWidth},registerInteractionHandler:function(t,i){return e.listen(t,i)},deregisterInteractionHandler:function(t,i){return e.unlisten(t,i)}})},t}(r.a),p={LINE_RIPPLE_ACTIVE:"mdc-line-ripple--active",LINE_RIPPLE_DEACTIVATING:"mdc-line-ripple--deactivating"},_=function(e){function t(i){var n=e.call(this,o.a({},t.defaultAdapter,i))||this;return n.transitionEndHandler_=function(e){return n.handleTransitionEnd(e)},n}return o.b(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return p},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},setStyle:function(){},registerEventHandler:function(){},deregisterEventHandler:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.adapter_.registerEventHandler("transitionend",this.transitionEndHandler_)},t.prototype.destroy=function(){this.adapter_.deregisterEventHandler("transitionend",this.transitionEndHandler_)},t.prototype.activate=function(){this.adapter_.removeClass(p.LINE_RIPPLE_DEACTIVATING),this.adapter_.addClass(p.LINE_RIPPLE_ACTIVE)},t.prototype.setRippleCenter=function(e){this.adapter_.setStyle("transform-origin",e+"px center")},t.prototype.deactivate=function(){this.adapter_.addClass(p.LINE_RIPPLE_DEACTIVATING)},t.prototype.handleTransitionEnd=function(e){var t=this.adapter_.hasClass(p.LINE_RIPPLE_DEACTIVATING);"opacity"===e.propertyName&&t&&(this.adapter_.removeClass(p.LINE_RIPPLE_ACTIVE),this.adapter_.removeClass(p.LINE_RIPPLE_DEACTIVATING))},t}(l.a),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.b(t,e),t.attachTo=function(e){return new t(e)},t.prototype.activate=function(){this.foundation_.activate()},t.prototype.deactivate=function(){this.foundation_.deactivate()},t.prototype.setRippleCenter=function(e){this.foundation_.setRippleCenter(e)},t.prototype.getDefaultFoundation=function(){var e=this;return new _({addClass:function(t){return e.root_.classList.add(t)},removeClass:function(t){return e.root_.classList.remove(t)},hasClass:function(t){return e.root_.classList.contains(t)},setStyle:function(t,i){return e.root_.style.setProperty(t,i)},registerEventHandler:function(t,i){return e.listen(t,i)},deregisterEventHandler:function(t,i){return e.unlisten(t,i)}})},t}(r.a),f={NOTCH_ELEMENT_SELECTOR:".mdc-notched-outline__notch"},b={NOTCH_ELEMENT_PADDING:8},v={NO_LABEL:"mdc-notched-outline--no-label",OUTLINE_NOTCHED:"mdc-notched-outline--notched",OUTLINE_UPGRADED:"mdc-notched-outline--upgraded"},y=function(e){function t(i){return e.call(this,o.a({},t.defaultAdapter,i))||this}return o.b(t,e),Object.defineProperty(t,"strings",{get:function(){return f},enumerable:!0,configurable:!0}),Object.defineProperty(t,"cssClasses",{get:function(){return v},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return b},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},setNotchWidthProperty:function(){},removeNotchWidthProperty:function(){}}},enumerable:!0,configurable:!0}),t.prototype.notch=function(e){var i=t.cssClasses.OUTLINE_NOTCHED;e>0&&(e+=b.NOTCH_ELEMENT_PADDING),this.adapter_.setNotchWidthProperty(e),this.adapter_.addClass(i)},t.prototype.closeNotch=function(){var e=t.cssClasses.OUTLINE_NOTCHED;this.adapter_.removeClass(e),this.adapter_.removeNotchWidthProperty()},t}(l.a),E=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.b(t,e),t.attachTo=function(e){return new t(e)},t.prototype.initialSyncWithDOM=function(){this.notchElement_=this.root_.querySelector(f.NOTCH_ELEMENT_SELECTOR);var e=this.root_.querySelector("."+h.cssClasses.ROOT);e?(e.style.transitionDuration="0s",this.root_.classList.add(v.OUTLINE_UPGRADED),requestAnimationFrame((function(){e.style.transitionDuration=""}))):this.root_.classList.add(v.NO_LABEL)},t.prototype.notch=function(e){this.foundation_.notch(e)},t.prototype.closeNotch=function(){this.foundation_.closeNotch()},t.prototype.getDefaultFoundation=function(){var e=this;return new y({addClass:function(t){return e.root_.classList.add(t)},removeClass:function(t){return e.root_.classList.remove(t)},setNotchWidthProperty:function(t){return e.notchElement_.style.setProperty("width",t+"px")},removeNotchWidthProperty:function(){return e.notchElement_.style.removeProperty("width")}})},t}(r.a),C=i(14),I=i(17),A={ROOT:"mdc-text-field-character-counter"},T={ROOT_SELECTOR:"."+A.ROOT},O=function(e){function t(i){return e.call(this,o.a({},t.defaultAdapter,i))||this}return o.b(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return A},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return T},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{setContent:function(){}}},enumerable:!0,configurable:!0}),t.prototype.setCounterValue=function(e,t){e=Math.min(e,t),this.adapter_.setContent(e+" / "+t)},t}(l.a),S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.b(t,e),t.attachTo=function(e){return new t(e)},Object.defineProperty(t.prototype,"foundation",{get:function(){return this.foundation_},enumerable:!0,configurable:!0}),t.prototype.getDefaultFoundation=function(){var e=this;return new O({setContent:function(t){e.root_.textContent=t}})},t}(r.a),w={ARIA_CONTROLS:"aria-controls",ICON_SELECTOR:".mdc-text-field__icon",INPUT_SELECTOR:".mdc-text-field__input",LABEL_SELECTOR:".mdc-floating-label",LINE_RIPPLE_SELECTOR:".mdc-line-ripple",OUTLINE_SELECTOR:".mdc-notched-outline"},M={DENSE:"mdc-text-field--dense",DISABLED:"mdc-text-field--disabled",FOCUSED:"mdc-text-field--focused",FULLWIDTH:"mdc-text-field--fullwidth",HELPER_LINE:"mdc-text-field-helper-line",INVALID:"mdc-text-field--invalid",NO_LABEL:"mdc-text-field--no-label",OUTLINED:"mdc-text-field--outlined",ROOT:"mdc-text-field",TEXTAREA:"mdc-text-field--textarea",WITH_LEADING_ICON:"mdc-text-field--with-leading-icon",WITH_TRAILING_ICON:"mdc-text-field--with-trailing-icon"},L={DENSE_LABEL_SCALE:.923,LABEL_SCALE:.75},P=["pattern","min","max","required","step","minlength","maxlength"],D=["color","date","datetime-local","month","range","time","week"],x=["mousedown","touchstart"],N=["click","keydown"],F=function(e){function t(i,n){void 0===n&&(n={});var s=e.call(this,o.a({},t.defaultAdapter,i))||this;return s.isFocused_=!1,s.receivedUserInput_=!1,s.isValid_=!0,s.useNativeValidation_=!0,s.helperText_=n.helperText,s.characterCounter_=n.characterCounter,s.leadingIcon_=n.leadingIcon,s.trailingIcon_=n.trailingIcon,s.inputFocusHandler_=function(){return s.activateFocus()},s.inputBlurHandler_=function(){return s.deactivateFocus()},s.inputInputHandler_=function(){return s.handleInput()},s.setPointerXOffset_=function(e){return s.setTransformOrigin(e)},s.textFieldInteractionHandler_=function(){return s.handleTextFieldInteraction()},s.validationAttributeChangeHandler_=function(e){return s.handleValidationAttributeChange(e)},s}return o.b(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return M},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return w},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return L},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shouldAlwaysFloat_",{get:function(){var e=this.getNativeInput_().type;return D.indexOf(e)>=0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shouldFloat",{get:function(){return this.shouldAlwaysFloat_||this.isFocused_||!!this.getValue()||this.isBadInput_()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shouldShake",{get:function(){return!this.isFocused_&&!this.isValid()&&!!this.getValue()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!0},registerTextFieldInteractionHandler:function(){},deregisterTextFieldInteractionHandler:function(){},registerInputInteractionHandler:function(){},deregisterInputInteractionHandler:function(){},registerValidationAttributeChangeHandler:function(){return new MutationObserver((function(){}))},deregisterValidationAttributeChangeHandler:function(){},getNativeInput:function(){return null},isFocused:function(){return!1},activateLineRipple:function(){},deactivateLineRipple:function(){},setLineRippleTransformOrigin:function(){},shakeLabel:function(){},floatLabel:function(){},hasLabel:function(){return!1},getLabelWidth:function(){return 0},hasOutline:function(){return!1},notchOutline:function(){},closeOutline:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){var e=this;this.adapter_.isFocused()?this.inputFocusHandler_():this.adapter_.hasLabel()&&this.shouldFloat&&(this.notchOutline(!0),this.adapter_.floatLabel(!0)),this.adapter_.registerInputInteractionHandler("focus",this.inputFocusHandler_),this.adapter_.registerInputInteractionHandler("blur",this.inputBlurHandler_),this.adapter_.registerInputInteractionHandler("input",this.inputInputHandler_),x.forEach((function(t){e.adapter_.registerInputInteractionHandler(t,e.setPointerXOffset_)})),N.forEach((function(t){e.adapter_.registerTextFieldInteractionHandler(t,e.textFieldInteractionHandler_)})),this.validationObserver_=this.adapter_.registerValidationAttributeChangeHandler(this.validationAttributeChangeHandler_),this.setCharacterCounter_(this.getValue().length)},t.prototype.destroy=function(){var e=this;this.adapter_.deregisterInputInteractionHandler("focus",this.inputFocusHandler_),this.adapter_.deregisterInputInteractionHandler("blur",this.inputBlurHandler_),this.adapter_.deregisterInputInteractionHandler("input",this.inputInputHandler_),x.forEach((function(t){e.adapter_.deregisterInputInteractionHandler(t,e.setPointerXOffset_)})),N.forEach((function(t){e.adapter_.deregisterTextFieldInteractionHandler(t,e.textFieldInteractionHandler_)})),this.adapter_.deregisterValidationAttributeChangeHandler(this.validationObserver_)},t.prototype.handleTextFieldInteraction=function(){var e=this.adapter_.getNativeInput();e&&e.disabled||(this.receivedUserInput_=!0)},t.prototype.handleValidationAttributeChange=function(e){var t=this;e.some((function(e){return P.indexOf(e)>-1&&(t.styleValidity_(!0),!0)})),e.indexOf("maxlength")>-1&&this.setCharacterCounter_(this.getValue().length)},t.prototype.notchOutline=function(e){if(this.adapter_.hasOutline())if(e){var t=this.adapter_.hasClass(M.DENSE)?L.DENSE_LABEL_SCALE:L.LABEL_SCALE,i=this.adapter_.getLabelWidth()*t;this.adapter_.notchOutline(i)}else this.adapter_.closeOutline()},t.prototype.activateFocus=function(){this.isFocused_=!0,this.styleFocused_(this.isFocused_),this.adapter_.activateLineRipple(),this.adapter_.hasLabel()&&(this.notchOutline(this.shouldFloat),this.adapter_.floatLabel(this.shouldFloat),this.adapter_.shakeLabel(this.shouldShake)),this.helperText_&&this.helperText_.showToScreenReader()},t.prototype.setTransformOrigin=function(e){var t=e.touches,i=t?t[0]:e,n=i.target.getBoundingClientRect(),s=i.clientX-n.left;this.adapter_.setLineRippleTransformOrigin(s)},t.prototype.handleInput=function(){this.autoCompleteFocus(),this.setCharacterCounter_(this.getValue().length)},t.prototype.autoCompleteFocus=function(){this.receivedUserInput_||this.activateFocus()},t.prototype.deactivateFocus=function(){this.isFocused_=!1,this.adapter_.deactivateLineRipple();var e=this.isValid();this.styleValidity_(e),this.styleFocused_(this.isFocused_),this.adapter_.hasLabel()&&(this.notchOutline(this.shouldFloat),this.adapter_.floatLabel(this.shouldFloat),this.adapter_.shakeLabel(this.shouldShake)),this.shouldFloat||(this.receivedUserInput_=!1)},t.prototype.getValue=function(){return this.getNativeInput_().value},t.prototype.setValue=function(e){this.getValue()!==e&&(this.getNativeInput_().value=e),this.setCharacterCounter_(e.length);var t=this.isValid();this.styleValidity_(t),this.adapter_.hasLabel()&&(this.notchOutline(this.shouldFloat),this.adapter_.floatLabel(this.shouldFloat),this.adapter_.shakeLabel(this.shouldShake))},t.prototype.isValid=function(){return this.useNativeValidation_?this.isNativeInputValid_():this.isValid_},t.prototype.setValid=function(e){this.isValid_=e,this.styleValidity_(e);var t=!e&&!this.isFocused_&&!!this.getValue();this.adapter_.hasLabel()&&this.adapter_.shakeLabel(t)},t.prototype.setUseNativeValidation=function(e){this.useNativeValidation_=e},t.prototype.isDisabled=function(){return this.getNativeInput_().disabled},t.prototype.setDisabled=function(e){this.getNativeInput_().disabled=e,this.styleDisabled_(e)},t.prototype.setHelperTextContent=function(e){this.helperText_&&this.helperText_.setContent(e)},t.prototype.setLeadingIconAriaLabel=function(e){this.leadingIcon_&&this.leadingIcon_.setAriaLabel(e)},t.prototype.setLeadingIconContent=function(e){this.leadingIcon_&&this.leadingIcon_.setContent(e)},t.prototype.setTrailingIconAriaLabel=function(e){this.trailingIcon_&&this.trailingIcon_.setAriaLabel(e)},t.prototype.setTrailingIconContent=function(e){this.trailingIcon_&&this.trailingIcon_.setContent(e)},t.prototype.setCharacterCounter_=function(e){if(this.characterCounter_){var t=this.getNativeInput_().maxLength;if(-1===t)throw new Error("MDCTextFieldFoundation: Expected maxlength html property on text input or textarea.");this.characterCounter_.setCounterValue(e,t)}},t.prototype.isBadInput_=function(){return this.getNativeInput_().validity.badInput||!1},t.prototype.isNativeInputValid_=function(){return this.getNativeInput_().validity.valid},t.prototype.styleValidity_=function(e){var i=t.cssClasses.INVALID;e?this.adapter_.removeClass(i):this.adapter_.addClass(i),this.helperText_&&this.helperText_.setValidity(e)},t.prototype.styleFocused_=function(e){var i=t.cssClasses.FOCUSED;e?this.adapter_.addClass(i):this.adapter_.removeClass(i)},t.prototype.styleDisabled_=function(e){var i=t.cssClasses,n=i.DISABLED,s=i.INVALID;e?(this.adapter_.addClass(n),this.adapter_.removeClass(s)):this.adapter_.removeClass(n),this.leadingIcon_&&this.leadingIcon_.setDisabled(e),this.trailingIcon_&&this.trailingIcon_.setDisabled(e)},t.prototype.getNativeInput_=function(){return(this.adapter_?this.adapter_.getNativeInput():null)||{disabled:!1,maxLength:-1,type:"input",validity:{badInput:!1,valid:!0},value:""}},t}(l.a),R={HELPER_TEXT_PERSISTENT:"mdc-text-field-helper-text--persistent",HELPER_TEXT_VALIDATION_MSG:"mdc-text-field-helper-text--validation-msg",ROOT:"mdc-text-field-helper-text"},k={ARIA_HIDDEN:"aria-hidden",ROLE:"role",ROOT_SELECTOR:"."+R.ROOT},j=function(e){function t(i){return e.call(this,o.a({},t.defaultAdapter,i))||this}return o.b(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return R},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return k},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},setAttr:function(){},removeAttr:function(){},setContent:function(){}}},enumerable:!0,configurable:!0}),t.prototype.setContent=function(e){this.adapter_.setContent(e)},t.prototype.setPersistent=function(e){e?this.adapter_.addClass(R.HELPER_TEXT_PERSISTENT):this.adapter_.removeClass(R.HELPER_TEXT_PERSISTENT)},t.prototype.setValidation=function(e){e?this.adapter_.addClass(R.HELPER_TEXT_VALIDATION_MSG):this.adapter_.removeClass(R.HELPER_TEXT_VALIDATION_MSG)},t.prototype.showToScreenReader=function(){this.adapter_.removeAttr(k.ARIA_HIDDEN)},t.prototype.setValidity=function(e){var t=this.adapter_.hasClass(R.HELPER_TEXT_PERSISTENT),i=this.adapter_.hasClass(R.HELPER_TEXT_VALIDATION_MSG)&&!e;i?this.adapter_.setAttr(k.ROLE,"alert"):this.adapter_.removeAttr(k.ROLE),t||i||this.hide_()},t.prototype.hide_=function(){this.adapter_.setAttr(k.ARIA_HIDDEN,"true")},t}(l.a),H=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.b(t,e),t.attachTo=function(e){return new t(e)},Object.defineProperty(t.prototype,"foundation",{get:function(){return this.foundation_},enumerable:!0,configurable:!0}),t.prototype.getDefaultFoundation=function(){var e=this;return new j({addClass:function(t){return e.root_.classList.add(t)},removeClass:function(t){return e.root_.classList.remove(t)},hasClass:function(t){return e.root_.classList.contains(t)},setAttr:function(t,i){return e.root_.setAttribute(t,i)},removeAttr:function(t){return e.root_.removeAttribute(t)},setContent:function(t){e.root_.textContent=t}})},t}(r.a),U={ICON_EVENT:"MDCTextField:icon",ICON_ROLE:"button"},B={ROOT:"mdc-text-field__icon"},V=["click","keydown"],$=function(e){function t(i){var n=e.call(this,o.a({},t.defaultAdapter,i))||this;return n.savedTabIndex_=null,n.interactionHandler_=function(e){return n.handleInteraction(e)},n}return o.b(t,e),Object.defineProperty(t,"strings",{get:function(){return U},enumerable:!0,configurable:!0}),Object.defineProperty(t,"cssClasses",{get:function(){return B},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{getAttr:function(){return null},setAttr:function(){},removeAttr:function(){},setContent:function(){},registerInteractionHandler:function(){},deregisterInteractionHandler:function(){},notifyIconAction:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){var e=this;this.savedTabIndex_=this.adapter_.getAttr("tabindex"),V.forEach((function(t){e.adapter_.registerInteractionHandler(t,e.interactionHandler_)}))},t.prototype.destroy=function(){var e=this;V.forEach((function(t){e.adapter_.deregisterInteractionHandler(t,e.interactionHandler_)}))},t.prototype.setDisabled=function(e){this.savedTabIndex_&&(e?(this.adapter_.setAttr("tabindex","-1"),this.adapter_.removeAttr("role")):(this.adapter_.setAttr("tabindex",this.savedTabIndex_),this.adapter_.setAttr("role",U.ICON_ROLE)))},t.prototype.setAriaLabel=function(e){this.adapter_.setAttr("aria-label",e)},t.prototype.setContent=function(e){this.adapter_.setContent(e)},t.prototype.handleInteraction=function(e){var t="Enter"===e.key||13===e.keyCode;("click"===e.type||t)&&this.adapter_.notifyIconAction()},t}(l.a),G=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.b(t,e),t.attachTo=function(e){return new t(e)},Object.defineProperty(t.prototype,"foundation",{get:function(){return this.foundation_},enumerable:!0,configurable:!0}),t.prototype.getDefaultFoundation=function(){var e=this;return new $({getAttr:function(t){return e.root_.getAttribute(t)},setAttr:function(t,i){return e.root_.setAttribute(t,i)},removeAttr:function(t){return e.root_.removeAttribute(t)},setContent:function(t){e.root_.textContent=t},registerInteractionHandler:function(t,i){return e.listen(t,i)},deregisterInteractionHandler:function(t,i){return e.unlisten(t,i)},notifyIconAction:function(){return e.emit($.strings.ICON_EVENT,{},!0)}})},t}(r.a),z=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.b(t,e),t.attachTo=function(e){return new t(e)},t.prototype.initialize=function(e,t,i,n,s,a,o){void 0===e&&(e=function(e,t){return new C.a(e,t)}),void 0===t&&(t=function(e){return new g(e)}),void 0===i&&(i=function(e){return new H(e)}),void 0===n&&(n=function(e){return new S(e)}),void 0===s&&(s=function(e){return new G(e)}),void 0===a&&(a=function(e){return new m(e)}),void 0===o&&(o=function(e){return new E(e)}),this.input_=this.root_.querySelector(w.INPUT_SELECTOR);var r=this.root_.querySelector(w.LABEL_SELECTOR);this.label_=r?a(r):null;var c=this.root_.querySelector(w.LINE_RIPPLE_SELECTOR);this.lineRipple_=c?t(c):null;var d=this.root_.querySelector(w.OUTLINE_SELECTOR);this.outline_=d?o(d):null;var l=j.strings,u=this.root_.nextElementSibling,h=u&&u.classList.contains(M.HELPER_LINE),p=h&&u&&u.querySelector(l.ROOT_SELECTOR);this.helperText_=p?i(p):null;var _=O.strings,f=this.root_.querySelector(_.ROOT_SELECTOR);!f&&h&&u&&(f=u.querySelector(_.ROOT_SELECTOR)),this.characterCounter_=f?n(f):null,this.leadingIcon_=null,this.trailingIcon_=null;var b=this.root_.querySelectorAll(w.ICON_SELECTOR);b.length>0&&(b.length>1?(this.leadingIcon_=s(b[0]),this.trailingIcon_=s(b[1])):this.root_.classList.contains(M.WITH_LEADING_ICON)?this.leadingIcon_=s(b[0]):this.trailingIcon_=s(b[0])),this.ripple=this.createRipple_(e)},t.prototype.destroy=function(){this.ripple&&this.ripple.destroy(),this.lineRipple_&&this.lineRipple_.destroy(),this.helperText_&&this.helperText_.destroy(),this.characterCounter_&&this.characterCounter_.destroy(),this.leadingIcon_&&this.leadingIcon_.destroy(),this.trailingIcon_&&this.trailingIcon_.destroy(),this.label_&&this.label_.destroy(),this.outline_&&this.outline_.destroy(),e.prototype.destroy.call(this)},t.prototype.initialSyncWithDOM=function(){this.disabled=this.input_.disabled},Object.defineProperty(t.prototype,"value",{get:function(){return this.foundation_.getValue()},set:function(e){this.foundation_.setValue(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return this.foundation_.isDisabled()},set:function(e){this.foundation_.setDisabled(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"valid",{get:function(){return this.foundation_.isValid()},set:function(e){this.foundation_.setValid(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"required",{get:function(){return this.input_.required},set:function(e){this.input_.required=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pattern",{get:function(){return this.input_.pattern},set:function(e){this.input_.pattern=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minLength",{get:function(){return this.input_.minLength},set:function(e){this.input_.minLength=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxLength",{get:function(){return this.input_.maxLength},set:function(e){e<0?this.input_.removeAttribute("maxLength"):this.input_.maxLength=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"min",{get:function(){return this.input_.min},set:function(e){this.input_.min=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"max",{get:function(){return this.input_.max},set:function(e){this.input_.max=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"step",{get:function(){return this.input_.step},set:function(e){this.input_.step=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"helperTextContent",{set:function(e){this.foundation_.setHelperTextContent(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leadingIconAriaLabel",{set:function(e){this.foundation_.setLeadingIconAriaLabel(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leadingIconContent",{set:function(e){this.foundation_.setLeadingIconContent(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"trailingIconAriaLabel",{set:function(e){this.foundation_.setTrailingIconAriaLabel(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"trailingIconContent",{set:function(e){this.foundation_.setTrailingIconContent(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"useNativeValidation",{set:function(e){this.foundation_.setUseNativeValidation(e)},enumerable:!0,configurable:!0}),t.prototype.focus=function(){this.input_.focus()},t.prototype.layout=function(){var e=this.foundation_.shouldFloat;this.foundation_.notchOutline(e)},t.prototype.getDefaultFoundation=function(){var e=o.a({},this.getRootAdapterMethods_(),this.getInputAdapterMethods_(),this.getLabelAdapterMethods_(),this.getLineRippleAdapterMethods_(),this.getOutlineAdapterMethods_());return new F(e,this.getFoundationMap_())},t.prototype.getRootAdapterMethods_=function(){var e=this;return{addClass:function(t){return e.root_.classList.add(t)},removeClass:function(t){return e.root_.classList.remove(t)},hasClass:function(t){return e.root_.classList.contains(t)},registerTextFieldInteractionHandler:function(t,i){return e.listen(t,i)},deregisterTextFieldInteractionHandler:function(t,i){return e.unlisten(t,i)},registerValidationAttributeChangeHandler:function(t){var i=new MutationObserver((function(e){return t(function(e){return e.map((function(e){return e.attributeName})).filter((function(e){return e}))}(e))}));return i.observe(e.input_,{attributes:!0}),i},deregisterValidationAttributeChangeHandler:function(e){return e.disconnect()}}},t.prototype.getInputAdapterMethods_=function(){var e=this;return{getNativeInput:function(){return e.input_},isFocused:function(){return document.activeElement===e.input_},registerInputInteractionHandler:function(t,i){return e.input_.addEventListener(t,i,Object(c.a)())},deregisterInputInteractionHandler:function(t,i){return e.input_.removeEventListener(t,i,Object(c.a)())}}},t.prototype.getLabelAdapterMethods_=function(){var e=this;return{floatLabel:function(t){return e.label_&&e.label_.float(t)},getLabelWidth:function(){return e.label_?e.label_.getWidth():0},hasLabel:function(){return Boolean(e.label_)},shakeLabel:function(t){return e.label_&&e.label_.shake(t)}}},t.prototype.getLineRippleAdapterMethods_=function(){var e=this;return{activateLineRipple:function(){e.lineRipple_&&e.lineRipple_.activate()},deactivateLineRipple:function(){e.lineRipple_&&e.lineRipple_.deactivate()},setLineRippleTransformOrigin:function(t){e.lineRipple_&&e.lineRipple_.setRippleCenter(t)}}},t.prototype.getOutlineAdapterMethods_=function(){var e=this;return{closeOutline:function(){return e.outline_&&e.outline_.closeNotch()},hasOutline:function(){return Boolean(e.outline_)},notchOutline:function(t){return e.outline_&&e.outline_.notch(t)}}},t.prototype.getFoundationMap_=function(){return{characterCounter:this.characterCounter_?this.characterCounter_.foundation:void 0,helperText:this.helperText_?this.helperText_.foundation:void 0,leadingIcon:this.leadingIcon_?this.leadingIcon_.foundation:void 0,trailingIcon:this.trailingIcon_?this.trailingIcon_.foundation:void 0}},t.prototype.createRipple_=function(e){var t=this,i=this.root_.classList.contains(M.TEXTAREA),n=this.root_.classList.contains(M.OUTLINED);if(i||n)return null;var s=o.a({},C.a.createAdapter(this),{isSurfaceActive:function(){return d.b(t.input_,":active")},registerInteractionHandler:function(e,i){return t.input_.addEventListener(e,i,Object(c.a)())},deregisterInteractionHandler:function(e,i){return t.input_.removeEventListener(e,i,Object(c.a)())}});return e(this.root_,new I.a(s))},t}(r.a);const K=[["AF","Afghanistan","+93"],["AX","land Islands","+358 18"],["AL","Albania","+355"],["DZ","Algeria","+213"],["AS","American Samoa","+1 684"],["AD","Andorra","+376"],["AO","Angola","+244"],["AI","Anguilla","+1 264"],["AG","Antigua & Barbuda","+1 268"],["AR","Argentina","+54"],["AM","Armenia","+374"],["AW","Aruba","+297"],["SH","Ascension","+247"],["AU","Australia","+61"],["AU","Australian External Territories","+672"],["AT","Austria","+43"],["AZ","Azerbaijan","+994"],["BS","Bahamas","+1 242"],["BH","Bahrain","+973"],["BD","Bangladesh","+880"],["BB","Barbados","+1 246"],["AG","Barbuda","+1 268"],["BY","Belarus","+375"],["BE","Belgium","+32"],["BZ","Belize","+501"],["BJ","Benin","+229"],["BM","Bermuda","+1 441"],["BT","Bhutan","+975"],["BO","Bolivia","+591"],["BQ","Caribbean Netherlands","+599 7"],["BA","Bosnia & Herzegovina","+387"],["BW","Botswana","+267"],["BR","Brazil","+55"],["IO","British Indian Ocean Territory","+246"],["VG","British Virgin Islands","+1 284"],["BN","Brunei","+673"],["BG","Bulgaria","+359"],["BF","Burkina Faso","+226"],["MY","Myanmar (Burma)","+95"],["BI","Burundi","+257"],["KH","Cambodia","+855"],["CM","Cameroon","+237"],["CA","Canada","+1"],["CV","Cape Verde","+238"],["KY","Cayman Islands","+1 345"],["CF","Central African Republic","+236"],["TD","Chad","+235"],["CL","Chile","+56"],["CN","China","+86"],["CX","Christmas Island","+61"],["CC","Cocos (Keeling) Islands","+61"],["CO","Colombia","+57"],["KM","Comoros","+269"],["CG","Congo - Brazzaville","+242"],["CD","Congo - Kinshasa","+243"],["CK","Cook Islands","+682"],["CR","Costa Rica","+506"],["CI","Cte dIvoire","+225"],["HR","Croatia","+385"],["CU","Cuba","+53"],["CW","Curaao","+599 9"],["CY","Cyprus","+357"],["CZ","Czech Republic","+420"],["DK","Denmark","+45"],["DG","Diego Garcia","+246"],["DJ","Djibouti","+253"],["DM","Dominica","+1 767"],["DO","Dominican Republic","+1 809","+1 829","+1 849"],["TL","Timor-Leste","+670"],["EC","Ecuador","+593"],["EG","Egypt","+20"],["SV","El Salvador","+503"],["GQ","Equatorial Guinea","+240"],["ER","Eritrea","+291"],["EE","Estonia","+372"],["ET","Ethiopia","+251"],["FK","Falkland Islands","+500"],["FO","Faroe Islands","+298"],["FJ","Fiji","+679"],["FI","Finland","+358"],["FR","France","+33"],["GF","French Guiana","+594"],["PF","French Polynesia","+689"],["GA","Gabon","+241"],["GM","Gambia","+220"],["GE","Georgia","+995"],["DE","Germany","+49"],["GH","Ghana","+233"],["GI","Gibraltar","+350"],["GR","Greece","+30"],["GL","Greenland","+299"],["GD","Grenada","+1 473"],["GP","Guadeloupe","+590"],["GU","Guam","+1 671"],["GT","Guatemala","+502"],["GG","Guernsey","+44"],["GN","Guinea","+224"],["GW","Guinea-Bissau","+245"],["GY","Guyana","+592"],["HT","Haiti","+509"],["HN","Honduras","+504"],["HK","Hong Kong SAR China","+852"],["HU","Hungary","+36"],["IS","Iceland","+354"],["IN","India","+91"],["ID","Indonesia","+62"],["IR","Iran","+98"],["IQ","Iraq","+964"],["IE","Ireland","+353"],["IL","Israel","+972"],["IT","Italy","+39"],["JM","Jamaica","+1 876"],["SJ","Svalbard & Jan Mayen","+47 79"],["JP","Japan","+81"],["JE","Jersey","+44"],["JO","Jordan","+962"],["KZ","Kazakhstan","+7 7"],["KE","Kenya","+254"],["KI","Kiribati","+686"],["KP","North Korea","+850"],["KR","South Korea","+82"],["KW","Kuwait","+965"],["KG","Kyrgyzstan","+996"],["LA","Laos","+856"],["LV","Latvia","+371"],["LB","Lebanon","+961"],["LS","Lesotho","+266"],["LR","Liberia","+231"],["LY","Libya","+218"],["LI","Liechtenstein","+423"],["LT","Lithuania","+370"],["LU","Luxembourg","+352"],["MO","Macau SAR China","+853"],["MK","Macedonia","+389"],["MG","Madagascar","+261"],["MW","Malawi","+265"],["MY","Malaysia","+60"],["MV","Maldives","+960"],["ML","Mali","+223"],["MT","Malta","+356"],["MH","Marshall Islands","+692"],["MQ","Martinique","+596"],["MR","Mauritania","+222"],["MU","Mauritius","+230"],["YT","Mayotte","+262"],["MX","Mexico","+52"],["FM","Micronesia","+691"],["MD","Moldova","+373"],["MC","Monaco","+377"],["MN","Mongolia","+976"],["ME","Montenegro","+382"],["MS","Montserrat","+1 664"],["MA","Morocco","+212"],["MZ","Mozambique","+258"],["NA","Namibia","+264"],["NR","Nauru","+674"],["NP","Nepal","+977"],["NL","Netherlands","+31"],["NC","New Caledonia","+687"],["NZ","New Zealand","+64"],["NI","Nicaragua","+505"],["NE","Niger","+227"],["NG","Nigeria","+234"],["NU","Niue","+683"],["NF","Norfolk Island","+672"],["MP","Northern Mariana Islands","+1 670"],["NO","Norway","+47"],["OM","Oman","+968"],["PK","Pakistan","+92"],["PW","Palau","+680"],["PS","Palestinian Territories","+970"],["PA","Panama","+507"],["PG","Papua New Guinea","+675"],["PY","Paraguay","+595"],["PE","Peru","+51"],["PH","Philippines","+63"],["PN","Pitcairn Islands","+64"],["PL","Poland","+48"],["PT","Portugal","+351"],["PR","Puerto Rico","+1 787","+1 939"],["QA","Qatar","+974"],["RE","Runion","+262"],["RO","Romania","+40"],["RU","Russia","+7"],["RW","Rwanda","+250"],["BL","St. Barthlemy","+590"],["SH","St. Helena","+290"],["KN","St. Kitts & Nevis","+1 869"],["LC","St. Lucia","+1 758"],["MF","St. Martin (France)","+590"],["PM","St. Pierre and Miquelon","+508"],["VC","St. Vincent and the Grenadines","+1 784"],["WS","Samoa","+685"],["SM","San Marino","+378"],["ST","So Tom & Prncipe","+239"],["SA","Saudi Arabia","+966"],["SN","Senegal","+221"],["RS","Serbia","+381"],["SC","Seychelles","+248"],["SL","Sierra Leone","+232"],["SG","Singapore","+65"],["BQ","Sint Eustatius","+599 3"],["SX","Sint Maarten","+1 721"],["SK","Slovakia","+421"],["SI","Slovenia","+386"],["SB","Solomon Islands","+677"],["SO","Somalia","+252"],["ZA","South Africa","+27"],["GS","South Georgia & South Sandwich Islands","+500"],["SS","South Sudan","+211"],["ES","Spain","+34"],["LK","Sri Lanka","+94"],["SD","Sudan","+249"],["SR","Suriname","+597"],["SJ","Svalbard","+47 79"],["SZ","Swaziland","+268"],["SE","Sweden","+46"],["CH","Switzerland","+41"],["SY","Syria","+963"],["TW","Taiwan","+886"],["TJ","Tajikistan","+992"],["TZ","Tanzania","+255"],["TH","Thailand","+66"],["TG","Togo","+228"],["TK","Tokelau","+690"],["TO","Tonga","+676"],["TT","Trinidad & Tobago","+1 868"],["TN","Tunisia","+216"],["TR","Turkey","+90"],["TM","Turkmenistan","+993"],["TC","Turks & Caicos Islands","+1 649"],["TV","Tuvalu","+688"],["UG","Uganda","+256"],["UA","Ukraine","+380"],["AE","United Arab Emirates","+971"],["UK","United Kingdom","+44"],["US","United States","+1"],["UY","Uruguay","+598"],["VI","U.S. Virgin Islands","+1 340"],["UZ","Uzbekistan","+998"],["VU","Vanuatu","+678"],["VE","Venezuela","+58"],["VA","Vatican City","+39 06 698","+379"],["VN","Vietnam","+84"],["WF","Wallis & Futuna","+681"],["YE","Yemen","+967"],["ZM","Zambia","+260"],["ZW","Zimbabwe","+263"]];var q=i(15);function W(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const X=new class{constructor(){W(this,"dom",{}),W(this,"mdcComponents",[]),W(this,"authParams",{}),W(this,"checkInput",()=>{switch(this.step){case 0:this.phoneTextField.value.replace(/\D/g,"").length>=8&&(this.submitButton.hidden=!1);break;case 1:this.codeTextField.value.length>=this.authParams.codeLength&&(this.submitButton.hidden=!1);break;case 2:this.passwordTextField.value&&(this.submitButton.hidden=!1);break;case 3:this.firstNameTextField.value.trim()&&(this.submitButton.hidden=!1)}}),W(this,"onFormSubmit",e=>{switch(e.preventDefault(),this.step){case 0:this.submitPhoneNumber();break;case 1:this.submitConfirmationCode();break;case 2:this.submitPassword();break;case 3:this.submitSignUp()}}),W(this,"chooseProfilePhoto",()=>{const e=document.createElement("input");e.type="file",e.accept="image/*",e.click(),e.addEventListener("change",()=>{this.profilePhotoFile=e.files[0]})})}init(){const e=Object(n.z)("login"),t=Object(n.a)(".login_container",e);this.dom=Object(n.y)(t),this.dom.container=t,this.dom.form.addEventListener("submit",this.onFormSubmit),this.preloadAnimations(),this.setStep(0),document.body.append(t)}setDomContent(e,t){"string"==typeof t?this.dom[e].innerHTML=t:(this.dom[e].innerHTML="",this.dom[e].append(t))}setDomText(e,t){this.dom[e].textContent=t}setAnimatedImage(e,t=null){this.setDomContent("image",e);try{t?e.getLottie().playSegments(t,!0):e.play()}catch(t){console.log("Can not play animation",e)}}setStep(e,t={}){switch(this.step=e,e){case 0:{this.setDomContent("image",'<div class="login_telegram_logo login_image_content"></div>'),this.setDomContent("header","Sign in to Telegram"),this.setDomContent("subheader","Please enter your phone number",!1),this.dom.form.innerHTML="";const e=this.buildInput("Country"),t=this.buildInput("Phone Number",{type:"tel"}),i=this.buildCountryMenu(e,t);this.submitButton=this.buildButton("Next"),this.countryTextField=new z(e),this.phoneTextField=new z(t),this.dom.form.append(e,i,t,this.submitButton),this.mdcComponents.push(this.phoneTextField),this.authParams.phoneNumber&&(this.phoneTextField.value=this.authParams.phoneNumber),this.phoneTextField.focus()}break;case 1:{this.setAnimatedImage(this.animations.idle),this.setDomText("header","+"+this.authParams.phoneNumber),this.setDomContent("subheader","We have sent you an SMS<br>with the code."),this.dom.header.append(this.buildEditPhoneButton()),this.dom.form.innerHTML="";const e=this.buildCodeInput();this.submitButton=this.buildButton("Next"),this.codeTextField=new z(e),this.dom.form.append(e,this.submitButton),this.mdcComponents.push(this.codeTextField)}break;case 2:{this.setAnimatedImage(this.animations.close,[0,50]),this.setDomContent("header","Enter a password"),this.setDomContent("subheader","Your account is protected with<br>an additional password",!1),this.dom.form.innerHTML="";const e=this.buildPasswordInput();this.submitButton=this.buildButton("Next"),this.passwordTextField=new z(e),this.dom.form.append(e,this.submitButton),this.mdcComponents.push(this.passwordTextField),Promise.all([i.e(0),i.e(1)]).then(i.bind(null,36))}break;case 3:{const e=n.e.html`<div class="login_upload_photo login_image_content">`.buildElement();e.addEventListener("click",this.chooseProfilePhoto),this.setDomContent("image",e),this.setDomContent("header","Your Name"),this.setDomContent("subheader","Enter your name and add<br>a profile picture",!1),this.dom.form.innerHTML="";const t=this.buildInput("Name"),i=this.buildInput("Last Name (optional)");this.submitButton=this.buildButton("Start messaging"),this.firstNameTextField=new z(t),this.lastNameTextField=new z(i),this.dom.form.append(t,i,this.submitButton),this.mdcComponents.push(this.firstNameTextField,this.lastNameTextField)}}}submitPhoneNumber(){const e=this.phoneTextField.value.replace(/\D/g,"");e.length<8?this.phoneTextField.valid=!1:(this.submitButton.disabled=!0,s.a.callMethod("auth.sendCode",{phone_number:e,api_id:ye.API_ID,api_hash:ye.API_HASH,settings:{_:"codeSettings"}}).then(t=>{console.log(t),this.authParams.phoneNumber=e,this.authParams.phoneCodeHash=t.phone_code_hash,this.authParams.codeType=t.type._,this.authParams.codeLength=t.type.length,this.setStep(1)}).catch(e=>{"AUTH_RESTART"===e.error_message?this.submitPhoneNumber():(this.phoneTextField.valid=!1,ye.alert(this.getApiErrorDescription(e.error_code,e.error_message)))}).finally(()=>{this.submitButton.disabled=!1}))}submitConfirmationCode(){const e=this.codeTextField.value;e.length===this.authParams.codeLength?(this.submitButton.disabled=!0,s.a.callMethod("auth.signIn",{phone_number:this.authParams.phoneNumber,phone_code_hash:this.authParams.phoneCodeHash,phone_code:e}).then(e=>{this.onAuthResult(e)}).catch(t=>{"PHONE_CODE_INVALID"===t.error_message?this.codeTextField.valid=!1:"SESSION_PASSWORD_NEEDED"===t.error_message?this.setStep(2):"PHONE_NUMBER_UNOCCUPIED"===t.error_message?(this.authParams.phoneCode=e,this.setStep(3)):(this.codeTextField.valid=!1,ye.alert(this.getApiErrorDescription(t.error_code,t.error_message)))}).finally(()=>{this.submitButton.disabled=!1})):this.codeTextField.valid=!1}async submitPassword(){const e=this.passwordTextField.value;if(!e.length)return void(this.passwordTextField.valid=!1);this.submitButton.disabled=!0;const t=await s.a.callMethod("account.getPassword"),{getInputPasswordSRP:n}=await Promise.all([i.e(0),i.e(1)]).then(i.bind(null,36)),a=await n(e,t);s.a.callMethod("auth.checkPassword",{password:Object.assign({_:"inputCheckPasswordSRP"},a)}).then(e=>{this.onAuthResult(e)}).catch(e=>{this.passwordTextField.valid=!1,ye.alert(this.getApiErrorDescription(e.error_code,e.error_message))}).finally(()=>{this.submitButton.disabled=!1})}submitSignUp(){const e=this.firstNameTextField.value,t=this.lastNameTextField.value;e?(this.submitButton.disabled=!0,s.a.callMethod("auth.signUp",{phone_number:this.authParams.phoneNumber,phone_code_hash:this.authParams.phoneCodeHash,phone_code:this.authParams.phoneCode,first_name:e,last_name:t}).then(e=>{this.onAuthResult(e),this.uploadProfilePhoto()}).catch(e=>{this.passwordTextField.valid=!1,ye.alert(this.getApiErrorDescription(e.error_code,e.error_message))}).finally(()=>{this.submitButton.disabled=!1})):this.firstNameTextField.valid=!1}onAuthResult(e){"auth.authorizationSignUpRequired"===e._?this.setStep(3,{terms_of_service:e.terms_of_service}):ye.authDone(e)}getApiErrorDescription(e,t){switch(t){case"PHONE_NUMBER_INVALID":return"The phone number is invalid";case"PHONE_NUMBER_OCCUPIED":return"The phone number is already in use";case"PHONE_NUMBER_UNOCCUPIED":return"The phone number is not yet being used";case"PHONE_CODE_EXPIRED":return"The confirmation code has expired";case"PHONE_NUMBER_BANNED":return"The provided phone number is banned from telegram";case"PHONE_NUMBER_FLOOD":return"You asked for the code too many times";case"PHONE_PASSWORD_FLOOD":return"You have tried logging in too many times";case"PHONE_PASSWORD_PROTECTED":return"This phone is password protected"}if(420===e&&t.startsWith("FLOOD_WAIT_")){const e=+t.match(/\d+$/)[0];if(e<60)return a.a.getPlural("login_flood_pluralize_seconds",e);if(e<3600){const t=Math.floor(e/60);return a.a.getPlural("login_flood_pluralize_minutes",t)}{const t=Math.floor(e/60/60);return a.a.getPlural("login_flood_pluralize_hours",t)}}return"An error occurred"}buildInput(e,t={}){const i=Object.entries(t).map(([e,t])=>`${e}="${t}"`).join(" "),s=n.e.html`
      <div class="login_input mdc-text-field mdc-text-field--outlined">
        <input ${n.e.raw`${i}`} class="mdc-text-field__input">
        <div class="mdc-notched-outline">
          <div class="mdc-notched-outline__leading"></div>
          <div class="mdc-notched-outline__notch">
            <label class="mdc-floating-label">${e}</label>
          </div>
          <div class="mdc-notched-outline__trailing"></div>
        </div>
      </div>
    `.buildElement();return s.querySelector("input").addEventListener("keyup",this.checkInput),s}buildCodeInput(){const e=this.buildInput("Code",{inputmode:"numeric"}),t=e.querySelector("input");let i;t.addEventListener("input",()=>{t.value=t.value.replace(/\D/g,""),s()});let n=!1;const s=()=>{n||(n=!0,i?(i.stop(),i.play()):(i=this.animations.tracking,this.setAnimatedImage(i),i.addEventListener("complete",()=>{n=!1})))};return e}buildPasswordInput(){const e=this.buildInput("Password",{type:"password"}),t=Object(n.a)("input",e),i=n.e.html`<span class="login_password_visibility_button"></span>`.buildElement();return e.append(i),i.addEventListener("click",()=>{const e="password"===t.type;t.type=e?"text":"password",i.classList.toggle("login_password_visibility_button-visible",e),e?this.setAnimatedImage(this.animations.peek,[0,21]):this.setAnimatedImage(this.animations.peek,[21,33])}),e}buildButton(e,t=!0){const i=n.e.html`
      <button class="login_button mdc-button mdc-button--unelevated" type="submit" ${t?" hidden":""}><span class="mdc-button__ripple"></span>${e}</button>
    `.buildElement();return this.mdcComponents.push(...Object(n.g)(i)),i}buildCountryMenu(e,t){const i=n.e.html`<div class="login_input_arrow"></div>`.buildElement();e.appendChild(i);const s=[],a=[];for(const e of K){const[t,i,o]=e;s.push([o.replace(/\s+/g,""),e]);const r=Object(q.b)(t),c=n.e.html`
        <li class="mdc-list-item login_countries_item" role="menuitem" data-code="${t}" data-name="${i.toLowerCase()}">
          <div class="login_countries_item_emoji">${r}</div>
          <div class="login_countries_item_country">${i}</div>
          <div class="login_countries_item_prefix">${o}</div>
        </li>
      `.buildElement();c.addEventListener("mousedown",d),a.push(c)}const o=n.e.html`
      <div class="mdc-menu mdc-menu-surface login_countries_menu" hidden>
        <ul class="mdc-list login_countries_list" role="menu" aria-hidden="true" aria-orientation="vertical" tabindex="-1"></ul>
      </div>
    `.buildElement();Object(n.a)(".login_countries_list",o).append(...a);let r=a.length;const c=e.querySelector("input");function d(e){e.preventDefault();const t=e.currentTarget,i=Object(n.a)(".login_countries_item_country",t).innerText,s=Object(n.a)(".login_countries_item_prefix",t).innerText.replace(/\s+/g,"");X.countryTextField.value=i,X.phoneTextField.value=s,X.phoneTextField.focus()}function l(e){o.hidden=!e,i.classList.toggle("login_input_arrow_open",e)}c.addEventListener("focus",()=>{r&&l(!0)}),c.addEventListener("blur",()=>{l(!1)}),c.addEventListener("input",()=>{const e=c.value.trim().toLowerCase();r=0;for(const t of a)t.dataset.name.indexOf(e)>-1?(t.style.display="",r++):t.style.display="none";l(!!r)});const u=t.querySelector("input");return u.addEventListener("input",()=>{let e=u.value;e&&"+"!==e&&(e=e.replace(/^0+|\D/g,""))&&(e="+"+e);const t=[],i=[];for(const n of s){const[s]=n;e.startsWith(s)?t.push(n):s.startsWith(e)&&i.push(n)}let n;if(t.length&&!i.length&&(1===t.length||t[0][0]!==t[1][0])){const i=t.sort((e,t)=>t[0].length-e[0].length)[0];e!==i[0]&&(e=e.replace(i[0],i[0]+" ")),n=i[1]}u.value=e,X.countryTextField.value=n?n[1]:""}),o}buildEditPhoneButton(){const e=n.e.html`
      <span class="login_edit_phone_button"></span>
    `.buildElement();return e.addEventListener("click",()=>{this.setStep(0)}),e}preloadAnimations(){this.animations={idle:n.e.html`<tgs-player mode="normal" src="tgs/TwoFactorSetupMonkeyIdle.tgs" class="login_image_content"></tgs-player>`.buildElement(),tracking:n.e.html`<tgs-player mode="normal" src="tgs/TwoFactorSetupMonkeyTracking.tgs" class="login_image_content"></tgs-player>`.buildElement(),close:n.e.html`<tgs-player mode="normal" src="tgs/TwoFactorSetupMonkeyClose.tgs" class="login_image_content"></tgs-player>`.buildElement(),peek:n.e.html`<tgs-player mode="normal" src="tgs/TwoFactorSetupMonkeyPeek.tgs" class="login_image_content"></tgs-player>`.buildElement()};const e=document.createElement("div");e.hidden=!0,e.append(...Object.values(this.animations)),this.dom.container.appendChild(e)}async uploadProfilePhoto(){if(!this.profilePhotoFile)return;const e=await FileApiManager.uploadFile(this.profilePhotoFile);await s.a.callMethod("photos.uploadProfilePhoto",{file:e}),MessagesApiManager.reloadUser(ye.getAuthUserId())}destroy(){this.dom.container.remove(),this.dom=null;for(const e of this.mdcComponents)e.destroy();this.mdcComponents=[]}};window.LoginController=X;var Y=i(11),Q=i(7),J={CLOSING:"mdc-snackbar--closing",OPEN:"mdc-snackbar--open",OPENING:"mdc-snackbar--opening"},Z={ACTION_SELECTOR:".mdc-snackbar__action",ARIA_LIVE_LABEL_TEXT_ATTR:"data-mdc-snackbar-label-text",CLOSED_EVENT:"MDCSnackbar:closed",CLOSING_EVENT:"MDCSnackbar:closing",DISMISS_SELECTOR:".mdc-snackbar__dismiss",LABEL_SELECTOR:".mdc-snackbar__label",OPENED_EVENT:"MDCSnackbar:opened",OPENING_EVENT:"MDCSnackbar:opening",REASON_ACTION:"action",REASON_DISMISS:"dismiss",SURFACE_SELECTOR:".mdc-snackbar__surface"},ee={DEFAULT_AUTO_DISMISS_TIMEOUT_MS:5e3,INDETERMINATE:-1,MAX_AUTO_DISMISS_TIMEOUT_MS:1e4,MIN_AUTO_DISMISS_TIMEOUT_MS:4e3,SNACKBAR_ANIMATION_CLOSE_TIME_MS:75,SNACKBAR_ANIMATION_OPEN_TIME_MS:150,ARIA_LIVE_DELAY_MS:1e3},te=J.OPENING,ie=J.OPEN,ne=J.CLOSING,se=Z.REASON_ACTION,ae=Z.REASON_DISMISS,oe=function(e){function t(i){var n=e.call(this,o.a({},t.defaultAdapter,i))||this;return n.isOpen_=!1,n.animationFrame_=0,n.animationTimer_=0,n.autoDismissTimer_=0,n.autoDismissTimeoutMs_=ee.DEFAULT_AUTO_DISMISS_TIMEOUT_MS,n.closeOnEscape_=!0,n}return o.b(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return J},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return Z},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return ee},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},announce:function(){},notifyClosed:function(){},notifyClosing:function(){},notifyOpened:function(){},notifyOpening:function(){},removeClass:function(){}}},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){this.clearAutoDismissTimer_(),cancelAnimationFrame(this.animationFrame_),this.animationFrame_=0,clearTimeout(this.animationTimer_),this.animationTimer_=0,this.adapter_.removeClass(te),this.adapter_.removeClass(ie),this.adapter_.removeClass(ne)},t.prototype.open=function(){var e=this;this.clearAutoDismissTimer_(),this.isOpen_=!0,this.adapter_.notifyOpening(),this.adapter_.removeClass(ne),this.adapter_.addClass(te),this.adapter_.announce(),this.runNextAnimationFrame_((function(){e.adapter_.addClass(ie),e.animationTimer_=setTimeout((function(){var t=e.getTimeoutMs();e.handleAnimationTimerEnd_(),e.adapter_.notifyOpened(),t!==ee.INDETERMINATE&&(e.autoDismissTimer_=setTimeout((function(){e.close(ae)}),t))}),ee.SNACKBAR_ANIMATION_OPEN_TIME_MS)}))},t.prototype.close=function(e){var t=this;void 0===e&&(e=""),this.isOpen_&&(cancelAnimationFrame(this.animationFrame_),this.animationFrame_=0,this.clearAutoDismissTimer_(),this.isOpen_=!1,this.adapter_.notifyClosing(e),this.adapter_.addClass(J.CLOSING),this.adapter_.removeClass(J.OPEN),this.adapter_.removeClass(J.OPENING),clearTimeout(this.animationTimer_),this.animationTimer_=setTimeout((function(){t.handleAnimationTimerEnd_(),t.adapter_.notifyClosed(e)}),ee.SNACKBAR_ANIMATION_CLOSE_TIME_MS))},t.prototype.isOpen=function(){return this.isOpen_},t.prototype.getTimeoutMs=function(){return this.autoDismissTimeoutMs_},t.prototype.setTimeoutMs=function(e){var t=ee.MIN_AUTO_DISMISS_TIMEOUT_MS,i=ee.MAX_AUTO_DISMISS_TIMEOUT_MS,n=ee.INDETERMINATE;if(!(e===ee.INDETERMINATE||e<=i&&e>=t))throw new Error("\n        timeoutMs must be an integer in the range "+t+""+i+"\n        (or "+n+" to disable), but got '"+e+"'");this.autoDismissTimeoutMs_=e},t.prototype.getCloseOnEscape=function(){return this.closeOnEscape_},t.prototype.setCloseOnEscape=function(e){this.closeOnEscape_=e},t.prototype.handleKeyDown=function(e){("Escape"===e.key||27===e.keyCode)&&this.getCloseOnEscape()&&this.close(ae)},t.prototype.handleActionButtonClick=function(e){this.close(se)},t.prototype.handleActionIconClick=function(e){this.close(ae)},t.prototype.clearAutoDismissTimer_=function(){clearTimeout(this.autoDismissTimer_),this.autoDismissTimer_=0},t.prototype.handleAnimationTimerEnd_=function(){this.animationTimer_=0,this.adapter_.removeClass(J.OPENING),this.adapter_.removeClass(J.CLOSING)},t.prototype.runNextAnimationFrame_=function(e){var t=this;cancelAnimationFrame(this.animationFrame_),this.animationFrame_=requestAnimationFrame((function(){t.animationFrame_=0,clearTimeout(t.animationTimer_),t.animationTimer_=setTimeout(e,0)}))},t}(l.a),re=ee.ARIA_LIVE_DELAY_MS,ce=Z.ARIA_LIVE_LABEL_TEXT_ATTR;function de(e,t){void 0===t&&(t=e);var i=e.getAttribute("aria-live"),n=t.textContent.trim();n&&i&&(e.setAttribute("aria-live","off"),t.textContent="",t.innerHTML='<span style="display: inline-block; width: 0; height: 1px;">&nbsp;</span>',t.setAttribute(ce,n),setTimeout((function(){e.setAttribute("aria-live",i),t.removeAttribute(ce),t.textContent=n}),re))}
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var le=Z.SURFACE_SELECTOR,ue=Z.LABEL_SELECTOR,he=Z.ACTION_SELECTOR,me=Z.DISMISS_SELECTOR,pe=Z.OPENING_EVENT,_e=Z.OPENED_EVENT,ge=Z.CLOSING_EVENT,fe=Z.CLOSED_EVENT,be=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.b(t,e),t.attachTo=function(e){return new t(e)},t.prototype.initialize=function(e){void 0===e&&(e=function(){return de}),this.announce_=e()},t.prototype.initialSyncWithDOM=function(){var e=this;this.surfaceEl_=this.root_.querySelector(le),this.labelEl_=this.root_.querySelector(ue),this.actionEl_=this.root_.querySelector(he),this.handleKeyDown_=function(t){return e.foundation_.handleKeyDown(t)},this.handleSurfaceClick_=function(t){var i=t.target;e.isActionButton_(i)?e.foundation_.handleActionButtonClick(t):e.isActionIcon_(i)&&e.foundation_.handleActionIconClick(t)},this.registerKeyDownHandler_(this.handleKeyDown_),this.registerSurfaceClickHandler_(this.handleSurfaceClick_)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.deregisterKeyDownHandler_(this.handleKeyDown_),this.deregisterSurfaceClickHandler_(this.handleSurfaceClick_)},t.prototype.open=function(){this.foundation_.open()},t.prototype.close=function(e){void 0===e&&(e=""),this.foundation_.close(e)},t.prototype.getDefaultFoundation=function(){var e=this;return new oe({addClass:function(t){return e.root_.classList.add(t)},announce:function(){return e.announce_(e.labelEl_)},notifyClosed:function(t){return e.emit(fe,t?{reason:t}:{})},notifyClosing:function(t){return e.emit(ge,t?{reason:t}:{})},notifyOpened:function(){return e.emit(_e,{})},notifyOpening:function(){return e.emit(pe,{})},removeClass:function(t){return e.root_.classList.remove(t)}})},Object.defineProperty(t.prototype,"timeoutMs",{get:function(){return this.foundation_.getTimeoutMs()},set:function(e){this.foundation_.setTimeoutMs(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"closeOnEscape",{get:function(){return this.foundation_.getCloseOnEscape()},set:function(e){this.foundation_.setCloseOnEscape(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isOpen",{get:function(){return this.foundation_.isOpen()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"labelText",{get:function(){return this.labelEl_.textContent},set:function(e){this.labelEl_.textContent=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"actionButtonText",{get:function(){return this.actionEl_.textContent},set:function(e){this.actionEl_.textContent=e},enumerable:!0,configurable:!0}),t.prototype.registerKeyDownHandler_=function(e){this.listen("keydown",e)},t.prototype.deregisterKeyDownHandler_=function(e){this.unlisten("keydown",e)},t.prototype.registerSurfaceClickHandler_=function(e){this.surfaceEl_.addEventListener("click",e)},t.prototype.deregisterSurfaceClickHandler_=function(e){this.surfaceEl_.removeEventListener("click",e)},t.prototype.isActionButton_=function(e){return Boolean(Object(d.a)(e,he))},t.prototype.isActionIcon_=function(e){return Boolean(Object(d.a)(e,me))},t}(r.a);function ve(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i.d(t,"a",(function(){return ye}));const ye=new class{constructor(){ve(this,"API_ID",884322),ve(this,"API_HASH","77498db3367014eec55b317377f52779"),ve(this,"APP_VERSION","0.3.0"),ve(this,"auth_user_id",0),ve(this,"onDocumentVisibilityChange",()=>{this.getAuthUserId()&&("visible"!==document.visibilityState?(this.stopOnlineInterval(),this._offlineTimeout=setTimeout(()=>{ApiClient.callMethod("account.updateStatus",{offline:!0})},5e3)):(this.startOnlineInterval(),this._offlineTimeout&&(clearTimeout(this._offlineTimeout),this._offlineTimeout=null)))}),ve(this,"onResize",()=>{document.body.classList.toggle("mobile_view",window.innerWidth<1160)}),ve(this,"onLocationChange",()=>{if(this.getAuthUserId()){const e=location.hash;if(!e||"#"===e)return void Q.a.exitChat(!1);let t;if(t=e.match(/^#@(.+)$/))return void Q.a.setChatByUsername(t[1]);if(t=e.match(/^#(user|channel|chat)(\d+)$/))return void Q.a.setChatByPeerType(t[2],t[1])}this.setLocation("")});const e=n.d.get("api_auth");e?(this.auth_user_id=e.user_id,this.initMainView()):X.init(),window.addEventListener("resize",this.onResize),this.onResize(),document.addEventListener("visibilitychange",this.onDocumentVisibilityChange),window.addEventListener("hashchange",this.onLocationChange),setTimeout(this.onLocationChange)}authDone(e){this.auth_user_id=e.user.id,n.d.set("api_auth",{user_id:e.user.id}),X.destroy(),this.initMainView()}getAuthUserId(){return this.auth_user_id}logOut(){this.stopOnlineInterval(),ApiClient.callMethod("auth.logOut",{}).then(e=>{"boolTrue"===e._?this.logOutDone():this.alert("logout error")})}logOutDone(){localStorage.clear(),location.reload()}initMainView(){const e=n.z("main");document.body.append(e),Y.a.init(),Q.a.init(),this.startOnlineInterval()}startOnlineInterval(){if(!this._onlineInterval){const e=()=>{ApiClient.callMethod("account.updateStatus",{offline:!1})};this._onlineInterval=setInterval(e,3e5),e()}}stopOnlineInterval(){this._onlineInterval&&(clearInterval(this._onlineInterval),this._onlineInterval=null)}setLocation(e){history.pushState(null,"",location.pathname+(e?`#${e}`:""))}alert(e){this.snackbar&&this.snackbar.destroy();const t=n.e.html`
      <div class="mdc-snackbar">
        <div class="mdc-snackbar__surface">
          <div class="mdc-snackbar__label">${e}</div>
        </div>
      </div>
    `.buildElement();document.body.append(t),this.snackbar=new be(t),this.snackbar.open()}}},function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));
/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
var n=function(){function e(e){void 0===e&&(e={}),this.adapter_=e}return Object.defineProperty(e,"cssClasses",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{}},enumerable:!0,configurable:!0}),e.prototype.init=function(){},e.prototype.destroy=function(){},e}()},function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i(2),s=i(5),a=function(){function e(e,t){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];this.root_=e,this.initialize.apply(this,n.c(i)),this.foundation_=void 0===t?this.getDefaultFoundation():t,this.foundation_.init(),this.initialSyncWithDOM()}return e.attachTo=function(t){return new e(t,new s.a({}))},e.prototype.initialize=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e.prototype.getDefaultFoundation=function(){throw new Error("Subclasses must override getDefaultFoundation to return a properly configured foundation class")},e.prototype.initialSyncWithDOM=function(){},e.prototype.destroy=function(){this.foundation_.destroy()},e.prototype.listen=function(e,t,i){this.root_.addEventListener(e,t,i)},e.prototype.unlisten=function(e,t,i){this.root_.removeEventListener(e,t,i)},e.prototype.emit=function(e,t,i){var n;void 0===i&&(i=!1),"function"==typeof CustomEvent?n=new CustomEvent(e,{bubbles:i,detail:t}):(n=document.createEvent("CustomEvent")).initCustomEvent(e,i,!1,t),this.root_.dispatchEvent(n)},e}()},function(e,t,i){"use strict";i.d(t,"a",(function(){return _}));var n=i(0),s=i(1),a=i(8),o=i(13),r=i(15),c=i(20),d=i(11),l=i(3),u=i(9),h=i(4),m=i(21);function p(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const _=new class{constructor(){p(this,"messageElements",new Map),p(this,"polls",[]),p(this,"loadMore",({down:e=!1}={})=>{if(this.loading||!e&&this.noMore||!this.chatId)return;this.loading=!0;const t=this.dialog,i=e?-20:0,n=e?this.maxMsgId:this.minMsgId;s.a.loadMessages(t.peer,n,20,i).then(i=>{t===this.dialog&&(i.length||(this.noMore=!0),e?this.appendHistory(i):this.prependHistory(i))}).catch(e=>{const t="An error occurred"+(e.error_message?": "+e.error_message:"");h.a.alert(t),console.log(e)}).finally(()=>{this.loading=!1})}),p(this,"onChatMessagesUpdate",e=>{const{dialog:t,messages:i}=e.detail;t===this.dialog&&this.prependHistory(i)}),p(this,"onNewMessage",e=>{const{dialog:t,message:i}=e.detail;t===this.dialog&&this.appendHistory([i])}),p(this,"onEditMessage",e=>{const{dialog:t,message:i}=e.detail;if(t===this.dialog){let e=this.messageElements.get(i.id);e&&this.renderMessageContent(e,i)}}),p(this,"onDeleteMessage",e=>{const{dialog:t,message:i}=e.detail;if(t===this.dialog){const e=this.messageElements.get(i.id);e&&(e.remove(),this.messageElements.delete(i.id))}}),p(this,"onUserStatusUpdate",e=>{const{user:t}=e.detail;if(this.chatId===t.id){const e=Object(n.a)(".messages_header_peer_status",this.header);e.innerText=this.getUserStatusText(t),e.classList.toggle("messages_header_peer_status-online","userStatusOnline"===t.status._)}}),p(this,"onOutboxReadUpdate",e=>{const{dialog:t}=e.detail;t===this.dialog&&this.messageElements.forEach(e=>{if(+e.dataset.id<=t.read_outbox_max_id&&e.classList.contains("message-out")){const t=Object(n.a)(".message_status",e);t&&t.classList.add("message_status-read")}})}),p(this,"onGlobalClick",e=>{let t=e.target;if("A"===t.tagName||(t=t.closest("a"))){const i=t.dataset.refUserId||t.dataset.refChatId;i&&(this.setChatByPeerId(+i),e.preventDefault()),"bot_command"===t.dataset.entity&&s.a.sendMessage(this.dialog.peer,t.innerText)}}),p(this,"onScroll",(e=!1)=>{const t=this.scrollContainer,i=t.scrollTop,n=t.scrollHeight-(i+t.clientHeight),s=!!this.scrolling;this.scrolling=n>0,(e||this.scrolling!==s)&&this.scrollContainer.classList.toggle("messages_scroll-scrolling",this.scrolling&&!this.footer.hidden),this.loading||(i<500&&!this.noMore?this.loadMore():n<500&&this.maxMsgId<this.dialog.top_message&&(this.loadMore({down:!0}),this.scrolling=!0))}),p(this,"onReplyToClick",e=>{const t=+e.currentTarget.closest(".message").dataset.id,i=s.a.messages.get(t);this.jumpToMessage(i.reply_to_msg_id)}),p(this,"onThumbClick",e=>{const t=e.currentTarget,i=+t.dataset.messageId||+t.closest(".message").dataset.id,n=s.a.messages.get(i),a=this.getMessageMediaThumb(n);t.firstElementChild&&"tgs-player"===t.firstElementChild.tagName.toLowerCase()&&(t.firstElementChild.stop(),t.firstElementChild.play()),a&&("photo"===a.type?o.a.showPhoto(a.object,t,n):"video"===a.type?o.a.showVideo(a.object,t,n):"gif"===a.type&&o.a.showGif(a.object,t,n))}),p(this,"onRoundClick",e=>{const t=e.target;if(t.muted){t.pause(),t.currentTime=0,t.loop=!1,t.muted=!1,t.removeAttribute("muted"),t.play();const e=n.e.html`
        <svg class="message_media_thumb_round_progress_svg" viewBox="22 22 44 44" xmlns="http://www.w3.org/2000/svg">
          <circle class="message_media_thumb_round_progress_circle" cx="44" cy="44" r="21" transform="rotate(-90 44 44)"></circle>
        </svg>
      `.buildElement();t.parentNode.appendChild(e);const i=Object(n.a)(".message_media_duration",t.parentNode),[s,a]=Object(n.A)(()=>{e.firstElementChild.style.setProperty("--progress-value",t.currentTime/t.duration)}),o=()=>s(),r=()=>a(),c=()=>i.innerText=Object(n.t)(t.duration-t.currentTime);t.addEventListener("playing",o),t.addEventListener("pause",r),t.addEventListener("timeupdate",c),t.addEventListener("ended",()=>{a(),t.removeEventListener("playing",o),t.removeEventListener("pause",r),t.removeEventListener("timeupdate",c),e.remove(),i.innerText=Object(n.t)(t.duration),t.loop=!0,t.muted=!0,t.setAttribute("muted",""),t.play()},{once:!0})}else t.paused?t.play():t.pause()}),p(this,"onFileClick",e=>{const t=e.currentTarget,i=+t.dataset.messageId||+t.closest(".message").dataset.id,o=s.a.messages.get(i);if(!o)return;const r=o.media.document,c=a.a.getDocumentAttributes(r);"voice"===c.type||"audio"===c.type?this.playAudio(t,{document:r,attributes:c,message:o}):this.loadFile(t,r).then(e=>Object(n.n)(e,c.file_name))})}init(){this.header=Object(n.a)(".messages_header"),this.footer=Object(n.a)(".messages_footer"),this.scrollContainer=Object(n.a)(".messages_scroll"),this.container=Object(n.a)(".messages_list"),this.loader=Object(n.i)(),this.container.addEventListener("click",this.onGlobalClick),this.scrollContainer.addEventListener("scroll",this.onScroll),window.addEventListener("resize",this.onScroll),this.initBackground(),this.loadAnimatedEmojiStickerSet(),c.a.init(),s.a.emitter.on("chatMessagesUpdate",this.onChatMessagesUpdate),s.a.emitter.on("dialogNewMessage",this.onNewMessage),s.a.emitter.on("chatEditMessage",this.onEditMessage),s.a.emitter.on("chatDeleteMessage",this.onDeleteMessage),s.a.emitter.on("userStatusUpdate",this.onUserStatusUpdate),s.a.emitter.on("dialogOutboxReadUpdate",this.onOutboxReadUpdate)}setChat(e,t=0){if(e===this.dialog)return void(t?this.jumpToMessage(t):this.scrollToBottom());this.dialog&&this.exitChat(!1),this.dialog=e,this.chatId=s.a.getPeerId(e.peer),Object(n.a)(".main_container").dataset.chat=this.chatId,this.showHeader(e),this.footer.hidden=!this.canSendMessage(e),this.footer.hidden||c.a.onShown(),this.container.append(this.loader);const i=e.top_message?s.a.messages.get(e.top_message):void 0;t?this.jumpToMessage(t):e.read_inbox_max_id<e.top_message&&i&&!i.out?this.jumpToMessage(e.read_inbox_max_id,!0):this.loadHistory();const a=d.a.chatElements.get(this.chatId);a&&a.classList.add("chats_item-selected");const o=s.a.getPeerData(e.peer);o.username?h.a.setLocation("@"+o.username):h.a.setLocation("")}async setChatByPeerId(e,t=0){let i=s.a.getDialog(e);if(!i){const t=s.a.getPeerById(e);i=await s.a.loadPeerDialog(t)}_.setChat(i,t)}async setChatByUsername(e){const{peer:t,chats:i,users:n}=await l.a.callMethod("contacts.resolveUsername",{username:e});s.a.updateUsers(n),s.a.updateChats(i),s.a.updateUsers(n),this.setChatByPeerId(s.a.getPeerId(t))}async setChatByPeerType(e,t){const i=s.a.getPeerById(+e,t),n=await s.a.loadPeerDialog(i);console.log(i,n),_.setChat(n)}exitChat(e=!0){const t=d.a.chatElements.get(this.chatId);t&&t.classList.remove("chats_item-selected"),c.a.clear(),o.a.abort(),this.ChatInfoController&&this.ChatInfoController.close(),this.MessagesSearchController&&this.MessagesSearchController.close(),this.header.hidden=!0,this.footer.hidden=!0,this.dialog=null,this.chatId=null,this.clearMessages(),delete Object(n.a)(".main_container").dataset.chat,e&&h.a.setLocation("")}clearMessages(){this.container.innerHTML="",this.messageElements.clear(),this.minMsgId=null,this.maxMsgId=null,this.loading=!1,this.noMore=!1,this.scrolling=!1,this.polls.forEach(e=>e.destroy()),this.polls=[]}showHeader(e){const t=e.peer,a=s.a.getPeerName(t);let o="",r="";if("peerUser"===t._){const e=s.a.getPeerData(t);o=this.getUserStatusText(e),e.status&&"userStatusOnline"===e.status._&&(r="messages_header_peer_status-online")}this.header.innerHTML=n.e.html`
      <button class="messages_header_back mdc-icon-button"></button>
      <div class="messages_header_peer mdc-ripple-surface">
        <div class="messages_header_peer_photo"></div>
        <div class="messages_header_peer_description">
          <div class="messages_header_peer_name">${a}</div>
          <div class="messages_header_peer_status ${r}">${o}</div>
        </div>
      </div>
      <div class="messages_header_audio_wrap"></div>
      <div class="messages_header_pinned_message_wrap"></div>
      <div class="messages_header_actions">
        <button class="messages_header_action_search mdc-icon-button"></button>
        <button class="messages_header_action_more mdc-icon-button"></button>
      </div>
    `,this.header.hidden=!1,Object(n.a)(".messages_header_peer").addEventListener("click",()=>{this.MessagesSearchController&&m.MessagesSearchController.close(),this.ChatInfoController&&this.ChatInfoController.isOpen()?this.ChatInfoController.close():i.e(5).then(i.bind(null,30)).then(({ChatInfoController:e})=>{this.ChatInfoController=e,e.show(this.chatId)})});const c=Object(n.a)(".messages_header_peer_photo",this.header);if(d.a.loadPeerPhoto(c,e.peer),"peerChannel"!==t._&&"peerChat"!==t._||this.loadChatHeaderInfo(t),this.headerAudioEl){Object(n.a)(".messages_header_pinned_message_wrap",this.header).appendChild(this.headerAudioEl)}Object(n.g)(...Object(n.a)(".messages_header_actions",this.header).children),Object(n.a)(".messages_header_action_search",this.header).addEventListener("click",()=>{this.ChatInfoController&&this.ChatInfoController.close(),this.MessagesSearchController&&this.MessagesSearchController.isOpen()?this.MessagesSearchController.close():Promise.resolve().then(i.bind(null,21)).then(({MessagesSearchController:e})=>{e.show(this.chatId)})}),Object(n.a)(".messages_header_back",this.header).addEventListener("click",()=>{this.exitChat()})}async loadChatHeaderInfo(e){const t=await s.a.loadChatFull(e);t.pinned_msg_id&&s.a.loadMessagesById(e,t.pinned_msg_id).then(([e])=>{this.renderPinnedMessage(e)});const i=e.channel_id&&!s.a.isMegagroup(e);let a,o,r="";t.participants_count?(a=t.participants_count,o=t.online_count):t.participants.participants&&(a=t.participants.participants.length),a&&(r=u.a.getPlural(i?"chats_n_followers":"chats_n_members",a,{n:Object(n.o)(a)}),o&&(r+=`, ${o} online`)),Object(n.a)(".messages_header_peer_status",this.header).innerText=r}renderPinnedMessage(e){const t=Object(n.a)(".messages_header_pinned_message_wrap",this.header);t.innerHTML="";const i=n.e.html`
      <div class="messages_header_pinned_message mdc-ripple-surface" data-message-id="${e.id}">
        <div class="messages_header_pinned_message_content">
          <div class="messages_header_pinned_message_title">Pinned message</div>
          <div class="messages_header_pinned_message_text">${d.a.getMessagePreview(e)}</div>        
        </div>
      </div>
    `.buildElement();Object(n.g)(i),t.appendChild(i),i.addEventListener("click",e=>{const t=+e.currentTarget.dataset.messageId;this.jumpToMessage(t)})}loadHistory(){if(this.loading||this.noMore)return;this.loading=!0;const e=this.dialog;s.a.loadChatHistory(e,this.minMsgId,30).then(t=>{e===this.dialog&&(t.length||(this.noMore=!0),this.prependHistory(t),this.onScroll(!0))}).catch(e=>{const t="An error occurred"+(e.error_message?": "+e.error_message:"");h.a.alert(t),console.log(e)}).finally(()=>{this.loading=!1})}jumpToMessage(e,t=!1){this.messageElements.has(e)?this.scrollToMessage(e,t):(this.clearMessages(),this.container.appendChild(this.loader),this.loading=!0,s.a.loadMessages(this.dialog.peer,e,20,-10).then(i=>{this.prependHistory(i),this.scrollToMessage(e,t)}).catch(e=>{const t="An error occurred"+(e.error_message?": "+e.error_message:"");h.a.alert(t)}).finally(()=>{this.loading=!1}))}scrollToMessage(e,t=!1){const i=this.messageElements.get(e);if(i)if(t){const e=Object(n.a)(".message-type-unread",this.container);e&&(this.scrollContainer.scrollTop=e.offsetTop-120)}else{const e=i.getBoundingClientRect(),t=this.scrollContainer.getBoundingClientRect();(e.top<t.top||e.bottom>t.bottom)&&i.scrollIntoView({block:"center"}),i.classList.add("message-highlighted"),requestAnimationFrame(()=>{i.classList.remove("message-highlighted")})}}canSendMessage(e){const t=s.a.getPeerData(e.peer);return!!t&&("user"===t._||"chat"===t._||"channel"===t._&&(t.creator||t.megagroup))}scrollToBottom(e=!1){if(e){const e=this.messageElements.get(this.maxMsgId);e&&e.scrollIntoView({behavior:"smooth"})}else this.scrollContainer.scrollTop=this.scrollContainer.scrollHeight}prependHistory(e){if(this.loader.remove(),this.minMsgId&&(e=e.filter(e=>e.id<this.minMsgId)),!e.length)return void(this.container.children.length||(this.emptyPlaceholder=n.e.html`<div class="messages_empty_placeholder">No messages here yet...</div>`.buildElement(),this.container.appendChild(this.emptyPlaceholder)));const t=this.scrollContainer.scrollTop,i=this.scrollContainer.scrollHeight,s=this.buildMessagesBatch(e);if(this.mergeDateGroups(this.container.firstElementChild,s.lastElementChild,!0),this.container.prepend(s),this.minMsgId=e[e.length-1].id,this.maxMsgId=this.maxMsgId||e[0].id,this.scrolling){this.scrollContainer.style.overflow="hidden";const e=t+(this.scrollContainer.scrollHeight-i);this.scrollContainer.scrollTop=e,this.scrollContainer.style.overflow="",requestAnimationFrame(()=>{this.scrollContainer.scrollTop=e})}else this.scrollContainer.scrollHeight<=this.scrollContainer.offsetHeight?setTimeout(this.loadMore,0):this.scrollToBottom();this.markReadMessages(e),this.checkMessagesCleanup(!1)}appendHistory(e){if(!this.maxMsgId)return;if(!(e=e.filter(e=>e.id>this.maxMsgId)).length)return;this.emptyPlaceholder&&(this.emptyPlaceholder.remove(),this.emptyPlaceholder=null);const t=this.scrolling,i=this.buildMessagesBatch(e);this.mergeDateGroups(i.firstElementChild,this.container.lastElementChild,!1),this.container.append(i),this.maxMsgId=e[0].id,t||this.maxMsgId!==this.dialog.top_message||this.scrollToBottom(!0),this.markReadMessages(e),this.checkMessagesCleanup(!0)}markReadMessages(e){const t=this.dialog;if(t.unread_count&&this.maxMsgId>t.read_inbox_max_id){const i=e.filter(e=>e.id>t.read_inbox_max_id).length;s.a.readHistory(t,this.maxMsgId,i)}}checkMessagesCleanup(e){const t=this.messageElements;if(t.size<100)return;const i=Object(n.b)(".message",this.container),s=i.length,a=new Set,o=new Set,r=this.scrollContainer.scrollTop,c=this.scrollContainer.scrollHeight;if(e)for(let e=0;e<s;e++){const t=i[e];if(!(e<s-100)){this.minMsgId=+t.dataset.id;break}d(t)}else for(let e=i.length-1;e>0;e--){const t=i[e];if(!(e>=100)){this.maxMsgId=+t.dataset.id;break}d(t)}if(a.forEach(e=>(function(e){for(const t of e.children)if(t.classList.contains("message"))return;o.add(e.parentNode),e.remove()})(e)),o.forEach(e=>(function(e){for(const t of e.children)if(t.classList.contains("messages_group-author"))return;e.remove()})(e)),e){const e=r+(this.scrollContainer.scrollHeight-c);this.scrollContainer.scrollTop=e}function d(e){a.add(e.parentNode),e.remove(),t.delete(+e.dataset.id)}}mergeDateGroups(e,t,i){if(e&&t&&e.dataset.date===t.dataset.date){const n=e.children[1],a=t.lastElementChild;if(n.dataset.authorId===a.dataset.authorId&&("peerChannel"!==this.dialog.peer._||s.a.isMegagroup(this.dialog.peer))){for(;a.lastElementChild&&!a.lastElementChild.classList.contains("message");)a.lastElementChild.remove();n.firstElementChild.classList.add("message-stick-to-prev"),a.lastElementChild.classList.add("message-stick-to-next"),i?(n.prepend(...a.children),a.remove()):(a.append(...n.children),n.remove())}i?(e.firstElementChild.after(...Array.from(t.children).slice(1)),t.remove()):(t.append(...Array.from(e.children).slice(1)),e.remove())}}buildMessagesBatch(e){const t=this.dialog.peer,i=this.dialog.read_inbox_max_id,a="peerChat"===t._||"peerChannel"===t._&&s.a.isMegagroup(t),o=document.createDocumentFragment();let r=null,c=0,l=null;for(let t=0;t<e.length;t++){const u=e[t],m=e[t-1],p=e[t+1],_=s.a.getMessageAuthorPeerId(u);let g=u.from_id&&m&&m.from_id===u.from_id,f=u.from_id&&p&&p.from_id===u.from_id;const b=new Date(1e3*u.date).setHours(0,0,0,0)/1e3;if((!r||c!==b||m&&m.date>b+86400)&&(g=!1,r=this.buildMessagesDateGroupEl(b),c=b,l=null,o.prepend(r)),i&&u.id===i&&i!==this.dialog.top_message){if(!s.a.messages.get(this.dialog.top_message).out){const e=n.e.html`<div class="message-type-service message-type-unread">Unread messages</div>`.buildElement();1===r.children.length?r.after(e):(r.firstElementChild.after(e),l=null)}}if(!l||"messageService"===u._||!m||!u.from_id||m.from_id!==u.from_id){const e=a&&"message"===u._&&_!==h.a.getAuthUserId();if(l=this.buildMessagesAuthorGroupEl(_,e),e){const e=Object(n.a)(".messages_group_author_photo",l);d.a.loadPeerPhoto(e,s.a.getMessageAuthorPeer(u))}r.firstElementChild.after(l)}const v=this.buildMessageEl(u,{stickToNext:g,stickToPrev:f});l.prepend(v),"messageService"===u._&&(l=null)}return o}buildMessagesDateGroupEl(e){return n.e.html`
      <div class="messages_group-date" data-date="${e}">
        <div class="message-type-service message-type-date">${this.formatMessageDateFull(e)}</div>
      </div>
    `.buildElement()}buildMessagesAuthorGroupEl(e,t=!1,i=!1){return n.e.html`
      <div class="messages_group-author ${t?"messages_group-author-with-photo":""}" data-author-id="${e}">
        <div class="messages_group_tail ${e===h.a.getAuthUserId()?"messages_group_tail-out":""}"></div>
        ${t?n.e.html`<a class="messages_group_author_photo" data-ref-user-id="${e}" href="#${this.getUserHref(e)}"></a>`:""}
      </div>
    `.buildElement()}buildMessageEl(e,t){const i=document.createElement("div");return"message"===e._?(i.className=this.getClasses({message:!0,"message-out":this.isOutMessage(e),"message-stick-to-next":t.stickToNext,"message-stick-to-prev":t.stickToPrev}),this.renderMessageContent(i,e,t)):"messageService"===e._&&(i.className="message-type-service",i.innerText=this.getServiceMessageText(e)),i.dataset.id=e.id,this.messageElements.set(e.id,i),i}appendPendingMessage(e){const t=n.e.html`<div class="message message-out message-stick-to-next message-stick-to-prev"></div>`.buildElement();return t.append(e),Object(n.a)(".messages_pending_list").appendChild(t),this.scrollToBottom(),t}removePendingMessage(e){e.remove()}getClasses(e){let t="";for(const[i,n]of Object.entries(e))n&&(t+=" "+i);return t}renderMessageContent(e,t,s={}){const o=this.isEmojiMessage(t),r=this.getMessageMediaThumb(t,o),c=r&&"sticker"===r.type,d=r&&"round"===r.type,l=s.stickToPrev||c||o||t.out?"":this.formatAuthorName(t);let u=this.formatMessageContent(t,r);t.fwd_from&&(u=this.formatFwdMessageContent(t.fwd_from,u)),t.reply_to_msg_id&&(u=n.e.html`${this.formatReplyToMessageContent(t.reply_to_msg_id)}${u}`);const h=Object(n.q)(t.date)+" "+Object(n.v)(t.date,{withSeconds:!0}),m=this.formatMessageViews(t),p=Object(n.v)(t.date),_=this.formatMessageStatus(t,this.dialog);if(e.innerHTML=n.e.html`
      <div class="message_content">
        ${l}
        ${u}
        <div class="message_date" title="${h}">${m}${p}${_}</div>
      </div>
    `,c?e.classList.add("message-type-sticker"):d?e.classList.add("message-type-round"):o&&e.classList.add("message-type-emoji"),t.reply_to_msg_id){const t=Object(n.a)(".message_reply_to_wrap",e);t&&t.addEventListener("click",this.onReplyToClick)}if(r)e.classList.add("message-has-thumb"),t.message&&e.classList.add("message-has-caption"),this.loadMessageMediaThumb(e,r);else if(t.media&&t.media.document){const s=t.media.document,o=a.a.getDocumentAttributes(s);"voice"===o.type&&(this.drawVoiceWave(e,o.waveform,this.isOutMessage(t)),FileApiManager.loadDocument(s,{cache:!0}),i.e(2).then(i.bind(null,22)));const r=Object(n.a)(".document_icon",e);r&&(r.addEventListener("click",this.onFileClick),"audio"!==o.type&&"voice"!==o.type||this.audioPlayer&&this.audioPlayer.doc.id===s.id&&this.audioPlayer.initMessageAudioPlayer(r))}else t.media&&t.media.poll&&i.e(8).then(i.bind(null,31)).then(({PollController:i})=>{this.polls.push(new i(e,t))})}isOutMessage(e){return(e.out||s.a.getMessageDialogPeerId(e)===h.a.getAuthUserId())&&e.from_id===h.a.getAuthUserId()}isEmojiMessage(e){if(e.message.length<=12&&!e.media){const t=Object(r.c)(e.message);if(t&&t.length<=3&&t.join("").length===e.message.length)return!0}return!1}getAnimatedEmojiSticker(e){if(this.animatedEmojies)for(const t of this.animatedEmojies.packs)if(t.emoticon===e){const e=t.documents[0];for(const t of this.animatedEmojies.documents)if(t.id===e)return t}}formatAuthorName(e){if(e.from_id&&"peerUser"!==this.dialog.peer._){const t=e.from_id,i=s.a.getPeerName({_:"peerUser",user_id:t});return n.e.html`<a class="message_author" data-ref-user-id="${t}" href="#${this.getUserHref(t)}">${i}</a>`}return""}loadFile(e,t){if(e.dataset.loading)return;e.dataset.loading=1;const i=new AbortController,s=()=>{i.abort(),a()},a=()=>{delete e.dataset.loading,e.removeEventListener("click",s),e.classList.remove("document_icon-loading"),e.innerHTML=""};let o;return e.classList.contains("document_icon")&&(e.classList.add("document_icon-loading"),e.innerHTML='\n        <svg class="document_icon_progress_svg" viewBox="0 0 36 36" xmlns="http://www.w3.org/2000/svg">\n          <path class="document_icon_progress_path" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"/>\n        </svg>\n      ',e.addEventListener("click",s),o=Object(n.a)(".document_icon_progress_path",e)),FileApiManager.loadDocument(t,{onProgress:e=>{const i=Math.round(e/t.size*100);o&&(o.style.strokeDasharray=`${i}, 100`)},signal:i.signal}).finally(a)}async playAudio(e,{document:t,attributes:n,message:s}){if(this.audioPlayer){if(this.audioPlayer.doc===t)return void this.audioPlayer.togglePlay();this.audioPlayer.destroy(),this.audioPlayer=null}const{AudioPlayer:a}=await i.e(2).then(i.bind(null,22)),o=new a(t,n);if(this.audioPlayer=o,"audio/mpeg"!==t.mime_type&&"audio/mp3"!==t.mime_type||!window.MediaSource){const i=await this.loadFile(e,t);o.initSrc(i)}else o.initStreaming();o.initMessageAudioPlayer(e),this.headerAudioEl=o.initHeaderAudioPlayer(s),o.listen("stop",()=>{this.headerAudioEl.remove(),this.headerAudioEl=null}),o.listen("ended",()=>{this.audioPlayer.destroy(),this.audioPlayer=null}),o.play()}getMessageMediaThumb(e,t=!1){if(t){const t=this.getAnimatedEmojiSticker(e.message);if(t){const i=a.a.getDocumentAttributes(t);return{type:"sticker",object:t,sizes:t.thumbs,attributes:i,emoji:e.message}}}const i=e.media;if(i)switch(i._){case"messageMediaPhoto":const e=i.photo;return{type:"photo",object:e,sizes:e.sizes};case"messageMediaDocument":{const e=i.document,t=a.a.getDocumentAttributes(e);if(["video","gif","sticker","round"].includes(t.type))return{type:t.type,object:e,sizes:e.thumbs,video_sizes:e.video_thumbs,attributes:t}}break;case"messageMediaWebPage":if("photo"!==i.webpage.type&&i.webpage.document){const e=i.webpage.document,t=a.a.getDocumentAttributes(e);if("video"===i.webpage.type||"gif"===i.webpage.type)return{type:i.webpage.type,object:e,sizes:e.thumbs,attributes:t};if("video"===t.type||"gif"===t.type)return{type:t.type,object:e,sizes:e.thumbs,attributes:t}}if(i.webpage.photo){const e=i.webpage.photo;return{type:"photo",object:e,sizes:e.sizes}}}}getThumbWidthHeight(e,t=400,i=200){let n=i,s=Math.round(n*(e.w/e.h));return s>t&&(s=t,n=Math.round(s/(e.w/e.h))),[s,n]}async loadMessageMediaThumb(e,t){let i=Object(n.a)(".message_media_thumb",e);if(!i)return;i.addEventListener("click",this.onThumbClick);const s=t.sizes;let o;{const e=a.a.choosePhotoSize(s,"m");if(e&&a.a.isCachedPhotoSize(e)){const i=t.object.mime_type,s=await a.a.getCachedPhotoSize(e,i);o=n.e.html`<img class="message_media_thumb_image" src="${s}">`.buildElement()}if(a.a.choosePhotoSize(s,"i")){const e=a.a.getPhotoStrippedSize(s);o=n.e.html`<img class="message_media_thumb_image message_media_thumb_image-blurred" src="${e}">`.buildElement()}o&&i.prepend(o)}if("sticker"===t.type){const e=await FileApiManager.loadDocument(t.object,{cache:!0});let s;s=t.attributes.animated?n.e.html`<tgs-player autoplay src="${e}" class="message_media_thumb_image"></tgs-player>`.buildElement():n.e.html`<img class="message_media_thumb_image" src="${e}">`.buildElement(),i.prepend(s)}else if("round"===t.type){const e=a.a.choosePhotoSize(s,"m"),[o,r]=await Promise.all([FileApiManager.loadDocument(t.object),FileApiManager.loadDocumentThumb(t.object,e.type)]),c=n.e.html`<video src="${o}" poster="${r}" playsinline muted autoplay loop class="message_media_thumb_round_video"></video>`.buildElement();i.prepend(c),i.addEventListener("click",this.onRoundClick)}else if(t.video_sizes){const e=t.video_sizes[0],s=await FileApiManager.loadDocumentThumb(t.object,e.type),a=n.e.html`<video class="message_media_thumb_image" src="${s}" muted autoplay loop></video>`.buildElement();i.prepend(a)}else{const e=a.a.choosePhotoSize(s,"x");let o;if(a.a.isCachedPhotoSize(e)){const i=t.object.mime_type;o=await a.a.getCachedPhotoSize(e,i)}else o="document"===t.object._?await FileApiManager.loadDocumentThumb(t.object,e.type):await FileApiManager.loadPhoto(t.object,e.type);const r=n.e.html`<img class="message_media_thumb_image" src="${o}">`.buildElement();i.prepend(r)}o&&o.remove()}formatFwdMessageContent(e,t){let i=e.from_name;if(!i)if(e.from_id){const t=s.a.users.get(e.from_id);i=s.a.getUserName(t)}else if(e.channel_id){const t=s.a.chats.get(e.channel_id);i=s.a.getChatName(t)}const a=e.from_id?"data-ref-user-id":"data-ref-chat-id",o=e.from_id||e.channel_id;return n.e.html`
      <div class="message_forwarded_header">Forwarded message</div>
      <div class="message_forwarded_content">
        <div class="message_forwarded_author">
          <a ${a}="${o}">${i}</a>
        </div>
        ${t}
      </div>
    `}formatReplyToMessageContent(e){const t=s.a.messages.get(e);if(t){const e=s.a.getMessageAuthorPeer(t),i=s.a.getPeerName(e),a=t.message?Object(n.l)(t.message,110,100):this.getMessageContentTypeLabel(t.media);return n.e.html`
        <div class="message_reply_to_wrap">
          <div class="message_reply_to_content">
            <div class="message_reply_to_author">${i}</div>
            <div class="message_reply_to_text">${a}</div>
          </div>
        </div>
      `}return""}formatMessageViews(e){return e.views?n.e.html`
        <div class="message_views">${Object(n.p)(e.views)}</div>
      `:""}formatMessageStatus(e,t){if(e.out&&e.from_id){const i=t.read_outbox_max_id,s=e.id<=i?"read":"sent";return n.e.html`<div class="message_status message_status-${s}"></div>`}return""}formatMessageContent(e,t){const i=e.media,s=this.formatText(e),a=e.message;if(!i)return t?this.formatThumb(t,a):s;switch(i._){case"messageMediaPhoto":return this.formatThumb(t,a);case"messageMediaDocument":return this.formatDocument(i,t,s,a);case"messageMediaWebPage":return n.e.html`${s}${this.formatWebPage(i,t)}`;case"messageMediaPoll":return n.e.html`${s}${this.formatPoll(i)}`;case"messageMediaGeo":return n.e.html`${s}Geo`;case"messageMediaGeoLive":return n.e.html`${s}Live Geo`;case"messageMediaContact":return n.e.html`${s}Contact`;case"messageMediaUnsupported":return"Message unsupported";default:return n.e.html`${s} [${i._}]`}}formatDocument(e,t,i,s){if(t)return this.formatThumb(t,s);const o=a.a.getDocumentAttributes(e.document);switch(o.type){case"video":return"[video]";case"gif":return"[gif]";case"sticker":return"[sticker]";case"voice":return this.formatVoice(e.document,o);case"audio":return this.formatAudio(e.document,o)}return n.e.html`
      ${i}
      <div class="document">
        <div class="document_col">
          <button class="document_icon"></button>
        </div>
        <div class="document_col">
          <div class="document_filename">${o.file_name||"File"}</div>
          <div class="document_size">${this.formatDocSize(e.document.size)}</div>        
        </div>      
      </div>
    `}formatDocSize(e){if(e){if(e<1024)return"1 KB";if(e<1048576)return Math.floor(e/1024)+" KB";if(e<1073741824)return Math.floor(e/1048576)+" MB"}return""}formatVoice(e,t){return n.e.html`
      <div class="document document-voice">
        <div class="document_col">
          <button class="document_icon document_icon-audio"></button>
        </div>
        <div class="document_col">
          <div class="document_filename">Voice message</div>
          <div class="document_duration">${Object(n.t)(t.duration)}</div>        
        </div>      
      </div>
    `}drawVoiceWave(e,t,i=!1){const s=Object(n.a)(".document_filename",e);s.innerHTML="";const a=document.createElement("canvas"),o=Math.ceil(t.length/2),r=window.devicePixelRatio||1,c=2*r,d=2*r,l=c*o+d*(o-1),u=16*r,h=l/r,m=u/r;s.style.width=h+"px",s.style.height=m+"px",a.width=l,a.height=u;const p=a.getContext("2d");p.lineWidth=c,p.lineCap="round";for(const e of["background","filled"]){p.strokeStyle="background"===e?i?"#B7DDA9":"#CBCBCB":i?"#65AB5A":"#5FA1E3";for(let e=0,i=c/2;e<t.length;e+=2){const n=e+1<t.length?(t[e]+t[e+1])/2/255:t[e],s=Math.max(c,n*(u-c));p.beginPath(),p.moveTo(i,u-c/2),p.lineTo(i,u-s),p.stroke(),i+=c+d}a.toBlob(t=>{const i=URL.createObjectURL(t);s.appendChild(n.e.html`<img src="${i}" class="document_voice_wave document_voice_wave-${e}">`.buildElement())},"image/png")}}formatAudio(e,t){return n.e.html`
      <div class="document">
        <div class="document_col">
          <button class="document_icon document_icon-audio"></button>
        </div>
        <div class="document_col">
          <div class="document_filename">${t.audio_title||t.file_name||"Unknown Track"}</div>
          <div class="document_performer">${t.audio_performer}</div>
          <div class="document_duration">${Object(n.t)(t.duration)}</div>        
        </div>      
      </div>
    `}formatWebPage(e,t){const i=e.webpage;if("webPage"===i._){const e=this.formatThumb(t);if(i.site_name&&e.appendHtml`<a class="wepbage_site_name" href="${encodeURI(i.url)}" target="_blank">${i.site_name}</a>`,i.title&&e.appendHtml`<div class="wepbage_title">${i.title}</div>`,i.description){const t=Object(n.l)(i.description,300,255);e.appendHtml`<div class="webpage_description">${n.e.raw`${t}`.replaceLineBreaks()}</div>`}return n.e.html`<div class="webpage_content">${e}</div>`}return""}formatPoll(e){const t=e.poll,i=e.results,s=(t.public_voters?"":"Anonymous ")+(t.quiz?"Quiz":"Poll");let a=!1;const o=n.e.html``;for(let e=0;e<t.answers.length;e++){const n=t.answers[e],s=i.results?i.results[e]:null,r=s&&i.total_voters?Math.round(s.voters/i.total_voters*100):0,c=s&&s.chosen?"poll_option-selected":"",d=t.quiz&&s?s.correct?"poll_option-correct":"poll_option-wrong":"";o.appendHtml`
        <div class="poll_option ${c} ${d}" data-index="${e}">
          <div class="poll_option_text">${n.text}</div>
          <div class="poll_option_percent ${100===r?"poll_option_percent-long":""}">${r}%</div>
          <div class="poll_option_scale" style="--voters-percent: ${r}%;"></div>
        </div>
      `,s&&s.chosen&&(a=!0)}let r="";t.multiple_choice?r=n.e.html`<button class="poll_vote_button" disabled>Vote</button>`:t.public_voters&&(r=n.e.html`<button class="poll_results_button">View Results</button>`);const c=this.getClasses({"poll-voted":a||t.closed,"poll-closed":t.closed,"poll-public":t.public_voters,"poll-multi":t.multiple_choice});return n.e.html`
      <div class="poll ${c}">
        <div class="poll_question">${t.question}</div>
        <div class="poll_subheader">
          <div class="poll_type">${s}</div>
          <div class="poll_recent_voters"></div>
          <div class="poll_quiz_timer"></div>
          <button class="poll_quiz_solution_button" ${i.solution?"":"hidden"}></button>
        </div>
        <div class="poll_options">${o}</div>
        ${r}
        <div class="poll_voters">${this.formatPollFooterText(t,i.total_voters)}</div>
      </div>
    `}formatPollFooterText(e,t){return e.quiz?u.a.getPlural("poll_n_answered",t,{n:Object(n.o)(t)}):u.a.getPlural("poll_n_voted",t,{n:Object(n.o)(t)})}formatText(e){let t;return(t=e.entities?this.processTextEntities(e.message,e.entities):n.e.html`${e.message}`).length?(t.replaceLineBreaks(),n.e.html`<span class="message_text">${t}</span>`):t}processTextEntities(e,t){const i=n.e.html``;let s=0;for(const n of t){i.appendHtml`${e.substring(s,n.offset)}`,s=n.offset+n.length;const t=e.substr(n.offset,n.length);i.appendHtml`${this.processEntity(t,n)}`}return i.appendHtml`${e.substring(s)}`,i}processEntity(e,t){switch(t._){case"messageEntityUrl":const i=/^https?:\/\//.test(e)?e:"http://"+e;return n.e.html`<a href="${i}" target="_blank" rel="noopener" data-entity="url">${Object(n.l)(e,60,50)}</a>`;case"messageEntityTextUrl":return n.e.html`<a href="${t.url}" target="_blank" rel="noopener" data-entity="text_url">${e}</a>`;case"messageEntityBold":return n.e.html`<b>${e}</b>`;case"messageEntityItalic":return n.e.html`<i>${e}</i>`;case"messageEntityUnderline":return n.e.html`<u>${e}</u>`;case"messageEntityStrike":return n.e.html`<s>${e}</s>`;case"messageEntityCode":return n.e.html`<code>${e}</code>`;case"messageEntityPre":return n.e.html`<pre>${e}</pre>`;case"textEntityTypePreCode":return n.e.html`<pre><code>${e}</code></pre>`;case"messageEntityMention":return n.e.html`<a href="#${e}" data-entity="mention">${e}</a>`;case"messageEntityMentionName":return n.e.html`<a href="#${this.getUserHref(t.user_id)}" data-entity="mention">${e}</a>`;case"messageEntityHashtag":return n.e.html`<a data-entity="hashtag">${e}</a>`;case"messageEntityBotCommand":return n.e.html`<a data-entity="bot_command">${e}</a>`;case"messageEntityEmail":return n.e.html`<a href="mailto:${e}" data-entity="email_address">${e}</a>`;case"messageEntityPhone":return n.e.html`<a href="tel:${e}" data-entity="phone_number">${e}</a>`;default:return e}}formatThumb(e,t){const i=n.e.html``;let s,o;if(e){let r=Math.min(300,window.screen.width-100),c=200;"sticker"===e.type&&(r=e.emoji?100:150,c=e.emoji?100:150);const d=a.a.choosePhotoSize(e.sizes),l=e.video_sizes&&e.video_sizes[0];if(d||l){[s,o]=this.getThumbWidthHeight(d||l,r,c),t&&t.length>50&&s<r&&(s=r);let a="";"video"!==e.type&&"round"!==e.type&&"gif"!==e.type||e.attributes&&(a="gif"===e.type?"GIF":Object(n.t)(e.attributes.duration)),i.appendHtml`
        <div class="message_media_thumb message_media_thumb-${e.type}" style="width:${s}px;height:${o}px;">
          ${a?n.e.html`<div class="message_media_duration">${a}</div>`:""}
          ${["video","gif"].includes(e.type)?n.e.html`<div class="message_media_thumb_play"></div>`:""}
        </div>
      `}}if(t&&"sticker"!==e.type){const e=s?`width:${s}px;`:"";i.appendHtml`<div class="message_media_caption" style="${e}">${t}</div>`}return i}formatMessageDateFull(e){let t;return t=e>(new Date).setHours(0,0,0,0)/1e3?"Today":Object(n.q)(e,{longMonth:!0,withYear:new Date(1e3*e).getFullYear()!==(new Date).getFullYear()})}formatMessageDateTime(e){return`${this.formatMessageDateFull(e)} at ${Object(n.v)(e)}`}getMessageContentTypeLabel(e){if(!e)return"";switch(e._){case"messageMediaPhoto":return"Photo";case"messageMediaDocument":return this.getMessageContentDocumentLabel(e.document);case"messageMediaWebPage":return"Link";case"messageMediaPoll":return"Poll";case"messageMediaGeo":return"Geo";case"messageMediaGeoLive":return"Live Geo";case"messageMediaContact":return"Contact";case"messageMediaUnsupported":return"Message unsupported"}return""}getMessageContentDocumentLabel(e){const t=a.a.getDocumentAttributes(e);switch(t.type){case"video":return"Video";case"gif":return"Gif";case"sticker":return"Sticker"+(t.stickerEmoji?" "+t.stickerEmoji:"");case"voice":return"Voice";case"audio":return"Audio"}return"File"}getServiceMessageText(e){switch(e.action._){case"messageActionChatCreate":{const t=s.a.users.get(e.from_id);return`${s.a.getUserName(t)} created the group "${e.action.title}"`}case"messageActionChatEditTitle":return"Chat name changed";case"messageActionChatEditPhoto":return"Chat photo changed";case"messageActionChatDeletePhoto":return"Chat photo deleted";case"messageActionChatAddUser":{const t=s.a.users.get(e.from_id),i=s.a.getUserName(t),n=e.action.users.map(e=>s.a.getUserName(s.a.users.get(e)));if(n.length>1){return`${i} invited ${n.slice(0,-1).join(", ")+" and "+n.slice(-1)}`}return e.from_id===e.action.users[0]?i+" joined the group":i+" invited "+n[0]}case"messageActionChatDeleteUser":const t=s.a.users.get(e.from_id);return`${s.a.getUserName(t)} left the group`;case"messageActionChatJoinedByLink":{const t=s.a.users.get(e.from_id);return`${s.a.getUserName(t)} joined the group via invite link`}case"messageActionChannelCreate":return"Channel created";case"messageActionChatMigrateTo":case"messageActionChannelMigrateFrom":return"Chat was upgraded to supergroup";case"messageActionPinMessage":{let t="";if(e.from_id){const i=s.a.users.get(e.from_id);t=s.a.getUserName(i)}else t=s.a.getPeerName(e.to_id);const i=s.a.messages.get(e.reply_to_msg_id);return`${t} pinned ${i&&i.message?`"${Object(n.l)(i.message,30,20)}"`:"message"}`}case"messageActionHistoryClear":return"Chat history was cleared";case"messageActionGameScore":return"Someone scored in a game";case"messageActionPaymentSent":return"Payment was sent";case"messageActionPhoneCall":return"Phone call";case"messageActionScreenshotTaken":return"Screenshot was taken";case"messageActionContactSignUp":{const t=s.a.users.get(e.from_id);return`${s.a.getUserName(t)} joined Telegram`}}return""}getUserStatusText(e){if(e.bot)return"bot";if(e.status)switch(e.status._){case"userStatusOnline":return"online";case"userStatusOffline":return e.status.was_online?"last seen "+Object(n.r)(e.status.was_online,l.a.getServerTimeNow()):"offline";case"userStatusRecently":return"last seen recently";case"userStatusLastWeek":return"last seen last week";case"userStatusLastMonth":return"last seen last month"}return"last seen a long time ago"}getUserHref(e){const t=s.a.users.get(e);return t&&t.username?"@"+t.username:"@"+e}async initBackground(){const e=Object(n.a)(".messages_container");if(!window.caches||!window.OffscreenCanvas)return void e.prepend(n.e.html`<div class="messages_bg_image"></div>`.buildElement());const t=await caches.open("v1"),i=await t.match("bg.jpg?blurred");let s;if(i)s=await i.blob();else if(window.OffscreenCanvas){const e=await fetch("bg.jpg"),i=await createImageBitmap(await e.blob()),n=i.width/i.height,a=new OffscreenCanvas(...function(e){return screen.width>screen.height?[screen.width,screen.width/e]:[screen.height*e,screen.height]}(n)),o=a.getContext("2d");o.fillStyle="#91b087",o.fillRect(0,0,a.width,a.height),o.filter="blur(10px)",o.drawImage(i,-10,-10,a.width+20,a.height+20),s=await a.convertToBlob({type:"image/jpeg",quality:.95}),t.put("bg.jpg?blurred",new Response(s))}const a=s?URL.createObjectURL(s):"bg.jpg";e.style.backgroundImage=`url(${a})`}async loadAnimatedEmojiStickerSet(){this.animatedEmojies||(this.animatedEmojies=await l.a.callMethod("messages.getStickerSet",{stickerset:{_:"inputStickerSetAnimatedEmoji"}}))}};window.MessagesController=_},function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i(0);function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const a=new class{constructor(){s(this,"jpegHeader",o("/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDACgcHiMeGSgjISMtKygwPGRBPDc3PHtYXUlkkYCZlo+AjIqgtObDoKrarYqMyP/L2u71////m8H////6/+b9//j/2wBDASstLTw1PHZBQXb4pYyl+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj/wAARCAAAAAADASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwA=")),s(this,"jpegFooter",o("/9k="))}choosePhotoSize(e,t="m"){if(!e)return;const i=e.find(e=>e.type===t);return i||("i"!==t?e.find(e=>"i"!==e.type):void 0)}isCachedPhotoSize(e){return"photoCachedSize"===e._}async getCachedPhotoSize(e,t="image/jpeg"){let i;if("image/webp"===t){await Object(n.j)()||(i=await Object(n.k)(e.bytes))}return i||(i=new Blob([e.bytes],{type:t})),URL.createObjectURL(i)}getPhotoStrippedSize(e){const t=this.choosePhotoSize(e,"i");if(t&&1===t.bytes[0]){const e=this.jpegHeader,i=this.jpegFooter;return"data:image/jpeg;base64,"+function(e){e instanceof ArrayBuffer&&(e=new Uint8Array(e));let t="";for(let i=0;i<e.length;i++)t+=String.fromCharCode(e[i]);return btoa(t)}(function(...e){let t=0;for(const i of e)t+=i.byteLength||i.length||0;const i=new Int8Array(t);let n=0;for(const t of e)i.set(t instanceof ArrayBuffer?new Int8Array(t):t,n),n+=t.byteLength||t.length;return i.buffer}(e.subarray(0,164),t.bytes.subarray(1,2),e.subarray(165,166),t.bytes.subarray(2,3),e.subarray(167),t.bytes.subarray(3),i))}}getDocumentAttributes(e){const t={},i=e.thumbs&&e.thumbs.length;for(const n of e.attributes)switch(n._){case"documentAttributeFilename":t.file_name=n.file_name;break;case"documentAttributeAudio":t.duration=n.duration,t.audio_title=n.title,t.audio_performer=n.performer,t.waveform=n.waveform,t.type=n.voice?"voice":"audio";break;case"documentAttributeVideo":t.duration=n.duration,t.w=n.w,t.h=n.h,n.supports_streaming&&(t.supports_streaming=!0),i&&n.round_message?t.type="round":i&&(t.type="video");break;case"documentAttributeSticker":t.sticker=!0,void 0!==n.alt&&(t.stickerEmoji=n.alt),n.stickerset&&("inputStickerSetEmpty"===n.stickerset._?delete n.stickerset:"inputStickerSetID"===n.stickerset._&&(t.stickerSetInput=n.stickerset)),i&&(t.type="sticker","application/x-tgsticker"===e.mime_type&&(t.animated=!0));break;case"documentAttributeImageSize":t.w=n.w,t.h=n.h,i&&("application/x-tgsticker"===e.mime_type?(t.type="sticker",t.animated=!0):t.type="image");break;case"documentAttributeAnimated":"image/gif"!==e.mime_type&&"video/mp4"!==e.mime_type||!i||(t.type="gif"),t.animated=!0}if(t.mime_type=e.mime_type,!t.mime_type)switch(t.type){case"gif":t.mime_type="video/mp4";break;case"video":case"round":t.mime_type="video/mp4";break;case"sticker":t.mime_type="image/webp";break;case"audio":t.mime_type="audio/mpeg";break;case"voice":t.mime_type="audio/ogg";break;default:t.mime_type="application/octet-stream"}return t.file_name||(t.file_name=""),t}};function o(e){const t=atob(e),i=new Uint8Array(t.length);for(let n=0;n<e.length;n++)i[n]=t.charCodeAt(n);return i}window.MediaApiManager=a},function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));const n={login_flood_pluralize_seconds:["","Try again in {} second","Try again in {} seconds"],login_flood_pluralize_minutes:["","Try again in {} minute","Try again in {} minutes"],login_flood_pluralize_hours:["","Try again in {} hour","Try again in {} hours"],messages_search_n_results_found:["No messages found","{} message found","{} messages found"],messages_send_n_files:["","Send {} File","Send {} files"],chats_n_members:["","{n} member","{n} members"],chats_n_followers:["","{n} follower","{n} followers"],date_n_minutes_ago:["","{} minute ago","{} miinutes ago"],poll_n_voted:["No votes","{n} voted","{n} voted"],poll_n_answered:["Nobody answered yet","{n} answered","{n} answered"],poll_n_more_voters:["","Show {} more voter","Show {} more voters"]},s=new class{get(e,t=!1){const i=n[e]||"";return this.replaceTokens(i,t)}replaceTokens(e,t){if(!t)return e;for(const[i,n]of Object.entries(t))e=e.replace(`{${i}}`,n);return e}getPlural(e,t,i){const s=n[e];let a;return a=(a=!t&&s[0]?s[0]:1===t?s[1]:s[2]).replace("{}",t),this.replaceTokens(a,i)}}},function(e,t,i){"use strict";
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
function n(e,t){if(e.closest)return e.closest(t);for(var i=e;i;){if(s(i,t))return i;i=i.parentElement}return null}function s(e,t){return(e.matches||e.webkitMatchesSelector||e.msMatchesSelector).call(e,t)}i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return s}))},function(e,t,i){"use strict";var n=i(0),s=i(4),a=i(1),o=i(7),r=i(9);function c(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const d=new class{constructor(){c(this,"users",new Map),c(this,"chats",new Map),c(this,"onBack",()=>{this.input.removeEventListener("input",this.onInput),this.input.value="",this.users.clear(),this.chats.clear(),this.container.hidden=!0,this.container.innerHTML="",m.container.hidden=!1;const e=Object(n.a)(".chats_header_back_button");e.hidden=!0,e.removeEventListener("click",this.onBack),Object(n.a)(".chats_header_menu_button").hidden=!1}),c(this,"onInput",Object(n.m)(()=>{const e=this.input.value.trim();e!==this.lastQuery&&(this.lastQuery=e,this.nextRate=null,this.noMore=!1,this.loadMoreAbortController&&(this.loadMoreAbortController.abort(),this.loadMoreAbortController=null),e?(this.container.innerHTML="",this.container.append(this.loader),this.loadResults(e)):this.onBack())},100)),c(this,"onScroll",()=>{const e=this.container;!this.loading&&!this.noMore&&this.nextRate&&e.scrollTop+e.offsetHeight>e.scrollHeight-500&&this.loadMore()}),c(this,"onPeerClick",e=>{const t=e.currentTarget,i=+t.dataset.peerId,n=+(t.dataset.messageId||0);o.a.setChatByPeerId(i,n)})}show(e){this.input=e,this.input.addEventListener("input",this.onInput),m.container.hidden=!0,this.container=Object(n.a)(".global_search_sidebar"),this.container.hidden=!1,this.container.onscroll=this.onScroll,this.loader=Object(n.i)();const t=Object(n.a)(".chats_header_back_button");t.addEventListener("click",this.onBack),t.hidden=!1,Object(n.a)(".chats_header_menu_button").hidden=!0,this.onInput()}loadMore(){this.loadMoreAbortController=new AbortController;const e=this.loadMoreAbortController.signal,t=this.lastQuery;this.loading=!0,ApiClient.callMethod("messages.searchGlobal",{q:t,limit:20,offset_rate:this.nextRate,offset_peer:{_:"inputPeerEmpty"}}).then(i=>{if(!e.aborted)if(i.messages.length){a.a.updateUsers(i.users),a.a.updateChats(i.chats),this.nextRate=i.next_rate;const e=Object(n.a)(".global_search_sublist-messages",this.container);this.appendMessages(e,i.messages,t)}else this.noMore=!0}).catch(e=>{console.log(e);const t="An error occurred"+(e.error_message?": "+e.error_message:"");s.a.alert(t)}).finally(()=>{this.loading=!1})}async loadResults(e,t=20,i=20){const[n,s]=await Promise.all([ApiClient.callMethod("contacts.search",{q:e,limit:t}),ApiClient.callMethod("messages.searchGlobal",{q:e,limit:i,offset_peer:{_:"inputPeerEmpty"}})]);a.a.updateUsers(n.users),a.a.updateUsers(s.users),a.a.updateChats(n.chats),a.a.updateChats(s.chats),this.nextRate=s.next_rate,this.renderResults(e,n.my_results,n.results,s.messages)}renderResults(e,t,i,n){const s=document.createDocumentFragment();s.append(this.buildContactsSublist("Contacts and Chats",t,e,!1),this.buildContactsSublist("Global Search",i,e,!0),this.buildMessagesSublist("Messages",n,e)),this.container.innerHTML="",this.container.append(s)}buildContactsSublist(e,t,i,s){if(!t.length)return"";const c=n.e.html`
      <div class="global_search_sublist global_search_sublist-contacts">
        <div class="global_search_sublist_header">${e}</div>
      </div>
    `.buildElement();for(const e of t){const t=a.a.getPeerId(e),i=a.a.getPeerData(e),d=a.a.getPeerName(e);let l="";if(s||"peerUser"!==e._){if(i.username&&(l="@"+i.username),i.participants_count){const e="channel"===i._&&!i.megagroup;l+=(l?", ":"")+r.a.getPlural(e?"chats_n_followers":"chats_n_members",i.participants_count,{n:Object(n.o)(i.participants_count)})}}else{const t=a.a.getPeerData(e);l=o.a.getUserStatusText(t)}const u=n.e.html`
        <div class="contacts_item" data-peer-id="${t}">
          <div class="contacts_item_content mdc-ripple-surface">
            <div class="contacts_item_photo"></div>
            <div class="contacts_item_text">
              <div class="contacts_item_text_row">
                <div class="contacts_item_title">${d}</div>
              </div>
              <div class="contacts_item_text_row">
                <div class="contacts_item_status">${l}</div>
              </div>
            </div>
          </div>
        </div>
      `.buildElement();m.loadPeerPhoto(Object(n.a)(".contacts_item_photo",u),e),u.addEventListener("click",this.onPeerClick),Object(n.g)(u.firstElementChild),c.append(u)}return c}buildMessagesSublist(e,t,i){if(!t.length)return"";const s=n.e.html`
      <div class="global_search_sublist global_search_sublist-messages">
        <div class="global_search_sublist_header">${e}</div>
      </div>
    `.buildElement();return this.appendMessages(s,t,i),s}appendMessages(e,t,i){const s=document.createDocumentFragment();for(const e of t){const t=a.a.getMessageDialogPeer(e),o=a.a.getPeerId(t),r=a.a.getPeerName(t),c=m.formatMessageDate(e),d=m.getMessagePreview(e,i),l=n.e.html`
        <div class="messages_search_results_item" data-peer-id="${o}" data-message-id="${e.id}">
          <div class="messages_search_results_item_content mdc-ripple-surface">
            <div class="messages_search_results_item_photo"></div>
            <div class="messages_search_results_item_text">
              <div class="messages_search_results_item_text_row">
                <div class="messages_search_results_item_title">${r}</div>
                <div class="messages_search_results_item_date">${c}</div>
              </div>
              <div class="messages_search_results_item_text_row">
                <div class="messages_search_results_item_message">${d}</div>
              </div>
            </div>      
          </div>
        </div>
      `.buildElement();m.loadPeerPhoto(Object(n.a)(".messages_search_results_item_photo",l),t),l.addEventListener("click",this.onPeerClick),s.appendChild(l)}e.appendChild(s)}saveTmpPeers(e,...t){for(const i of t)for(const t of i)e.set(t.id,t)}};window.GlobalSearchController=d;var l=i(3);const u=new class{constructor(){var e,t,i;e=this,t="emitter",i=l.a.emitter,t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}toggleDialogPin(e,t){l.a.callMethod("messages.toggleDialogPin",{peer:a.a.getInputDialogPeer(e.peer),pinned:t}),e.pinned=t;const i=1===e.folder_id?a.a.archivedDialogs:a.a.dialogs;if(t){const t=a.a.getDialogIndex(e,e.folder_id);i.splice(t,1),i.unshift(e),this.emitter.trigger("dialogOrderUpdate",{dialog:e,index:0,folderId:e.folder_id})}else a.a.handleDialogOrder(e);this.emitter.trigger("dialogPinnedUpdate",{dialog:e})}toggleDialogMute(e,t){const i=Object.assign({},e.notify_settings,{_:"inputPeerNotifySettings",mute_until:t?2147483647:void 0});l.a.callMethod("account.updateNotifySettings",{peer:{_:"inputNotifyPeer",peer:a.a.getInputPeer(e.peer)},settings:i}),e.notify_settings.mute_until=i.mute_until,this.emitter.trigger("dialogNotifySettingsUpdate",{dialog:e})}async toggleDialogArchive(e,t){const i=await l.a.callMethod("folders.editPeerFolders",{folder_peers:[{_:"inputFolderPeer",peer:a.a.getInputPeer(e.peer),folder_id:t?1:0}]});console.log(i),a.a.onUpdates(i)}};function h(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}window.DialogsApiManager=u,i.d(t,"a",(function(){return m}));const m=new class{constructor(){h(this,"chatElements",new Map),h(this,"onTabClick",e=>{Object(n.a)(".chats_tabs_item.nav_tabs_item-active").classList.remove("nav_tabs_item-active");const t=e.currentTarget;t.classList.add("nav_tabs_item-active");const i=+t.dataset.id;this.setFilter(i)}),h(this,"onDialogsUpdate",e=>{const{dialogs:t,folderId:i}=e.detail;i||this.renderChats(t)}),h(this,"onDialogNewMessage",e=>{const{dialog:t,message:i}=e.detail;if("messageService"===i._)return;const n=a.a.getPeerId(t.peer);let s=this.chatElements.get(n);s?this.renderChatPreviewContent(s,t):this.buildChatPreviewElement(t)}),h(this,"onDialogOrderUpdate",e=>{const{dialog:t,index:i,folderId:n}=e.detail;if(n&&!this.ArchivedChatsController)return;const s=a.a.getPeerId(t.peer);let o=this.chatElements.get(s);o?(o.remove(),o.classList.toggle("chats_item-pinned",!!t.pinned),this.renderChatPreviewContent(o,t)):o=this.buildChatPreviewElement(t);const r=1===n?this.ArchivedChatsController.scrollContainer:this.container,c=r.children[i];c?c.before(o):r.appendChild(o)}),h(this,"onDialogPreviewUpdate",e=>{const{dialog:t}=e.detail,i=a.a.getPeerId(t.peer),n=this.chatElements.get(i);n&&(n.classList.toggle("chats_item-pinned",!!t.pinned),this.renderChatPreviewContent(n,t))}),h(this,"onDialogFolderChange",e=>{const{dialog:t,oldFolderId:i}=e.detail,n=a.a.getPeerId(t.peer);this.chatElements.get(n).remove()}),h(this,"onUserStatusUpdate",e=>{const{user:t}=e.detail,i=this.chatElements.get(t.id);i&&this.updateChatStatus(i,t.status)}),h(this,"onScroll",()=>{const e=this.container;!this.loading&&!this.noMore&&e.scrollTop+e.offsetHeight>e.scrollHeight-500&&this.loadMore()}),h(this,"onChatClick",e=>{e.preventDefault();const t=+e.currentTarget.dataset.peerId,i=a.a.getDialog(t);o.a.setChat(i)}),h(this,"onChatMenu",e=>{let t=e.target;for(;t&&!t.classList.contains("chats_item");)t=t.parentNode;if(!t)return;const i=a.a.getDialog(+t.dataset.peerId),s=[i.pinned?["unpin","Unpin"]:["pin","Pin"],i.notify_settings.mute_until?["unmute","Unmute"]:["mute","Mute"],1===i.folder_id?["unarchive","Unarchive"]:["archive","Archive"],["delete","Delete"]],o=n.e.html`
      <div class="chats_dialog_menu mdc-menu mdc-menu-surface">
        <ul class="mdc-list" role="menu" aria-hidden="true" aria-orientation="vertical">
          ${s.map(([e,t])=>n.e.html`
            <li class="mdc-list-item chats_dialog_menu_item chats_dialog_menu_item-${e}" data-action="${e}" role="menuitem">
              <span class="mdc-list-item__text">${t}</span>
            </li>
          `)}
        </ul>
      </div>
    `.buildElement(),r=e=>{e.stopPropagation();const t=e.currentTarget.dataset.action;this.onChatMenuAction(i,t),c()},c=()=>{d.open=!1,setTimeout(()=>{o.remove()},500)};Array.from(Object(n.b)(".chats_dialog_menu_item",o)).forEach(e=>e.addEventListener("click",r));const d=Object(n.B)(o);if(Object(n.C)()){const{pageX:t}=Object(n.x)(e);d.setAbsolutePosition(t,0)}else d.setAnchorElement(t),d.setAnchorCorner(4),d.setAnchorMargin({right:200,bottom:0});d.open=!0;const l=e=>{o.contains(e.target)||c(),document.removeEventListener(u,l)},u=Object(n.C)()?"touchstart":"mousedown";document.addEventListener(u,l),t.appendChild(o)})}init(){this.container=Object(n.a)(".chats_sidebar"),this.container.addEventListener("scroll",this.onScroll),this.initHeader(),this.loader=Object(n.i)(this.container),a.a.emitter.on("dialogsUpdate",this.onDialogsUpdate),a.a.emitter.on("dialogOrderUpdate",this.onDialogOrderUpdate),a.a.emitter.on("dialogPinnedUpdate",this.onDialogPreviewUpdate),a.a.emitter.on("dialogTopMessageUpdate",this.onDialogPreviewUpdate),a.a.emitter.on("dialogUnreadCountUpdate",this.onDialogPreviewUpdate),a.a.emitter.on("dialogNotifySettingsUpdate",this.onDialogPreviewUpdate),a.a.emitter.on("dialogFolderChange",this.onDialogFolderChange),a.a.emitter.on("dialogNewMessage",this.onDialogNewMessage),a.a.emitter.on("userStatusUpdate",this.onUserStatusUpdate),this.initTabs(),this.loadMore()}initHeader(){this.header=Object(n.a)(".chats_header"),this.header.innerHTML='\n      <button type="button" class="chats_header_menu_button mdc-icon-button"></button>\n      <button type="button" class="mdc-icon-button sidebar_back_button chats_header_back_button" hidden></button>\n      <div class="chats_header_menu mdc-menu mdc-menu-surface">\n        <ul class="mdc-list" role="menu" aria-hidden="true" aria-orientation="vertical" tabindex="-1">\n          <li class="mdc-list-item chats_header_menu_item chats_header_menu_item-new_group" role="menuitem">\n            <span class="mdc-list-item__text">New Group</span>\n          </li>\n          <li class="mdc-list-item chats_header_menu_item chats_header_menu_item-contacts" role="menuitem">\n            <span class="mdc-list-item__text">Contacts</span>\n          </li>\n          <li class="mdc-list-item chats_header_menu_item chats_header_menu_item-archived" role="menuitem">\n            <span class="mdc-list-item__text">Archived</span>\n          </li>\n          <li class="mdc-list-item chats_header_menu_item chats_header_menu_item-saved" role="menuitem">\n            <span class="mdc-list-item__text">Saved</span>\n          </li>\n          <li class="mdc-list-item chats_header_menu_item chats_header_menu_item-settings" role="menuitem">\n            <span class="mdc-list-item__text">Settings</span>\n          </li>\n          <li class="mdc-list-item chats_header_menu_item chats_header_menu_item-help" role="menuitem">\n            <span class="mdc-list-item__text">Help</span>\n          </li>\n        </ul>\n      </div>\n      <input type="text" placeholder="Telegram Search" class="sidebar_search_input chats_header_search_input">\n    ',this.initHeaderMenu(),this.initHeaderSearch()}initHeaderMenu(){const e=Object(n.a)(".chats_header_menu",this.header),t=Object(n.B)(e),r=Object(n.a)(".chats_header_menu_button",this.header);Object(n.g)(r),r.addEventListener("click",()=>{t.open||(t.open=!0,t.setAbsolutePosition(14,60))}),Object(n.a)(".chats_header_menu_item-contacts",e).addEventListener("click",()=>{i.e(6).then(i.bind(null,37)).then(({ContactsController:e})=>{e.show()})}),Object(n.a)(".chats_header_menu_item-saved",e).addEventListener("click",()=>{const e=a.a.getDialog(s.a.getAuthUserId());o.a.setChat(e)}),Object(n.a)(".chats_header_menu_item-archived",e).addEventListener("click",()=>{i.e(4).then(i.bind(null,38)).then(({ArchivedChatsController:e})=>{this.ArchivedChatsController=e,e.show()})}),Object(n.a)(".chats_header_menu_item-settings",e).addEventListener("click",()=>{i.e(9).then(i.bind(null,39)).then(({SettingsController:e})=>{e.show()})})}initHeaderSearch(){const e=Object(n.a)(".chats_header_search_input");e.addEventListener("input",()=>{d.show(e)})}async initTabs(){this.filters=await ApiClient.callMethod("messages.getDialogFilters"),this.filters.length&&this.renderTabs()}renderTabs(){const e=n.e.html`<div class="nav_tabs_container chats_tabs_list"></div>`.buildElement();{const t=n.e.html`
        <div class="nav_tabs_item chats_tabs_item nav_tabs_item-active" data-id="0">
          <div class="nav_tabs_item_label">All</div>
        </div>
      `.buildElement();t.addEventListener("click",this.onTabClick),e.appendChild(t)}for(const t of this.filters){const i=n.e.html`
        <div class="nav_tabs_item chats_tabs_item" data-id="${t.id}">
          <div class="nav_tabs_item_label">${t.title}</div>
        </div>
      `.buildElement();i.addEventListener("click",this.onTabClick),e.appendChild(i)}Object(n.a)(".chats_tabs").appendChild(e)}setFilter(e){const t=this.filters.find(t=>t.id===e);this.currentFilter=t;const i=a.a.dialogs;for(const e of i){const i=a.a.getPeerId(e.peer),n=this.chatElements.get(i);n&&(n.hidden=!this.checkDialogFilter(e,t))}this.container.scrollTop=0,this.container.scrollHeight<=this.container.offsetHeight&&this.loadMore()}checkDialogFilter(e,t){if(!t)return!0;const i=a.a.getPeerData(e.peer);if(t.exclude_muted&&e.notify_settings.mute_until)return!1;if(t.exclude_read&&!e.unread_count)return!1;if(t.exclude_archived&&1===e.folder_id)return!1;for(const e of t.exclude_peers){if("inputPeerChat"===e._&&"chat"===i._&&e.chat_id===i.id)return!1;if("inputPeerUser"===e._&&"user"===i._&&e.user_id===i.id)return!1;if("inputPeerChannel"===e._&&"channel"===i._&&e.channel_id===i.id)return!1}if(t.contacts&&"user"===i._&&!i.bot&&i.contact)return!0;if(t.non_contacts&&"user"===i._&&!i.bot&&!i.contact)return!0;if(t.groups&&("chat"===i._||"channel"===i._&&i.megagroup))return!0;if(t.broadcasts&&"channel"===i._&&!i.megagroup)return!0;if(t.bots&&"user"===i._&&i.bot)return!0;for(const e of t.include_peers){if("inputPeerChat"===e._&&"chat"===i._&&e.chat_id===i.id)return!0;if("inputPeerUser"===e._&&"user"===i._&&e.user_id===i.id)return!0;if("inputPeerChannel"===e._&&"channel"===i._&&e.channel_id===i.id)return!0}return!1}loadMore(){this.loading=!0,a.a.loadDialogs(this.offset,20).then(e=>{e.length||(this.noMore=!0)}).catch(e=>{const t="An error occurred"+(e.error_message?": "+e.error_message:"");if(s.a.alert(t),420===e.error_code){const t=+e.error_message.match(/^FLOOD_WAIT_(\d+)$/);setTimeout(()=>this.loadMore(),1e3*t),console.log("chats load more timeout",t,e)}}).finally(()=>{this.loading=!1})}renderChats(e){this.loader.remove();const t=document.createDocumentFragment();for(const i of e){const e=a.a.getPeerId(i.peer);if(this.chatElements.has(e))continue;const n=this.buildChatPreviewElement(i);t.append(n)}this.container.append(t);const i=e[e.length-1];if(i){const e=a.a.messages.get(i.top_message);this.offset={id:i.top_message,peer:i.peer,date:e.date}}else this.offset={id:0,peer:0,date:0};this.container.scrollHeight<=this.container.offsetHeight&&this.loadMore(),this.newChatButton||(this.newChatButton=n.e.html`<button class="chats_new_chat_button mdc-icon-button"></button>`.buildElement(),Object(n.g)(this.newChatButton)),this.container.appendChild(this.newChatButton)}buildChatPreviewElement(e){const t=a.a.getPeerId(e.peer),i=n.e.html`
      <div class="chats_item ${e.pinned?" chats_item-pinned":""}" data-peer-id="${t}">
        <div class="chats_item_content mdc-ripple-surface">
          <div class="chats_item_photo"></div>
          <div class="chats_item_text"></div>        
        </div>
      </div>
    `.buildElement();if(this.renderChatPreviewContent(i,e),this.loadChatPhoto(i,e),"peerUser"===e.peer._){const t=a.a.getPeerData(e.peer);this.updateChatStatus(i,t.status)}return i.addEventListener("click",this.onChatClick),i.hidden=!this.checkDialogFilter(e,this.filter),Object(n.C)()||Object(n.g)(i.firstElementChild),Object(n.f)(i,this.onChatMenu),this.chatElements.set(t,i),i}renderChatPreviewContent(e,t){const i=this.isPeerSelf(t.peer)?"Saved Messages":a.a.getPeerName(t.peer),s=this.getChatBadge(t),o=this.formatDate(t),r=a.a.messages.get(t.top_message),c=r?this.getMessagePreview(r):"";Object(n.a)(".chats_item_text",e).innerHTML=n.e.html`
      <div class="chats_item_text_row">
        <div class="chats_item_title">${i}</div>
        <div class="chats_item_date">${o}</div>
      </div>
      <div class="chats_item_text_row">
        <div class="chats_item_message">${c}</div>
        ${s}
      </div>
    `}formatDate(e){const t=a.a.messages.get(e.top_message);return t?this.formatMessageDate(t):""}formatMessageDate(e){const t=new Date(1e3*e.date),i=Date.now();return t.getTime()>i-864e5?Object(n.v)(e.date):t.getTime()>i-5184e5?Object(n.s)(e.date):Object(n.q)(e.date,{longMonth:!1,withYear:t.getFullYear()!==(new Date).getFullYear()})}getChatBadge(e){if(e.unread_count){let t="chats_item_badge chats_item_badge-unread";return e.notify_settings.mute_until&&(t+=" chats_item_badge-unread_muted"),n.e.html`<span class="${t}">${Object(n.p)(e.unread_count)}</span>`}return e.pinned?n.e.html`<span class="chats_item_badge chats_item_badge-pinned"></span>`:""}getMessagePreview(e,t=null){if("messageService"===e._)return o.a.getServiceMessageText(e);let i="";if(e.message){let s=n.e.sanitize(e.message);t&&(t=n.e.sanitize(t),s=s.replace(RegExp(t,"i"),'<span class="chats_item_message_highlight">$&</span>')),i=n.e.raw`${s}`}else{const t=o.a.getMessageContentTypeLabel(e.media);i=n.e.html`<span class="chats_item_message_content_label">${t}</span>`}if("peerChannel"===e.to_id._&&e.from_id){const t=a.a.users.get(e.from_id),n=a.a.getUserName(t,!1);i.prependHtml`<span class="chats_item_message_author_label">${n}:</span> `}else e.out&&e.from_id&&i.prependHtml`<span class="chats_item_message_author_label">You:</span> `;return i}updateChatStatus(e,t){const i=!!t&&"userStatusOnline"===t._;Object(n.a)(".chats_item_photo",e).classList.toggle("chats_item_photo-online",i)}loadChatPhoto(e,t){const i=Object(n.a)(".chats_item_photo",e);this.isPeerSelf(t.peer)?i.classList.add("chats_item_photo_saved_messages"):this.loadPeerPhoto(i,t.peer)}loadPeerPhoto(e,t,i=!1){const n=a.a.getPeerId(t),s=a.a.getPeerData(t),o=s.photo;s.deleted?this.setChatPhotoDeletedPlaceholder(e,n):o&&"chatPhotoEmpty"!==o._?FileApiManager.loadPeerPhoto(t,o,i,o.dc_id,{priority:10,cache:!0}).then(t=>{e.innerHTML=`<img src="${t}" alt class="peer_photo_img">`}).catch(t=>{console.warn("chat photo load error",t),this.setChatPhotoPlaceholder(e,n)}):this.setChatPhotoPlaceholder(e,n)}setChatPhotoDeletedPlaceholder(e){e.style.backgroundColor="#ACB2B6",e.innerHTML='<div class="peer_photo_deleted_placeholder"></div>'}setChatPhotoPlaceholder(e,t){const i=a.a.getPeerById(t),n=a.a.getPeerName(i);e.style.backgroundColor=this.getPlaceholderColor(t),e.innerHTML='<div class="peer_photo_placeholder">'+n.charAt(0)+"</div>"}getPlaceholderColor(e){const t=["#FFBF69","#247BA0","#EA526F","#2EC4B6","#F79256","#662C91","#049A8F","#06D6A0","#F25C54"];return t[e%t.length]}isPeerSelf(e){return"peerUser"===e._&&e.user_id===s.a.getAuthUserId()}onChatMenuAction(e,t){switch(t){case"pin":case"unpin":u.toggleDialogPin(e,"pin"===t);break;case"mute":case"unmute":u.toggleDialogMute(e,"mute"===t);break;case"archive":case"unarchive":u.toggleDialogArchive(e,"archive"===t);break;case"delete":confirm("Are you sure?")}}};window.ChatsController=m},function(e,t,i){"use strict";
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
var n;function s(e,t){if(void 0===e&&(e=window),void 0===t&&(t=!1),void 0===n||t){var i=!1;try{e.document.addEventListener("test",(function(){}),{get passive(){return i=!0}})}catch(e){}n=i}return!!n&&{passive:!0}}i.d(t,"a",(function(){return s}))},function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i(16),s=i(0),a=i(8);function o(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const r=new class{constructor(){o(this,"close",()=>{this.state.streamingProcess&&this.state.streamingProcess.stop(),this.state=null,this.dom.author.innerHTML="",this.dom.content.innerHTML="",this.container.hidden=!0,document.removeEventListener("keyup",this.onKeyUp)}),o(this,"onKeyUp",e=>{27===e.keyCode&&this.close()}),o(this,"download",()=>{this.state.url&&Object(s.n)(this.state.url,this.getDownloadFilename(this.state.object))}),o(this,"onContentClick",e=>{e.target===e.currentTarget&&this.close()}),o(this,"onContentTouchStart",e=>{e.preventDefault();let{pageY:t}=Object(s.x)(e),i=0;const n=e=>{const{pageY:n}=Object(s.x)(e),a=n-t;i=Math.min(1,Math.pow(Math.abs(a),2)/1e4),this.dom.content.style.transform=`translateY(${a}px)`,this.container.style.backgroundColor=`rgba(0, 0, 0, ${.9-.9*i})`,this.dom.author.style.opacity=.5-.5*i,this.dom.actions.style.opacity=1-i},a=()=>{1===i&&this.close(),this.dom.content.removeEventListener("touchmove",n),this.dom.content.removeEventListener("touchend",a),this.dom.content.style.transform="",this.dom.content.style.transition="",this.container.style.backgroundColor="",this.dom.author.style.opacity="",this.dom.actions.style.opacity=""};this.dom.content.addEventListener("touchmove",n),this.dom.content.addEventListener("touchend",a),this.dom.content.style.transition="none"}),this.container=s.e.html`
      <div class="media_view" hidden>
        <div class="media_view_author" data-js-label="author"></div>
        <div class="media_view_actions"  data-js-label="controls">
          <button class="media_view_actions_item media_view_actions_item-delete" data-js-label="button_delete"></button>
          <button class="media_view_actions_item media_view_actions_item-forward" data-js-label="button_forward"></button>
          <button class="media_view_actions_item media_view_actions_item-download" data-js-label="button_download"></button>
          <button class="media_view_actions_item media_view_actions_item-close" data-js-label="button_close"></button>
        </div>
        <div class="media_view_content" data-js-label="content"></div>
        <div class="media_view_caption" data-js-label="caption"></div>
      </div>
    `.buildElement(),this.dom=Object(s.y)(this.container),this.dom.button_download.addEventListener("click",this.download),this.dom.button_close.addEventListener("click",this.close),this.dom.content.addEventListener("click",this.onContentClick),this.dom.content.addEventListener("touchstart",this.onContentTouchStart),document.body.appendChild(this.container)}showPhoto(e,t,i){const s=e.sizes[e.sizes.length-1],a=this.initLoading(e,t,i,s.size),o=this.state.abortController,r=this.state.onProgress;n.a.loadPhoto(e,s.type,{onProgress:r,signal:o.signal}).then(e=>{const t=`<img class="media_view_content_image" src="${e}">`;this.onLoaded(e,t,a)}).catch(e=>{console.log(e)})}showGif(e,t,i){const s=this.initLoading(e,t,i,e.size),a=this.state.abortController,o=this.state.onProgress;n.a.loadDocument(e,{onProgress:o,signal:a.signal}).then(e=>{const t=`<video class="media_view_content_gif" src="${e}" playsinline autoplay loop></video>`;this.onLoaded(e,t,s)}).catch(e=>{console.log(e)})}showVideo(e,t,s){const o=this.initLoading(e,t,s,e.size),r=this.state.abortController,c=this.state.onProgress,d=a.a.getDocumentAttributes(e),l=d.duration<30;d.supports_streaming&&window.MediaSource&&e.size>524288?i.e(10).then(i.bind(null,32)).then(({VideoStreamingProcess:t})=>{const i=new t(e,c);return this.state.streamingProcess=i,i.load()}).then(e=>{o===this.state&&(e.classList.add("media_view_content_video"),e.playsinline=!0,e.autoplay=!0,e.controls=!0,e.loop=l,e.play(),this.onLoaded(e.src,e,o))}):n.a.loadDocument(e,{onProgress:c,signal:r.signal}).then(e=>{const t=`<video class="media_view_content_video" src="${e}" playsinline autoplay controls ${l?"loop":""}></video>`;this.onLoaded(e,t,o)}).catch(e=>{console.log(e)})}initLoading(e,t,i,n){this.abort();const a={object:e,message:i,abortController:new AbortController},o=s.e.html`
      <div class="message_media_progress">
        <svg class="message_media_progress_svg" viewBox="0 0 36 36" xmlns="http://www.w3.org/2000/svg">
          <path class="message_media_progress_path" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"/>
        </svg>
      </div>
    `.buildElement(),r=Object(s.a)(".message_media_progress_path",o);return o.addEventListener("click",e=>{e.stopPropagation(),a.aborted=!0,a.abortController.abort()}),t.appendChild(o),t.classList.add("message_media_thumb-loading"),a.onDone=()=>{o.remove(),t.classList.remove("message_media_thumb-loading"),a.aborted&&(this.state=null)},a.onProgress=e=>{const t=Math.round(100*Math.max(0,Math.min(1,e/n)));100===t?a.onDone():r.style.strokeDasharray=`${t}, 100`},a.abortController.signal.addEventListener("abort",a.onDone),this.state=a,a}onLoaded(e,t,i){i===this.state&&("string"==typeof t?this.dom.content.innerHTML=t:this.dom.content.appendChild(t),this.dom.caption.innerHTML=s.e.html`<div class="media_view_caption_text">${i.message.message||""}</div>`,this.renderAuthor(),this.state.url=e,this.state.onDone(),this.container.hidden=!1,document.addEventListener("keyup",this.onKeyUp))}renderAuthor(){const e=this.state.message;let t,i;if(e.fwd_from){const n=e.fwd_from;t=MessagesApiManager.getPeerById(n.from_id||n.channel_id),i=n.date}else t=MessagesApiManager.getMessageAuthorPeer(e),i=e.date;this.dom.author.innerHTML=s.e.html`
      <div class="media_view_author_photo"></div>
      <div class="media_view_author_description">
        <div class="media_view_author_name">${MessagesApiManager.getPeerName(t)}</div>
        <div class="media_view_author_date">${MessagesController.formatMessageDateTime(i)}</div>
      </div>
    `;const n=Object(s.a)(".media_view_author_photo",this.dom.author);ChatsController.loadPeerPhoto(n,t)}abort(){this.state&&this.state.abortController&&this.state.abortController.abort(),this.state=null}isOpen(){return!this.container.hidden}getDownloadFilename(e){if("document"===e._){const t=a.a.getDocumentAttributes(e);if(t.file_name)return t.file_name}return e._+e.id}};window.MediaViewController=r},function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i(2),s=i(6),a=i(12),o=i(10),r=i(17),c=i(18),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.disabled=!1,t}return n.b(t,e),t.attachTo=function(e,i){void 0===i&&(i={isUnbounded:void 0});var n=new t(e);return void 0!==i.isUnbounded&&(n.unbounded=i.isUnbounded),n},t.createAdapter=function(e){return{addClass:function(t){return e.root_.classList.add(t)},browserSupportsCssVars:function(){return c.b(window)},computeBoundingRect:function(){return e.root_.getBoundingClientRect()},containsEventTarget:function(t){return e.root_.contains(t)},deregisterDocumentInteractionHandler:function(e,t){return document.documentElement.removeEventListener(e,t,Object(a.a)())},deregisterInteractionHandler:function(t,i){return e.root_.removeEventListener(t,i,Object(a.a)())},deregisterResizeHandler:function(e){return window.removeEventListener("resize",e)},getWindowPageOffset:function(){return{x:window.pageXOffset,y:window.pageYOffset}},isSurfaceActive:function(){return Object(o.b)(e.root_,":active")},isSurfaceDisabled:function(){return Boolean(e.disabled)},isUnbounded:function(){return Boolean(e.unbounded)},registerDocumentInteractionHandler:function(e,t){return document.documentElement.addEventListener(e,t,Object(a.a)())},registerInteractionHandler:function(t,i){return e.root_.addEventListener(t,i,Object(a.a)())},registerResizeHandler:function(e){return window.addEventListener("resize",e)},removeClass:function(t){return e.root_.classList.remove(t)},updateCssVariable:function(t,i){return e.root_.style.setProperty(t,i)}}},Object.defineProperty(t.prototype,"unbounded",{get:function(){return Boolean(this.unbounded_)},set:function(e){this.unbounded_=Boolean(e),this.setUnbounded_()},enumerable:!0,configurable:!0}),t.prototype.activate=function(){this.foundation_.activate()},t.prototype.deactivate=function(){this.foundation_.deactivate()},t.prototype.layout=function(){this.foundation_.layout()},t.prototype.getDefaultFoundation=function(){return new r.a(t.createAdapter(this))},t.prototype.initialSyncWithDOM=function(){var e=this.root_;this.unbounded="mdcRippleIsUnbounded"in e.dataset},t.prototype.setUnbounded_=function(){this.foundation_.setUnbounded(Boolean(this.unbounded_))},t}(s.a)},function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"c",(function(){return a})),i.d(t,"b",(function(){return o}));const n={smileys:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],animals:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],food:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],sports:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],travel:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],objects:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","0","1","2","3","4","5","6","7","8","9","","","#","*","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],flags:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},s=/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g;function a(e){return e.match(s)}function o(e){"UK"===e&&(e="GB");const t=e.codePointAt(0)-65+127462,i=e.codePointAt(1)-65+127462;return String.fromCodePoint(t,i)}},function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i(0),s=i(19),a=i(1);function o(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const r=1024,c=new class{constructor(){o(this,"blobUrls",new Map),o(this,"requests",new Map),o(this,"queue",[]),o(this,"inProgress",0),o(this,"connections",new Map)}getBlobUrl(e){return URL.createObjectURL(e)}queueWait(e){if(this.inProgress++<4)return Promise.resolve();const t=this.queue.findIndex(t=>t.priority<e),i=Object(n.w)();return this.queue.splice(t,0,{priority:e,deferred:i}),i.promise}queueDone(){this.inProgress--;const e=this.queue.shift();e&&e.deferred.resolve()}getConnection(e){let t;if(this.connections.has(e)){const i=this.connections.get(e);t=i.connection,i.processCount++}else t=new s.a({dcId:e,upload:!0}),this.connections.set(e,{connection:t,processCount:1});return t}connectionDone(e){const t=e.getDcId(),i=this.connections.get(t);i&&--i.processCount||(this.connections.delete(t),e.destroy())}loadFile(e,t,i){const n=this.getDbFileName(e);if(this.requests.has(n))return this.requests.get(n);const s=this.loadFileRequest(e,t,i);return this.requests.set(n,s),s.finally(()=>{this.requests.delete(n)})}async loadFileRequest(e,t,{priority:i=1,cache:s=!1,mimeType:a="",size:o=0,onProgress:r,signal:d}={}){const l=this.getDbFileName(e);if(this.blobUrls.has(l))return this.blobUrls.get(l);let u;if(s)try{Date.now();u=await this.getFromCache(l)}catch(e){console.warn(e)}if(!u){const c=[],h=this.getConnection(t);try{Date.now();await this.queueWait(i);Date.now();for(let t=0,i=0;;t+=262144){if(d&&d.aborted)throw new Error("File download aborted");const n=await h.callMethod("upload.getFile",{location:e,offset:t,limit:262144});if(c.push(new Blob([n.bytes])),i+=n.bytes.byteLength,r&&r(i,n.bytes,t),a||(a=this.getMimeType(n.type)),o&&i>=o||!o&&n.bytes.byteLength<262144)break}}finally{this.queueDone(),this.connectionDone(h)}if(u=new Blob(c,{type:a}),"image/webp"===a){await Object(n.j)()||(u=await Object(n.k)(await Object(n.h)(u)))}if(s)try{this.saveToCache(l,u)}catch(e){console.warn(e)}}const h=c.getBlobUrl(u);return this.blobUrls.set(l,h),h}getMimeType(e){switch(e._){case"storage.fileJpeg":return"image/jpeg";case"storage.fileGif":return"image/gif";case"storage.filePng":return"image/png";case"storage.filePdf":return"application/pdf";case"storage.fileMp3":return"audio/mpeg";case"storage.fileMov":return"video/quicktime";case"storage.fileMp4":return"video/mp4";case"storage.fileWebp":return"image/webp";default:return""}}async getFromCache(e){const t=(await this.openDb()).transaction(["files"],"readonly").objectStore("files").get(e);return this.getDbRequestPromise(t)}async saveToCache(e,t){const i=(await this.openDb()).transaction(["files"],"readwrite").objectStore("files").put(t,e);return this.getDbRequestPromise(i)}async openDb(){return this.db?this.db:new Promise((e,t)=>{const i=indexedDB.open("telegram_cache",2);i.onerror=e=>{t(e.target.error)},i.onsuccess=t=>{this.db=t.target.result,e(this.db)},i.onupgradeneeded=t=>{const i=t.target.result;i.createObjectStore("files"),t.target.transaction.oncomplete=()=>{this.db=i,e(this.db)}}})}getDbFileName(e){return e._+(e.id||e.volume_id+e.local_id)+(e.thumb_size||"")}getDbRequestPromise(e){return new Promise((t,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{t(e.target.result)}})}loadPeerPhoto(e,t,i,n,s){const o=i?t.photo_big:t.photo_small,r={_:"inputPeerPhotoFileLocation",peer:a.a.getInputPeer(e),volume_id:o.volume_id,local_id:o.local_id};return i&&(r.big=!0),this.loadFile(r,n,s)}loadPhoto(e,t,i={}){const n={_:"inputPhotoFileLocation",id:e.id,access_hash:e.access_hash,file_reference:e.file_reference,thumb_size:t};return this.loadFile(n,e.dc_id,i)}loadDocumentThumb(e,t,i={}){const n={_:"inputDocumentFileLocation",id:e.id,access_hash:e.access_hash,file_reference:e.file_reference,thumb_size:t};return"v"===t&&(i.mimeType="video/mp4"),this.loadFile(n,e.dc_id,i)}loadDocument(e,t={}){const i={_:"inputDocumentFileLocation",id:e.id,access_hash:e.access_hash,file_reference:e.file_reference};return Object.assign(t,{mimeType:e.mime_type,size:e.size}),this.loadFile(i,e.dc_id,t)}async loadDocumentBytes(e,t,i){const n={_:"inputDocumentFileLocation",id:e.id,access_hash:e.access_hash,file_reference:e.file_reference},s=this.getConnection(e.dc_id);try{await this.queueWait(1);const e=t-t%r;let a=i+t-e;a=Math.ceil(a/r)*r,a=Math.min(a,1048576-e%1048576);const o=await s.callMethod("upload.getFile",{location:n,offset:e,limit:a,precise:!0}),c=t-e;return new Uint8Array(o.bytes.subarray(c,c+i))}finally{this.queueDone(),this.connectionDone(s)}}loadStickerSetThumb(e,t={}){const i={_:"inputStickerSetThumb",stickerset:{_:"inputStickerSetID",id:e.id,access_hash:e.access_hash},volume_id:e.thumb.location.volume_id,local_id:e.thumb.location.local_id};return this.loadFile(i,e.thumb_dc_id,t)}async uploadFile(e,t="",{onProgress:i,signal:s}={}){const a=Object(n.E)(),o=e.size>10485760,r=Math.ceil(e.size/262144),c=this.getConnection(ApiClient.getDcId());let d=!1;s&&s.addEventListener("abort",()=>d=!0);try{await this.queueWait(100);for(let t=0,s=0;s<e.size;t++,s+=262144){if(d)throw new Error("File upload aborted");await c.callMethod(o?"upload.saveBigFilePart":"upload.saveFilePart",{file_id:a,file_part:t,file_total_parts:r,bytes:await Object(n.h)(e.slice(s,s+262144))}),i&&i(Math.min(e.size,s+262144))}}finally{this.queueDone(),this.connectionDone(c)}return{_:o?"inputFileBig":"inputFile",id:a,parts:r,name:t,md5_checksum:""}}};window.FileApiManager=c},function(e,t,i){"use strict";var n=i(2),s=i(5),a={BG_FOCUSED:"mdc-ripple-upgraded--background-focused",FG_ACTIVATION:"mdc-ripple-upgraded--foreground-activation",FG_DEACTIVATION:"mdc-ripple-upgraded--foreground-deactivation",ROOT:"mdc-ripple-upgraded",UNBOUNDED:"mdc-ripple-upgraded--unbounded"},o={VAR_FG_SCALE:"--mdc-ripple-fg-scale",VAR_FG_SIZE:"--mdc-ripple-fg-size",VAR_FG_TRANSLATE_END:"--mdc-ripple-fg-translate-end",VAR_FG_TRANSLATE_START:"--mdc-ripple-fg-translate-start",VAR_LEFT:"--mdc-ripple-left",VAR_TOP:"--mdc-ripple-top"},r={DEACTIVATION_TIMEOUT_MS:225,FG_DEACTIVATION_MS:150,INITIAL_ORIGIN_SCALE:.6,PADDING:10,TAP_DELAY_MS:300},c=i(18);i.d(t,"a",(function(){return h}));
/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
var d=["touchstart","pointerdown","mousedown","keydown"],l=["touchend","pointerup","mouseup","contextmenu"],u=[],h=function(e){function t(i){var s=e.call(this,n.a({},t.defaultAdapter,i))||this;return s.activationAnimationHasEnded_=!1,s.activationTimer_=0,s.fgDeactivationRemovalTimer_=0,s.fgScale_="0",s.frame_={width:0,height:0},s.initialSize_=0,s.layoutFrame_=0,s.maxRadius_=0,s.unboundedCoords_={left:0,top:0},s.activationState_=s.defaultActivationState_(),s.activationTimerCallback_=function(){s.activationAnimationHasEnded_=!0,s.runDeactivationUXLogicIfReady_()},s.activateHandler_=function(e){return s.activate_(e)},s.deactivateHandler_=function(){return s.deactivate_()},s.focusHandler_=function(){return s.handleFocus()},s.blurHandler_=function(){return s.handleBlur()},s.resizeHandler_=function(){return s.layout()},s}return n.b(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return a},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return o},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return r},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},browserSupportsCssVars:function(){return!0},computeBoundingRect:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},containsEventTarget:function(){return!0},deregisterDocumentInteractionHandler:function(){},deregisterInteractionHandler:function(){},deregisterResizeHandler:function(){},getWindowPageOffset:function(){return{x:0,y:0}},isSurfaceActive:function(){return!0},isSurfaceDisabled:function(){return!0},isUnbounded:function(){return!0},registerDocumentInteractionHandler:function(){},registerInteractionHandler:function(){},registerResizeHandler:function(){},removeClass:function(){},updateCssVariable:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){var e=this,i=this.supportsPressRipple_();if(this.registerRootHandlers_(i),i){var n=t.cssClasses,s=n.ROOT,a=n.UNBOUNDED;requestAnimationFrame((function(){e.adapter_.addClass(s),e.adapter_.isUnbounded()&&(e.adapter_.addClass(a),e.layoutInternal_())}))}},t.prototype.destroy=function(){var e=this;if(this.supportsPressRipple_()){this.activationTimer_&&(clearTimeout(this.activationTimer_),this.activationTimer_=0,this.adapter_.removeClass(t.cssClasses.FG_ACTIVATION)),this.fgDeactivationRemovalTimer_&&(clearTimeout(this.fgDeactivationRemovalTimer_),this.fgDeactivationRemovalTimer_=0,this.adapter_.removeClass(t.cssClasses.FG_DEACTIVATION));var i=t.cssClasses,n=i.ROOT,s=i.UNBOUNDED;requestAnimationFrame((function(){e.adapter_.removeClass(n),e.adapter_.removeClass(s),e.removeCssVars_()}))}this.deregisterRootHandlers_(),this.deregisterDeactivationHandlers_()},t.prototype.activate=function(e){this.activate_(e)},t.prototype.deactivate=function(){this.deactivate_()},t.prototype.layout=function(){var e=this;this.layoutFrame_&&cancelAnimationFrame(this.layoutFrame_),this.layoutFrame_=requestAnimationFrame((function(){e.layoutInternal_(),e.layoutFrame_=0}))},t.prototype.setUnbounded=function(e){var i=t.cssClasses.UNBOUNDED;e?this.adapter_.addClass(i):this.adapter_.removeClass(i)},t.prototype.handleFocus=function(){var e=this;requestAnimationFrame((function(){return e.adapter_.addClass(t.cssClasses.BG_FOCUSED)}))},t.prototype.handleBlur=function(){var e=this;requestAnimationFrame((function(){return e.adapter_.removeClass(t.cssClasses.BG_FOCUSED)}))},t.prototype.supportsPressRipple_=function(){return this.adapter_.browserSupportsCssVars()},t.prototype.defaultActivationState_=function(){return{activationEvent:void 0,hasDeactivationUXRun:!1,isActivated:!1,isProgrammatic:!1,wasActivatedByPointer:!1,wasElementMadeActive:!1}},t.prototype.registerRootHandlers_=function(e){var t=this;e&&(d.forEach((function(e){t.adapter_.registerInteractionHandler(e,t.activateHandler_)})),this.adapter_.isUnbounded()&&this.adapter_.registerResizeHandler(this.resizeHandler_)),this.adapter_.registerInteractionHandler("focus",this.focusHandler_),this.adapter_.registerInteractionHandler("blur",this.blurHandler_)},t.prototype.registerDeactivationHandlers_=function(e){var t=this;"keydown"===e.type?this.adapter_.registerInteractionHandler("keyup",this.deactivateHandler_):l.forEach((function(e){t.adapter_.registerDocumentInteractionHandler(e,t.deactivateHandler_)}))},t.prototype.deregisterRootHandlers_=function(){var e=this;d.forEach((function(t){e.adapter_.deregisterInteractionHandler(t,e.activateHandler_)})),this.adapter_.deregisterInteractionHandler("focus",this.focusHandler_),this.adapter_.deregisterInteractionHandler("blur",this.blurHandler_),this.adapter_.isUnbounded()&&this.adapter_.deregisterResizeHandler(this.resizeHandler_)},t.prototype.deregisterDeactivationHandlers_=function(){var e=this;this.adapter_.deregisterInteractionHandler("keyup",this.deactivateHandler_),l.forEach((function(t){e.adapter_.deregisterDocumentInteractionHandler(t,e.deactivateHandler_)}))},t.prototype.removeCssVars_=function(){var e=this,i=t.strings;Object.keys(i).forEach((function(t){0===t.indexOf("VAR_")&&e.adapter_.updateCssVariable(i[t],null)}))},t.prototype.activate_=function(e){var t=this;if(!this.adapter_.isSurfaceDisabled()){var i=this.activationState_;if(!i.isActivated){var n=this.previousActivationEvent_;if(!(n&&void 0!==e&&n.type!==e.type))i.isActivated=!0,i.isProgrammatic=void 0===e,i.activationEvent=e,i.wasActivatedByPointer=!i.isProgrammatic&&(void 0!==e&&("mousedown"===e.type||"touchstart"===e.type||"pointerdown"===e.type)),void 0!==e&&u.length>0&&u.some((function(e){return t.adapter_.containsEventTarget(e)}))?this.resetActivationState_():(void 0!==e&&(u.push(e.target),this.registerDeactivationHandlers_(e)),i.wasElementMadeActive=this.checkElementMadeActive_(e),i.wasElementMadeActive&&this.animateActivation_(),requestAnimationFrame((function(){u=[],i.wasElementMadeActive||void 0===e||" "!==e.key&&32!==e.keyCode||(i.wasElementMadeActive=t.checkElementMadeActive_(e),i.wasElementMadeActive&&t.animateActivation_()),i.wasElementMadeActive||(t.activationState_=t.defaultActivationState_())})))}}},t.prototype.checkElementMadeActive_=function(e){return void 0===e||"keydown"!==e.type||this.adapter_.isSurfaceActive()},t.prototype.animateActivation_=function(){var e=this,i=t.strings,n=i.VAR_FG_TRANSLATE_START,s=i.VAR_FG_TRANSLATE_END,a=t.cssClasses,o=a.FG_DEACTIVATION,r=a.FG_ACTIVATION,c=t.numbers.DEACTIVATION_TIMEOUT_MS;this.layoutInternal_();var d="",l="";if(!this.adapter_.isUnbounded()){var u=this.getFgTranslationCoordinates_(),h=u.startPoint,m=u.endPoint;d=h.x+"px, "+h.y+"px",l=m.x+"px, "+m.y+"px"}this.adapter_.updateCssVariable(n,d),this.adapter_.updateCssVariable(s,l),clearTimeout(this.activationTimer_),clearTimeout(this.fgDeactivationRemovalTimer_),this.rmBoundedActivationClasses_(),this.adapter_.removeClass(o),this.adapter_.computeBoundingRect(),this.adapter_.addClass(r),this.activationTimer_=setTimeout((function(){return e.activationTimerCallback_()}),c)},t.prototype.getFgTranslationCoordinates_=function(){var e,t=this.activationState_,i=t.activationEvent;return{startPoint:e={x:(e=t.wasActivatedByPointer?Object(c.a)(i,this.adapter_.getWindowPageOffset(),this.adapter_.computeBoundingRect()):{x:this.frame_.width/2,y:this.frame_.height/2}).x-this.initialSize_/2,y:e.y-this.initialSize_/2},endPoint:{x:this.frame_.width/2-this.initialSize_/2,y:this.frame_.height/2-this.initialSize_/2}}},t.prototype.runDeactivationUXLogicIfReady_=function(){var e=this,i=t.cssClasses.FG_DEACTIVATION,n=this.activationState_,s=n.hasDeactivationUXRun,a=n.isActivated;(s||!a)&&this.activationAnimationHasEnded_&&(this.rmBoundedActivationClasses_(),this.adapter_.addClass(i),this.fgDeactivationRemovalTimer_=setTimeout((function(){e.adapter_.removeClass(i)}),r.FG_DEACTIVATION_MS))},t.prototype.rmBoundedActivationClasses_=function(){var e=t.cssClasses.FG_ACTIVATION;this.adapter_.removeClass(e),this.activationAnimationHasEnded_=!1,this.adapter_.computeBoundingRect()},t.prototype.resetActivationState_=function(){var e=this;this.previousActivationEvent_=this.activationState_.activationEvent,this.activationState_=this.defaultActivationState_(),setTimeout((function(){return e.previousActivationEvent_=void 0}),t.numbers.TAP_DELAY_MS)},t.prototype.deactivate_=function(){var e=this,t=this.activationState_;if(t.isActivated){var i=n.a({},t);t.isProgrammatic?(requestAnimationFrame((function(){return e.animateDeactivation_(i)})),this.resetActivationState_()):(this.deregisterDeactivationHandlers_(),requestAnimationFrame((function(){e.activationState_.hasDeactivationUXRun=!0,e.animateDeactivation_(i),e.resetActivationState_()})))}},t.prototype.animateDeactivation_=function(e){var t=e.wasActivatedByPointer,i=e.wasElementMadeActive;(t||i)&&this.runDeactivationUXLogicIfReady_()},t.prototype.layoutInternal_=function(){var e=this;this.frame_=this.adapter_.computeBoundingRect();var i=Math.max(this.frame_.height,this.frame_.width);this.maxRadius_=this.adapter_.isUnbounded()?i:Math.sqrt(Math.pow(e.frame_.width,2)+Math.pow(e.frame_.height,2))+t.numbers.PADDING;var n=Math.floor(i*t.numbers.INITIAL_ORIGIN_SCALE);this.adapter_.isUnbounded()&&n%2!=0?this.initialSize_=n-1:this.initialSize_=n,this.fgScale_=""+this.maxRadius_/this.initialSize_,this.updateLayoutCssVars_()},t.prototype.updateLayoutCssVars_=function(){var e=t.strings,i=e.VAR_FG_SIZE,n=e.VAR_LEFT,s=e.VAR_TOP,a=e.VAR_FG_SCALE;this.adapter_.updateCssVariable(i,this.initialSize_+"px"),this.adapter_.updateCssVariable(a,this.fgScale_),this.adapter_.isUnbounded()&&(this.unboundedCoords_={left:Math.round(this.frame_.width/2-this.initialSize_/2),top:Math.round(this.frame_.height/2-this.initialSize_/2)},this.adapter_.updateCssVariable(n,this.unboundedCoords_.left+"px"),this.adapter_.updateCssVariable(s,this.unboundedCoords_.top+"px"))},t}(s.a)},function(e,t,i){"use strict";var n;function s(e,t){void 0===t&&(t=!1);var i=e.CSS,s=n;if("boolean"==typeof n&&!t)return n;if(!(i&&"function"==typeof i.supports))return!1;var a=i.supports("--css-vars","yes"),o=i.supports("(--css-vars: yes)")&&i.supports("color","#00000000");return s=!(!a&&!o)&&!function(e){var t=e.document,i=t.createElement("div");i.className="mdc-ripple-surface--test-edge-var-bug",t.head.appendChild(i);var n=e.getComputedStyle(i),s=null!==n&&"solid"===n.borderTopStyle;return i.parentNode&&i.parentNode.removeChild(i),s}(e),t||(n=s),s}function a(e,t,i){if(!e)return{x:0,y:0};var n,s,a=t.x,o=t.y,r=a+i.left,c=o+i.top;if("touchstart"===e.type){var d=e;n=d.changedTouches[0].pageX-r,s=d.changedTouches[0].pageY-c}else{var l=e;n=l.pageX-r,s=l.pageY-c}return{x:n,y:s}}i.d(t,"b",(function(){return s})),i.d(t,"a",(function(){return a}))},function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i(4),s=i(0);function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class o{constructor(e={}){a(this,"connectionReady",!1),a(this,"connectionInited",!1),a(this,"emitter",new s.c),a(this,"onUpdates",e=>{this.emitter.trigger("updates",e)}),this.options=e,this.connectionDefered=Object(s.w)(),i.e(0).then(i.bind(null,27)).then(({MTProto:t})=>{this.updateConnectionState("connecting"),this.mtproto=new t({dcId:e.dcId,onConnectionReady:()=>{this.init(),this.updateConnectionState("connected")},onUpdates:this.onUpdates})})}exportAuthorization(e){return ApiClient.callMethod("auth.exportAuthorization",{dc_id:e})}async importAuthorization({id:e,bytes:t}){await this.callMethod("auth.importAuthorization",{id:e,bytes:t},!0)}updateConnectionState(e){this.emitter.trigger("updateConnectionState",e)}async init(){if(this.options.upload&&!this.mtproto.hasApiAuth())try{const e=await ApiClient.exportAuthorization(this.options.dcId);await this.importAuthorization(e)}catch(e){return void this.connectionDefered.reject(e)}this.connectionReady=!0,this.connectionDefered.resolve()}destroy(){this.mtproto.destroy()}wrapCall(e,t){const i=this.mtproto.getSerializer({api:!0,upload:this.options.upload});if(!this.connectionInited){const e=this.mtproto.getSchema();i.storeInt(3667594509,"invokeWithLayer"),i.storeInt(e.API.layer,"layer"),i.storeInt(3343392166,"initConnection"),i.storeInt(n.a.API_ID,"api_id"),i.storeString(function(){const e=!!document.documentMode,t=!e&&!!window.StyleMedia;if(navigator.userAgent.includes("Chrome")&&!t)return"Chrome";if(navigator.userAgent.includes("Safari")&&!t)return"Safari";if(navigator.userAgent.includes("Firefox"))return"Firefox";if(navigator.userAgent.includes("MSIE")||e)return"IE";if(t)return"Edge";return"Unknown"}(),"device_model"),i.storeString(function(){if(window.navigator.userAgent.includes("Windows NT 10.0"))return"Windows 10";if(window.navigator.userAgent.includes("Windows NT 6.2"))return"Windows 8";if(window.navigator.userAgent.includes("Windows NT 6.1"))return"Windows 7";if(window.navigator.userAgent.includes("Windows NT 6.0"))return"Windows Vista";if(window.navigator.userAgent.includes("Windows NT 5.1"))return"Windows XP";if(window.navigator.userAgent.includes("Windows NT 5.0"))return"Windows 2000";if(window.navigator.userAgent.includes("Mac"))return"Mac/iOS";if(window.navigator.userAgent.includes("X11"))return"UNIX";if(window.navigator.userAgent.includes("Linux"))return"Linux";return"Unknown"}(),"system_version"),i.storeString(n.a.APP_VERSION,"app_version"),i.storeString(r(),"system_lang_code"),i.storeString("","lang_pack"),i.storeString(r(),"lang_code"),this.connectionInited=!0}const s={api:!0,source:e};return s.resultType=i.storeMethod(e,t),this.mtproto.prepareMessageFromBuffer(i.getBuffer(),s)}async callMethod(e,t={},i=!1){this.connectionReady||i||await this.connectionDefered.promise;const s=this.wrapCall(e,t),a=await this.mtproto.pushMessage(s);return"rpc_error"===a._?303===a.error_code?(await this.migrateDC(this.getMigrateErrorDcId(a.error_message)),this.callMethod(e,t)):("AUTH_KEY_UNREGISTERED"===a.error_message&&(this.options.upload||n.a.logOutDone()),console.trace(a),Promise.reject(a)):("auth.authorization"===a._&&this.mtproto.saveApiAuth(),a)}getDcId(){return this.mtproto.dcId}migrateDC(e){return this.connectionInited=!1,this.mtproto.migrateDC(e)}getMigrateErrorDcId(e){return+e.match(/\d+$/)[0]}getServerTimeOffset(){return this.mtproto.timeOffset}getServerTimeNow(){return Math.floor(Date.now()/1e3)+this.getServerTimeOffset()}}function r(){return navigator.language||"en"}},function(e,t,i){"use strict";var n=i(0),s=i(1),a=i(7),o=i(9);function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const c=new class{constructor(){r(this,"onMenuItemClick",e=>{const t=e.currentTarget.dataset.type;if("media"===t||"file"===t){const e="media"===t,i=document.createElement("input");i.type="file",i.accept=e?"image/*, video/*":"*/*",i.multiple=!0,i.click(),window.input=i,i.onchange=()=>{this.onFilesSelected(i.files,e),this.fileInput=null},this.fileInput=i}}),r(this,"onMenuButtonClick",()=>{this.isMenuOpen()||this.showMenu()}),r(this,"onMenuMouseEnter",()=>{clearTimeout(this.hideTimeout),this.isMenuOpen()||this.showMenu()}),r(this,"onMenuMouseLeave",()=>{this.hideTimeout=setTimeout(()=>{this.isMenuOpen()&&this.hideMenu(),this.hideTimeout=null},500)}),r(this,"onGlobalClick",e=>{this.menu.contains(e.target)||this.hideMenu()})}init(){this.menu=n.e.html`
      <div class="mdc-menu mdc-menu-surface messages_form_media_menu" hidden>
        <ul class="mdc-list" role="menu" aria-hidden="true" aria-orientation="vertical" tabindex="-1">
          <li class="mdc-list-item messages_form_media_menu_item messages_form_media_menu_item-media" data-type="media" role="menuitem">
            <span class="mdc-list-item__text">Photo or Video</span>
          </li>
          <li class="mdc-list-item messages_form_media_menu_item messages_form_media_menu_item-file" data-type="file" role="menuitem">
            <span class="mdc-list-item__text">Document</span>
          </li>
          <li class="mdc-list-item messages_form_media_menu_item messages_form_media_menu_item-poll" data-type="poll" role="menuitem">
            <span class="mdc-list-item__text">Poll</span>
          </li>
        </ul>
      </div>
    `.buildElement();for(const e of Object(n.a)(".mdc-list",this.menu).children)Object(n.g)(e),e.addEventListener("click",this.onMenuItemClick)}bind(e){e.parentNode.append(this.menu),e.addEventListener("mousedown",this.onMenuButtonClick),e.addEventListener("mouseenter",this.onMenuMouseEnter),e.addEventListener("mouseleave",this.onMenuMouseLeave),this.menu.addEventListener("mouseenter",this.onMenuMouseEnter),this.menu.addEventListener("mouseleave",this.onMenuMouseLeave),this.menuButton=e}isMenuOpen(){return!this.menu.hidden}showMenu(){this.menu.hidden=!1,this.menuButton.classList.add("messages_form_media_button-active"),document.addEventListener("mousedown",this.onGlobalClick)}hideMenu(){this.menu.hidden=!0,this.menuButton.classList.remove("messages_form_media_button-active"),document.removeEventListener("mousedown",this.onGlobalClick)}onFilesSelected(e,t){if(e.length)if(e.length>1)for(const i of e)l.onFileSend(i,t);else l.onFileSend(e[0],t)}showFilesUploadPopup(e){let t="";for(const i of e){i.name.split(".").pop();t+=n.e.html`
        <div class="messages_upload_popup_files_item">
          <div class="messages_upload_popup_files_item_thumb"></div>
          <div class="messages_upload_popup_files_item_name">${i.name}</div>
          <div class="messages_upload_popup_files_item_size">${i.size}</div>
        </div>
      `}n.e.html`
      <div class="messages_upload_popup">
        <div class="messages_upload_popup_header">${o.a.getPlural("messages_send_n_files",e.length)}</div>
        <button class="messages_upload_popup_send_button">Send</button>
        <button class="messages_upload_popup_close_button"></button>
        ${t}
        <input class="messages_upload_popup_caption_input">
      </div>
    `.buildElement()}};function d(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}window.FileUploadPopup=c,i.d(t,"a",(function(){return l}));const l=new class{constructor(){d(this,"onInput",()=>{const e=this.dom.input;e.style.height="",e.style.height=e.scrollHeight+"px";const t=e.value.trim();this.dom.submit_button.classList.toggle("messages_form_submit_button-send",!!t),this.saveDraft(a.a.dialog.peer,t)}),d(this,"onSubmit",()=>{const e=this.dom.input.value.trim();e&&(s.a.sendMessage(a.a.dialog.peer,e),this.clear())}),d(this,"onSubmitMouseDown",e=>{const t=this.dom.submit_button,i=this.dom.cancel_button;if(e.button||t.classList.contains("messages_form_submit_button-send"))return;function s(e){let t=e.target;if("touchmove"===e.type){const i=e.changedTouches[0];t=document.elementFromPoint(i.clientX,i.clientY)}i.classList.toggle("messages_form_cancel_button-active",t===i)}let a;e.preventDefault(),t.classList.add("messages_form_submit_button-send"),i.hidden=!1,document.addEventListener(Object(n.C)()?"touchend":"mouseup",(function e(r){let c=r.target;if("touchend"===r.type){const e=r.changedTouches[0];c=document.elementFromPoint(e.clientX,e.clientY)}a&&c!==i||(o=!0);a&&a.stop(),t.classList.remove("messages_form_submit_button-send"),i.classList.remove("messages_form_cancel_button-active"),i.hidden=!0,document.removeEventListener(Object(n.C)()?"touchend":"mouseup",e),document.removeEventListener(Object(n.C)()?"touchmove":"mousemove",s)})),document.addEventListener(Object(n.C)()?"touchmove":"mousemove",s);let o=!1;this.initRecorder().then(e=>{o||((a=e).addEventListener("start",()=>{!function(){const e=a.sourceNode,i=e.context,s=i.createAnalyser();e.connect(s),function e(){const i=new Uint8Array(s.fftSize);s.getByteTimeDomainData(i);let n=0;for(let e=0;e<i.length;e++){n+=Math.abs(i[e]-128)}const a=n/i.length;t.style.setProperty("--highlight-radius",Math.round(50+10*a)+"px"),c=requestAnimationFrame(e)}(),d=setInterval(()=>{const e=i.currentTime;r.innerText=Object(n.t)(e,2)},50)}()}),a.addEventListener("stop",()=>{cancelAnimationFrame(c),t.style.setProperty("--highlight-radius",0),clearInterval(d),r.remove()}),a.addEventListener("dataAvailable",e=>{if(!o){const t=new Blob([e.detail],{type:"audio/ogg"});this.onVoiceSend(t)}}),a.start())});const r=n.e.html`<div class="messages_form_voice_timer"></div>`.buildElement();let c,d;this.dom.input.after(r)}),d(this,"onKeyDown",e=>{13!==e.keyCode||e.shiftKey||(this.onSubmit(),e.preventDefault())})}init(){this.container=Object(n.a)(".messages_form"),this.container.innerHTML='\n      <div class="messages_form_input_wrap">\n        <textarea class="messages_form_input" placeholder="Message" data-js-label="input"></textarea>\n        <button class="messages_form_emoji_button" data-js-label="emoji_button"></button>\n        <div class="mdc-menu-surface--anchor">\n          <button class="messages_form_media_button" data-js-label="media_button"></button>\n        </div>\n      </div>\n      <button class="messages_form_cancel_button mdc-icon-button" data-js-label="cancel_button" hidden></button>\n      <button class="messages_form_submit_button mdc-icon-button" data-js-label="submit_button"></button>\n    ',this.dom=Object(n.y)(this.container),this.saveDraft=Object(n.m)((e,t)=>{s.a.saveDraft(e,t)});const e=this.dom.input,t=this.dom.submit_button;e.addEventListener("input",this.onInput),e.addEventListener("change",this.onInput),e.addEventListener("keydown",this.onKeyDown),t.addEventListener("click",this.onSubmit),t.addEventListener(Object(n.C)()?"touchstart":"mousedown",this.onSubmitMouseDown),Object(n.g)(t),c.init(),c.bind(this.dom.media_button)}onShown(){this.emojiInited||(this.emojiInited=!0,i.e(7).then(i.bind(null,40)).then(({EmojiDropdown:e})=>{e.init(),e.bind(this.dom.emoji_button,this.dom.input),this.dom.input.parentNode.appendChild(e.container)})),Object(n.C)()||this.focus()}focus(){this.dom.input.focus()}clear(){this.dom.input.value&&(this.dom.input.value="",this.onInput())}async initRecorder(){window.Recorder||await Object(n.D)("./vendor/opus-recorder/recorder.min.js");const e=new Recorder({encoderPath:"./vendor/opus-recorder/encoder_worker.min.js"});return new Promise(t=>{e.addEventListener("streamReady",()=>t(e)),e.initStream()})}onStickerSend(e){const t={_:"inputMediaDocument",id:{_:"inputDocument",id:e.id,access_hash:e.access_hash,file_reference:e.file_reference}};s.a.sendMedia(a.a.dialog.peer,t)}async onVoiceSend(e){const t={_:"inputMediaUploadedDocument",file:await FileApiManager.uploadFile(e,"voice.ogg"),mime_type:"audio/ogg",attributes:[{_:"documentAttributeFilename",file_name:"voice.ogg"}]};s.a.sendMedia(a.a.dialog.peer,t)}async onFileSend(e,t=!1){const i=a.a.dialog.peer,o=new AbortController,r=this.buildFileUploadProgressElement(e.name,e.size),c=a.a.appendPendingMessage(r);Object(n.a)(".document_icon",r).addEventListener("click",()=>{o.abort(),a.a.removePendingMessage(c)});const d=await FileApiManager.uploadFile(e,e.name,{onProgress:t=>{const i=Math.round(t/e.size*100);Object(n.a)(".document_size_percent",r).innerText=`${i}%`,Object(n.a)(".document_icon_progress_path",r).style.strokeDasharray=`${i}, 100`},signal:o.signal});let l;l=t&&e.type.startsWith("image/")?{_:"inputMediaUploadedPhoto",file:d}:{_:"inputMediaUploadedDocument",file:d,mime_type:e.type,attributes:[{_:"documentAttributeFilename",file_name:e.name}]};try{await s.a.sendMedia(i,l)}catch(e){console.error(e)}a.a.removePendingMessage(c)}buildFileUploadProgressElement(e,t){return n.e.html`
      <div class="document">
        <div class="document_col">
          <div class="document_icon document_icon-loading">
            <svg class="document_icon_progress_svg" viewBox="0 0 36 36" xmlns="http://www.w3.org/2000/svg">
              <path class="document_icon_progress_path" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"/>
            </svg>
          </div>
        </div>
        <div class="document_col">
          <div class="document_filename">${e}</div>
          <div class="document_size"><span class="document_size_percent">0%</span> &middot; ${Object(n.u)(t)}</div>        
        </div>
      </div>
    `.buildElement()}};window.MessagesFormController=l},function(e,t,i){"use strict";i.r(t),i.d(t,"MessagesSearchController",(function(){return l}));var n=i(0),s=i(1),a=i(11),o=i(9),r=i(13),c=i(7);function d(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const l=new class{constructor(){d(this,"close",()=>{this._open&&(this._open=!1,this.container.parentNode.hidden=!0,this.peerId=null,document.removeEventListener("keyup",this.onKeyUp))}),d(this,"onKeyUp",e=>{27!==e.keyCode||r.a.isOpen()||this.close()}),d(this,"onInput",()=>{const e=this.input.value.trim();this.lastQuery=e,this.offsetId=0,e?this.loadResults(e):this.listWrap.innerHTML=""}),d(this,"onScroll",()=>{const e=this.listWrap;!this.loading&&!this.noMore&&this.offsetId&&e.scrollTop+e.offsetHeight>e.scrollHeight-500&&this.loadMore()}),d(this,"onMessageClick",e=>{const t=+e.currentTarget.dataset.id;c.a.jumpToMessage(t)})}show(e){if(this.container=Object(n.a)(".right_sidebar"),this.container.parentNode.hidden=!1,e===this.peerId)return;this.peerId=e,this.container.innerHTML='\n      <div class="sidebar_header">\n        <button type="button" class="sidebar_close_button mdc-icon-button"></button>\n        <input class="sidebar_search_input messages_search_input" type="text" placeholder="Start typing...">\n      </div>\n      <div class="messages_search_results_list"></div>\n    ';const t=Object(n.a)(".sidebar_close_button",this.container);Object(n.g)(t),t.addEventListener("click",this.close),this.input=Object(n.a)(".messages_search_input",this.container),this.input.addEventListener("input",Object(n.m)(this.onInput,100)),this.container.addEventListener("transitionend",()=>{this.input.focus()},{once:!0}),this.listWrap=Object(n.a)(".messages_search_results_list",this.container),this.listWrap.onscroll=this.onScroll,document.addEventListener("keyup",this.onKeyUp),this._open=!0}isOpen(){return Boolean(this._open)}async loadResults(e,t=0){const i=await ApiClient.callMethod("messages.search",{peer:s.a.getInputPeerById(this.peerId),q:e,filter:{_:"inputMessagesFilterEmpty"},offset_id:t,limit:30});s.a.updateMessages(i.messages),s.a.updateChats(i.chats),s.a.updateUsers(i.users);const n=i.count||i.messages.length;t||(this.listWrap.innerHTML="",this.renderResultsHeader(n)),this.renderResults(i.messages),i.messages.length?this.offsetId=i.messages.slice(-1)[0].id:this.offsetId=0}renderResultsHeader(e){const t=o.a.getPlural("messages_search_n_results_found",e);this.listWrap.insertAdjacentHTML("afterbegin",`\n      <div class="messages_search_results_header">${t}</div>\n    `)}renderResults(e){const t=document.createDocumentFragment();for(const i of e){const e=s.a.getMessageAuthorPeer(i),o=s.a.getPeerName(e),r=a.a.formatMessageDate(i),c=a.a.getMessagePreview(i),d=n.e.html`
        <div class="messages_search_results_item" data-id="${i.id}">
          <div class="messages_search_results_item_content mdc-ripple-surface">
            <div class="messages_search_results_item_photo"></div>
            <div class="messages_search_results_item_text">
              <div class="messages_search_results_item_text_row">
                <div class="messages_search_results_item_title">${o}</div>
                <div class="messages_search_results_item_date">${r}</div>
              </div>
              <div class="messages_search_results_item_text_row">
                <div class="messages_search_results_item_message">${c}</div>
              </div>
            </div>      
          </div>
        </div>
      `.buildElement();this.loadMessagePeerPhoto(d,e),d.addEventListener("click",this.onMessageClick),t.append(d)}this.listWrap.append(t)}loadMessagePeerPhoto(e,t){const i=Object(n.a)(".messages_search_results_item_photo",e);a.a.loadPeerPhoto(i,t)}loadMore(){this.loading||(this.loading=!0,this.loadResults(this.lastQuery,this.offsetId).finally(()=>{this.loading=!1}))}};window.MessagesSearchController=l},,function(e,t,i){i(24),e.exports=i(25)},function(e,t,i){e.exports=i.p+"main.css"},function(e,t,i){"use strict";i.r(t);var n=i(4);window.App=n.a},function(e,t,i){"use strict";var n=i(2),s=i(6),a=i(10),o={LIST_ITEM_ACTIVATED_CLASS:"mdc-list-item--activated",LIST_ITEM_CLASS:"mdc-list-item",LIST_ITEM_DISABLED_CLASS:"mdc-list-item--disabled",LIST_ITEM_SELECTED_CLASS:"mdc-list-item--selected",ROOT:"mdc-list"},r={ACTION_EVENT:"MDCList:action",ARIA_CHECKED:"aria-checked",ARIA_CHECKED_CHECKBOX_SELECTOR:'[role="checkbox"][aria-checked="true"]',ARIA_CHECKED_RADIO_SELECTOR:'[role="radio"][aria-checked="true"]',ARIA_CURRENT:"aria-current",ARIA_DISABLED:"aria-disabled",ARIA_ORIENTATION:"aria-orientation",ARIA_ORIENTATION_HORIZONTAL:"horizontal",ARIA_ROLE_CHECKBOX_SELECTOR:'[role="checkbox"]',ARIA_SELECTED:"aria-selected",CHECKBOX_RADIO_SELECTOR:'input[type="checkbox"], input[type="radio"]',CHECKBOX_SELECTOR:'input[type="checkbox"]',CHILD_ELEMENTS_TO_TOGGLE_TABINDEX:"\n    ."+o.LIST_ITEM_CLASS+" button:not(:disabled),\n    ."+o.LIST_ITEM_CLASS+" a\n  ",FOCUSABLE_CHILD_ELEMENTS:"\n    ."+o.LIST_ITEM_CLASS+" button:not(:disabled),\n    ."+o.LIST_ITEM_CLASS+" a,\n    ."+o.LIST_ITEM_CLASS+' input[type="radio"]:not(:disabled),\n    .'+o.LIST_ITEM_CLASS+' input[type="checkbox"]:not(:disabled)\n  ',RADIO_SELECTOR:'input[type="radio"]'},c={UNSET_INDEX:-1},d=i(5),l=["input","button","textarea","select"];var u,h,m=function(e){function t(i){var s=e.call(this,n.a({},t.defaultAdapter,i))||this;return s.wrapFocus_=!1,s.isVertical_=!0,s.isSingleSelectionList_=!1,s.selectedIndex_=c.UNSET_INDEX,s.focusedItemIndex_=c.UNSET_INDEX,s.useActivatedClass_=!1,s.ariaCurrentAttrValue_=null,s.isCheckboxList_=!1,s.isRadioList_=!1,s}return n.b(t,e),Object.defineProperty(t,"strings",{get:function(){return r},enumerable:!0,configurable:!0}),Object.defineProperty(t,"cssClasses",{get:function(){return o},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return c},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClassForElementIndex:function(){},focusItemAtIndex:function(){},getAttributeForElementIndex:function(){return null},getFocusedElementIndex:function(){return 0},getListItemCount:function(){return 0},hasCheckboxAtIndex:function(){return!1},hasRadioAtIndex:function(){return!1},isCheckboxCheckedAtIndex:function(){return!1},isFocusInsideList:function(){return!1},isRootFocused:function(){return!1},listItemAtIndexHasClass:function(){return!1},notifyAction:function(){},removeClassForElementIndex:function(){},setAttributeForElementIndex:function(){},setCheckedCheckboxOrRadioAtIndex:function(){},setTabIndexForListItemChildren:function(){}}},enumerable:!0,configurable:!0}),t.prototype.layout=function(){0!==this.adapter_.getListItemCount()&&(this.adapter_.hasCheckboxAtIndex(0)?this.isCheckboxList_=!0:this.adapter_.hasRadioAtIndex(0)&&(this.isRadioList_=!0))},t.prototype.setWrapFocus=function(e){this.wrapFocus_=e},t.prototype.setVerticalOrientation=function(e){this.isVertical_=e},t.prototype.setSingleSelection=function(e){this.isSingleSelectionList_=e},t.prototype.setUseActivatedClass=function(e){this.useActivatedClass_=e},t.prototype.getSelectedIndex=function(){return this.selectedIndex_},t.prototype.setSelectedIndex=function(e){this.isIndexValid_(e)&&(this.isCheckboxList_?this.setCheckboxAtIndex_(e):this.isRadioList_?this.setRadioAtIndex_(e):this.setSingleSelectionAtIndex_(e))},t.prototype.handleFocusIn=function(e,t){t>=0&&this.adapter_.setTabIndexForListItemChildren(t,"0")},t.prototype.handleFocusOut=function(e,t){var i=this;t>=0&&this.adapter_.setTabIndexForListItemChildren(t,"-1"),setTimeout((function(){i.adapter_.isFocusInsideList()||i.setTabindexToFirstSelectedItem_()}),0)},t.prototype.handleKeydown=function(e,t,i){var n="ArrowLeft"===e.key||37===e.keyCode,s="ArrowUp"===e.key||38===e.keyCode,a="ArrowRight"===e.key||39===e.keyCode,o="ArrowDown"===e.key||40===e.keyCode,r="Home"===e.key||36===e.keyCode,c="End"===e.key||35===e.keyCode,d="Enter"===e.key||13===e.keyCode,l="Space"===e.key||32===e.keyCode;if(this.adapter_.isRootFocused())s||c?(e.preventDefault(),this.focusLastElement()):(o||r)&&(e.preventDefault(),this.focusFirstElement());else{var u=this.adapter_.getFocusedElementIndex();if(!(-1===u&&(u=i)<0)){var h;if(this.isVertical_&&o||!this.isVertical_&&a)this.preventDefaultEvent_(e),h=this.focusNextElement(u);else if(this.isVertical_&&s||!this.isVertical_&&n)this.preventDefaultEvent_(e),h=this.focusPrevElement(u);else if(r)this.preventDefaultEvent_(e),h=this.focusFirstElement();else if(c)this.preventDefaultEvent_(e),h=this.focusLastElement();else if((d||l)&&t){var m=e.target;if(m&&"A"===m.tagName&&d)return;this.preventDefaultEvent_(e),this.isSelectableList_()&&this.setSelectedIndexOnAction_(u),this.adapter_.notifyAction(u)}this.focusedItemIndex_=u,void 0!==h&&(this.setTabindexAtIndex_(h),this.focusedItemIndex_=h)}}},t.prototype.handleClick=function(e,t){e!==c.UNSET_INDEX&&(this.isSelectableList_()&&this.setSelectedIndexOnAction_(e,t),this.adapter_.notifyAction(e),this.setTabindexAtIndex_(e),this.focusedItemIndex_=e)},t.prototype.focusNextElement=function(e){var t=e+1;if(t>=this.adapter_.getListItemCount()){if(!this.wrapFocus_)return e;t=0}return this.adapter_.focusItemAtIndex(t),t},t.prototype.focusPrevElement=function(e){var t=e-1;if(t<0){if(!this.wrapFocus_)return e;t=this.adapter_.getListItemCount()-1}return this.adapter_.focusItemAtIndex(t),t},t.prototype.focusFirstElement=function(){return this.adapter_.focusItemAtIndex(0),0},t.prototype.focusLastElement=function(){var e=this.adapter_.getListItemCount()-1;return this.adapter_.focusItemAtIndex(e),e},t.prototype.setEnabled=function(e,t){this.isIndexValid_(e)&&(t?(this.adapter_.removeClassForElementIndex(e,o.LIST_ITEM_DISABLED_CLASS),this.adapter_.setAttributeForElementIndex(e,r.ARIA_DISABLED,"false")):(this.adapter_.addClassForElementIndex(e,o.LIST_ITEM_DISABLED_CLASS),this.adapter_.setAttributeForElementIndex(e,r.ARIA_DISABLED,"true")))},t.prototype.preventDefaultEvent_=function(e){var t=(""+e.target.tagName).toLowerCase();-1===l.indexOf(t)&&e.preventDefault()},t.prototype.setSingleSelectionAtIndex_=function(e){if(this.selectedIndex_!==e){var t=o.LIST_ITEM_SELECTED_CLASS;this.useActivatedClass_&&(t=o.LIST_ITEM_ACTIVATED_CLASS),this.selectedIndex_!==c.UNSET_INDEX&&this.adapter_.removeClassForElementIndex(this.selectedIndex_,t),this.adapter_.addClassForElementIndex(e,t),this.setAriaForSingleSelectionAtIndex_(e),this.selectedIndex_=e}},t.prototype.setAriaForSingleSelectionAtIndex_=function(e){this.selectedIndex_===c.UNSET_INDEX&&(this.ariaCurrentAttrValue_=this.adapter_.getAttributeForElementIndex(e,r.ARIA_CURRENT));var t=null!==this.ariaCurrentAttrValue_,i=t?r.ARIA_CURRENT:r.ARIA_SELECTED;this.selectedIndex_!==c.UNSET_INDEX&&this.adapter_.setAttributeForElementIndex(this.selectedIndex_,i,"false");var n=t?this.ariaCurrentAttrValue_:"true";this.adapter_.setAttributeForElementIndex(e,i,n)},t.prototype.setRadioAtIndex_=function(e){this.adapter_.setCheckedCheckboxOrRadioAtIndex(e,!0),this.selectedIndex_!==c.UNSET_INDEX&&this.adapter_.setAttributeForElementIndex(this.selectedIndex_,r.ARIA_CHECKED,"false"),this.adapter_.setAttributeForElementIndex(e,r.ARIA_CHECKED,"true"),this.selectedIndex_=e},t.prototype.setCheckboxAtIndex_=function(e){for(var t=0;t<this.adapter_.getListItemCount();t++){var i=!1;e.indexOf(t)>=0&&(i=!0),this.adapter_.setCheckedCheckboxOrRadioAtIndex(t,i),this.adapter_.setAttributeForElementIndex(t,r.ARIA_CHECKED,i?"true":"false")}this.selectedIndex_=e},t.prototype.setTabindexAtIndex_=function(e){this.focusedItemIndex_===c.UNSET_INDEX&&0!==e?this.adapter_.setAttributeForElementIndex(0,"tabindex","-1"):this.focusedItemIndex_>=0&&this.focusedItemIndex_!==e&&this.adapter_.setAttributeForElementIndex(this.focusedItemIndex_,"tabindex","-1"),this.adapter_.setAttributeForElementIndex(e,"tabindex","0")},t.prototype.isSelectableList_=function(){return this.isSingleSelectionList_||this.isCheckboxList_||this.isRadioList_},t.prototype.setTabindexToFirstSelectedItem_=function(){var e=0;this.isSelectableList_()&&("number"==typeof this.selectedIndex_&&this.selectedIndex_!==c.UNSET_INDEX?e=this.selectedIndex_:this.selectedIndex_ instanceof Array&&this.selectedIndex_.length>0&&(e=this.selectedIndex_.reduce((function(e,t){return Math.min(e,t)})))),this.setTabindexAtIndex_(e)},t.prototype.isIndexValid_=function(e){var t=this;if(e instanceof Array){if(!this.isCheckboxList_)throw new Error("MDCListFoundation: Array of index is only supported for checkbox based list");return 0===e.length||e.some((function(e){return t.isIndexInRange_(e)}))}if("number"==typeof e){if(this.isCheckboxList_)throw new Error("MDCListFoundation: Expected array of index for checkbox based list but got number: "+e);return this.isIndexInRange_(e)}return!1},t.prototype.isIndexInRange_=function(e){var t=this.adapter_.getListItemCount();return e>=0&&e<t},t.prototype.setSelectedIndexOnAction_=function(e,t){void 0===t&&(t=!0),this.adapter_.listItemAtIndexHasClass(e,o.LIST_ITEM_DISABLED_CLASS)||(this.isCheckboxList_?this.toggleCheckboxAtIndex_(e,t):this.setSelectedIndex(e))},t.prototype.toggleCheckboxAtIndex_=function(e,t){var i=this.adapter_.isCheckboxCheckedAtIndex(e);t&&(i=!i,this.adapter_.setCheckedCheckboxOrRadioAtIndex(e,i)),this.adapter_.setAttributeForElementIndex(e,r.ARIA_CHECKED,i?"true":"false");var n=this.selectedIndex_===c.UNSET_INDEX?[]:this.selectedIndex_.slice();i?n.push(e):n=n.filter((function(t){return t!==e})),this.selectedIndex_=n},t}(d.a),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.b(t,e),Object.defineProperty(t.prototype,"vertical",{set:function(e){this.foundation_.setVerticalOrientation(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"listElements",{get:function(){return[].slice.call(this.root_.querySelectorAll("."+o.LIST_ITEM_CLASS))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wrapFocus",{set:function(e){this.foundation_.setWrapFocus(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"singleSelection",{set:function(e){this.foundation_.setSingleSelection(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedIndex",{get:function(){return this.foundation_.getSelectedIndex()},set:function(e){this.foundation_.setSelectedIndex(e)},enumerable:!0,configurable:!0}),t.attachTo=function(e){return new t(e)},t.prototype.initialSyncWithDOM=function(){this.handleClick_=this.handleClickEvent_.bind(this),this.handleKeydown_=this.handleKeydownEvent_.bind(this),this.focusInEventListener_=this.handleFocusInEvent_.bind(this),this.focusOutEventListener_=this.handleFocusOutEvent_.bind(this),this.listen("keydown",this.handleKeydown_),this.listen("click",this.handleClick_),this.listen("focusin",this.focusInEventListener_),this.listen("focusout",this.focusOutEventListener_),this.layout(),this.initializeListType()},t.prototype.destroy=function(){this.unlisten("keydown",this.handleKeydown_),this.unlisten("click",this.handleClick_),this.unlisten("focusin",this.focusInEventListener_),this.unlisten("focusout",this.focusOutEventListener_)},t.prototype.layout=function(){var e=this.root_.getAttribute(r.ARIA_ORIENTATION);this.vertical=e!==r.ARIA_ORIENTATION_HORIZONTAL,[].slice.call(this.root_.querySelectorAll(".mdc-list-item:not([tabindex])")).forEach((function(e){e.setAttribute("tabindex","-1")})),[].slice.call(this.root_.querySelectorAll(r.FOCUSABLE_CHILD_ELEMENTS)).forEach((function(e){return e.setAttribute("tabindex","-1")})),this.foundation_.layout()},t.prototype.initializeListType=function(){var e=this,t=this.root_.querySelectorAll(r.ARIA_ROLE_CHECKBOX_SELECTOR),i=this.root_.querySelector("\n      ."+o.LIST_ITEM_ACTIVATED_CLASS+",\n      ."+o.LIST_ITEM_SELECTED_CLASS+"\n    "),n=this.root_.querySelector(r.ARIA_CHECKED_RADIO_SELECTOR);if(t.length){var s=this.root_.querySelectorAll(r.ARIA_CHECKED_CHECKBOX_SELECTOR);this.selectedIndex=[].map.call(s,(function(t){return e.listElements.indexOf(t)}))}else i?(i.classList.contains(o.LIST_ITEM_ACTIVATED_CLASS)&&this.foundation_.setUseActivatedClass(!0),this.singleSelection=!0,this.selectedIndex=this.listElements.indexOf(i)):n&&(this.selectedIndex=this.listElements.indexOf(n))},t.prototype.setEnabled=function(e,t){this.foundation_.setEnabled(e,t)},t.prototype.getDefaultFoundation=function(){var e=this;return new m({addClassForElementIndex:function(t,i){var n=e.listElements[t];n&&n.classList.add(i)},focusItemAtIndex:function(t){var i=e.listElements[t];i&&i.focus()},getAttributeForElementIndex:function(t,i){return e.listElements[t].getAttribute(i)},getFocusedElementIndex:function(){return e.listElements.indexOf(document.activeElement)},getListItemCount:function(){return e.listElements.length},hasCheckboxAtIndex:function(t){return!!e.listElements[t].querySelector(r.CHECKBOX_SELECTOR)},hasRadioAtIndex:function(t){return!!e.listElements[t].querySelector(r.RADIO_SELECTOR)},isCheckboxCheckedAtIndex:function(t){return e.listElements[t].querySelector(r.CHECKBOX_SELECTOR).checked},isFocusInsideList:function(){return e.root_.contains(document.activeElement)},isRootFocused:function(){return document.activeElement===e.root_},listItemAtIndexHasClass:function(t,i){return e.listElements[t].classList.contains(i)},notifyAction:function(t){e.emit(r.ACTION_EVENT,{index:t},!0)},removeClassForElementIndex:function(t,i){var n=e.listElements[t];n&&n.classList.remove(i)},setAttributeForElementIndex:function(t,i,n){var s=e.listElements[t];s&&s.setAttribute(i,n)},setCheckedCheckboxOrRadioAtIndex:function(t,i){var n=e.listElements[t].querySelector(r.CHECKBOX_RADIO_SELECTOR);n.checked=i;var s=document.createEvent("Event");s.initEvent("change",!0,!0),n.dispatchEvent(s)},setTabIndexForListItemChildren:function(t,i){var n=e.listElements[t];[].slice.call(n.querySelectorAll(r.CHILD_ELEMENTS_TO_TOGGLE_TABINDEX)).forEach((function(e){return e.setAttribute("tabindex",i)}))}})},t.prototype.getListItemIndex_=function(e){var t=e.target,i=Object(a.a)(t,"."+o.LIST_ITEM_CLASS+", ."+o.ROOT);return i&&Object(a.b)(i,"."+o.LIST_ITEM_CLASS)?this.listElements.indexOf(i):-1},t.prototype.handleFocusInEvent_=function(e){var t=this.getListItemIndex_(e);this.foundation_.handleFocusIn(e,t)},t.prototype.handleFocusOutEvent_=function(e){var t=this.getListItemIndex_(e);this.foundation_.handleFocusOut(e,t)},t.prototype.handleKeydownEvent_=function(e){var t=this.getListItemIndex_(e),i=e.target;this.foundation_.handleKeydown(e,i.classList.contains(o.LIST_ITEM_CLASS),t)},t.prototype.handleClickEvent_=function(e){var t=this.getListItemIndex_(e),i=e.target,n=!Object(a.b)(i,r.CHECKBOX_RADIO_SELECTOR);this.foundation_.handleClick(t,n)},t}(s.a),_={ANCHOR:"mdc-menu-surface--anchor",ANIMATING_CLOSED:"mdc-menu-surface--animating-closed",ANIMATING_OPEN:"mdc-menu-surface--animating-open",FIXED:"mdc-menu-surface--fixed",OPEN:"mdc-menu-surface--open",ROOT:"mdc-menu-surface"},g={CLOSED_EVENT:"MDCMenuSurface:closed",OPENED_EVENT:"MDCMenuSurface:opened",FOCUSABLE_ELEMENTS:["button:not(:disabled)",'[href]:not([aria-disabled="true"])',"input:not(:disabled)","select:not(:disabled)","textarea:not(:disabled)",'[tabindex]:not([tabindex="-1"]):not([aria-disabled="true"])'].join(", ")},f={TRANSITION_OPEN_DURATION:120,TRANSITION_CLOSE_DURATION:75,MARGIN_TO_EDGE:32,ANCHOR_TO_MENU_SURFACE_WIDTH_RATIO:.67};!function(e){e[e.BOTTOM=1]="BOTTOM",e[e.CENTER=2]="CENTER",e[e.RIGHT=4]="RIGHT",e[e.FLIP_RTL=8]="FLIP_RTL"}(u||(u={})),function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=4]="TOP_RIGHT",e[e.BOTTOM_LEFT=1]="BOTTOM_LEFT",e[e.BOTTOM_RIGHT=5]="BOTTOM_RIGHT",e[e.TOP_START=8]="TOP_START",e[e.TOP_END=12]="TOP_END",e[e.BOTTOM_START=9]="BOTTOM_START",e[e.BOTTOM_END=13]="BOTTOM_END"}(h||(h={}));
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
var b,v=function(e){function t(i){var s=e.call(this,n.a({},t.defaultAdapter,i))||this;return s.isOpen_=!1,s.isQuickOpen_=!1,s.isHoistedElement_=!1,s.isFixedPosition_=!1,s.openAnimationEndTimerId_=0,s.closeAnimationEndTimerId_=0,s.animationRequestId_=0,s.anchorCorner_=h.TOP_START,s.anchorMargin_={top:0,right:0,bottom:0,left:0},s.position_={x:0,y:0},s}return n.b(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return _},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return g},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return f},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Corner",{get:function(){return h},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},hasAnchor:function(){return!1},isElementInContainer:function(){return!1},isFocused:function(){return!1},isRtl:function(){return!1},getInnerDimensions:function(){return{height:0,width:0}},getAnchorDimensions:function(){return null},getWindowDimensions:function(){return{height:0,width:0}},getBodyDimensions:function(){return{height:0,width:0}},getWindowScroll:function(){return{x:0,y:0}},setPosition:function(){},setMaxHeight:function(){},setTransformOrigin:function(){},saveFocus:function(){},restoreFocus:function(){},notifyClose:function(){},notifyOpen:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){var e=t.cssClasses,i=e.ROOT,n=e.OPEN;if(!this.adapter_.hasClass(i))throw new Error(i+" class required in root element.");this.adapter_.hasClass(n)&&(this.isOpen_=!0)},t.prototype.destroy=function(){clearTimeout(this.openAnimationEndTimerId_),clearTimeout(this.closeAnimationEndTimerId_),cancelAnimationFrame(this.animationRequestId_)},t.prototype.setAnchorCorner=function(e){this.anchorCorner_=e},t.prototype.setAnchorMargin=function(e){this.anchorMargin_.top=e.top||0,this.anchorMargin_.right=e.right||0,this.anchorMargin_.bottom=e.bottom||0,this.anchorMargin_.left=e.left||0},t.prototype.setIsHoisted=function(e){this.isHoistedElement_=e},t.prototype.setFixedPosition=function(e){this.isFixedPosition_=e},t.prototype.setAbsolutePosition=function(e,t){this.position_.x=this.isFinite_(e)?e:0,this.position_.y=this.isFinite_(t)?t:0},t.prototype.setQuickOpen=function(e){this.isQuickOpen_=e},t.prototype.isOpen=function(){return this.isOpen_},t.prototype.open=function(){var e=this;this.adapter_.saveFocus(),this.isQuickOpen_||this.adapter_.addClass(t.cssClasses.ANIMATING_OPEN),this.animationRequestId_=requestAnimationFrame((function(){e.adapter_.addClass(t.cssClasses.OPEN),e.dimensions_=e.adapter_.getInnerDimensions(),e.autoPosition_(),e.isQuickOpen_?e.adapter_.notifyOpen():e.openAnimationEndTimerId_=setTimeout((function(){e.openAnimationEndTimerId_=0,e.adapter_.removeClass(t.cssClasses.ANIMATING_OPEN),e.adapter_.notifyOpen()}),f.TRANSITION_OPEN_DURATION)})),this.isOpen_=!0},t.prototype.close=function(e){var i=this;void 0===e&&(e=!1),this.isQuickOpen_||this.adapter_.addClass(t.cssClasses.ANIMATING_CLOSED),requestAnimationFrame((function(){i.adapter_.removeClass(t.cssClasses.OPEN),i.isQuickOpen_?i.adapter_.notifyClose():i.closeAnimationEndTimerId_=setTimeout((function(){i.closeAnimationEndTimerId_=0,i.adapter_.removeClass(t.cssClasses.ANIMATING_CLOSED),i.adapter_.notifyClose()}),f.TRANSITION_CLOSE_DURATION)})),this.isOpen_=!1,e||this.maybeRestoreFocus_()},t.prototype.handleBodyClick=function(e){var t=e.target;this.adapter_.isElementInContainer(t)||this.close()},t.prototype.handleKeydown=function(e){var t=e.keyCode;("Escape"===e.key||27===t)&&this.close()},t.prototype.autoPosition_=function(){var e;this.measurements_=this.getAutoLayoutMeasurements_();var t=this.getOriginCorner_(),i=this.getMenuSurfaceMaxHeight_(t),n=this.hasBit_(t,u.BOTTOM)?"bottom":"top",s=this.hasBit_(t,u.RIGHT)?"right":"left",a=this.getHorizontalOriginOffset_(t),o=this.getVerticalOriginOffset_(t),r=this.measurements_,c=r.anchorSize,d=r.surfaceSize,l=((e={})[s]=a,e[n]=o,e);c.width/d.width>f.ANCHOR_TO_MENU_SURFACE_WIDTH_RATIO&&(s="center"),(this.isHoistedElement_||this.isFixedPosition_)&&this.adjustPositionForHoistedElement_(l),this.adapter_.setTransformOrigin(s+" "+n),this.adapter_.setPosition(l),this.adapter_.setMaxHeight(i?i+"px":"")},t.prototype.getAutoLayoutMeasurements_=function(){var e=this.adapter_.getAnchorDimensions(),t=this.adapter_.getBodyDimensions(),i=this.adapter_.getWindowDimensions(),n=this.adapter_.getWindowScroll();return e||(e={top:this.position_.y,right:this.position_.x,bottom:this.position_.y,left:this.position_.x,width:0,height:0}),{anchorSize:e,bodySize:t,surfaceSize:this.dimensions_,viewportDistance:{top:e.top,right:i.width-e.right,bottom:i.height-e.bottom,left:e.left},viewportSize:i,windowScroll:n}},t.prototype.getOriginCorner_=function(){var e=h.TOP_LEFT,t=this.measurements_,i=t.viewportDistance,n=t.anchorSize,s=t.surfaceSize,a=this.hasBit_(this.anchorCorner_,u.BOTTOM),o=a?i.top+n.height+this.anchorMargin_.bottom:i.top+this.anchorMargin_.top,r=a?i.bottom-this.anchorMargin_.bottom:i.bottom+n.height-this.anchorMargin_.top,c=s.height-o,d=s.height-r;d>0&&c<d&&(e=this.setBit_(e,u.BOTTOM));var l=this.adapter_.isRtl(),m=this.hasBit_(this.anchorCorner_,u.FLIP_RTL),p=this.hasBit_(this.anchorCorner_,u.RIGHT),_=p&&!l||!p&&m&&l,g=_?i.left+n.width+this.anchorMargin_.right:i.left+this.anchorMargin_.left,f=_?i.right-this.anchorMargin_.right:i.right+n.width-this.anchorMargin_.left,b=s.width-g,v=s.width-f;return(b<0&&_&&l||p&&!_&&b<0||v>0&&b<v)&&(e=this.setBit_(e,u.RIGHT)),e},t.prototype.getMenuSurfaceMaxHeight_=function(e){var i=this.measurements_.viewportDistance,n=0,s=this.hasBit_(e,u.BOTTOM),a=this.hasBit_(this.anchorCorner_,u.BOTTOM),o=t.numbers.MARGIN_TO_EDGE;return s?(n=i.top+this.anchorMargin_.top-o,a||(n+=this.measurements_.anchorSize.height)):(n=i.bottom-this.anchorMargin_.bottom+this.measurements_.anchorSize.height-o,a&&(n-=this.measurements_.anchorSize.height)),n},t.prototype.getHorizontalOriginOffset_=function(e){var t=this.measurements_.anchorSize,i=this.hasBit_(e,u.RIGHT),n=this.hasBit_(this.anchorCorner_,u.RIGHT);if(i){var s=n?t.width-this.anchorMargin_.left:this.anchorMargin_.right;return this.isHoistedElement_||this.isFixedPosition_?s-(this.measurements_.viewportSize.width-this.measurements_.bodySize.width):s}return n?t.width-this.anchorMargin_.right:this.anchorMargin_.left},t.prototype.getVerticalOriginOffset_=function(e){var t=this.measurements_.anchorSize,i=this.hasBit_(e,u.BOTTOM),n=this.hasBit_(this.anchorCorner_,u.BOTTOM);return i?n?t.height-this.anchorMargin_.top:-this.anchorMargin_.bottom:n?t.height+this.anchorMargin_.bottom:this.anchorMargin_.top},t.prototype.adjustPositionForHoistedElement_=function(e){var t,i,s=this.measurements_,a=s.windowScroll,o=s.viewportDistance,r=Object.keys(e);try{for(var c=n.d(r),d=c.next();!d.done;d=c.next()){var l=d.value,u=e[l]||0;u+=o[l],this.isFixedPosition_||("top"===l?u+=a.y:"bottom"===l?u-=a.y:"left"===l?u+=a.x:u-=a.x),e[l]=u}}catch(e){t={error:e}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(t)throw t.error}}},t.prototype.maybeRestoreFocus_=function(){var e=this.adapter_.isFocused(),t=document.activeElement&&this.adapter_.isElementInContainer(document.activeElement);(e||t)&&this.adapter_.restoreFocus()},t.prototype.hasBit_=function(e,t){return Boolean(e&t)},t.prototype.setBit_=function(e,t){return e|t},t.prototype.isFinite_=function(e){return"number"==typeof e&&isFinite(e)},t}(d.a);
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
var y,E=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.b(t,e),t.attachTo=function(e){return new t(e)},t.prototype.initialSyncWithDOM=function(){var e=this,t=this.root_.parentElement;this.anchorElement=t&&t.classList.contains(_.ANCHOR)?t:null,this.root_.classList.contains(_.FIXED)&&this.setFixedPosition(!0),this.handleKeydown_=function(t){return e.foundation_.handleKeydown(t)},this.handleBodyClick_=function(t){return e.foundation_.handleBodyClick(t)},this.registerBodyClickListener_=function(){return document.body.addEventListener("click",e.handleBodyClick_)},this.deregisterBodyClickListener_=function(){return document.body.removeEventListener("click",e.handleBodyClick_)},this.listen("keydown",this.handleKeydown_),this.listen(g.OPENED_EVENT,this.registerBodyClickListener_),this.listen(g.CLOSED_EVENT,this.deregisterBodyClickListener_)},t.prototype.destroy=function(){this.unlisten("keydown",this.handleKeydown_),this.unlisten(g.OPENED_EVENT,this.registerBodyClickListener_),this.unlisten(g.CLOSED_EVENT,this.deregisterBodyClickListener_),e.prototype.destroy.call(this)},t.prototype.isOpen=function(){return this.foundation_.isOpen()},t.prototype.open=function(){this.foundation_.open()},t.prototype.close=function(e){void 0===e&&(e=!1),this.foundation_.close(e)},Object.defineProperty(t.prototype,"quickOpen",{set:function(e){this.foundation_.setQuickOpen(e)},enumerable:!0,configurable:!0}),t.prototype.setIsHoisted=function(e){this.foundation_.setIsHoisted(e)},t.prototype.setMenuSurfaceAnchorElement=function(e){this.anchorElement=e},t.prototype.setFixedPosition=function(e){e?this.root_.classList.add(_.FIXED):this.root_.classList.remove(_.FIXED),this.foundation_.setFixedPosition(e)},t.prototype.setAbsolutePosition=function(e,t){this.foundation_.setAbsolutePosition(e,t),this.setIsHoisted(!0)},t.prototype.setAnchorCorner=function(e){this.foundation_.setAnchorCorner(e)},t.prototype.setAnchorMargin=function(e){this.foundation_.setAnchorMargin(e)},t.prototype.getDefaultFoundation=function(){var e=this;return new v({addClass:function(t){return e.root_.classList.add(t)},removeClass:function(t){return e.root_.classList.remove(t)},hasClass:function(t){return e.root_.classList.contains(t)},hasAnchor:function(){return!!e.anchorElement},notifyClose:function(){return e.emit(v.strings.CLOSED_EVENT,{})},notifyOpen:function(){return e.emit(v.strings.OPENED_EVENT,{})},isElementInContainer:function(t){return e.root_.contains(t)},isRtl:function(){return"rtl"===getComputedStyle(e.root_).getPropertyValue("direction")},setTransformOrigin:function(t){var i=function(e,t){if(void 0===t&&(t=!1),void 0===b||t){var i=e.document.createElement("div");b="transform"in i.style?"transform":"webkitTransform"}return b}(window)+"-origin";e.root_.style.setProperty(i,t)},isFocused:function(){return document.activeElement===e.root_},saveFocus:function(){e.previousFocus_=document.activeElement},restoreFocus:function(){e.root_.contains(document.activeElement)&&e.previousFocus_&&e.previousFocus_.focus&&e.previousFocus_.focus()},getInnerDimensions:function(){return{width:e.root_.offsetWidth,height:e.root_.offsetHeight}},getAnchorDimensions:function(){return e.anchorElement?e.anchorElement.getBoundingClientRect():null},getWindowDimensions:function(){return{width:window.innerWidth,height:window.innerHeight}},getBodyDimensions:function(){return{width:document.body.clientWidth,height:document.body.clientHeight}},getWindowScroll:function(){return{x:window.pageXOffset,y:window.pageYOffset}},setPosition:function(t){e.root_.style.left="left"in t?t.left+"px":"",e.root_.style.right="right"in t?t.right+"px":"",e.root_.style.top="top"in t?t.top+"px":"",e.root_.style.bottom="bottom"in t?t.bottom+"px":""},setMaxHeight:function(t){e.root_.style.maxHeight=t}})},t}(s.a),C={MENU_SELECTED_LIST_ITEM:"mdc-menu-item--selected",MENU_SELECTION_GROUP:"mdc-menu__selection-group",ROOT:"mdc-menu"},I={ARIA_CHECKED_ATTR:"aria-checked",ARIA_DISABLED_ATTR:"aria-disabled",CHECKBOX_SELECTOR:'input[type="checkbox"]',LIST_SELECTOR:".mdc-list",SELECTED_EVENT:"MDCMenu:selected"},A={FOCUS_ROOT_INDEX:-1};
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */!function(e){e[e.NONE=0]="NONE",e[e.LIST_ROOT=1]="LIST_ROOT",e[e.FIRST_ITEM=2]="FIRST_ITEM",e[e.LAST_ITEM=3]="LAST_ITEM"}(y||(y={}));
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
var T=function(e){function t(i){var s=e.call(this,n.a({},t.defaultAdapter,i))||this;return s.closeAnimationEndTimerId_=0,s.defaultFocusState_=y.LIST_ROOT,s}return n.b(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return C},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return I},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return A},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClassToElementAtIndex:function(){},removeClassFromElementAtIndex:function(){},addAttributeToElementAtIndex:function(){},removeAttributeFromElementAtIndex:function(){},elementContainsClass:function(){return!1},closeSurface:function(){},getElementIndex:function(){return-1},notifySelected:function(){},getMenuItemCount:function(){return 0},focusItemAtIndex:function(){},focusListRoot:function(){},getSelectedSiblingOfItemAtIndex:function(){return-1},isSelectableItemAtIndex:function(){return!1}}},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){this.closeAnimationEndTimerId_&&clearTimeout(this.closeAnimationEndTimerId_),this.adapter_.closeSurface()},t.prototype.handleKeydown=function(e){var t=e.key,i=e.keyCode;("Tab"===t||9===i)&&this.adapter_.closeSurface(!0)},t.prototype.handleItemAction=function(e){var t=this,i=this.adapter_.getElementIndex(e);i<0||(this.adapter_.notifySelected({index:i}),this.adapter_.closeSurface(),this.closeAnimationEndTimerId_=setTimeout((function(){var i=t.adapter_.getElementIndex(e);t.adapter_.isSelectableItemAtIndex(i)&&t.setSelectedIndex(i)}),v.numbers.TRANSITION_CLOSE_DURATION))},t.prototype.handleMenuSurfaceOpened=function(){switch(this.defaultFocusState_){case y.FIRST_ITEM:this.adapter_.focusItemAtIndex(0);break;case y.LAST_ITEM:this.adapter_.focusItemAtIndex(this.adapter_.getMenuItemCount()-1);break;case y.NONE:break;default:this.adapter_.focusListRoot()}},t.prototype.setDefaultFocusState=function(e){this.defaultFocusState_=e},t.prototype.setSelectedIndex=function(e){if(this.validatedIndex_(e),!this.adapter_.isSelectableItemAtIndex(e))throw new Error("MDCMenuFoundation: No selection group at specified index.");var t=this.adapter_.getSelectedSiblingOfItemAtIndex(e);t>=0&&(this.adapter_.removeAttributeFromElementAtIndex(t,I.ARIA_CHECKED_ATTR),this.adapter_.removeClassFromElementAtIndex(t,C.MENU_SELECTED_LIST_ITEM)),this.adapter_.addClassToElementAtIndex(e,C.MENU_SELECTED_LIST_ITEM),this.adapter_.addAttributeToElementAtIndex(e,I.ARIA_CHECKED_ATTR,"true")},t.prototype.setEnabled=function(e,t){this.validatedIndex_(e),t?(this.adapter_.removeClassFromElementAtIndex(e,o.LIST_ITEM_DISABLED_CLASS),this.adapter_.addAttributeToElementAtIndex(e,I.ARIA_DISABLED_ATTR,"false")):(this.adapter_.addClassToElementAtIndex(e,o.LIST_ITEM_DISABLED_CLASS),this.adapter_.addAttributeToElementAtIndex(e,I.ARIA_DISABLED_ATTR,"true"))},t.prototype.validatedIndex_=function(e){var t=this.adapter_.getMenuItemCount();if(!(e>=0&&e<t))throw new Error("MDCMenuFoundation: No list item at specified index.")},t}(d.a);i.d(t,"a",(function(){return O}));
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
var O=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.b(t,e),t.attachTo=function(e){return new t(e)},t.prototype.initialize=function(e,t){void 0===e&&(e=function(e){return new E(e)}),void 0===t&&(t=function(e){return new p(e)}),this.menuSurfaceFactory_=e,this.listFactory_=t},t.prototype.initialSyncWithDOM=function(){var e=this;this.menuSurface_=this.menuSurfaceFactory_(this.root_);var t=this.root_.querySelector(I.LIST_SELECTOR);t?(this.list_=this.listFactory_(t),this.list_.wrapFocus=!0):this.list_=null,this.handleKeydown_=function(t){return e.foundation_.handleKeydown(t)},this.handleItemAction_=function(t){return e.foundation_.handleItemAction(e.items[t.detail.index])},this.handleMenuSurfaceOpened_=function(){return e.foundation_.handleMenuSurfaceOpened()},this.menuSurface_.listen(v.strings.OPENED_EVENT,this.handleMenuSurfaceOpened_),this.listen("keydown",this.handleKeydown_),this.listen(m.strings.ACTION_EVENT,this.handleItemAction_)},t.prototype.destroy=function(){this.list_&&this.list_.destroy(),this.menuSurface_.destroy(),this.menuSurface_.unlisten(v.strings.OPENED_EVENT,this.handleMenuSurfaceOpened_),this.unlisten("keydown",this.handleKeydown_),this.unlisten(m.strings.ACTION_EVENT,this.handleItemAction_),e.prototype.destroy.call(this)},Object.defineProperty(t.prototype,"open",{get:function(){return this.menuSurface_.isOpen()},set:function(e){e?this.menuSurface_.open():this.menuSurface_.close()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wrapFocus",{get:function(){return!!this.list_&&this.list_.wrapFocus},set:function(e){this.list_&&(this.list_.wrapFocus=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){return this.list_?this.list_.listElements:[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"quickOpen",{set:function(e){this.menuSurface_.quickOpen=e},enumerable:!0,configurable:!0}),t.prototype.setDefaultFocusState=function(e){this.foundation_.setDefaultFocusState(e)},t.prototype.setAnchorCorner=function(e){this.menuSurface_.setAnchorCorner(e)},t.prototype.setAnchorMargin=function(e){this.menuSurface_.setAnchorMargin(e)},t.prototype.setSelectedIndex=function(e){this.foundation_.setSelectedIndex(e)},t.prototype.setEnabled=function(e,t){this.foundation_.setEnabled(e,t)},t.prototype.getOptionByIndex=function(e){return e<this.items.length?this.items[e]:null},t.prototype.setFixedPosition=function(e){this.menuSurface_.setFixedPosition(e)},t.prototype.setIsHoisted=function(e){this.menuSurface_.setIsHoisted(e)},t.prototype.setAbsolutePosition=function(e,t){this.menuSurface_.setAbsolutePosition(e,t)},t.prototype.setAnchorElement=function(e){this.menuSurface_.anchorElement=e},t.prototype.getDefaultFoundation=function(){var e=this;return new T({addClassToElementAtIndex:function(t,i){e.items[t].classList.add(i)},removeClassFromElementAtIndex:function(t,i){e.items[t].classList.remove(i)},addAttributeToElementAtIndex:function(t,i,n){e.items[t].setAttribute(i,n)},removeAttributeFromElementAtIndex:function(t,i){e.items[t].removeAttribute(i)},elementContainsClass:function(e,t){return e.classList.contains(t)},closeSurface:function(t){return e.menuSurface_.close(t)},getElementIndex:function(t){return e.items.indexOf(t)},notifySelected:function(t){return e.emit(I.SELECTED_EVENT,{index:t.index,item:e.items[t.index]})},getMenuItemCount:function(){return e.items.length},focusItemAtIndex:function(t){return e.items[t].focus()},focusListRoot:function(){return e.root_.querySelector(I.LIST_SELECTOR).focus()},isSelectableItemAtIndex:function(t){return!!Object(a.a)(e.items[t],"."+C.MENU_SELECTION_GROUP)},getSelectedSiblingOfItemAtIndex:function(t){var i=Object(a.a)(e.items[t],"."+C.MENU_SELECTION_GROUP).querySelector("."+C.MENU_SELECTED_LIST_ITEM);return i?e.items.indexOf(i):-1}})},t}(s.a)}]);