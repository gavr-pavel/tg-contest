!function(e){function t(t){for(var i,s,a=t[0],o=t[1],r=0,d=[];r<a.length;r++)s=a[r],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&d.push(n[s][0]),n[s]=0;for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i]);for(c&&c(t);d.length;)d.shift()()}var i={},n={2:0};function s(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],i=n[e];if(0!==i)if(i)t.push(i[2]);else{var a=new Promise((function(t,s){i=n[e]=[t,s]}));t.push(i[2]=a);var o,r=document.createElement("script");r.charset="utf-8",r.timeout=120,s.nc&&r.setAttribute("nonce",s.nc),r.src=function(e){return s.p+""+({}[e]||e)+".js"}(e);var c=new Error;o=function(t){r.onerror=r.onload=null,clearTimeout(d);var i=n[e];if(0!==i){if(i){var s=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+s+": "+a+")",c.name="ChunkLoadError",c.type=s,c.request=a,i[1](c)}n[e]=void 0}};var d=setTimeout((function(){o({type:"timeout",target:r})}),12e4);r.onerror=r.onload=o,document.head.appendChild(r)}return Promise.all(t)},s.m=e,s.c=i,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(i,n,function(t){return e[t]}.bind(null,n));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s.oe=function(e){throw console.error(e),e};var a=window.webpackJsonp=window.webpackJsonp||[],o=a.push.bind(a);a.push=t,a=a.slice();for(var r=0;r<a.length;r++)t(a[r]);var c=o;s(s.s=2)}([,,function(e,t,i){i(3),e.exports=i(5)},function(e,t,i){e.exports=i.p+"main.css"},,function(e,t,i){"use strict";i.r(t);class n{static get(e){try{return JSON.parse(localStorage.getItem(e))}catch(e){return null}}static set(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(e){}}static remove(e){try{localStorage.removeItem(e)}catch(e){}}}class s{constructor(){var e,t,i;e=this,t="port",i=(new MessageChannel).port1,t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}on(e,t){this.port.addEventListener(e,t)}off(e,t){this.port.removeEventListener(e,t)}trigger(e,t){this.port.dispatchEvent(new CustomEvent(e,{detail:t}))}}class a{static html(e,...t){let i="";for(const n of e){i+=n;const e=t.shift();void 0!==e&&(i+=e instanceof o?e.toString():this.sanitize(e))}return new o(i)}static raw(...e){return new o(String.raw(...e))}static sanitize(e){const t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return String(e).replace(/[&<>"']/g,e=>t[e])}}class o{constructor(e){this.html=e}appendHtml(...e){const t=a.html(...e);return this.html+=t.html,this}replaceLineBreaks(){return this.html=this.html.replace(/\n/g,"<br>"),this}valueOf(){return this.html}toString(){return this.html}get length(){return this.html.length}buildFragment(){const e=document.createElement("template");return e.innerHTML=this.html,e.content}buildElement(){return this.buildFragment().firstElementChild}}function r(){const e={};return e.promise=new Promise((t,i)=>{e.resolve=(...i)=>(t(...i),e.promise),e.reject=(...t)=>(i(...t),e.promise)}),e}function c(e,t,i){let n;return function(...s){const a=i&&!n;clearTimeout(n),n=setTimeout(()=>{n=null,i||e(...s)},t),a&&e(...s)}}function d(e,t=document){return t.querySelector(e)}function l(e,t=document){return t.querySelectorAll(e)}function u(e){const t=d("#template_"+e);return document.importNode(t.content,!0)}function h(e){const t={};if(e.childElementCount)for(const i of e.children){i.dataset.jsLabel&&(t[i.dataset.jsLabel]=i),Object.assign(t,h(i))}return t}function _(e=null){const t=a.html`<div class="lds-ring"><div></div><div></div><div></div><div></div></div>`.buildElement();return e&&e.appendChild(t),t}function m(e){return new Promise(t=>setTimeout(t,e))}function p(){return crypto.getRandomValues(new Uint32Array(2))}function g(e,{withYear:t=!0,longMonth:i=!0}={}){return new Intl.DateTimeFormat("en-US",{day:"numeric",month:i?"long":"short",year:t?"numeric":void 0}).format(1e3*e)}function f(e,{withSeconds:t=!1}={}){return new Intl.DateTimeFormat("en-GB",{hour:"numeric",minute:"numeric",second:t?"numeric":void 0}).format(1e3*e)}function v(e,t,i){return e&&e.length>t?e.substr(0,i)+"...":e}function b(e){return new Intl.NumberFormat("en-US",{notation:"compact",compactDisplay:"short"}).format(e)}function E(e){return new Intl.NumberFormat("en-US").format(e)}function y(){return"ontouchstart"in window}const C=(()=>{const e=new Promise(e=>{const t=new Image;function i(i){e(!(!i||"load"!==i.type)&&1===t.width)}t.onerror=i,t.onload=i,t.src="data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoBAAEAAwA0JaQAA3AA/vuUAAA="},0);return()=>e})(),I=(()=>{let e,t;const i=(()=>{let e=0;return()=>++e})(),n={};return async(s,a)=>{e||(t=t||new Promise(t=>{new Worker("./webp_worker.js").addEventListener("message",i=>{if("ready"===i.data)e=i.target,t(e);else{const e=n[i.data.taskId];delete n[i.data.taskId],i.data.error?e.reject(i.data.error):e.resolve(i.data.result)}})}),await t);const o=i(),c=r();return n[o]=c,e.postMessage({taskId:o,task:s,params:a}),c.promise}})();async function A(e){const t=new Uint8Array(e);return function({output:e,width:t,height:i}){return new Promise(n=>{const s=new ImageData(new Uint8ClampedArray(e.buffer),t,i),a=document.createElement("canvas");a.width=t,a.height=i,a.getContext("2d").putImageData(s,0,0),a.toBlob(n,"image/png")})}(await I("decode",{data:t}))}function T(e){return e.arrayBuffer?e.arrayBuffer():new Promise((t,i)=>{const n=new FileReader;n.onload=e=>{t(e.target.result)},n.onerror=e=>{console.error(e),i()},n.readAsArrayBuffer(e)})}function S(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class w{constructor(e={}){S(this,"connectionReady",!1),S(this,"connectionInited",!1),S(this,"emitter",new s),S(this,"onUpdates",e=>{this.emitter.trigger("updates",e)}),this.options=e,this.connectionDefered=r(),i.e(0).then(i.bind(null,10)).then(({MTProto:t})=>{this.updateConnectionState("connecting"),this.mtproto=new t({dcId:e.dcId,onConnectionReady:()=>{this.init(),this.updateConnectionState("connected")},onUpdates:this.onUpdates})})}exportAuthorization(e){return ApiClient.callMethod("auth.exportAuthorization",{dc_id:e})}async importAuthorization({id:e,bytes:t}){await this.callMethod("auth.importAuthorization",{id:e,bytes:t},!0)}updateConnectionState(e){this.emitter.trigger("updateConnectionState",e)}async init(){if(this.options.upload&&!this.mtproto.hasApiAuth())try{const e=await ApiClient.exportAuthorization(this.options.dcId);await this.importAuthorization(e)}catch(e){return void this.connectionDefered.reject(e)}this.connectionReady=!0,this.connectionDefered.resolve()}destroy(){this.mtproto.destroy()}wrapCall(e,t){const i=this.mtproto.getSerializer({api:!0,upload:this.options.upload});if(!this.connectionInited){const e=this.mtproto.getSchema();i.storeInt(3667594509,"invokeWithLayer"),i.storeInt(e.API.layer,"layer"),i.storeInt(3343392166,"initConnection"),i.storeInt(hi.API_ID,"api_id"),i.storeString(function(){const e=!!document.documentMode,t=!e&&!!window.StyleMedia;if(navigator.userAgent.includes("Chrome")&&!t)return"Chrome";if(navigator.userAgent.includes("Safari")&&!t)return"Safari";if(navigator.userAgent.includes("Firefox"))return"Firefox";if(navigator.userAgent.includes("MSIE")||e)return"IE";if(t)return"Edge";return"Unknown"}(),"device_model"),i.storeString(function(){if(window.navigator.userAgent.includes("Windows NT 10.0"))return"Windows 10";if(window.navigator.userAgent.includes("Windows NT 6.2"))return"Windows 8";if(window.navigator.userAgent.includes("Windows NT 6.1"))return"Windows 7";if(window.navigator.userAgent.includes("Windows NT 6.0"))return"Windows Vista";if(window.navigator.userAgent.includes("Windows NT 5.1"))return"Windows XP";if(window.navigator.userAgent.includes("Windows NT 5.0"))return"Windows 2000";if(window.navigator.userAgent.includes("Mac"))return"Mac/iOS";if(window.navigator.userAgent.includes("X11"))return"UNIX";if(window.navigator.userAgent.includes("Linux"))return"Linux";return"Unknown"}(),"system_version"),i.storeString(hi.APP_VERSION,"app_version"),i.storeString(M(),"system_lang_code"),i.storeString("","lang_pack"),i.storeString(M(),"lang_code"),this.connectionInited=!0}const n={api:!0,source:e};return n.resultType=i.storeMethod(e,t),this.mtproto.prepareMessageFromBuffer(i.getBuffer(),n)}async callMethod(e,t={},i=!1){this.connectionReady||i||await this.connectionDefered.promise;const n=this.wrapCall(e,t),s=await this.mtproto.pushMessage(n);return"rpc_error"===s._?303===s.error_code?(await this.migrateDC(this.getMigrateErrorDcId(s.error_message)),this.callMethod(e,t)):("AUTH_KEY_UNREGISTERED"===s.error_message&&(this.options.upload||hi.logOutDone()),Promise.reject(s)):("auth.authorization"===s._&&this.mtproto.saveApiAuth(),s)}getDcId(){return this.mtproto.dcId}migrateDC(e){return this.connectionInited=!1,this.mtproto.migrateDC(e)}getMigrateErrorDcId(e){return+e.match(/\d+$/)[0]}getServerTimeOffset(){return this.mtproto.timeOffset}getServerTimeNow(){return Math.floor(Date.now()/1e3)+this.getServerTimeOffset()}}function M(){return navigator.language||"en"}const L=new w;window.ApiClient=L;const O={login_flood_pluralize_seconds:["","Try again in {} second","Try again in {} seconds"],login_flood_pluralize_minutes:["","Try again in {} minute","Try again in {} minutes"],login_flood_pluralize_hours:["","Try again in {} hour","Try again in {} hours"],messages_search_n_results_found:["No messages found","{} message found","{} messages found"],messages_send_n_files:["","Send {} File","Send {} files"]},P=new class{get(e,t=!1){const i=O[e]||"";return this.replaceTokens(i,t)}replaceTokens(e,t){if(!t)return e;for(const[i,n]of Object.entries(t))e=e.replace(`{${i}}`,n);return e}getPlural(e,t,i){const n=O[e];let s;return s=(s=!t&&n[0]?n[0]:1===t?n[1]:n[2]).replace("{}",t),this.replaceTokens(s,i)}};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var D=function(e,t){return(D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};function x(e,t){function i(){this.constructor=e}D(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}var k=function(){return(k=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)};function N(e){var t="function"==typeof Symbol&&e[Symbol.iterator],i=0;return t?t.call(e):{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}}}function F(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var n,s,a=i.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)o.push(n.value)}catch(e){s={error:e}}finally{try{n&&!n.done&&(i=a.return)&&i.call(a)}finally{if(s)throw s.error}}return o}
/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
var R,H=function(){function e(e){void 0===e&&(e={}),this.adapter_=e}return Object.defineProperty(e,"cssClasses",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{}},enumerable:!0,configurable:!0}),e.prototype.init=function(){},e.prototype.destroy=function(){},e}(),U=function(){function e(e,t){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];this.root_=e,this.initialize.apply(this,function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(F(arguments[t]));return e}(i)),this.foundation_=void 0===t?this.getDefaultFoundation():t,this.foundation_.init(),this.initialSyncWithDOM()}return e.attachTo=function(t){return new e(t,new H({}))},e.prototype.initialize=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e.prototype.getDefaultFoundation=function(){throw new Error("Subclasses must override getDefaultFoundation to return a properly configured foundation class")},e.prototype.initialSyncWithDOM=function(){},e.prototype.destroy=function(){this.foundation_.destroy()},e.prototype.listen=function(e,t,i){this.root_.addEventListener(e,t,i)},e.prototype.unlisten=function(e,t,i){this.root_.removeEventListener(e,t,i)},e.prototype.emit=function(e,t,i){var n;void 0===i&&(i=!1),"function"==typeof CustomEvent?n=new CustomEvent(e,{bubbles:i,detail:t}):(n=document.createEvent("CustomEvent")).initCustomEvent(e,i,!1,t),this.root_.dispatchEvent(n)},e}();function B(e,t){if(void 0===e&&(e=window),void 0===t&&(t=!1),void 0===R||t){var i=!1;try{e.document.addEventListener("test",(function(){}),{get passive(){return i=!0}})}catch(e){}R=i}return!!R&&{passive:!0}}
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */function j(e,t){if(e.closest)return e.closest(t);for(var i=e;i;){if(V(i,t))return i;i=i.parentElement}return null}function V(e,t){return(e.matches||e.webkitMatchesSelector||e.msMatchesSelector).call(e,t)}
/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var $,G={LABEL_FLOAT_ABOVE:"mdc-floating-label--float-above",LABEL_SHAKE:"mdc-floating-label--shake",ROOT:"mdc-floating-label"},z=function(e){function t(i){var n=e.call(this,k({},t.defaultAdapter,i))||this;return n.shakeAnimationEndHandler_=function(){return n.handleShakeAnimationEnd_()},n}return x(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return G},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},getWidth:function(){return 0},registerInteractionHandler:function(){},deregisterInteractionHandler:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.adapter_.registerInteractionHandler("animationend",this.shakeAnimationEndHandler_)},t.prototype.destroy=function(){this.adapter_.deregisterInteractionHandler("animationend",this.shakeAnimationEndHandler_)},t.prototype.getWidth=function(){return this.adapter_.getWidth()},t.prototype.shake=function(e){var i=t.cssClasses.LABEL_SHAKE;e?this.adapter_.addClass(i):this.adapter_.removeClass(i)},t.prototype.float=function(e){var i=t.cssClasses,n=i.LABEL_FLOAT_ABOVE,s=i.LABEL_SHAKE;e?this.adapter_.addClass(n):(this.adapter_.removeClass(n),this.adapter_.removeClass(s))},t.prototype.handleShakeAnimationEnd_=function(){var e=t.cssClasses.LABEL_SHAKE;this.adapter_.removeClass(e)},t}(H),K=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return x(t,e),t.attachTo=function(e){return new t(e)},t.prototype.shake=function(e){this.foundation_.shake(e)},t.prototype.float=function(e){this.foundation_.float(e)},t.prototype.getWidth=function(){return this.foundation_.getWidth()},t.prototype.getDefaultFoundation=function(){var e=this;return new z({addClass:function(t){return e.root_.classList.add(t)},removeClass:function(t){return e.root_.classList.remove(t)},getWidth:function(){return e.root_.scrollWidth},registerInteractionHandler:function(t,i){return e.listen(t,i)},deregisterInteractionHandler:function(t,i){return e.unlisten(t,i)}})},t}(U),W={LINE_RIPPLE_ACTIVE:"mdc-line-ripple--active",LINE_RIPPLE_DEACTIVATING:"mdc-line-ripple--deactivating"},q=function(e){function t(i){var n=e.call(this,k({},t.defaultAdapter,i))||this;return n.transitionEndHandler_=function(e){return n.handleTransitionEnd(e)},n}return x(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return W},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},setStyle:function(){},registerEventHandler:function(){},deregisterEventHandler:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.adapter_.registerEventHandler("transitionend",this.transitionEndHandler_)},t.prototype.destroy=function(){this.adapter_.deregisterEventHandler("transitionend",this.transitionEndHandler_)},t.prototype.activate=function(){this.adapter_.removeClass(W.LINE_RIPPLE_DEACTIVATING),this.adapter_.addClass(W.LINE_RIPPLE_ACTIVE)},t.prototype.setRippleCenter=function(e){this.adapter_.setStyle("transform-origin",e+"px center")},t.prototype.deactivate=function(){this.adapter_.addClass(W.LINE_RIPPLE_DEACTIVATING)},t.prototype.handleTransitionEnd=function(e){var t=this.adapter_.hasClass(W.LINE_RIPPLE_DEACTIVATING);"opacity"===e.propertyName&&t&&(this.adapter_.removeClass(W.LINE_RIPPLE_ACTIVE),this.adapter_.removeClass(W.LINE_RIPPLE_DEACTIVATING))},t}(H),X=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return x(t,e),t.attachTo=function(e){return new t(e)},t.prototype.activate=function(){this.foundation_.activate()},t.prototype.deactivate=function(){this.foundation_.deactivate()},t.prototype.setRippleCenter=function(e){this.foundation_.setRippleCenter(e)},t.prototype.getDefaultFoundation=function(){var e=this;return new q({addClass:function(t){return e.root_.classList.add(t)},removeClass:function(t){return e.root_.classList.remove(t)},hasClass:function(t){return e.root_.classList.contains(t)},setStyle:function(t,i){return e.root_.style.setProperty(t,i)},registerEventHandler:function(t,i){return e.listen(t,i)},deregisterEventHandler:function(t,i){return e.unlisten(t,i)}})},t}(U),Y={NOTCH_ELEMENT_SELECTOR:".mdc-notched-outline__notch"},Q={NOTCH_ELEMENT_PADDING:8},J={NO_LABEL:"mdc-notched-outline--no-label",OUTLINE_NOTCHED:"mdc-notched-outline--notched",OUTLINE_UPGRADED:"mdc-notched-outline--upgraded"},Z=function(e){function t(i){return e.call(this,k({},t.defaultAdapter,i))||this}return x(t,e),Object.defineProperty(t,"strings",{get:function(){return Y},enumerable:!0,configurable:!0}),Object.defineProperty(t,"cssClasses",{get:function(){return J},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return Q},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},setNotchWidthProperty:function(){},removeNotchWidthProperty:function(){}}},enumerable:!0,configurable:!0}),t.prototype.notch=function(e){var i=t.cssClasses.OUTLINE_NOTCHED;e>0&&(e+=Q.NOTCH_ELEMENT_PADDING),this.adapter_.setNotchWidthProperty(e),this.adapter_.addClass(i)},t.prototype.closeNotch=function(){var e=t.cssClasses.OUTLINE_NOTCHED;this.adapter_.removeClass(e),this.adapter_.removeNotchWidthProperty()},t}(H),ee=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return x(t,e),t.attachTo=function(e){return new t(e)},t.prototype.initialSyncWithDOM=function(){this.notchElement_=this.root_.querySelector(Y.NOTCH_ELEMENT_SELECTOR);var e=this.root_.querySelector("."+z.cssClasses.ROOT);e?(e.style.transitionDuration="0s",this.root_.classList.add(J.OUTLINE_UPGRADED),requestAnimationFrame((function(){e.style.transitionDuration=""}))):this.root_.classList.add(J.NO_LABEL)},t.prototype.notch=function(e){this.foundation_.notch(e)},t.prototype.closeNotch=function(){this.foundation_.closeNotch()},t.prototype.getDefaultFoundation=function(){var e=this;return new Z({addClass:function(t){return e.root_.classList.add(t)},removeClass:function(t){return e.root_.classList.remove(t)},setNotchWidthProperty:function(t){return e.notchElement_.style.setProperty("width",t+"px")},removeNotchWidthProperty:function(){return e.notchElement_.style.removeProperty("width")}})},t}(U),te={BG_FOCUSED:"mdc-ripple-upgraded--background-focused",FG_ACTIVATION:"mdc-ripple-upgraded--foreground-activation",FG_DEACTIVATION:"mdc-ripple-upgraded--foreground-deactivation",ROOT:"mdc-ripple-upgraded",UNBOUNDED:"mdc-ripple-upgraded--unbounded"},ie={VAR_FG_SCALE:"--mdc-ripple-fg-scale",VAR_FG_SIZE:"--mdc-ripple-fg-size",VAR_FG_TRANSLATE_END:"--mdc-ripple-fg-translate-end",VAR_FG_TRANSLATE_START:"--mdc-ripple-fg-translate-start",VAR_LEFT:"--mdc-ripple-left",VAR_TOP:"--mdc-ripple-top"},ne={DEACTIVATION_TIMEOUT_MS:225,FG_DEACTIVATION_MS:150,INITIAL_ORIGIN_SCALE:.6,PADDING:10,TAP_DELAY_MS:300};
/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
var se=["touchstart","pointerdown","mousedown","keydown"],ae=["touchend","pointerup","mouseup","contextmenu"],oe=[],re=function(e){function t(i){var n=e.call(this,k({},t.defaultAdapter,i))||this;return n.activationAnimationHasEnded_=!1,n.activationTimer_=0,n.fgDeactivationRemovalTimer_=0,n.fgScale_="0",n.frame_={width:0,height:0},n.initialSize_=0,n.layoutFrame_=0,n.maxRadius_=0,n.unboundedCoords_={left:0,top:0},n.activationState_=n.defaultActivationState_(),n.activationTimerCallback_=function(){n.activationAnimationHasEnded_=!0,n.runDeactivationUXLogicIfReady_()},n.activateHandler_=function(e){return n.activate_(e)},n.deactivateHandler_=function(){return n.deactivate_()},n.focusHandler_=function(){return n.handleFocus()},n.blurHandler_=function(){return n.handleBlur()},n.resizeHandler_=function(){return n.layout()},n}return x(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return te},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return ie},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return ne},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},browserSupportsCssVars:function(){return!0},computeBoundingRect:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},containsEventTarget:function(){return!0},deregisterDocumentInteractionHandler:function(){},deregisterInteractionHandler:function(){},deregisterResizeHandler:function(){},getWindowPageOffset:function(){return{x:0,y:0}},isSurfaceActive:function(){return!0},isSurfaceDisabled:function(){return!0},isUnbounded:function(){return!0},registerDocumentInteractionHandler:function(){},registerInteractionHandler:function(){},registerResizeHandler:function(){},removeClass:function(){},updateCssVariable:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){var e=this,i=this.supportsPressRipple_();if(this.registerRootHandlers_(i),i){var n=t.cssClasses,s=n.ROOT,a=n.UNBOUNDED;requestAnimationFrame((function(){e.adapter_.addClass(s),e.adapter_.isUnbounded()&&(e.adapter_.addClass(a),e.layoutInternal_())}))}},t.prototype.destroy=function(){var e=this;if(this.supportsPressRipple_()){this.activationTimer_&&(clearTimeout(this.activationTimer_),this.activationTimer_=0,this.adapter_.removeClass(t.cssClasses.FG_ACTIVATION)),this.fgDeactivationRemovalTimer_&&(clearTimeout(this.fgDeactivationRemovalTimer_),this.fgDeactivationRemovalTimer_=0,this.adapter_.removeClass(t.cssClasses.FG_DEACTIVATION));var i=t.cssClasses,n=i.ROOT,s=i.UNBOUNDED;requestAnimationFrame((function(){e.adapter_.removeClass(n),e.adapter_.removeClass(s),e.removeCssVars_()}))}this.deregisterRootHandlers_(),this.deregisterDeactivationHandlers_()},t.prototype.activate=function(e){this.activate_(e)},t.prototype.deactivate=function(){this.deactivate_()},t.prototype.layout=function(){var e=this;this.layoutFrame_&&cancelAnimationFrame(this.layoutFrame_),this.layoutFrame_=requestAnimationFrame((function(){e.layoutInternal_(),e.layoutFrame_=0}))},t.prototype.setUnbounded=function(e){var i=t.cssClasses.UNBOUNDED;e?this.adapter_.addClass(i):this.adapter_.removeClass(i)},t.prototype.handleFocus=function(){var e=this;requestAnimationFrame((function(){return e.adapter_.addClass(t.cssClasses.BG_FOCUSED)}))},t.prototype.handleBlur=function(){var e=this;requestAnimationFrame((function(){return e.adapter_.removeClass(t.cssClasses.BG_FOCUSED)}))},t.prototype.supportsPressRipple_=function(){return this.adapter_.browserSupportsCssVars()},t.prototype.defaultActivationState_=function(){return{activationEvent:void 0,hasDeactivationUXRun:!1,isActivated:!1,isProgrammatic:!1,wasActivatedByPointer:!1,wasElementMadeActive:!1}},t.prototype.registerRootHandlers_=function(e){var t=this;e&&(se.forEach((function(e){t.adapter_.registerInteractionHandler(e,t.activateHandler_)})),this.adapter_.isUnbounded()&&this.adapter_.registerResizeHandler(this.resizeHandler_)),this.adapter_.registerInteractionHandler("focus",this.focusHandler_),this.adapter_.registerInteractionHandler("blur",this.blurHandler_)},t.prototype.registerDeactivationHandlers_=function(e){var t=this;"keydown"===e.type?this.adapter_.registerInteractionHandler("keyup",this.deactivateHandler_):ae.forEach((function(e){t.adapter_.registerDocumentInteractionHandler(e,t.deactivateHandler_)}))},t.prototype.deregisterRootHandlers_=function(){var e=this;se.forEach((function(t){e.adapter_.deregisterInteractionHandler(t,e.activateHandler_)})),this.adapter_.deregisterInteractionHandler("focus",this.focusHandler_),this.adapter_.deregisterInteractionHandler("blur",this.blurHandler_),this.adapter_.isUnbounded()&&this.adapter_.deregisterResizeHandler(this.resizeHandler_)},t.prototype.deregisterDeactivationHandlers_=function(){var e=this;this.adapter_.deregisterInteractionHandler("keyup",this.deactivateHandler_),ae.forEach((function(t){e.adapter_.deregisterDocumentInteractionHandler(t,e.deactivateHandler_)}))},t.prototype.removeCssVars_=function(){var e=this,i=t.strings;Object.keys(i).forEach((function(t){0===t.indexOf("VAR_")&&e.adapter_.updateCssVariable(i[t],null)}))},t.prototype.activate_=function(e){var t=this;if(!this.adapter_.isSurfaceDisabled()){var i=this.activationState_;if(!i.isActivated){var n=this.previousActivationEvent_;if(!(n&&void 0!==e&&n.type!==e.type))i.isActivated=!0,i.isProgrammatic=void 0===e,i.activationEvent=e,i.wasActivatedByPointer=!i.isProgrammatic&&(void 0!==e&&("mousedown"===e.type||"touchstart"===e.type||"pointerdown"===e.type)),void 0!==e&&oe.length>0&&oe.some((function(e){return t.adapter_.containsEventTarget(e)}))?this.resetActivationState_():(void 0!==e&&(oe.push(e.target),this.registerDeactivationHandlers_(e)),i.wasElementMadeActive=this.checkElementMadeActive_(e),i.wasElementMadeActive&&this.animateActivation_(),requestAnimationFrame((function(){oe=[],i.wasElementMadeActive||void 0===e||" "!==e.key&&32!==e.keyCode||(i.wasElementMadeActive=t.checkElementMadeActive_(e),i.wasElementMadeActive&&t.animateActivation_()),i.wasElementMadeActive||(t.activationState_=t.defaultActivationState_())})))}}},t.prototype.checkElementMadeActive_=function(e){return void 0===e||"keydown"!==e.type||this.adapter_.isSurfaceActive()},t.prototype.animateActivation_=function(){var e=this,i=t.strings,n=i.VAR_FG_TRANSLATE_START,s=i.VAR_FG_TRANSLATE_END,a=t.cssClasses,o=a.FG_DEACTIVATION,r=a.FG_ACTIVATION,c=t.numbers.DEACTIVATION_TIMEOUT_MS;this.layoutInternal_();var d="",l="";if(!this.adapter_.isUnbounded()){var u=this.getFgTranslationCoordinates_(),h=u.startPoint,_=u.endPoint;d=h.x+"px, "+h.y+"px",l=_.x+"px, "+_.y+"px"}this.adapter_.updateCssVariable(n,d),this.adapter_.updateCssVariable(s,l),clearTimeout(this.activationTimer_),clearTimeout(this.fgDeactivationRemovalTimer_),this.rmBoundedActivationClasses_(),this.adapter_.removeClass(o),this.adapter_.computeBoundingRect(),this.adapter_.addClass(r),this.activationTimer_=setTimeout((function(){return e.activationTimerCallback_()}),c)},t.prototype.getFgTranslationCoordinates_=function(){var e,t=this.activationState_,i=t.activationEvent;return{startPoint:e={x:(e=t.wasActivatedByPointer?function(e,t,i){if(!e)return{x:0,y:0};var n,s,a=t.x,o=t.y,r=a+i.left,c=o+i.top;if("touchstart"===e.type){var d=e;n=d.changedTouches[0].pageX-r,s=d.changedTouches[0].pageY-c}else{var l=e;n=l.pageX-r,s=l.pageY-c}return{x:n,y:s}}(i,this.adapter_.getWindowPageOffset(),this.adapter_.computeBoundingRect()):{x:this.frame_.width/2,y:this.frame_.height/2}).x-this.initialSize_/2,y:e.y-this.initialSize_/2},endPoint:{x:this.frame_.width/2-this.initialSize_/2,y:this.frame_.height/2-this.initialSize_/2}}},t.prototype.runDeactivationUXLogicIfReady_=function(){var e=this,i=t.cssClasses.FG_DEACTIVATION,n=this.activationState_,s=n.hasDeactivationUXRun,a=n.isActivated;(s||!a)&&this.activationAnimationHasEnded_&&(this.rmBoundedActivationClasses_(),this.adapter_.addClass(i),this.fgDeactivationRemovalTimer_=setTimeout((function(){e.adapter_.removeClass(i)}),ne.FG_DEACTIVATION_MS))},t.prototype.rmBoundedActivationClasses_=function(){var e=t.cssClasses.FG_ACTIVATION;this.adapter_.removeClass(e),this.activationAnimationHasEnded_=!1,this.adapter_.computeBoundingRect()},t.prototype.resetActivationState_=function(){var e=this;this.previousActivationEvent_=this.activationState_.activationEvent,this.activationState_=this.defaultActivationState_(),setTimeout((function(){return e.previousActivationEvent_=void 0}),t.numbers.TAP_DELAY_MS)},t.prototype.deactivate_=function(){var e=this,t=this.activationState_;if(t.isActivated){var i=k({},t);t.isProgrammatic?(requestAnimationFrame((function(){return e.animateDeactivation_(i)})),this.resetActivationState_()):(this.deregisterDeactivationHandlers_(),requestAnimationFrame((function(){e.activationState_.hasDeactivationUXRun=!0,e.animateDeactivation_(i),e.resetActivationState_()})))}},t.prototype.animateDeactivation_=function(e){var t=e.wasActivatedByPointer,i=e.wasElementMadeActive;(t||i)&&this.runDeactivationUXLogicIfReady_()},t.prototype.layoutInternal_=function(){var e=this;this.frame_=this.adapter_.computeBoundingRect();var i=Math.max(this.frame_.height,this.frame_.width);this.maxRadius_=this.adapter_.isUnbounded()?i:Math.sqrt(Math.pow(e.frame_.width,2)+Math.pow(e.frame_.height,2))+t.numbers.PADDING;var n=Math.floor(i*t.numbers.INITIAL_ORIGIN_SCALE);this.adapter_.isUnbounded()&&n%2!=0?this.initialSize_=n-1:this.initialSize_=n,this.fgScale_=""+this.maxRadius_/this.initialSize_,this.updateLayoutCssVars_()},t.prototype.updateLayoutCssVars_=function(){var e=t.strings,i=e.VAR_FG_SIZE,n=e.VAR_LEFT,s=e.VAR_TOP,a=e.VAR_FG_SCALE;this.adapter_.updateCssVariable(i,this.initialSize_+"px"),this.adapter_.updateCssVariable(a,this.fgScale_),this.adapter_.isUnbounded()&&(this.unboundedCoords_={left:Math.round(this.frame_.width/2-this.initialSize_/2),top:Math.round(this.frame_.height/2-this.initialSize_/2)},this.adapter_.updateCssVariable(n,this.unboundedCoords_.left+"px"),this.adapter_.updateCssVariable(s,this.unboundedCoords_.top+"px"))},t}(H),ce=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.disabled=!1,t}return x(t,e),t.attachTo=function(e,i){void 0===i&&(i={isUnbounded:void 0});var n=new t(e);return void 0!==i.isUnbounded&&(n.unbounded=i.isUnbounded),n},t.createAdapter=function(e){return{addClass:function(t){return e.root_.classList.add(t)},browserSupportsCssVars:function(){return function(e,t){void 0===t&&(t=!1);var i=e.CSS,n=$;if("boolean"==typeof $&&!t)return $;if(!(i&&"function"==typeof i.supports))return!1;var s=i.supports("--css-vars","yes"),a=i.supports("(--css-vars: yes)")&&i.supports("color","#00000000");return n=!(!s&&!a)&&!function(e){var t=e.document,i=t.createElement("div");i.className="mdc-ripple-surface--test-edge-var-bug",t.head.appendChild(i);var n=e.getComputedStyle(i),s=null!==n&&"solid"===n.borderTopStyle;return i.parentNode&&i.parentNode.removeChild(i),s}(e),t||($=n),n}(window)},computeBoundingRect:function(){return e.root_.getBoundingClientRect()},containsEventTarget:function(t){return e.root_.contains(t)},deregisterDocumentInteractionHandler:function(e,t){return document.documentElement.removeEventListener(e,t,B())},deregisterInteractionHandler:function(t,i){return e.root_.removeEventListener(t,i,B())},deregisterResizeHandler:function(e){return window.removeEventListener("resize",e)},getWindowPageOffset:function(){return{x:window.pageXOffset,y:window.pageYOffset}},isSurfaceActive:function(){return V(e.root_,":active")},isSurfaceDisabled:function(){return Boolean(e.disabled)},isUnbounded:function(){return Boolean(e.unbounded)},registerDocumentInteractionHandler:function(e,t){return document.documentElement.addEventListener(e,t,B())},registerInteractionHandler:function(t,i){return e.root_.addEventListener(t,i,B())},registerResizeHandler:function(e){return window.addEventListener("resize",e)},removeClass:function(t){return e.root_.classList.remove(t)},updateCssVariable:function(t,i){return e.root_.style.setProperty(t,i)}}},Object.defineProperty(t.prototype,"unbounded",{get:function(){return Boolean(this.unbounded_)},set:function(e){this.unbounded_=Boolean(e),this.setUnbounded_()},enumerable:!0,configurable:!0}),t.prototype.activate=function(){this.foundation_.activate()},t.prototype.deactivate=function(){this.foundation_.deactivate()},t.prototype.layout=function(){this.foundation_.layout()},t.prototype.getDefaultFoundation=function(){return new re(t.createAdapter(this))},t.prototype.initialSyncWithDOM=function(){var e=this.root_;this.unbounded="mdcRippleIsUnbounded"in e.dataset},t.prototype.setUnbounded_=function(){this.foundation_.setUnbounded(Boolean(this.unbounded_))},t}(U),de={ROOT:"mdc-text-field-character-counter"},le={ROOT_SELECTOR:"."+de.ROOT},ue=function(e){function t(i){return e.call(this,k({},t.defaultAdapter,i))||this}return x(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return de},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return le},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{setContent:function(){}}},enumerable:!0,configurable:!0}),t.prototype.setCounterValue=function(e,t){e=Math.min(e,t),this.adapter_.setContent(e+" / "+t)},t}(H),he=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return x(t,e),t.attachTo=function(e){return new t(e)},Object.defineProperty(t.prototype,"foundation",{get:function(){return this.foundation_},enumerable:!0,configurable:!0}),t.prototype.getDefaultFoundation=function(){var e=this;return new ue({setContent:function(t){e.root_.textContent=t}})},t}(U),_e={ARIA_CONTROLS:"aria-controls",ICON_SELECTOR:".mdc-text-field__icon",INPUT_SELECTOR:".mdc-text-field__input",LABEL_SELECTOR:".mdc-floating-label",LINE_RIPPLE_SELECTOR:".mdc-line-ripple",OUTLINE_SELECTOR:".mdc-notched-outline"},me={DENSE:"mdc-text-field--dense",DISABLED:"mdc-text-field--disabled",FOCUSED:"mdc-text-field--focused",FULLWIDTH:"mdc-text-field--fullwidth",HELPER_LINE:"mdc-text-field-helper-line",INVALID:"mdc-text-field--invalid",NO_LABEL:"mdc-text-field--no-label",OUTLINED:"mdc-text-field--outlined",ROOT:"mdc-text-field",TEXTAREA:"mdc-text-field--textarea",WITH_LEADING_ICON:"mdc-text-field--with-leading-icon",WITH_TRAILING_ICON:"mdc-text-field--with-trailing-icon"},pe={DENSE_LABEL_SCALE:.923,LABEL_SCALE:.75},ge=["pattern","min","max","required","step","minlength","maxlength"],fe=["color","date","datetime-local","month","range","time","week"],ve=["mousedown","touchstart"],be=["click","keydown"],Ee=function(e){function t(i,n){void 0===n&&(n={});var s=e.call(this,k({},t.defaultAdapter,i))||this;return s.isFocused_=!1,s.receivedUserInput_=!1,s.isValid_=!0,s.useNativeValidation_=!0,s.helperText_=n.helperText,s.characterCounter_=n.characterCounter,s.leadingIcon_=n.leadingIcon,s.trailingIcon_=n.trailingIcon,s.inputFocusHandler_=function(){return s.activateFocus()},s.inputBlurHandler_=function(){return s.deactivateFocus()},s.inputInputHandler_=function(){return s.handleInput()},s.setPointerXOffset_=function(e){return s.setTransformOrigin(e)},s.textFieldInteractionHandler_=function(){return s.handleTextFieldInteraction()},s.validationAttributeChangeHandler_=function(e){return s.handleValidationAttributeChange(e)},s}return x(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return me},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return _e},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return pe},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shouldAlwaysFloat_",{get:function(){var e=this.getNativeInput_().type;return fe.indexOf(e)>=0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shouldFloat",{get:function(){return this.shouldAlwaysFloat_||this.isFocused_||!!this.getValue()||this.isBadInput_()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shouldShake",{get:function(){return!this.isFocused_&&!this.isValid()&&!!this.getValue()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!0},registerTextFieldInteractionHandler:function(){},deregisterTextFieldInteractionHandler:function(){},registerInputInteractionHandler:function(){},deregisterInputInteractionHandler:function(){},registerValidationAttributeChangeHandler:function(){return new MutationObserver((function(){}))},deregisterValidationAttributeChangeHandler:function(){},getNativeInput:function(){return null},isFocused:function(){return!1},activateLineRipple:function(){},deactivateLineRipple:function(){},setLineRippleTransformOrigin:function(){},shakeLabel:function(){},floatLabel:function(){},hasLabel:function(){return!1},getLabelWidth:function(){return 0},hasOutline:function(){return!1},notchOutline:function(){},closeOutline:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){var e=this;this.adapter_.isFocused()?this.inputFocusHandler_():this.adapter_.hasLabel()&&this.shouldFloat&&(this.notchOutline(!0),this.adapter_.floatLabel(!0)),this.adapter_.registerInputInteractionHandler("focus",this.inputFocusHandler_),this.adapter_.registerInputInteractionHandler("blur",this.inputBlurHandler_),this.adapter_.registerInputInteractionHandler("input",this.inputInputHandler_),ve.forEach((function(t){e.adapter_.registerInputInteractionHandler(t,e.setPointerXOffset_)})),be.forEach((function(t){e.adapter_.registerTextFieldInteractionHandler(t,e.textFieldInteractionHandler_)})),this.validationObserver_=this.adapter_.registerValidationAttributeChangeHandler(this.validationAttributeChangeHandler_),this.setCharacterCounter_(this.getValue().length)},t.prototype.destroy=function(){var e=this;this.adapter_.deregisterInputInteractionHandler("focus",this.inputFocusHandler_),this.adapter_.deregisterInputInteractionHandler("blur",this.inputBlurHandler_),this.adapter_.deregisterInputInteractionHandler("input",this.inputInputHandler_),ve.forEach((function(t){e.adapter_.deregisterInputInteractionHandler(t,e.setPointerXOffset_)})),be.forEach((function(t){e.adapter_.deregisterTextFieldInteractionHandler(t,e.textFieldInteractionHandler_)})),this.adapter_.deregisterValidationAttributeChangeHandler(this.validationObserver_)},t.prototype.handleTextFieldInteraction=function(){var e=this.adapter_.getNativeInput();e&&e.disabled||(this.receivedUserInput_=!0)},t.prototype.handleValidationAttributeChange=function(e){var t=this;e.some((function(e){return ge.indexOf(e)>-1&&(t.styleValidity_(!0),!0)})),e.indexOf("maxlength")>-1&&this.setCharacterCounter_(this.getValue().length)},t.prototype.notchOutline=function(e){if(this.adapter_.hasOutline())if(e){var t=this.adapter_.hasClass(me.DENSE)?pe.DENSE_LABEL_SCALE:pe.LABEL_SCALE,i=this.adapter_.getLabelWidth()*t;this.adapter_.notchOutline(i)}else this.adapter_.closeOutline()},t.prototype.activateFocus=function(){this.isFocused_=!0,this.styleFocused_(this.isFocused_),this.adapter_.activateLineRipple(),this.adapter_.hasLabel()&&(this.notchOutline(this.shouldFloat),this.adapter_.floatLabel(this.shouldFloat),this.adapter_.shakeLabel(this.shouldShake)),this.helperText_&&this.helperText_.showToScreenReader()},t.prototype.setTransformOrigin=function(e){var t=e.touches,i=t?t[0]:e,n=i.target.getBoundingClientRect(),s=i.clientX-n.left;this.adapter_.setLineRippleTransformOrigin(s)},t.prototype.handleInput=function(){this.autoCompleteFocus(),this.setCharacterCounter_(this.getValue().length)},t.prototype.autoCompleteFocus=function(){this.receivedUserInput_||this.activateFocus()},t.prototype.deactivateFocus=function(){this.isFocused_=!1,this.adapter_.deactivateLineRipple();var e=this.isValid();this.styleValidity_(e),this.styleFocused_(this.isFocused_),this.adapter_.hasLabel()&&(this.notchOutline(this.shouldFloat),this.adapter_.floatLabel(this.shouldFloat),this.adapter_.shakeLabel(this.shouldShake)),this.shouldFloat||(this.receivedUserInput_=!1)},t.prototype.getValue=function(){return this.getNativeInput_().value},t.prototype.setValue=function(e){this.getValue()!==e&&(this.getNativeInput_().value=e),this.setCharacterCounter_(e.length);var t=this.isValid();this.styleValidity_(t),this.adapter_.hasLabel()&&(this.notchOutline(this.shouldFloat),this.adapter_.floatLabel(this.shouldFloat),this.adapter_.shakeLabel(this.shouldShake))},t.prototype.isValid=function(){return this.useNativeValidation_?this.isNativeInputValid_():this.isValid_},t.prototype.setValid=function(e){this.isValid_=e,this.styleValidity_(e);var t=!e&&!this.isFocused_&&!!this.getValue();this.adapter_.hasLabel()&&this.adapter_.shakeLabel(t)},t.prototype.setUseNativeValidation=function(e){this.useNativeValidation_=e},t.prototype.isDisabled=function(){return this.getNativeInput_().disabled},t.prototype.setDisabled=function(e){this.getNativeInput_().disabled=e,this.styleDisabled_(e)},t.prototype.setHelperTextContent=function(e){this.helperText_&&this.helperText_.setContent(e)},t.prototype.setLeadingIconAriaLabel=function(e){this.leadingIcon_&&this.leadingIcon_.setAriaLabel(e)},t.prototype.setLeadingIconContent=function(e){this.leadingIcon_&&this.leadingIcon_.setContent(e)},t.prototype.setTrailingIconAriaLabel=function(e){this.trailingIcon_&&this.trailingIcon_.setAriaLabel(e)},t.prototype.setTrailingIconContent=function(e){this.trailingIcon_&&this.trailingIcon_.setContent(e)},t.prototype.setCharacterCounter_=function(e){if(this.characterCounter_){var t=this.getNativeInput_().maxLength;if(-1===t)throw new Error("MDCTextFieldFoundation: Expected maxlength html property on text input or textarea.");this.characterCounter_.setCounterValue(e,t)}},t.prototype.isBadInput_=function(){return this.getNativeInput_().validity.badInput||!1},t.prototype.isNativeInputValid_=function(){return this.getNativeInput_().validity.valid},t.prototype.styleValidity_=function(e){var i=t.cssClasses.INVALID;e?this.adapter_.removeClass(i):this.adapter_.addClass(i),this.helperText_&&this.helperText_.setValidity(e)},t.prototype.styleFocused_=function(e){var i=t.cssClasses.FOCUSED;e?this.adapter_.addClass(i):this.adapter_.removeClass(i)},t.prototype.styleDisabled_=function(e){var i=t.cssClasses,n=i.DISABLED,s=i.INVALID;e?(this.adapter_.addClass(n),this.adapter_.removeClass(s)):this.adapter_.removeClass(n),this.leadingIcon_&&this.leadingIcon_.setDisabled(e),this.trailingIcon_&&this.trailingIcon_.setDisabled(e)},t.prototype.getNativeInput_=function(){return(this.adapter_?this.adapter_.getNativeInput():null)||{disabled:!1,maxLength:-1,type:"input",validity:{badInput:!1,valid:!0},value:""}},t}(H),ye={HELPER_TEXT_PERSISTENT:"mdc-text-field-helper-text--persistent",HELPER_TEXT_VALIDATION_MSG:"mdc-text-field-helper-text--validation-msg",ROOT:"mdc-text-field-helper-text"},Ce={ARIA_HIDDEN:"aria-hidden",ROLE:"role",ROOT_SELECTOR:"."+ye.ROOT},Ie=function(e){function t(i){return e.call(this,k({},t.defaultAdapter,i))||this}return x(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return ye},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return Ce},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},setAttr:function(){},removeAttr:function(){},setContent:function(){}}},enumerable:!0,configurable:!0}),t.prototype.setContent=function(e){this.adapter_.setContent(e)},t.prototype.setPersistent=function(e){e?this.adapter_.addClass(ye.HELPER_TEXT_PERSISTENT):this.adapter_.removeClass(ye.HELPER_TEXT_PERSISTENT)},t.prototype.setValidation=function(e){e?this.adapter_.addClass(ye.HELPER_TEXT_VALIDATION_MSG):this.adapter_.removeClass(ye.HELPER_TEXT_VALIDATION_MSG)},t.prototype.showToScreenReader=function(){this.adapter_.removeAttr(Ce.ARIA_HIDDEN)},t.prototype.setValidity=function(e){var t=this.adapter_.hasClass(ye.HELPER_TEXT_PERSISTENT),i=this.adapter_.hasClass(ye.HELPER_TEXT_VALIDATION_MSG)&&!e;i?this.adapter_.setAttr(Ce.ROLE,"alert"):this.adapter_.removeAttr(Ce.ROLE),t||i||this.hide_()},t.prototype.hide_=function(){this.adapter_.setAttr(Ce.ARIA_HIDDEN,"true")},t}(H),Ae=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return x(t,e),t.attachTo=function(e){return new t(e)},Object.defineProperty(t.prototype,"foundation",{get:function(){return this.foundation_},enumerable:!0,configurable:!0}),t.prototype.getDefaultFoundation=function(){var e=this;return new Ie({addClass:function(t){return e.root_.classList.add(t)},removeClass:function(t){return e.root_.classList.remove(t)},hasClass:function(t){return e.root_.classList.contains(t)},setAttr:function(t,i){return e.root_.setAttribute(t,i)},removeAttr:function(t){return e.root_.removeAttribute(t)},setContent:function(t){e.root_.textContent=t}})},t}(U),Te={ICON_EVENT:"MDCTextField:icon",ICON_ROLE:"button"},Se={ROOT:"mdc-text-field__icon"},we=["click","keydown"],Me=function(e){function t(i){var n=e.call(this,k({},t.defaultAdapter,i))||this;return n.savedTabIndex_=null,n.interactionHandler_=function(e){return n.handleInteraction(e)},n}return x(t,e),Object.defineProperty(t,"strings",{get:function(){return Te},enumerable:!0,configurable:!0}),Object.defineProperty(t,"cssClasses",{get:function(){return Se},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{getAttr:function(){return null},setAttr:function(){},removeAttr:function(){},setContent:function(){},registerInteractionHandler:function(){},deregisterInteractionHandler:function(){},notifyIconAction:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){var e=this;this.savedTabIndex_=this.adapter_.getAttr("tabindex"),we.forEach((function(t){e.adapter_.registerInteractionHandler(t,e.interactionHandler_)}))},t.prototype.destroy=function(){var e=this;we.forEach((function(t){e.adapter_.deregisterInteractionHandler(t,e.interactionHandler_)}))},t.prototype.setDisabled=function(e){this.savedTabIndex_&&(e?(this.adapter_.setAttr("tabindex","-1"),this.adapter_.removeAttr("role")):(this.adapter_.setAttr("tabindex",this.savedTabIndex_),this.adapter_.setAttr("role",Te.ICON_ROLE)))},t.prototype.setAriaLabel=function(e){this.adapter_.setAttr("aria-label",e)},t.prototype.setContent=function(e){this.adapter_.setContent(e)},t.prototype.handleInteraction=function(e){var t="Enter"===e.key||13===e.keyCode;("click"===e.type||t)&&this.adapter_.notifyIconAction()},t}(H),Le=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return x(t,e),t.attachTo=function(e){return new t(e)},Object.defineProperty(t.prototype,"foundation",{get:function(){return this.foundation_},enumerable:!0,configurable:!0}),t.prototype.getDefaultFoundation=function(){var e=this;return new Me({getAttr:function(t){return e.root_.getAttribute(t)},setAttr:function(t,i){return e.root_.setAttribute(t,i)},removeAttr:function(t){return e.root_.removeAttribute(t)},setContent:function(t){e.root_.textContent=t},registerInteractionHandler:function(t,i){return e.listen(t,i)},deregisterInteractionHandler:function(t,i){return e.unlisten(t,i)},notifyIconAction:function(){return e.emit(Me.strings.ICON_EVENT,{},!0)}})},t}(U),Oe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return x(t,e),t.attachTo=function(e){return new t(e)},t.prototype.initialize=function(e,t,i,n,s,a,o){void 0===e&&(e=function(e,t){return new ce(e,t)}),void 0===t&&(t=function(e){return new X(e)}),void 0===i&&(i=function(e){return new Ae(e)}),void 0===n&&(n=function(e){return new he(e)}),void 0===s&&(s=function(e){return new Le(e)}),void 0===a&&(a=function(e){return new K(e)}),void 0===o&&(o=function(e){return new ee(e)}),this.input_=this.root_.querySelector(_e.INPUT_SELECTOR);var r=this.root_.querySelector(_e.LABEL_SELECTOR);this.label_=r?a(r):null;var c=this.root_.querySelector(_e.LINE_RIPPLE_SELECTOR);this.lineRipple_=c?t(c):null;var d=this.root_.querySelector(_e.OUTLINE_SELECTOR);this.outline_=d?o(d):null;var l=Ie.strings,u=this.root_.nextElementSibling,h=u&&u.classList.contains(me.HELPER_LINE),_=h&&u&&u.querySelector(l.ROOT_SELECTOR);this.helperText_=_?i(_):null;var m=ue.strings,p=this.root_.querySelector(m.ROOT_SELECTOR);!p&&h&&u&&(p=u.querySelector(m.ROOT_SELECTOR)),this.characterCounter_=p?n(p):null,this.leadingIcon_=null,this.trailingIcon_=null;var g=this.root_.querySelectorAll(_e.ICON_SELECTOR);g.length>0&&(g.length>1?(this.leadingIcon_=s(g[0]),this.trailingIcon_=s(g[1])):this.root_.classList.contains(me.WITH_LEADING_ICON)?this.leadingIcon_=s(g[0]):this.trailingIcon_=s(g[0])),this.ripple=this.createRipple_(e)},t.prototype.destroy=function(){this.ripple&&this.ripple.destroy(),this.lineRipple_&&this.lineRipple_.destroy(),this.helperText_&&this.helperText_.destroy(),this.characterCounter_&&this.characterCounter_.destroy(),this.leadingIcon_&&this.leadingIcon_.destroy(),this.trailingIcon_&&this.trailingIcon_.destroy(),this.label_&&this.label_.destroy(),this.outline_&&this.outline_.destroy(),e.prototype.destroy.call(this)},t.prototype.initialSyncWithDOM=function(){this.disabled=this.input_.disabled},Object.defineProperty(t.prototype,"value",{get:function(){return this.foundation_.getValue()},set:function(e){this.foundation_.setValue(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return this.foundation_.isDisabled()},set:function(e){this.foundation_.setDisabled(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"valid",{get:function(){return this.foundation_.isValid()},set:function(e){this.foundation_.setValid(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"required",{get:function(){return this.input_.required},set:function(e){this.input_.required=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pattern",{get:function(){return this.input_.pattern},set:function(e){this.input_.pattern=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minLength",{get:function(){return this.input_.minLength},set:function(e){this.input_.minLength=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxLength",{get:function(){return this.input_.maxLength},set:function(e){e<0?this.input_.removeAttribute("maxLength"):this.input_.maxLength=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"min",{get:function(){return this.input_.min},set:function(e){this.input_.min=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"max",{get:function(){return this.input_.max},set:function(e){this.input_.max=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"step",{get:function(){return this.input_.step},set:function(e){this.input_.step=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"helperTextContent",{set:function(e){this.foundation_.setHelperTextContent(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leadingIconAriaLabel",{set:function(e){this.foundation_.setLeadingIconAriaLabel(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leadingIconContent",{set:function(e){this.foundation_.setLeadingIconContent(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"trailingIconAriaLabel",{set:function(e){this.foundation_.setTrailingIconAriaLabel(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"trailingIconContent",{set:function(e){this.foundation_.setTrailingIconContent(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"useNativeValidation",{set:function(e){this.foundation_.setUseNativeValidation(e)},enumerable:!0,configurable:!0}),t.prototype.focus=function(){this.input_.focus()},t.prototype.layout=function(){var e=this.foundation_.shouldFloat;this.foundation_.notchOutline(e)},t.prototype.getDefaultFoundation=function(){var e=k({},this.getRootAdapterMethods_(),this.getInputAdapterMethods_(),this.getLabelAdapterMethods_(),this.getLineRippleAdapterMethods_(),this.getOutlineAdapterMethods_());return new Ee(e,this.getFoundationMap_())},t.prototype.getRootAdapterMethods_=function(){var e=this;return{addClass:function(t){return e.root_.classList.add(t)},removeClass:function(t){return e.root_.classList.remove(t)},hasClass:function(t){return e.root_.classList.contains(t)},registerTextFieldInteractionHandler:function(t,i){return e.listen(t,i)},deregisterTextFieldInteractionHandler:function(t,i){return e.unlisten(t,i)},registerValidationAttributeChangeHandler:function(t){var i=new MutationObserver((function(e){return t(function(e){return e.map((function(e){return e.attributeName})).filter((function(e){return e}))}(e))}));return i.observe(e.input_,{attributes:!0}),i},deregisterValidationAttributeChangeHandler:function(e){return e.disconnect()}}},t.prototype.getInputAdapterMethods_=function(){var e=this;return{getNativeInput:function(){return e.input_},isFocused:function(){return document.activeElement===e.input_},registerInputInteractionHandler:function(t,i){return e.input_.addEventListener(t,i,B())},deregisterInputInteractionHandler:function(t,i){return e.input_.removeEventListener(t,i,B())}}},t.prototype.getLabelAdapterMethods_=function(){var e=this;return{floatLabel:function(t){return e.label_&&e.label_.float(t)},getLabelWidth:function(){return e.label_?e.label_.getWidth():0},hasLabel:function(){return Boolean(e.label_)},shakeLabel:function(t){return e.label_&&e.label_.shake(t)}}},t.prototype.getLineRippleAdapterMethods_=function(){var e=this;return{activateLineRipple:function(){e.lineRipple_&&e.lineRipple_.activate()},deactivateLineRipple:function(){e.lineRipple_&&e.lineRipple_.deactivate()},setLineRippleTransformOrigin:function(t){e.lineRipple_&&e.lineRipple_.setRippleCenter(t)}}},t.prototype.getOutlineAdapterMethods_=function(){var e=this;return{closeOutline:function(){return e.outline_&&e.outline_.closeNotch()},hasOutline:function(){return Boolean(e.outline_)},notchOutline:function(t){return e.outline_&&e.outline_.notch(t)}}},t.prototype.getFoundationMap_=function(){return{characterCounter:this.characterCounter_?this.characterCounter_.foundation:void 0,helperText:this.helperText_?this.helperText_.foundation:void 0,leadingIcon:this.leadingIcon_?this.leadingIcon_.foundation:void 0,trailingIcon:this.trailingIcon_?this.trailingIcon_.foundation:void 0}},t.prototype.createRipple_=function(e){var t=this,i=this.root_.classList.contains(me.TEXTAREA),n=this.root_.classList.contains(me.OUTLINED);if(i||n)return null;var s=k({},ce.createAdapter(this),{isSurfaceActive:function(){return V(t.input_,":active")},registerInteractionHandler:function(e,i){return t.input_.addEventListener(e,i,B())},deregisterInteractionHandler:function(e,i){return t.input_.removeEventListener(e,i,B())}});return e(this.root_,new re(s))},t}(U);const Pe=[["AF","Afghanistan","+93"],["AX","Åland Islands","+358 18"],["AL","Albania","+355"],["DZ","Algeria","+213"],["AS","American Samoa","+1 684"],["AD","Andorra","+376"],["AO","Angola","+244"],["AI","Anguilla","+1 264"],["AG","Antigua & Barbuda","+1 268"],["AR","Argentina","+54"],["AM","Armenia","+374"],["AW","Aruba","+297"],["SH","Ascension","+247"],["AU","Australia","+61"],["AU","Australian External Territories","+672"],["AT","Austria","+43"],["AZ","Azerbaijan","+994"],["BS","Bahamas","+1 242"],["BH","Bahrain","+973"],["BD","Bangladesh","+880"],["BB","Barbados","+1 246"],["AG","Barbuda","+1 268"],["BY","Belarus","+375"],["BE","Belgium","+32"],["BZ","Belize","+501"],["BJ","Benin","+229"],["BM","Bermuda","+1 441"],["BT","Bhutan","+975"],["BO","Bolivia","+591"],["BQ","Caribbean Netherlands","+599 7"],["BA","Bosnia & Herzegovina","+387"],["BW","Botswana","+267"],["BR","Brazil","+55"],["IO","British Indian Ocean Territory","+246"],["VG","British Virgin Islands","+1 284"],["BN","Brunei","+673"],["BG","Bulgaria","+359"],["BF","Burkina Faso","+226"],["MY","Myanmar (Burma)","+95"],["BI","Burundi","+257"],["KH","Cambodia","+855"],["CM","Cameroon","+237"],["CA","Canada","+1"],["CV","Cape Verde","+238"],["KY","Cayman Islands","+1 345"],["CF","Central African Republic","+236"],["TD","Chad","+235"],["CL","Chile","+56"],["CN","China","+86"],["CX","Christmas Island","+61"],["CC","Cocos (Keeling) Islands","+61"],["CO","Colombia","+57"],["KM","Comoros","+269"],["CG","Congo - Brazzaville","+242"],["CD","Congo - Kinshasa","+243"],["CK","Cook Islands","+682"],["CR","Costa Rica","+506"],["CI","Côte d’Ivoire","+225"],["HR","Croatia","+385"],["CU","Cuba","+53"],["CW","Curaçao","+599 9"],["CY","Cyprus","+357"],["CZ","Czech Republic","+420"],["DK","Denmark","+45"],["DG","Diego Garcia","+246"],["DJ","Djibouti","+253"],["DM","Dominica","+1 767"],["DO","Dominican Republic","+1 809","+1 829","+1 849"],["TL","Timor-Leste","+670"],["EC","Ecuador","+593"],["EG","Egypt","+20"],["SV","El Salvador","+503"],["GQ","Equatorial Guinea","+240"],["ER","Eritrea","+291"],["EE","Estonia","+372"],["ET","Ethiopia","+251"],["FK","Falkland Islands","+500"],["FO","Faroe Islands","+298"],["FJ","Fiji","+679"],["FI","Finland","+358"],["FR","France","+33"],["GF","French Guiana","+594"],["PF","French Polynesia","+689"],["GA","Gabon","+241"],["GM","Gambia","+220"],["GE","Georgia","+995"],["DE","Germany","+49"],["GH","Ghana","+233"],["GI","Gibraltar","+350"],["GR","Greece","+30"],["GL","Greenland","+299"],["GD","Grenada","+1 473"],["GP","Guadeloupe","+590"],["GU","Guam","+1 671"],["GT","Guatemala","+502"],["GG","Guernsey","+44"],["GN","Guinea","+224"],["GW","Guinea-Bissau","+245"],["GY","Guyana","+592"],["HT","Haiti","+509"],["HN","Honduras","+504"],["HK","Hong Kong SAR China","+852"],["HU","Hungary","+36"],["IS","Iceland","+354"],["IN","India","+91"],["ID","Indonesia","+62"],["IR","Iran","+98"],["IQ","Iraq","+964"],["IE","Ireland","+353"],["IL","Israel","+972"],["IT","Italy","+39"],["JM","Jamaica","+1 876"],["SJ","Svalbard & Jan Mayen","+47 79"],["JP","Japan","+81"],["JE","Jersey","+44"],["JO","Jordan","+962"],["KZ","Kazakhstan","+7 7"],["KE","Kenya","+254"],["KI","Kiribati","+686"],["KP","North Korea","+850"],["KR","South Korea","+82"],["KW","Kuwait","+965"],["KG","Kyrgyzstan","+996"],["LA","Laos","+856"],["LV","Latvia","+371"],["LB","Lebanon","+961"],["LS","Lesotho","+266"],["LR","Liberia","+231"],["LY","Libya","+218"],["LI","Liechtenstein","+423"],["LT","Lithuania","+370"],["LU","Luxembourg","+352"],["MO","Macau SAR China","+853"],["MK","Macedonia","+389"],["MG","Madagascar","+261"],["MW","Malawi","+265"],["MY","Malaysia","+60"],["MV","Maldives","+960"],["ML","Mali","+223"],["MT","Malta","+356"],["MH","Marshall Islands","+692"],["MQ","Martinique","+596"],["MR","Mauritania","+222"],["MU","Mauritius","+230"],["YT","Mayotte","+262"],["MX","Mexico","+52"],["FM","Micronesia","+691"],["MD","Moldova","+373"],["MC","Monaco","+377"],["MN","Mongolia","+976"],["ME","Montenegro","+382"],["MS","Montserrat","+1 664"],["MA","Morocco","+212"],["MZ","Mozambique","+258"],["NA","Namibia","+264"],["NR","Nauru","+674"],["NP","Nepal","+977"],["NL","Netherlands","+31"],["NC","New Caledonia","+687"],["NZ","New Zealand","+64"],["NI","Nicaragua","+505"],["NE","Niger","+227"],["NG","Nigeria","+234"],["NU","Niue","+683"],["NF","Norfolk Island","+672"],["MP","Northern Mariana Islands","+1 670"],["NO","Norway","+47"],["OM","Oman","+968"],["PK","Pakistan","+92"],["PW","Palau","+680"],["PS","Palestinian Territories","+970"],["PA","Panama","+507"],["PG","Papua New Guinea","+675"],["PY","Paraguay","+595"],["PE","Peru","+51"],["PH","Philippines","+63"],["PN","Pitcairn Islands","+64"],["PL","Poland","+48"],["PT","Portugal","+351"],["PR","Puerto Rico","+1 787","+1 939"],["QA","Qatar","+974"],["RE","Réunion","+262"],["RO","Romania","+40"],["RU","Russia","+7"],["RW","Rwanda","+250"],["BL","St. Barthélemy","+590"],["SH","St. Helena","+290"],["KN","St. Kitts & Nevis","+1 869"],["LC","St. Lucia","+1 758"],["MF","St. Martin (France)","+590"],["PM","St. Pierre and Miquelon","+508"],["VC","St. Vincent and the Grenadines","+1 784"],["WS","Samoa","+685"],["SM","San Marino","+378"],["ST","São Tomé & Príncipe","+239"],["SA","Saudi Arabia","+966"],["SN","Senegal","+221"],["RS","Serbia","+381"],["SC","Seychelles","+248"],["SL","Sierra Leone","+232"],["SG","Singapore","+65"],["BQ","Sint Eustatius","+599 3"],["SX","Sint Maarten","+1 721"],["SK","Slovakia","+421"],["SI","Slovenia","+386"],["SB","Solomon Islands","+677"],["SO","Somalia","+252"],["ZA","South Africa","+27"],["GS","South Georgia & South Sandwich Islands","+500"],["SS","South Sudan","+211"],["ES","Spain","+34"],["LK","Sri Lanka","+94"],["SD","Sudan","+249"],["SR","Suriname","+597"],["SJ","Svalbard","+47 79"],["SZ","Swaziland","+268"],["SE","Sweden","+46"],["CH","Switzerland","+41"],["SY","Syria","+963"],["TW","Taiwan","+886"],["TJ","Tajikistan","+992"],["TZ","Tanzania","+255"],["TH","Thailand","+66"],["TG","Togo","+228"],["TK","Tokelau","+690"],["TO","Tonga","+676"],["TT","Trinidad & Tobago","+1 868"],["TN","Tunisia","+216"],["TR","Turkey","+90"],["TM","Turkmenistan","+993"],["TC","Turks & Caicos Islands","+1 649"],["TV","Tuvalu","+688"],["UG","Uganda","+256"],["UA","Ukraine","+380"],["AE","United Arab Emirates","+971"],["UK","United Kingdom","+44"],["US","United States","+1"],["UY","Uruguay","+598"],["VI","U.S. Virgin Islands","+1 340"],["UZ","Uzbekistan","+998"],["VU","Vanuatu","+678"],["VE","Venezuela","+58"],["VA","Vatican City","+39 06 698","+379"],["VN","Vietnam","+84"],["WF","Wallis & Futuna","+681"],["YE","Yemen","+967"],["ZM","Zambia","+260"],["ZW","Zimbabwe","+263"]],De={smileys:["😀","😁","😂","🤣","😃","😄","😅","😆","😉","😊","😋","😎","😍","😘","🥰","😗","😙","😚","☺️","🙂","🤗","🤩","🤔","🤨","😐","😑","😶","🙄","😏","😣","😥","😮","🤐","😯","😪","😫","😴","😌","😛","😜","😝","🤤","😒","😓","😔","😕","🙃","🤑","😲","☹️","🙁","😖","😞","😟","😤","😢","😭","😦","😧","😨","😩","🤯","😬","😰","😱","🥵","🥶","😳","🤪","😵","😡","😠","🤬","😷","🤒","🤕","🤢","🤮","🤧","😇","🤠","🤡","🥳","🥴","🥺","🤥","🤫","🤭","🧐","🤓","😈","👿","👹","👺","💀","👻","👽","🤖","💩","😺","😸","😹","😻","😼","😽","🙀","😿","😾","👶","👧","🧒","👦","👩","🧑","👨","👵","🧓","👴","👲","👳‍♀️","👳‍♂️","🧕","🧔","👱‍♂️","👱‍♀️","👨‍🦰","👩‍🦰","👨‍🦱","👩‍🦱","👨‍🦲","👩‍🦲","👨‍🦳","👩‍🦳","🦸‍♀️","🦸‍♂️","🦹‍♀️","🦹‍♂️","👮‍♀️","👮‍♂️","👷‍♀️","👷‍♂️","💂‍♀️","💂‍♂️","🕵️‍♀️","🕵️‍♂️","👩‍⚕️","👨‍⚕️","👩‍🌾","👨‍🌾","👩‍🍳","👨‍🍳","👩‍🎓","👨‍🎓","👩‍🎤","👨‍🎤","👩‍🏫","👨‍🏫","👩‍🏭","👨‍🏭","👩‍💻","👨‍💻","👩‍💼","👨‍💼","👩‍🔧","👨‍🔧","👩‍🔬","👨‍🔬","👩‍🎨","👨‍🎨","👩‍🚒","👨‍🚒","👩‍✈️","👨‍✈️","👩‍🚀","👨‍🚀","👩‍⚖️","👨‍⚖️","👰","🤵","👸","🤴","🤶","🎅","🧙‍♀️","🧙‍♂️","🧝‍♀️","🧝‍♂️","🧛‍♀️","🧛‍♂️","🧟‍♀️","🧟‍♂️","🧞‍♀️","🧞‍♂️","🧜‍♀️","🧜‍♂️","🧚‍♀️","🧚‍♂️","👼","🤰","🤱","🙇‍♀️","🙇‍♂️","💁‍♀️","💁‍♂️","🙅‍♀️","🙅‍♂️","🙆‍♀️","🙆‍♂️","🙋‍♀️","🙋‍♂️","🤦‍♀️","🤦‍♂️","🤷‍♀️","🤷‍♂️","🙎‍♀️","🙎‍♂️","🙍‍♀️","🙍‍♂️","💇‍♀️","💇‍♂️","💆‍♀️","💆‍♂️","🧖‍♀️","🧖‍♂️","💅","🤳","💃","🕺","👯‍♀️","👯‍♂️","🕴","🚶‍♀️","🚶‍♂️","🏃‍♀️","🏃‍♂️","👫","👭","👬","💑","👩‍❤️‍👩","👨‍❤️‍👨","💏","👩‍❤️‍💋‍👩","👨‍❤️‍💋‍👨","👪","👨‍👩‍👧","👨‍👩‍👧‍👦","👨‍👩‍👦‍👦","👨‍👩‍👧‍👧","👩‍👩‍👦","👩‍👩‍👧","👩‍👩‍👧‍👦","👩‍👩‍👦‍👦","👩‍👩‍👧‍👧","👨‍👨‍👦","👨‍👨‍👧","👨‍👨‍👧‍👦","👨‍👨‍👦‍👦","👨‍👨‍👧‍👧","👩‍👦","👩‍👧","👩‍👧‍👦","👩‍👦‍👦","👩‍👧‍👧","👨‍👦","👨‍👧","👨‍👧‍👦","👨‍👦‍👦","👨‍👧‍👧","🤲","👐","🙌","👏","🤝","👍","👎","👊","✊","🤛","🤜","🤞","✌️","🤟","🤘","👌","👈","👉","👆","👇","☝️","✋","🤚","🖐","🖖","👋","🤙","💪","🦵","🦶","🖕","✍️","🙏","💍","💄","💋","👄","👅","👂","👃","👣","👁","👀","🧠","🦴","🦷","🗣","👤","👥"],animals:["🐶","🐱","🐭","🐹","🐰","🦊","🦝","🐻","🐼","🦘","🦡","🐨","🐯","🦁","🐮","🐷","🐽","🐸","🐵","🙈","🙉","🙊","🐒","🐔","🐧","🐦","🐤","🐣","🐥","🦆","🦢","🦅","🦉","🦚","🦜","🦇","🐺","🐗","🐴","🦄","🐝","🐛","🦋","🐌","🐚","🐞","🐜","🦗","🕷","🕸","🦂","🦟","🦠","🐢","🐍","🦎","🦖","🦕","🐙","🦑","🦐","🦀","🐡","🐠","🐟","🐬","🐳","🐋","🦈","🐊","🐅","🐆","🦓","🦍","🐘","🦏","🦛","🐪","🐫","🦙","🦒","🐃","🐂","🐄","🐎","🐖","🐏","🐑","🐐","🦌","🐕","🐩","🐈","🐓","🦃","🕊","🐇","🐁","🐀","🐿","🦔","🐾","🐉","🐲","🌵","🎄","🌲","🌳","🌴","🌱","🌿","☘️","🍀","🎍","🎋","🍃","🍂","🍁","🍄","🌾","💐","🌷","🌹","🥀","🌺","🌸","🌼","🌻","🌞","🌝","🌛","🌜","🌚","🌕","🌖","🌗","🌘","🌑","🌒","🌓","🌔","🌙","🌎","🌍","🌏","💫","⭐️","🌟","✨","⚡️","☄️","💥","🔥","🌪","🌈","☀️","🌤","⛅️","🌥","☁️","🌦","🌧","⛈","🌩","🌨","❄️","☃️","⛄️","🌬","💨","💧","💦","☔️","☂️","🌊","🌫"],food:["🍏","🍎","🍐","🍊","🍋","🍌","🍉","🍇","🍓","🍈","🍒","🍑","🍍","🥭","🥥","🥝","🍅","🍆","🥑","🥦","🥒","🥬","🌶","🌽","🥕","🥔","🍠","🥐","🍞","🥖","🥨","🥯","🧀","🥚","🍳","🥞","🥓","🥩","🍗","🍖","🌭","🍔","🍟","🍕","🥪","🥙","🌮","🌯","🥗","🥘","🥫","🍝","🍜","🍲","🍛","🍣","🍱","🥟","🍤","🍙","🍚","🍘","🍥","🥮","🥠","🍢","🍡","🍧","🍨","🍦","🥧","🍰","🎂","🍮","🍭","🍬","🍫","🍿","🧂","🍩","🍪","🌰","🥜","🍯","🥛","🍼","☕️","🍵","🥤","🍶","🍺","🍻","🥂","🍷","🥃","🍸","🍹","🍾","🥄","🍴","🍽","🥣","🥡","🥢"],sports:["⚽️","🏀","🏈","⚾️","🥎","🏐","🏉","🎾","🥏","🎱","🏓","🏸","🥅","🏒","🏑","🥍","🏏","⛳️","🏹","🎣","🥊","🥋","🎽","⛸","🥌","🛷","🛹","🎿","⛷","🏂","🏋️‍♀️","🏋️‍♂️","🤼‍♀️","🤼‍♂️","🤸‍♀️","🤸‍♂️","⛹️‍♀️","⛹️‍♂️","🤺","🤾‍♀️","🤾‍♂️","🏌️‍♀️","🏌️‍♂️","🏇","🧘‍♀️","🧘‍♂️","🏄‍♀️","🏄‍♂️","🏊‍♀️","🏊‍♂️","🤽‍♀️","🤽‍♂️","🚣‍♀️","🚣‍♂️","🧗‍♀️","🧗‍♂️","🚵‍♀️","🚵‍♂️","🚴‍♀️","🚴‍♂️","🏆","🥇","🥈","🥉","🏅","🎖","🏵","🎗","🎫","🎟","🎪","🤹‍♀️","🤹‍♂️","🎭","🎨","🎬","🎤","🎧","🎼","🎹","🥁","🎷","🎺","🎸","🎻","🎲","🧩","♟","🎯","🎳","🎮","🎰"],travel:["🚗","🚕","🚙","🚌","🚎","🏎","🚓","🚑","🚒","🚐","🚚","🚛","🚜","🛴","🚲","🛵","🏍","🚨","🚔","🚍","🚘","🚖","🚡","🚠","🚟","🚃","🚋","🚞","🚝","🚄","🚅","🚈","🚂","🚆","🚇","🚊","🚉","✈️","🛫","🛬","🛩","💺","🛰","🚀","🛸","🚁","🛶","⛵️","🚤","🛥","🛳","⛴","🚢","⚓️","⛽️","🚧","🚦","🚥","🚏","🗺","🗿","🗽","🗼","🏰","🏯","🏟","🎡","🎢","🎠","⛲️","⛱","🏖","🏝","🏜","🌋","⛰","🏔","🗻","🏕","⛺️","🏠","🏡","🏘","🏚","🏗","🏭","🏢","🏬","🏣","🏤","🏥","🏦","🏨","🏪","🏫","🏩","💒","🏛","⛪️","🕌","🕍","🕋","⛩","🛤","🛣","🗾","🎑","🏞","🌅","🌄","🌠","🎇","🎆","🌇","🌆","🏙","🌃","🌌","🌉","🌁"],objects:["⌚️","📱","📲","💻","⌨️","🖥","🖨","🖱","🖲","🕹","🗜","💽","💾","💿","📀","📼","📷","📸","📹","🎥","📽","🎞","📞","☎️","📟","📠","📺","📻","🎙","🎚","🎛","⏱","⏲","⏰","🕰","⌛️","⏳","📡","🔋","🔌","💡","🔦","🕯","🗑","🛢","💸","💵","💴","💶","💷","💰","💳","🧾","💎","⚖️","🔧","🔨","⚒","🛠","⛏","🔩","⚙️","⛓","🔫","💣","🔪","🗡","⚔️","🛡","🚬","⚰️","⚱️","🏺","🧭","🧱","🔮","🧿","🧸","📿","💈","⚗️","🔭","🧰","🧲","🧪","🧫","🧬","🧯","🔬","🕳","💊","💉","🌡","🚽","🚰","🚿","🛁","🛀","🛀🏻","🛀🏼","🛀🏽","🛀🏾","🛀🏿","🧴","🧵","🧶","🧷","🧹","🧺","🧻","🧼","🧽","🛎","🔑","🗝","🚪","🛋","🛏","🛌","🖼","🛍","🧳","🛒","🎁","🎈","🎏","🎀","🎊","🎉","🧨","🎎","🏮","🎐","🧧","✉️","📩","📨","📧","💌","📥","📤","📦","🏷","📪","📫","📬","📭","📮","📯","📜","📃","📄","📑","📊","📈","📉","🗒","🗓","📆","📅","📇","🗃","🗳","🗄","📋","📁","📂","🗂","🗞","📰","📓","📔","📒","📕","📗","📘","📙","📚","📖","🔖","🔗","📎","🖇","📐","📏","📌","📍","✂️","🖊","🖋","✒️","🖌","🖍","📝","✏️","🔍","🔎","🔏","🔐","🔒","🔓","❤️","🧡","💛","💚","💙","💜","🖤","💔","❣️","💕","💞","💓","💗","💖","💘","💝","💟","☮️","✝️","☪️","🕉","☸️","✡️","🔯","🕎","☯️","☦️","🛐","⛎","♈️","♉️","♊️","♋️","♌️","♍️","♎️","♏️","♐️","♑️","♒️","♓️","🆔","⚛️","🉑","☢️","☣️","📴","📳","🈶","🈚️","🈸","🈺","🈷️","✴️","🆚","💮","🉐","㊙️","㊗️","🈴","🈵","🈹","🈲","🅰️","🅱️","🆎","🆑","🅾️","🆘","❌","⭕️","🛑","⛔️","📛","🚫","💯","💢","♨️","🚷","🚯","🚳","🚱","🔞","📵","🚭","❗️","❕","❓","❔","‼️","⁉️","🔅","🔆","〽️","⚠️","🚸","🔱","⚜️","🔰","♻️","✅","🈯️","💹","❇️","✳️","❎","🌐","💠","Ⓜ️","🌀","💤","🏧","🚾","♿️","🅿️","🈳","🈂️","🛂","🛃","🛄","🛅","🚹","🚺","🚼","🚻","🚮","🎦","📶","🈁","🔣","ℹ️","🔤","🔡","🔠","🆖","🆗","🆙","🆒","🆕","🆓","0️⃣","1️⃣","2️⃣","3️⃣","4️⃣","5️⃣","6️⃣","7️⃣","8️⃣","9️⃣","🔟","🔢","#️⃣","*️⃣","⏏️","▶️","⏸","⏯","⏹","⏺","⏭","⏮","⏩","⏪","⏫","⏬","◀️","🔼","🔽","➡️","⬅️","⬆️","⬇️","↗️","↘️","↙️","↖️","↕️","↔️","↪️","↩️","⤴️","⤵️","🔀","🔁","🔂","🔄","🔃","🎵","🎶","➕","➖","➗","✖️","♾","💲","💱","™️","©️","®️","〰️","➰","➿","🔚","🔙","🔛","🔝","🔜","✔️","☑️","🔘","⚪️","⚫️","🔴","🔵","🔺","🔻","🔸","🔹","🔶","🔷","🔳","🔲","▪️","▫️","◾️","◽️","◼️","◻️","⬛️","⬜️","🔈","🔇","🔉","🔊","🔔","🔕","📣","📢","👁‍🗨","💬","💭","🗯","♠️","♣️","♥️","♦️","🃏","🎴","🀄️","🕐","🕑","🕒","🕓","🕔","🕕","🕖","🕗","🕘","🕙","🕚","🕛","🕜","🕝","🕞","🕟","🕠","🕡","🕢","🕣","🕤","🕥","🕦","🕧"],flags:["🏳️","🏴","🏁","🚩","🏳️‍🌈","🏴‍☠️","🇦🇫","🇦🇽","🇦🇱","🇩🇿","🇦🇸","🇦🇩","🇦🇴","🇦🇮","🇦🇶","🇦🇬","🇦🇷","🇦🇲","🇦🇼","🇦🇺","🇦🇹","🇦🇿","🇧🇸","🇧🇭","🇧🇩","🇧🇧","🇧🇾","🇧🇪","🇧🇿","🇧🇯","🇧🇲","🇧🇹","🇧🇴","🇧🇦","🇧🇼","🇧🇷","🇮🇴","🇻🇬","🇧🇳","🇧🇬","🇧🇫","🇧🇮","🇰🇭","🇨🇲","🇨🇦","🇮🇨","🇨🇻","🇧🇶","🇰🇾","🇨🇫","🇹🇩","🇨🇱","🇨🇳","🇨🇽","🇨🇨","🇨🇴","🇰🇲","🇨🇬","🇨🇩","🇨🇰","🇨🇷","🇨🇮","🇭🇷","🇨🇺","🇨🇼","🇨🇾","🇨🇿","🇩🇰","🇩🇯","🇩🇲","🇩🇴","🇪🇨","🇪🇬","🇸🇻","🇬🇶","🇪🇷","🇪🇪","🇪🇹","🇪🇺","🇫🇰","🇫🇴","🇫🇯","🇫🇮","🇫🇷","🇬🇫","🇵🇫","🇹🇫","🇬🇦","🇬🇲","🇬🇪","🇩🇪","🇬🇭","🇬🇮","🇬🇷","🇬🇱","🇬🇩","🇬🇵","🇬🇺","🇬🇹","🇬🇬","🇬🇳","🇬🇼","🇬🇾","🇭🇹","🇭🇳","🇭🇰","🇭🇺","🇮🇸","🇮🇳","🇮🇩","🇮🇷","🇮🇶","🇮🇪","🇮🇲","🇮🇱","🇮🇹","🇯🇲","🇯🇵","🎌","🇯🇪","🇯🇴","🇰🇿","🇰🇪","🇰🇮","🇽🇰","🇰🇼","🇰🇬","🇱🇦","🇱🇻","🇱🇧","🇱🇸","🇱🇷","🇱🇾","🇱🇮","🇱🇹","🇱🇺","🇲🇴","🇲🇰","🇲🇬","🇲🇼","🇲🇾","🇲🇻","🇲🇱","🇲🇹","🇲🇭","🇲🇶","🇲🇷","🇲🇺","🇾🇹","🇲🇽","🇫🇲","🇲🇩","🇲🇨","🇲🇳","🇲🇪","🇲🇸","🇲🇦","🇲🇿","🇲🇲","🇳🇦","🇳🇷","🇳🇵","🇳🇱","🇳🇨","🇳🇿","🇳🇮","🇳🇪","🇳🇬","🇳🇺","🇳🇫","🇰🇵","🇲🇵","🇳🇴","🇴🇲","🇵🇰","🇵🇼","🇵🇸","🇵🇦","🇵🇬","🇵🇾","🇵🇪","🇵🇭","🇵🇳","🇵🇱","🇵🇹","🇵🇷","🇶🇦","🇷🇪","🇷🇴","🇷🇺","🇷🇼","🇼🇸","🇸🇲","🇸🇦","🇸🇳","🇷🇸","🇸🇨","🇸🇱","🇸🇬","🇸🇽","🇸🇰","🇸🇮","🇬🇸","🇸🇧","🇸🇴","🇿🇦","🇰🇷","🇸🇸","🇪🇸","🇱🇰","🇧🇱","🇸🇭","🇰🇳","🇱🇨","🇵🇲","🇻🇨","🇸🇩","🇸🇷","🇸🇿","🇸🇪","🇨🇭","🇸🇾","🇹🇼","🇹🇯","🇹🇿","🇹🇭","🇹🇱","🇹🇬","🇹🇰","🇹🇴","🇹🇹","🇹🇳","🇹🇷","🇹🇲","🇹🇨","🇹🇻","🇻🇮","🇺🇬","🇺🇦","🇦🇪","🇬🇧","🏴󠁧󠁢󠁥󠁮󠁧󠁿","🏴󠁧󠁢󠁳󠁣󠁴󠁿","🏴󠁧󠁢󠁷󠁬󠁳󠁿","🇺🇳","🇺🇸","🇺🇾","🇺🇿","🇻🇺","🇻🇦","🇻🇪","🇻🇳","🇼🇫","🇪🇭","🇾🇪","🇿🇲","🇿🇼"]},xe=/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g;function ke(e){"UK"===e&&(e="GB");const t=e.codePointAt(0)-65+127462,i=e.codePointAt(1)-65+127462;return String.fromCodePoint(t,i)}function Ne(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const Fe=new class{constructor(){Ne(this,"dom",{}),Ne(this,"mdcComponents",[]),Ne(this,"authParams",{}),Ne(this,"checkInput",()=>{switch(this.step){case 0:this.phoneTextField.value.replace(/\D/g,"").length>=8&&(this.submitButton.hidden=!1);break;case 1:this.codeTextField.value.length>=this.authParams.codeLength&&(this.submitButton.hidden=!1);break;case 2:this.passwordTextField.value&&(this.submitButton.hidden=!1);break;case 3:this.firstNameTextField.value.trim()&&(this.submitButton.hidden=!1)}}),Ne(this,"onFormSubmit",e=>{switch(e.preventDefault(),this.step){case 0:this.submitPhoneNumber();break;case 1:this.submitConfirmationCode();break;case 2:this.submitPassword();break;case 3:this.submitSignUp()}}),Ne(this,"chooseProfilePhoto",()=>{const e=document.createElement("input");e.type="file",e.accept="image/*",e.click(),e.addEventListener("change",()=>{this.profilePhotoFile=e.files[0]})})}init(){const e=d(".login_container",u("login"));this.dom=h(e),this.dom.container=e,this.dom.form.addEventListener("submit",this.onFormSubmit),this.preloadAnimations(),this.setStep(0),document.body.append(e)}setDomContent(e,t){"string"==typeof t?this.dom[e].innerHTML=t:(this.dom[e].innerHTML="",this.dom[e].append(t))}setDomText(e,t){this.dom[e].textContent=t}setAnimatedImage(e,t=null){this.setDomContent("image",e);try{t?e.getLottie().playSegments(t,!0):e.play()}catch(t){console.log("Can not play animation",e)}}setStep(e,t={}){switch(this.step=e,e){case 0:{this.setDomContent("image",'<div class="login_telegram_logo login_image_content"></div>'),this.setDomContent("header","Sign in to Telegram"),this.setDomContent("subheader","Please enter your phone number",!1),this.dom.form.innerHTML="";const e=this.buildInput("Country"),t=this.buildInput("Phone Number","tel"),i=this.buildCountryMenu(e,t);this.submitButton=this.buildButton("Next"),this.countryTextField=new Oe(e),this.phoneTextField=new Oe(t),this.dom.form.append(e,i,t,this.submitButton),this.mdcComponents.push(this.phoneTextField),this.authParams.phoneNumber&&(this.phoneTextField.value=this.authParams.phoneNumber),this.phoneTextField.focus()}break;case 1:{this.setAnimatedImage(this.animations.idle),this.setDomText("header","+"+this.authParams.phoneNumber),this.setDomContent("subheader","We have sent you an SMS<br>with the code."),this.dom.header.append(this.buildEditPhoneButton()),this.dom.form.innerHTML="";const e=this.buildCodeInput();this.submitButton=this.buildButton("Next"),this.codeTextField=new Oe(e),this.dom.form.append(e,this.submitButton),this.mdcComponents.push(this.codeTextField)}break;case 2:{this.setAnimatedImage(this.animations.close,[0,50]),this.setDomContent("header","Enter a password"),this.setDomContent("subheader","Your account is protected with<br>an additional password",!1),this.dom.form.innerHTML="";const e=this.buildPasswordInput();this.submitButton=this.buildButton("Next"),this.passwordTextField=new Oe(e),this.dom.form.append(e,this.submitButton),this.mdcComponents.push(this.passwordTextField),Promise.all([i.e(0),i.e(1)]).then(i.bind(null,11))}break;case 3:{const e=a.html`<div class="login_upload_photo login_image_content">`.buildElement();e.addEventListener("click",this.chooseProfilePhoto),this.setDomContent("image",e),this.setDomContent("header","Your Name"),this.setDomContent("subheader","Enter your name and add<br>a profile picture",!1),this.dom.form.innerHTML="";const t=this.buildInput("Name"),i=this.buildInput("Last Name (optional)");this.submitButton=this.buildButton("Start messaging"),this.firstNameTextField=new Oe(t),this.lastNameTextField=new Oe(i),this.dom.form.append(t,i,this.submitButton),this.mdcComponents.push(this.firstNameTextField,this.lastNameTextField)}}}submitPhoneNumber(){const e=this.phoneTextField.value.replace(/\D/g,"");e.length<8?this.phoneTextField.valid=!1:(this.submitButton.disabled=!0,L.callMethod("auth.sendCode",{phone_number:e,api_id:hi.API_ID,api_hash:hi.API_HASH,settings:{_:"codeSettings"}}).then(t=>{console.log(t),this.authParams.phoneNumber=e,this.authParams.phoneCodeHash=t.phone_code_hash,this.authParams.codeType=t.type._,this.authParams.codeLength=t.type.length,this.setStep(1)}).catch(e=>{"AUTH_RESTART"===e.error_message?this.submitPhoneNumber():(this.phoneTextField.valid=!1,hi.alert(this.getApiErrorDescription(e.error_code,e.error_message)))}).finally(()=>{this.submitButton.disabled=!1}))}submitConfirmationCode(){const e=this.codeTextField.value;e.length===this.authParams.codeLength?(this.submitButton.disabled=!0,L.callMethod("auth.signIn",{phone_number:this.authParams.phoneNumber,phone_code_hash:this.authParams.phoneCodeHash,phone_code:e}).then(e=>{this.onAuthResult(e)}).catch(t=>{"PHONE_CODE_INVALID"===t.error_message?this.codeTextField.valid=!1:"SESSION_PASSWORD_NEEDED"===t.error_message?this.setStep(2):"PHONE_NUMBER_UNOCCUPIED"===t.error_message?(this.authParams.phoneCode=e,this.setStep(3)):(this.codeTextField.valid=!1,hi.alert(this.getApiErrorDescription(t.error_code,t.error_message)))}).finally(()=>{this.submitButton.disabled=!1})):this.codeTextField.valid=!1}async submitPassword(){const e=this.passwordTextField.value;if(!e.length)return void(this.passwordTextField.valid=!1);this.submitButton.disabled=!0;const t=await L.callMethod("account.getPassword"),{getInputPasswordSRP:n}=await Promise.all([i.e(0),i.e(1)]).then(i.bind(null,11)),s=await n(e,t);L.callMethod("auth.checkPassword",{password:Object.assign({_:"inputCheckPasswordSRP"},s)}).then(e=>{this.onAuthResult(e)}).catch(e=>{this.passwordTextField.valid=!1,hi.alert(this.getApiErrorDescription(e.error_code,e.error_message))}).finally(()=>{this.submitButton.disabled=!1})}submitSignUp(){const e=this.firstNameTextField.value,t=this.lastNameTextField.value;e?(this.submitButton.disabled=!0,L.callMethod("auth.signUp",{phone_number:this.authParams.phoneNumber,phone_code_hash:this.authParams.phoneCodeHash,phone_code:this.authParams.phoneCode,first_name:e,last_name:t}).then(e=>{this.onAuthResult(e),this.uploadProfilePhoto()}).catch(e=>{this.passwordTextField.valid=!1,hi.alert(this.getApiErrorDescription(e.error_code,e.error_message))}).finally(()=>{this.submitButton.disabled=!1})):this.firstNameTextField.valid=!1}onAuthResult(e){"auth.authorizationSignUpRequired"===e._?this.setStep(3,{terms_of_service:e.terms_of_service}):hi.authDone(e)}getApiErrorDescription(e,t){switch(t){case"PHONE_NUMBER_INVALID":return"The phone number is invalid";case"PHONE_NUMBER_OCCUPIED":return"The phone number is already in use";case"PHONE_NUMBER_UNOCCUPIED":return"The phone number is not yet being used";case"PHONE_CODE_EXPIRED":return"The confirmation code has expired";case"PHONE_NUMBER_BANNED":return"The provided phone number is banned from telegram";case"PHONE_NUMBER_FLOOD":return"You asked for the code too many times";case"PHONE_PASSWORD_FLOOD":return"You have tried logging in too many times";case"PHONE_PASSWORD_PROTECTED":return"This phone is password protected"}if(420===e&&t.startsWith("FLOOD_WAIT_")){const e=+t.match(/\d+$/)[0];if(e<60)return P.getPlural("login_flood_pluralize_seconds",e);if(e<3600){const t=Math.floor(e/60);return P.getPlural("login_flood_pluralize_minutes",t)}{const t=Math.floor(e/60/60);return P.getPlural("login_flood_pluralize_hours",t)}}return"An error occurred"}buildInput(e,t="text"){const i=a.html`
      <div class="login_input mdc-text-field mdc-text-field--outlined">
        <input type="${t}" class="mdc-text-field__input">
        <div class="mdc-notched-outline">
          <div class="mdc-notched-outline__leading"></div>
          <div class="mdc-notched-outline__notch">
            <label class="mdc-floating-label">${e}</label>
          </div>
          <div class="mdc-notched-outline__trailing"></div>
        </div>
      </div>
    `.buildElement();return i.querySelector("input").addEventListener("keyup",this.checkInput),i}buildCodeInput(){const e=this.buildInput("Code"),t=e.querySelector("input");let i;t.addEventListener("input",()=>{t.value=t.value.replace(/\D/g,""),s()});let n=!1;const s=()=>{n||(n=!0,i?(i.stop(),i.play()):(i=this.animations.tracking,this.setAnimatedImage(i),i.addEventListener("complete",()=>{n=!1})))};return e}buildPasswordInput(){const e=this.buildInput("Password","password"),t=d("input",e),i=a.html`<span class="login_password_visibility_button"></span>`.buildElement();return e.append(i),i.addEventListener("click",()=>{const e="password"===t.type;t.type=e?"text":"password",i.classList.toggle("login_password_visibility_button-visible",e),e?this.setAnimatedImage(this.animations.peek,[0,21]):this.setAnimatedImage(this.animations.peek,[21,33])}),e}buildButton(e,t=!0){const i=a.html`
      <button class="login_button mdc-button mdc-button--unelevated" type="submit" ${t?" hidden":""}><span class="mdc-button__ripple"></span>${e}</button>
    `.buildElement();return this.mdcComponents.push(new ce(i)),i}buildCountryMenu(e,t){const i=a.html`<div class="login_input_arrow"></div>`.buildElement();e.appendChild(i);const n=[],s=[];for(const e of Pe){const[t,i,o]=e;n.push([o.replace(/\s+/g,""),e]);const r=ke(t),c=a.html`
        <li class="mdc-list-item login_countries_item" role="menuitem" data-code="${t}" data-name="${i.toLowerCase()}">
          <div class="login_countries_item_emoji">${r}</div>
          <div class="login_countries_item_country">${i}</div>
          <div class="login_countries_item_prefix">${o}</div>
        </li>
      `.buildElement();c.addEventListener("mousedown",l),s.push(c)}const o=a.html`
      <div class="mdc-menu mdc-menu-surface login_countries_menu" hidden>
        <ul class="mdc-list login_countries_list" role="menu" aria-hidden="true" aria-orientation="vertical" tabindex="-1"></ul>
      </div>
    `.buildElement();d(".login_countries_list",o).append(...s);let r=s.length;const c=e.querySelector("input");function l(e){e.preventDefault();const t=e.currentTarget,i=d(".login_countries_item_country",t).innerText,n=d(".login_countries_item_prefix",t).innerText.replace(/\s+/g,"");Fe.countryTextField.value=i,Fe.phoneTextField.value=n,Fe.phoneTextField.focus()}function u(e){o.hidden=!e,i.classList.toggle("login_input_arrow_open",e)}c.addEventListener("focus",()=>{r&&u(!0)}),c.addEventListener("blur",()=>{u(!1)}),c.addEventListener("input",()=>{const e=c.value.trim().toLowerCase();r=0;for(const t of s)t.dataset.name.indexOf(e)>-1?(t.style.display="",r++):t.style.display="none";u(!!r)});const h=t.querySelector("input");return h.addEventListener("input",()=>{let e=h.value;e&&"+"!==e&&(e=e.replace(/^0+|\D/g,""))&&(e="+"+e);const t=[],i=[];for(const s of n){const[n]=s;e.startsWith(n)?t.push(s):n.startsWith(e)&&i.push(s)}let s;if(t.length&&!i.length&&(1===t.length||t[0][0]!==t[1][0])){const i=t.sort((e,t)=>t[0].length-e[0].length)[0];e!==i[0]&&(e=e.replace(i[0],i[0]+" ")),s=i[1]}h.value=e,Fe.countryTextField.value=s?s[1]:""}),o}buildEditPhoneButton(){const e=a.html`
      <span class="login_edit_phone_button"></span>
    `.buildElement();return e.addEventListener("click",()=>{this.setStep(0)}),e}preloadAnimations(){this.animations={idle:a.html`<tgs-player mode="normal" src="tgs/TwoFactorSetupMonkeyIdle.tgs" class="login_image_content"></tgs-player>`.buildElement(),tracking:a.html`<tgs-player mode="normal" src="tgs/TwoFactorSetupMonkeyTracking.tgs" class="login_image_content"></tgs-player>`.buildElement(),close:a.html`<tgs-player mode="normal" src="tgs/TwoFactorSetupMonkeyClose.tgs" class="login_image_content"></tgs-player>`.buildElement(),peek:a.html`<tgs-player mode="normal" src="tgs/TwoFactorSetupMonkeyPeek.tgs" class="login_image_content"></tgs-player>`.buildElement()};const e=document.createElement("div");e.hidden=!0,e.append(...Object.values(this.animations)),this.dom.container.appendChild(e)}async uploadProfilePhoto(){if(!this.profilePhotoFile)return;const e=await FileApiManager.uploadFile(this.profilePhotoFile);await L.callMethod("photos.uploadProfilePhoto",{file:e}),MessagesApiManager.reloadUser(hi.getAuthUserId())}destroy(){this.dom.container.remove(),this.dom=null;for(const e of this.mdcComponents)e.destroy();this.mdcComponents=[]}};function Re(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}window.LoginController=Fe;const He=new class{constructor(){Re(this,"dialogs",[]),Re(this,"archivedDialogs",[]),Re(this,"messages",new Map),Re(this,"chats",new Map),Re(this,"users",new Map),Re(this,"peerDialogs",new Map),Re(this,"chatMessages",new Map),Re(this,"chatsFull",new Map),Re(this,"usersFull",new Map),Re(this,"emitter",new s),L.emitter.on("updates",e=>{this.onUpdates(e.detail)})}onUpdates(e){switch(e._){case"updates":case"updatesCombined":this.updateChats(e.chats),this.updateUsers(e.users);for(const t of e.updates)this.handleUpdate(t);break;case"updateShort":this.handleUpdate(e.update);break;case"updateShortMessage":case"updateShortChatMessage":this.handleUpdateShortMessage(e)}}handleUpdate(e){switch(e._){case"updateNewMessage":case"updateNewChannelMessage":{const t=e.message;this.updateMessages([t]);const i=this.getMessageDialogPeerId(t),n=this.peerDialogs.get(i);n?(n.top_message=t.id,!t.pFlags.out&&t.id>n.read_inbox_max_id&&n.unread_count++,this.updateChatMessages(n,[t]),this.handleDialogOrder(n),this.emitter.trigger("chatNewMessage",{dialog:n,message:t})):this.handleNewDialog(t)}break;case"updateEditMessage":case"updateEditChannelMessage":{const t=e.message.id,i=this.messages.get(t);if(i){this.messages.set(t,e.message);const n=this.getPeerId(i.to_id);this.updateChatEditedMessage(n,i,e.message)}}break;case"updateDeleteMessages":case"updateDeleteChannelMessages":for(let t of e.messages){const e=this.messages.get(t);if(e){this.messages.delete(t);const i=this.getPeerId(e.to_id);this.updateChatDeletedMessage(i,e)}}break;case"updateReadHistoryInbox":case"updateReadChannelInbox":{const t=e.channel_id||this.getPeerId(e.peer),i=this.peerDialogs.get(t);i&&(i.unread_count=e.still_unread_count,i.read_inbox_max_id=e.max_id,this.emitter.trigger("chatUnreadCountUpdate",{dialog:i}))}break;case"updateUserStatus":{const t=this.users.get(e.user_id);t&&(t.status=e.status,this.emitter.trigger("userStatusUpdate",{user:t}))}break;case"updatePinnedDialogs":e.order&&this.handlePinnedDialogsOrder(e.order);break;case"updateDialogPinned":{const t=this.getPeerId(e.peer),i=this.peerDialogs.get(t);i&&(i.pFlags.pinned=e.pFlags.pinned,this.handleDialogOrder(i))}break;case"updateDraftMessage":{const t=this.getPeerId(e.peer),i=this.peerDialogs.get(t);i&&(i.draft=e.draft)}}}handleUpdateShortMessage(e){const t=e.pFlags.out,i=e.from_id||(t?hi.getAuthUserId():e.user_id);let n;if(e.chat_id)n={_:"peerChat",chat_id:e.chat_id};else{n={_:"peerUser",user_id:t?e.user_id:hi.getAuthUserId()}}this.handleUpdate({_:"updateNewMessage",message:{_:"message",flags:e.flags,pFlags:e.pFlags,id:e.id,from_id:i,to_id:n,date:e.date,message:e.message,fwd_from:e.fwd_from,reply_to_msg_id:e.reply_to_msg_id,entities:e.entities},pts:e.pts,pts_count:e.pts_count})}handleUpdateShortSentMessage(e,t,i,n){this.handleUpdate({_:"updateMessageID",random_id:n,id:e.id});const s=!!t.channel_id,a=s&&this.isMegagroup(t.channel_id),o={_:"message",id:e.id,from_id:s&&!a?0:hi.getAuthUserId(),to_id:t,flags:e.flags,pFlags:e.pFlags,date:e.date,message:i};e.media&&"messageMediaEmpty"!==e.media._&&(o.media=e.media),e.entities&&(o.entities=e.entities),this.handleUpdate({_:s?"updateNewChannelMessage":"updateNewMessage",message:o,pts:e.pts,pts_count:e.pts_count})}async handleNewDialog(e){"peerChannel"===e.to_id._&&await this.reloadChannel(e.to_id.channel_id);const t=await this.loadPeerDialog(this.getMessageDialogPeer(e));t&&(this.handleDialogOrder(t),this.emitter.trigger("chatNewMessage",{dialog:t,message:e}))}async handlePinnedDialogsOrder(e){const t=[],i=[];for(const t of e){let e=this.peerDialogs.get(this.getPeerId(t.peer));e||(e=await this.loadPeerDialog(t.peer)),e.pFlags.pinned=!0,i.push(e)}let n=0;for(const e of this.dialogs){if(!e.pFlags.pinned)break;n++,-1===i.indexOf(e)&&(delete e.pFlags.pinned,t.push(e))}this.dialogs.splice(0,n,...i),i.forEach((e,t)=>{this.emitter.trigger("dialogOrderUpdate",{dialog:e,index:t,folderId:0})}),t.forEach(e=>{this.handleDialogOrder(e)})}handleDialogOrder(e){if(e.pFlags.pinned)return;const t=e.top_message&&this.messages.get(e.top_message);if(!t)return;const i=e.folder_id,n=i?this.archivedDialogs:this.dialogs,s=n.indexOf(e);s>-1&&n.splice(s,1);const a=n.findIndex(e=>{if(!e.pFlags.pinned&&e.top_message){const i=this.messages.get(e.top_message);return i&&i.date<t.date}return!1});n.splice(a,0,e),this.emitter.trigger("dialogOrderUpdate",{dialog:e,index:a,folderId:i})}async loadDialogs(e={},t=20,i=0){const n=await L.callMethod("messages.getDialogs",{folder_id:i,exclude_pinned:!!i,offset_date:e.date||0,offset_id:e.id||0,offset_peer:this.getInputPeer(e.peer),limit:t}),{dialogs:s,messages:a,chats:o,users:r}=n;this.updateUsers(r),this.updateChats(o),this.updateMessages(a),this.updateDialogs(s);const c=i?this.archivedDialogs:this.dialogs;return c.splice(c.length,0,...s),this.emitter.trigger("dialogsUpdate",{dialogs:c,folderId:i}),this.preloadDialogsMessages(s),s}loadArchivedDialogs(e={},t=20){return this.loadDialogs(e,t,1)}async loadChatHistory(e,t,i){const n=this.getPeerId(e.peer);let s;if(this.chatMessages.has(n)){if(s=this.chatMessages.get(n),!t||t>s[s.length-1].id)return this.emitter.trigger("chatMessagesUpdate",{dialog:e,messages:s}),s}else{s=[];const i=this.messages.get(e.top_message);i&&(s.push(i),t||(t=i.id)),this.chatMessages.set(n,s),this.emitter.trigger("chatMessagesUpdate",{dialog:e,messages:s})}const a=await this.loadMessages(e.peer,t,i);return this.updateChatMessages(e,a,!0),a}async loadMessages(e,t,i=20,n=0){const s=await L.callMethod("messages.getHistory",{peer:this.getInputPeer(e),offset_id:t,limit:i,add_offset:n});return this.updateMessages(s.messages),this.updateUsers(s.users),this.updateChats(s.chats),s.messages}async preloadDialogsMessages(e){if(!this.dialogsPreloaded){this.dialogsPreloaded=!0;for(const t of e)this.chatMessages.has(this.getPeerId(t.peer))||(await this.loadChatHistory(t,0,10),await m(500))}}async loadPeerDialog(e){const t=await L.callMethod("messages.getPeerDialogs",{peers:[{_:"inputDialogPeer",peer:this.getInputPeer(e)}]});return this.updateUsers(t.users),this.updateChats(t.chats),this.updateMessages(t.messages),this.updateDialogs(t.dialogs),t.dialogs[0]}updateDialogs(e){for(const t of e){const e=this.getPeerId(t.peer);this.peerDialogs.set(e,t)}}updateUsers(e){for(const t of e)this.users.set(t.id,t)}updateChats(e,t=!1){for(const i of e)!t&&"channel"===i._&&this.chats.has(i.id)||this.chats.set(i.id,i)}updateMessages(e){for(const t of e)this.messages.set(t.id,t)}updateChatMessages(e,t,i=!1){const n=this.getPeerId(e.peer),s=this.chatMessages.get(n);s&&(i?s.push(...t):s.unshift(...t),this.emitter.trigger("chatMessagesUpdate",{dialog:e,messages:s}))}updateChatEditedMessage(e,t,i){const n=this.peerDialogs.get(e);if(!n)return;const s=this.chatMessages.get(e);if(s){const e=s.indexOf(t);e>-1&&s.splice(e,1,i),this.emitter.trigger("chatEditMessage",{dialog:n,message:i})}n.top_message===t.id&&this.emitter.trigger("dialogTopMessageUpdate",{dialog:n})}updateChatDeletedMessage(e,t){const i=this.peerDialogs.get(e);if(!i)return;const n=this.chatMessages.get(e);if(n){const e=n.indexOf(t);e>-1&&n.splice(e,1),this.emitter.trigger("chatDeleteMessage",{dialog:i,message:t})}i.top_message===t.id&&(n&&n.length?i.top_message=n[0].id:delete i.top_message,this.emitter.trigger("dialogTopMessageUpdate",{dialog:i}))}async sendMessage(e,t){const i=p(),n=await L.callMethod("messages.sendMessage",{message:t,peer:this.getInputPeer(e),random_id:i});"updateShortSentMessage"===n._?this.handleUpdateShortSentMessage(n,e,t,i):this.onUpdates(n)}async sendMedia(e,t,i=""){const n=p(),s=await L.callMethod("messages.sendMedia",{message:i,media:t,peer:this.getInputPeer(e),random_id:n});"updateShortSentMessage"===s._?this.handleUpdateShortSentMessage(s,e,i,n):this.onUpdates(s)}async readHistory(e,t){e.peer.channel_id?await L.callMethod("channels.readHistory",{channel:this.getInputPeer(e.peer),max_id:t}):await L.callMethod("messages.readHistory",{peer:this.getInputPeer(e.peer),max_id:t}),e.unread_count=0,this.emitter.trigger("chatUnreadCountUpdate",{dialog:e})}saveDraft(e,t){return L.callMethod("messages.saveDraft",{message:t,peer:this.getInputPeer(e)})}getDialog(e){return this.peerDialogs.get(e)}getMessageAuthorPeer(e){return e.from_id?this.getPeerById(e.from_id):e.to_id}getMessageAuthorPeerId(e){return this.getPeerId(this.getMessageAuthorPeer(e))}getMessageDialogPeer(e){return"peerUser"===e.to_id._?e.pFlags.out?e.to_id:{_:"peerUser",user_id:e.from_id}:e.to_id}getMessageDialogPeerId(e){return this.getPeerId(this.getMessageDialogPeer(e))}getPeerId(e){switch(e._){case"peerUser":return e.user_id;case"peerChat":return e.chat_id;case"peerChannel":return e.channel_id}}getPeerData(e){switch(e._){case"peerUser":return this.users.get(e.user_id);case"peerChat":return this.chats.get(e.chat_id);case"peerChannel":return this.chats.get(e.channel_id)}}getPeerName(e,t=!0){const i=this.getPeerData(e);return i?"peerUser"===e._?this.getUserName(i,t):this.getChatName(i):""}getUserName(e,t=!0){return e.pFlags.deleted?"Deleted Account":t?[e.first_name,e.last_name].join(" ").trim():e.first_name||e.last_name||""}getChatName(e){return e.title||""}getPeerPhoto(e){const t=this.getPeerData(e);return!!t&&t.photo}getInputPeer(e){if(!e)return{_:"inputPeerEmpty"};const t=this.getPeerData(e);switch(e._){case"peerUser":return e.user_id===hi.getAuthUserId()?{_:"inputPeerSelf"}:{_:"inputPeerUser",user_id:e.user_id,access_hash:t&&t.access_hash||0};case"peerChat":return{_:"inputPeerChat",chat_id:e.chat_id,access_hash:t&&t.access_hash||0};case"peerChannel":return{_:"inputPeerChannel",channel_id:e.channel_id,access_hash:t&&t.access_hash||0}}}getInputPeerById(e){return this.getInputPeer(this.getPeerById(e))}getInputMessagesFilter(e){switch(e){case"media":return{_:"inputMessagesFilterPhotos"};case"docs":return{_:"inputMessagesFilterDocument"};case"links":return{_:"inputMessagesFilterUrl"};case"audio":return{_:"inputMessagesFilterMusic"}}}getUserPeer(e){return{_:"peerUser",user_id:e.id}}getChatPeer(e){return"channel"===e._?{_:"peerChannel",channel_id:e.id}:{_:"peerChat",chat_id:e.id}}getPeerById(e){return this.users.has(e)?this.getUserPeer(this.users.get(e)):this.chats.has(e)?this.getChatPeer(this.chats.get(e)):void 0}isMegagroup(e){return!!this.chats.get(e).pFlags.megagroup}async reloadChannel(e){const t=await L.callMethod("channels.getChannels",{id:[this.getInputPeerById(e)]});this.updateChats(t.chats,!0)}async reloadUser(e){const t=await L.callMethod("users.getUsers",{id:[this.getInputPeerById(e)]});this.updateUsers(t)}async loadChatFull(e){if(this.chatsFull.has(e))return this.chatsFull.get(e);const t=this.getInputPeerById(e);let i;i="inputPeerChannel"===t._?await L.callMethod("channels.getFullChannel",{channel:t}):await L.callMethod("messages.getFullChat",{chat_id:e}),this.updateUsers(i.users),this.updateChats(i.chats);const n=i.full_chat;return this.chatsFull.set(e,n),n}async loadUserFull(e){if(this.usersFull.has(e))return this.usersFull.get(e);const t=this.getInputPeerById(e),i=await L.callMethod("users.getFullUser",{id:t});return this.usersFull.set(e,i),i}};function Ue(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}window.MessagesApiManager=He;const Be=new class{constructor(){Ue(this,"jpegHeader",je("/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDACgcHiMeGSgjISMtKygwPGRBPDc3PHtYXUlkkYCZlo+AjIqgtObDoKrarYqMyP/L2u71////m8H////6/+b9//j/2wBDASstLTw1PHZBQXb4pYyl+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj/wAARCAAAAAADASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwA=")),Ue(this,"jpegFooter",je("/9k="))}choosePhotoSize(e,t="m"){const i=e.find(e=>e.type===t);return i||("i"!==t?e.find(e=>"i"!==e.type):void 0)}isCachedPhotoSize(e){return"photoCachedSize"===e._}async getCachedPhotoSize(e,t="image/jpeg"){let i;if("image/webp"===t){await C()||(i=await A(e.bytes))}return i||(i=new Blob([e.bytes],{type:t})),URL.createObjectURL(i)}getPhotoStrippedSize(e){const t=this.choosePhotoSize(e,"i");if(t&&1===t.bytes[0]){const e=this.jpegHeader,i=this.jpegFooter;return"data:image/jpeg;base64,"+function(e){e instanceof ArrayBuffer&&(e=new Uint8Array(e));let t="";for(let i=0;i<e.length;i++)t+=String.fromCharCode(e[i]);return btoa(t)}(function(...e){let t=0;for(const i of e)t+=i.byteLength||i.length||0;const i=new Int8Array(t);let n=0;for(const t of e)i.set(t instanceof ArrayBuffer?new Int8Array(t):t,n),n+=t.byteLength||t.length;return i.buffer}(e.subarray(0,164),t.bytes.subarray(1,2),e.subarray(165,166),t.bytes.subarray(2,3),e.subarray(167),t.bytes.subarray(3),i))}}getDocumentAttributes(e){const t={},i=e.thumbs&&e.thumbs.length;for(const n of e.attributes)switch(n._){case"documentAttributeFilename":t.file_name=n.file_name;break;case"documentAttributeAudio":t.duration=n.duration,t.audioTitle=n.title,t.audioPerformer=n.performer,t.type=n.pFlags.voice?"voice":"audio";break;case"documentAttributeVideo":t.duration=n.duration,t.w=n.w,t.h=n.h,i&&n.pFlags.round_message?t.type="round":i&&(t.type="video");break;case"documentAttributeSticker":t.sticker=!0,void 0!==n.alt&&(t.stickerEmoji=n.alt),n.stickerset&&("inputStickerSetEmpty"===n.stickerset._?delete n.stickerset:"inputStickerSetID"===n.stickerset._&&(t.stickerSetInput=n.stickerset)),i&&(t.type="sticker","application/x-tgsticker"===e.mime_type&&(t.animated=!0));break;case"documentAttributeImageSize":t.w=n.w,t.h=n.h,i&&("application/x-tgsticker"===e.mime_type?(t.type="sticker",t.animated=!0):t.type="image");break;case"documentAttributeAnimated":"image/gif"!==e.mime_type&&"video/mp4"!==e.mime_type||!i||(t.type="gif"),t.animated=!0}if(t.mime_type=e.mime_type,!t.mime_type)switch(t.type){case"gif":t.mime_type="video/mp4";break;case"video":case"round":t.mime_type="video/mp4";break;case"sticker":t.mime_type="image/webp";break;case"audio":t.mime_type="audio/mpeg";break;case"voice":t.mime_type="audio/ogg";break;default:t.mime_type="application/octet-stream"}return t.file_name||(t.file_name=""),t}};function je(e){const t=atob(e),i=new Uint8Array(t.length);for(let n=0;n<e.length;n++)i[n]=t.charCodeAt(n);return i}function Ve(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}window.MediaApiManager=Be;const $e=new class{constructor(){Ve(this,"blobUrls",new Map),Ve(this,"requests",new Map),Ve(this,"queue",[]),Ve(this,"inProgress",0),Ve(this,"connections",new Map)}getBlobUrl(e){return URL.createObjectURL(e)}queueWait(e){if(this.inProgress++<2)return Promise.resolve();const t=this.queue.findIndex(t=>t.priority<e),i=r();return this.queue.splice(t,0,{priority:e,deferred:i}),i.promise}queueDone(){this.inProgress--;const e=this.queue.shift();e&&e.deferred.resolve()}getConnection(e){let t;if(this.connections.has(e)){const i=this.connections.get(e);t=i.connection,i.processCount++}else t=new w({dcId:e,upload:!0}),this.connections.set(e,{connection:t,processCount:1});return t}connectionDone(e){const t=e.getDcId(),i=this.connections.get(t);i&&--i.processCount||(this.connections.delete(t),e.destroy())}loadFile(e,t,i){const n=this.getDbFileName(e);if(this.requests.has(n))return this.requests.get(n);const s=this.loadFileRequest(e,t,i);return this.requests.set(n,s),s.finally(()=>{this.requests.delete(n)})}async loadFileRequest(e,t,{priority:i=1,cache:n=!1,mimeType:s="",size:a=0,onProgress:o,signal:r}={}){const c=this.getDbFileName(e);if(this.blobUrls.has(c))return this.blobUrls.get(c);let d;if(n)try{Date.now();d=await this.getFromCache(c)}catch(e){console.warn(e)}if(!d){const l=[],u=this.getConnection(t);let h=!1;r&&r.addEventListener("abort",()=>h=!0);try{Date.now();await this.queueWait(i);Date.now();for(let t=0,i=0;;t+=524288){if(h)throw new Error("File download aborted");const n=await u.callMethod("upload.getFile",{location:e,offset:t,limit:524288});if(l.push(new Blob([n.bytes])),i+=n.bytes.byteLength,o&&o(i),s||(s=this.getMimeType(n.type)),a&&i>=a||!a&&n.bytes.byteLength<524288)break}}finally{this.queueDone(),this.connectionDone(u)}if(d=new Blob(l,{type:s}),"image/webp"===s){await C()||(d=await A(await T(d)))}if(n)try{this.saveToCache(c,d)}catch(e){console.warn(e)}}const l=$e.getBlobUrl(d);return this.blobUrls.set(c,l),l}getMimeType(e){switch(e._){case"storage.fileJpeg":return"image/jpeg";case"storage.fileGif":return"image/gif";case"storage.filePng":return"image/png";case"storage.filePdf":return"application/pdf";case"storage.fileMp3":return"audio/mpeg";case"storage.fileMov":return"video/quicktime";case"storage.fileMp4":return"video/mp4";case"storage.fileWebp":return"image/webp";default:return""}}async getFromCache(e){const t=(await this.openDb()).transaction(["files"],"readonly").objectStore("files").get(e);return this.getDbRequestPromise(t)}async saveToCache(e,t){const i=(await this.openDb()).transaction(["files"],"readwrite").objectStore("files").put(t,e);return this.getDbRequestPromise(i)}async openDb(){return this.db?this.db:new Promise((e,t)=>{const i=indexedDB.open("telegram_cache",1);i.onerror=e=>{t(e.target.error)},i.onsuccess=t=>{this.db=t.target.result,e(this.db)},i.onupgradeneeded=t=>{const i=t.target.result;i.createObjectStore("files"),t.target.transaction.oncomplete=()=>{this.db=i,e(this.db)}}})}getDbFileName(e){return e._+(e.id||e.volume_id+e.local_id)+(e.thumb_size||"")}getDbRequestPromise(e){return new Promise((t,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{t(e.target.result)}})}loadPeerPhoto(e,t,i,n,s){const a=i?t.photo_big:t.photo_small,o={_:"inputPeerPhotoFileLocation",peer:He.getInputPeer(e),volume_id:a.volume_id,local_id:a.local_id};return i&&(o.big=!0),this.loadFile(o,n,s)}loadPhoto(e,t,i={}){const n={_:"inputPhotoFileLocation",id:e.id,access_hash:e.access_hash,file_reference:e.file_reference,thumb_size:t};return this.loadFile(n,e.dc_id,i)}loadDocumentThumb(e,t,i={}){const n={_:"inputDocumentFileLocation",id:e.id,access_hash:e.access_hash,file_reference:e.file_reference,thumb_size:t};return this.loadFile(n,e.dc_id,i)}loadDocument(e,t={}){const i={_:"inputDocumentFileLocation",id:e.id,access_hash:e.access_hash,file_reference:e.file_reference};return Object.assign(t,{mimeType:e.mime_type,size:e.size}),this.loadFile(i,e.dc_id,t)}loadStickerSetThumb(e,t={}){const i={_:"inputStickerSetThumb",stickerset:{_:"inputStickerSetID",id:e.id,access_hash:e.access_hash},volume_id:e.thumb.location.volume_id,local_id:e.thumb.location.local_id};return this.loadFile(i,e.thumb_dc_id,t)}async uploadFile(e,t="",{onProgress:i,signal:n}={}){const s=p(),a=e.size>10485760,o=Math.ceil(e.size/262144),r=this.getConnection(ApiClient.getDcId());let c=!1;n&&n.addEventListener("abort",()=>c=!0);try{await this.queueWait(100);for(let t=0,n=0;n<e.size;t++,n+=262144){if(c)throw new Error("File upload aborted");await r.callMethod(a?"upload.saveBigFilePart":"upload.saveFilePart",{file_id:s,file_part:t,file_total_parts:o,bytes:await T(e.slice(n,n+262144))}),i&&i(Math.min(e.size,n+262144))}}finally{this.queueDone(),this.connectionDone(r)}return{_:a?"inputFileBig":"inputFile",id:s,parts:o,name:t,md5_checksum:""}}};function Ge(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}window.FileApiManager=$e;const ze=new class{constructor(){Ge(this,"close",()=>{this.state=null,this.dom.author.innerHTML="",this.dom.content.innerHTML="",this.container.hidden=!0,document.removeEventListener("keyup",this.onKeyUp)}),Ge(this,"onKeyUp",e=>{27===e.keyCode&&this.close()}),Ge(this,"download",()=>{if(this.state.url){const e=document.createElement("a");e.href=this.state.url,e.download=this.getDownloadFilename(this.state.object),e.click()}}),Ge(this,"onContentClick",e=>{e.target===e.currentTarget&&this.close()}),Ge(this,"onContentTouchStart",e=>{let t=e.pageY,i=0;const n=e=>{const n=e.pageY-t;i=Math.min(1,Math.pow(Math.abs(n),2)/1e4),this.dom.content.style.transform=`translateY(${n}px)`,this.container.style.backgroundColor=`rgba(0, 0, 0, ${.9-.9*i})`,this.dom.author.style.opacity=.5-.5*i,this.dom.controls.style.opacity=1-i},s=()=>{1===i&&this.close(),this.dom.content.removeEventListener("touchmove",n),this.dom.content.removeEventListener("touchend",s),this.dom.content.style.transform="",this.dom.content.style.transition="",this.container.style.backgroundColor="",this.dom.author.style.opacity="",this.dom.controls.style.opacity=""};this.dom.content.addEventListener("touchmove",n),this.dom.content.addEventListener("touchend",s),this.dom.content.style.transition="none"}),this.container=a.html`
      <div class="media_view" hidden>
        <div class="media_view_author" data-js-label="author"></div>
        <div class="media_view_controls"  data-js-label="controls">
          <button class="media_view_controls_item media_view_controls_item-delete" data-js-label="button_delete"></button>
          <button class="media_view_controls_item media_view_controls_item-forward" data-js-label="button_forward"></button>
          <button class="media_view_controls_item media_view_controls_item-download" data-js-label="button_download"></button>
          <button class="media_view_controls_item media_view_controls_item-close" data-js-label="button_close"></button>
        </div>
        <div class="media_view_content" data-js-label="content"></div>
      </div>
    `.buildElement(),this.dom=h(this.container),this.dom.button_download.addEventListener("click",this.download),this.dom.button_close.addEventListener("click",this.close),this.dom.content.addEventListener("click",this.onContentClick),this.dom.content.addEventListener("touchstart",this.onContentTouchStart),document.body.appendChild(this.container)}showPhoto(e,t,i){const n=e.sizes[e.sizes.length-1],s=this.initLoading(e,t,i,n.size),a=this.state.abortController,o=this.state.onProgress;$e.loadPhoto(e,n.type,{onProgress:o,signal:a.signal}).then(e=>{const t=`<img class="media_view_content_image" src="${e}">`;this.onLoaded(e,t,s)}).catch(e=>{console.log(e)})}showGif(e,t,i){const n=this.initLoading(e,t,i,e.size),s=this.state.abortController,a=this.state.onProgress;$e.loadDocument(e,{onProgress:a,signal:s.signal}).then(e=>{const t=`<video class="media_view_content_gif" src="${e}" playsinline autoplay loop></video>`;this.onLoaded(e,t,n)}).catch(e=>{console.log(e)})}showVideo(e,t,i){const n=this.initLoading(e,t,i,e.size),s=this.state.abortController,a=this.state.onProgress;$e.loadDocument(e,{onProgress:a,signal:s.signal}).then(e=>{const t=`<video class="media_view_content_video" src="${e}" playsinline autoplay controls></video>`;this.onLoaded(e,t,n)}).catch(e=>{console.log(e)})}initLoading(e,t,i,n){this.abort();const s={object:e,message:i,abortController:new AbortController},o=a.html`
      <div class="message_media_progress">
        <svg class="message_media_progress_svg" viewBox="0 0 36 36" xmlns="http://www.w3.org/2000/svg">
          <path class="message_media_progress_path" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"/>
        </svg>
      </div>
    `.buildElement(),r=d(".message_media_progress_path",o);return o.addEventListener("click",e=>{e.stopPropagation(),s.aborted=!0,s.abortController.abort()}),t.appendChild(o),t.classList.add("message_media_thumb-loading"),s.onDone=()=>{o.remove(),t.classList.remove("message_media_thumb-loading"),s.aborted&&(this.state=null)},s.onProgress=e=>{const t=Math.round(100*Math.max(0,Math.min(1,e/n)));100===t?s.onDone():r.style.strokeDasharray=`${t}, 100`},s.abortController.signal.addEventListener("abort",s.onDone),this.state=s,s}onLoaded(e,t,i){i===this.state&&(this.dom.content.innerHTML=t,this.renderAuthor(),this.state.url=e,this.state.onDone(),this.container.hidden=!1,document.addEventListener("keyup",this.onKeyUp))}renderAuthor(){const e=this.state.message;let t,i;if(e.fwd_from){const n=e.fwd_from;t=MessagesApiManager.getPeerById(n.from_id||n.channel_id),i=n.date}else t=MessagesApiManager.getMessageAuthorPeer(e),i=e.date;this.dom.author.innerHTML=a.html`
      <div class="media_view_author_photo"></div>
      <div class="media_view_author_description">
        <div class="media_view_author_name">${MessagesApiManager.getPeerName(t)}</div>
        <div class="media_view_author_date">${MessagesController.formatMessageDateTime(i)}</div>
      </div>
    `;const n=d(".media_view_author_photo",this.dom.author);ChatsController.loadPeerPhoto(n,t)}abort(){this.state&&this.state.abortController&&this.state.abortController.abort(),this.state=null}isOpen(){return!this.container.hidden}getDownloadFilename(e){if("document"===e._){const t=Be.getDocumentAttributes(e);if(t.file_name)return t.file_name}return e._+e.id}};function Ke(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}window.MediaViewController=ze;const We=new class{constructor(){Ke(this,"stickerSets",new Map),Ke(this,"onStickerNavClick",e=>{d(`.emoji_dropdown_list[data-set-id="${e.target.dataset.setId}"]`,this.dom.section_stickers).scrollIntoView()}),Ke(this,"onStickersNavScroll",e=>{e.preventDefault();const t=e.currentTarget,i=Math.abs(e.deltaX)>Math.abs(e.deltaY)?e.deltaX:e.deltaY;t.scrollLeft+=i}),Ke(this,"onTopNavClick",e=>{const t=e.currentTarget.dataset.jsLabel.replace(/^nav_/,"");this.setSection(t)}),Ke(this,"onEmojiClick",e=>{e.target.classList.contains("emoji_dropdown_list_item")&&document.execCommand("insertText",!1,e.target.innerText)}),Ke(this,"onEmojiNavClick",e=>{const t=d(`.emoji_dropdown_list-${e.target.dataset.category}`,this.dom.section_emoji),i=d(".emoji_dropdown_section_content",this.dom.section_emoji);i.style.overflow="hidden",t.scrollIntoView(),i.style.overflow=""}),Ke(this,"onEmojiScroll",e=>{const t=e.currentTarget,i=t.offsetHeight,n=t.scrollTop;let s;for(const e of t.children){if(e.offsetTop>n+i/2)break;s=e}const a=s.dataset.category,o=d(".emoji_dropdown_bottom_nav_item-active",this.dom.section_emoji);o&&o.classList.remove("emoji_dropdown_bottom_nav_item-active"),d(`.emoji_dropdown_bottom_nav_item-${a}`,this.dom.section_emoji).classList.add("emoji_dropdown_bottom_nav_item-active")}),Ke(this,"onStickersScroll",e=>{const t=e.currentTarget,i=t.offsetHeight,n=t.scrollTop,s=[];for(const e of t.children)if(!(e.offsetTop+e.offsetHeight<n-50)){if(e.offsetTop>n+i+50)break;s.push(e)}for(const e of s){const t=this.stickerSets.get(e.dataset.setId);this.loadStickersList(e,t)}}),Ke(this,"onStickerClick",e=>{const t=e.target;if(t.classList.contains("emoji_dropdown_list_item")){const e=t.parentNode.dataset.setId,i=t.dataset.stickerIndex,n=this.stickerSets.get(e).documents[i];dt.onStickerSend(n),this.hide()}}),Ke(this,"onButtonClick",()=>{this.isShown()||this.show()}),Ke(this,"onMouseEnter",()=>{clearTimeout(this.hideTimeout),this.isShown()||this.show()}),Ke(this,"onMouseLeave",()=>{this.hideTimeout=setTimeout(()=>{this.isShown()&&this.hide(),this.hideTimeout=null},500)}),Ke(this,"onGlobalClick",e=>{this.container.contains(e.target)||e.target===this.button?e.preventDefault():this.hide()})}init(){this.container=a.html`
      <div class="emoji_dropdown" hidden>
        <div class="emoji_dropdown_top_nav nav_tabs_container">
          <div class="nav_tabs_item emoji_dropdown_top_nav_item" data-js-label="nav_emoji">
            <div class="nav_tabs_item_label">Emoji</div>
          </div>
          <div class="nav_tabs_item emoji_dropdown_top_nav_item" data-js-label="nav_stickers">
            <div class="nav_tabs_item_label">Stickers</div>
          </div>
          <div class="nav_tabs_item emoji_dropdown_top_nav_item" data-js-label="nav_gifs">
            <div class="nav_tabs_item_label">GIFs</div>
          </div>
        </div>
        <div class="emoji_dropdown_sections_wrap" data-js-label="sections_wrap">
          <section class="emoji_dropdown_section emoji_dropdown_section-emoji" data-js-label="section_emoji">
            <div class="emoji_dropdown_section_content"></div>
            <div class="emoji_dropdown_bottom_nav"></div>
          </section>
          <section class="emoji_dropdown_section emoji_dropdown_section-stickers" data-js-label="section_stickers">
            <div class="emoji_dropdown_section_content"></div>
            <div class="emoji_dropdown_bottom_nav"></div>
          </section>
          <section class="emoji_dropdown_section emoji_dropdown_section-gifs" data-js-label="section_gifs"> 
            <div class="emoji_dropdown_section_content"></div>
            <div class="emoji_dropdown_bottom_nav"></div>
          </section>        
        </div>
      </div>
    `.buildElement(),this.dom=h(this.container),this.dom.nav_emoji.addEventListener("click",this.onTopNavClick),this.dom.nav_stickers.addEventListener("click",this.onTopNavClick),this.initEmojiSection(),this.initStickersSection(),this.setSection("emoji")}initEmojiSection(){let e="",t="";for(const i in De){let n="";for(const e of De[i])n+=`<div class="emoji_dropdown_list_item">${e}</div>`;e+=`<div class="emoji_dropdown_list emoji_dropdown_list-${i}" data-category="${i}">${n}</div>`,t+=`<div class="emoji_dropdown_bottom_nav_item emoji_dropdown_bottom_nav_item-${i}" data-category="${i}"></div>`}const i=d(".emoji_dropdown_section_content",this.dom.section_emoji);i.innerHTML=e,i.addEventListener("click",this.onEmojiClick),i.addEventListener("scroll",this.onEmojiScroll);const n=d(".emoji_dropdown_bottom_nav",this.dom.section_emoji);n.innerHTML=t,n.addEventListener("click",this.onEmojiNavClick)}async initStickersSection(){let e=n.get("user_stickers"),t=0;e&&(t=e.hash);const i=await L.callMethod("messages.getAllStickers",{hash:t});"messages.allStickersNotModified"!==i._&&(e=i,n.set("user_stickers",e));const s=document.createDocumentFragment(),o=document.createDocumentFragment();let r=0;for(const t of e.sets){const e=a.html`<div class="emoji_dropdown_list" data-set-id="${t.id}"></div>`.buildElement();s.appendChild(e);const i=a.html`<div class="emoji_dropdown_bottom_nav_item" data-set-id="${t.id}"></div>`.buildElement();o.append(i),this.initStickerSet(t,e,i,r<3),r++}const c=d(".emoji_dropdown_section_content",this.dom.section_stickers);c.appendChild(s),c.addEventListener("scroll",this.onStickersScroll),c.addEventListener("click",this.onStickerClick);const l=d(".emoji_dropdown_bottom_nav",this.dom.section_stickers);l.append(o),l.addEventListener("click",this.onStickerNavClick),y()?l.style.overflowX="auto":l.addEventListener("mousewheel",this.onStickersNavScroll)}async initStickerSet(e,t,i,n=!1){const s=await L.callMethod("messages.getStickerSet",{stickerset:{_:"inputStickerSetID",id:e.id,access_hash:e.access_hash}});this.stickerSets.set(e.id,s);const o=document.createDocumentFragment();s.documents.forEach((e,t)=>{const i=a.html`<div class="emoji_dropdown_list_item" data-sticker-index="${t}"></div>`.buildElement();o.appendChild(i)}),t.appendChild(o),n&&this.loadStickersList(t,s,!0),this.loadStickerSetThumb(i,s)}loadStickersList(e,t,i=!1){if(!e.dataset.loaded){e.dataset.loaded=1;for(const n of e.children){const e=t.documents[n.dataset.stickerIndex];this.loadStickerThumb(n,e,i)}}}async loadStickerThumb(e,t,i){const n=i?0:1,s=await FileApiManager.loadDocumentThumb(t,"m",{cache:!0,priority:n,mimeType:"image/webp"});e.innerHTML=`<img class="emoji_dropdown_sticker_img" src="${s}">`}async loadStickerSetThumb(e,t){if(t.set.thumb){const i=t.set.pFlags.animated,n=i?"application/x-tgsticker":"image/webp",s=await FileApiManager.loadStickerSetThumb(t.set,{cache:!0,mimeType:n});e.innerHTML=i?`<tgs-player class="emoji_dropdown_sticker_img" src="${s}"></tgs-player>`:`<img class="emoji_dropdown_sticker_img" src="${s}">`}else if(t.documents[0])return this.loadStickerThumb(e,t.documents[0])}setSection(e){if(e===this.section)return;this.section&&this.dom[`nav_${this.section}`].classList.remove("nav_tabs_item-active"),this.section=e,this.dom[`nav_${this.section}`].classList.add("nav_tabs_item-active");const t=420*-["emoji","stickers","gifs"].indexOf(e);this.dom.sections_wrap.style.transform=`translateX(${t}px)`}isShown(){return!this.container.hidden}show(){this.container.hidden=!1,this.button.classList.add("messages_form_emoji_button-active"),document.addEventListener("mousedown",this.onGlobalClick),y()||this.input.focus();const e=l(".emoji_dropdown_section_content",this.container);for(const t of e)t.dispatchEvent(new Event("scroll"))}hide(){this.container.hidden=!0,this.button.classList.remove("messages_form_emoji_button-active"),document.removeEventListener("mousedown",this.onGlobalClick)}bind(e,t){this.button=e,this.input=t,e.addEventListener("mousedown",this.onButtonClick),e.addEventListener("mouseenter",this.onMouseEnter),e.addEventListener("mouseleave",this.onMouseLeave),this.container.addEventListener("mouseenter",this.onMouseEnter),this.container.addEventListener("mouseleave",this.onMouseLeave)}};function qe(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}window.EmojiDropdown=We;const Xe=new class{constructor(){qe(this,"onMenuItemClick",e=>{const t=e.currentTarget.dataset.type;if("media"===t||"file"===t){const e="media"===t,i=document.createElement("input");i.type="file",i.accept=e?"image/*, video/*":"*/*",i.multiple=!0,i.click(),window.input=i,i.onchange=()=>{this.onFilesSelected(i.files,e),this.fileInput=null},this.fileInput=i}}),qe(this,"onMenuButtonClick",()=>{this.isMenuOpen()||this.showMenu()}),qe(this,"onMenuMouseEnter",()=>{clearTimeout(this.hideTimeout),this.isMenuOpen()||this.showMenu()}),qe(this,"onMenuMouseLeave",()=>{this.hideTimeout=setTimeout(()=>{this.isMenuOpen()&&this.hideMenu(),this.hideTimeout=null},500)}),qe(this,"onGlobalClick",e=>{this.menu.contains(e.target)||this.hideMenu()})}init(){this.menu=a.html`
      <div class="mdc-menu mdc-menu-surface messages_form_media_menu" hidden>
        <ul class="mdc-list" role="menu" aria-hidden="true" aria-orientation="vertical" tabindex="-1">
          <li class="mdc-list-item messages_form_media_menu_item messages_form_media_menu_item-media" data-type="media" role="menuitem">
            <span class="mdc-list-item__text">Photo or Video</span>
          </li>
          <li class="mdc-list-item messages_form_media_menu_item messages_form_media_menu_item-file" data-type="file" role="menuitem">
            <span class="mdc-list-item__text">Document</span>
          </li>
          <li class="mdc-list-item messages_form_media_menu_item messages_form_media_menu_item-poll" data-type="poll" role="menuitem">
            <span class="mdc-list-item__text">Poll</span>
          </li>
        </ul>
      </div>
    `.buildElement();for(const e of d(".mdc-list",this.menu).children)new ce(e).unbounded=!0,e.addEventListener("click",this.onMenuItemClick)}bind(e){e.parentNode.append(this.menu),e.addEventListener("mousedown",this.onMenuButtonClick),e.addEventListener("mouseenter",this.onMenuMouseEnter),e.addEventListener("mouseleave",this.onMenuMouseLeave),this.menu.addEventListener("mouseenter",this.onMenuMouseEnter),this.menu.addEventListener("mouseleave",this.onMenuMouseLeave),this.menuButton=e}isMenuOpen(){return!this.menu.hidden}showMenu(){this.menu.hidden=!1,this.menuButton.classList.add("messages_form_media_button-active"),document.addEventListener("mousedown",this.onGlobalClick)}hideMenu(){this.menu.hidden=!0,this.menuButton.classList.remove("messages_form_media_button-active"),document.removeEventListener("mousedown",this.onGlobalClick)}onFilesSelected(e,t){if(e.length)if(e.length>1)for(const i of e)dt.onFileSend(i,t);else dt.onFileSend(e[0],t)}showFilesUploadPopup(e){let t="";for(const i of e){i.name.split(".").pop();t+=a.html`
        <div class="messages_upload_popup_files_item">
          <div class="messages_upload_popup_files_item_thumb"></div>
          <div class="messages_upload_popup_files_item_name">${i.name}</div>
          <div class="messages_upload_popup_files_item_size">${i.size}</div>
        </div>
      `}a.html`
      <div class="messages_upload_popup">
        <div class="messages_upload_popup_header">${P.getPlural("messages_send_n_files",e.length)}</div>
        <button class="messages_upload_popup_send_button">Send</button>
        <button class="messages_upload_popup_close_button"></button>
        ${t}
        <input class="messages_upload_popup_caption_input">
      </div>
    `.buildElement()}};window.FileUploadPopup=Xe;
/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
var Ye={animationend:{cssProperty:"animation",prefixed:"webkitAnimationEnd",standard:"animationend"},animationiteration:{cssProperty:"animation",prefixed:"webkitAnimationIteration",standard:"animationiteration"},animationstart:{cssProperty:"animation",prefixed:"webkitAnimationStart",standard:"animationstart"},transitionend:{cssProperty:"transition",prefixed:"webkitTransitionEnd",standard:"transitionend"}};function Qe(e){return Boolean(e.document)&&"function"==typeof e.document.createElement}function Je(e,t){if(Qe(e)&&t in Ye){var i=e.document.createElement("div"),n=Ye[t],s=n.standard,a=n.prefixed;return n.cssProperty in i.style?s:a}return t}
/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Ze={ANIM_CHECKED_INDETERMINATE:"mdc-checkbox--anim-checked-indeterminate",ANIM_CHECKED_UNCHECKED:"mdc-checkbox--anim-checked-unchecked",ANIM_INDETERMINATE_CHECKED:"mdc-checkbox--anim-indeterminate-checked",ANIM_INDETERMINATE_UNCHECKED:"mdc-checkbox--anim-indeterminate-unchecked",ANIM_UNCHECKED_CHECKED:"mdc-checkbox--anim-unchecked-checked",ANIM_UNCHECKED_INDETERMINATE:"mdc-checkbox--anim-unchecked-indeterminate",BACKGROUND:"mdc-checkbox__background",CHECKED:"mdc-checkbox--checked",CHECKMARK:"mdc-checkbox__checkmark",CHECKMARK_PATH:"mdc-checkbox__checkmark-path",DISABLED:"mdc-checkbox--disabled",INDETERMINATE:"mdc-checkbox--indeterminate",MIXEDMARK:"mdc-checkbox__mixedmark",NATIVE_CONTROL:"mdc-checkbox__native-control",ROOT:"mdc-checkbox",SELECTED:"mdc-checkbox--selected",UPGRADED:"mdc-checkbox--upgraded"},et={ARIA_CHECKED_ATTR:"aria-checked",ARIA_CHECKED_INDETERMINATE_VALUE:"mixed",NATIVE_CONTROL_SELECTOR:".mdc-checkbox__native-control",TRANSITION_STATE_CHECKED:"checked",TRANSITION_STATE_INDETERMINATE:"indeterminate",TRANSITION_STATE_INIT:"init",TRANSITION_STATE_UNCHECKED:"unchecked"},tt={ANIM_END_LATCH_MS:250},it=function(e){function t(i){var n=e.call(this,k({},t.defaultAdapter,i))||this;return n.currentCheckState_=et.TRANSITION_STATE_INIT,n.currentAnimationClass_="",n.animEndLatchTimer_=0,n.enableAnimationEndHandler_=!1,n}return x(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return Ze},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return et},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return tt},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},forceLayout:function(){},hasNativeControl:function(){return!1},isAttachedToDOM:function(){return!1},isChecked:function(){return!1},isIndeterminate:function(){return!1},removeClass:function(){},removeNativeControlAttr:function(){},setNativeControlAttr:function(){},setNativeControlDisabled:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.currentCheckState_=this.determineCheckState_(),this.updateAriaChecked_(),this.adapter_.addClass(Ze.UPGRADED)},t.prototype.destroy=function(){clearTimeout(this.animEndLatchTimer_)},t.prototype.setDisabled=function(e){this.adapter_.setNativeControlDisabled(e),e?this.adapter_.addClass(Ze.DISABLED):this.adapter_.removeClass(Ze.DISABLED)},t.prototype.handleAnimationEnd=function(){var e=this;this.enableAnimationEndHandler_&&(clearTimeout(this.animEndLatchTimer_),this.animEndLatchTimer_=setTimeout((function(){e.adapter_.removeClass(e.currentAnimationClass_),e.enableAnimationEndHandler_=!1}),tt.ANIM_END_LATCH_MS))},t.prototype.handleChange=function(){this.transitionCheckState_()},t.prototype.transitionCheckState_=function(){if(this.adapter_.hasNativeControl()){var e=this.currentCheckState_,t=this.determineCheckState_();if(e!==t){this.updateAriaChecked_();var i=et.TRANSITION_STATE_UNCHECKED,n=Ze.SELECTED;t===i?this.adapter_.removeClass(n):this.adapter_.addClass(n),this.currentAnimationClass_.length>0&&(clearTimeout(this.animEndLatchTimer_),this.adapter_.forceLayout(),this.adapter_.removeClass(this.currentAnimationClass_)),this.currentAnimationClass_=this.getTransitionAnimationClass_(e,t),this.currentCheckState_=t,this.adapter_.isAttachedToDOM()&&this.currentAnimationClass_.length>0&&(this.adapter_.addClass(this.currentAnimationClass_),this.enableAnimationEndHandler_=!0)}}},t.prototype.determineCheckState_=function(){var e=et.TRANSITION_STATE_INDETERMINATE,t=et.TRANSITION_STATE_CHECKED,i=et.TRANSITION_STATE_UNCHECKED;return this.adapter_.isIndeterminate()?e:this.adapter_.isChecked()?t:i},t.prototype.getTransitionAnimationClass_=function(e,i){var n=et.TRANSITION_STATE_INIT,s=et.TRANSITION_STATE_CHECKED,a=et.TRANSITION_STATE_UNCHECKED,o=t.cssClasses,r=o.ANIM_UNCHECKED_CHECKED,c=o.ANIM_UNCHECKED_INDETERMINATE,d=o.ANIM_CHECKED_UNCHECKED,l=o.ANIM_CHECKED_INDETERMINATE,u=o.ANIM_INDETERMINATE_CHECKED,h=o.ANIM_INDETERMINATE_UNCHECKED;switch(e){case n:return i===a?"":i===s?u:h;case a:return i===s?r:c;case s:return i===a?d:l;default:return i===s?u:h}},t.prototype.updateAriaChecked_=function(){this.adapter_.isIndeterminate()?this.adapter_.setNativeControlAttr(et.ARIA_CHECKED_ATTR,et.ARIA_CHECKED_INDETERMINATE_VALUE):this.adapter_.removeNativeControlAttr(et.ARIA_CHECKED_ATTR)},t}(H),nt=["checked","indeterminate"],st=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ripple_=t.createRipple_(),t}return x(t,e),t.attachTo=function(e){return new t(e)},Object.defineProperty(t.prototype,"ripple",{get:function(){return this.ripple_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"checked",{get:function(){return this.nativeControl_.checked},set:function(e){this.nativeControl_.checked=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"indeterminate",{get:function(){return this.nativeControl_.indeterminate},set:function(e){this.nativeControl_.indeterminate=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return this.nativeControl_.disabled},set:function(e){this.foundation_.setDisabled(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.nativeControl_.value},set:function(e){this.nativeControl_.value=e},enumerable:!0,configurable:!0}),t.prototype.initialSyncWithDOM=function(){var e=this;this.handleChange_=function(){return e.foundation_.handleChange()},this.handleAnimationEnd_=function(){return e.foundation_.handleAnimationEnd()},this.nativeControl_.addEventListener("change",this.handleChange_),this.listen(Je(window,"animationend"),this.handleAnimationEnd_),this.installPropertyChangeHooks_()},t.prototype.destroy=function(){this.ripple_.destroy(),this.nativeControl_.removeEventListener("change",this.handleChange_),this.unlisten(Je(window,"animationend"),this.handleAnimationEnd_),this.uninstallPropertyChangeHooks_(),e.prototype.destroy.call(this)},t.prototype.getDefaultFoundation=function(){var e=this;return new it({addClass:function(t){return e.root_.classList.add(t)},forceLayout:function(){return e.root_.offsetWidth},hasNativeControl:function(){return!!e.nativeControl_},isAttachedToDOM:function(){return Boolean(e.root_.parentNode)},isChecked:function(){return e.checked},isIndeterminate:function(){return e.indeterminate},removeClass:function(t){return e.root_.classList.remove(t)},removeNativeControlAttr:function(t){return e.nativeControl_.removeAttribute(t)},setNativeControlAttr:function(t,i){return e.nativeControl_.setAttribute(t,i)},setNativeControlDisabled:function(t){return e.nativeControl_.disabled=t}})},t.prototype.createRipple_=function(){var e=this,t=k({},ce.createAdapter(this),{deregisterInteractionHandler:function(t,i){return e.nativeControl_.removeEventListener(t,i,B())},isSurfaceActive:function(){return V(e.nativeControl_,":active")},isUnbounded:function(){return!0},registerInteractionHandler:function(t,i){return e.nativeControl_.addEventListener(t,i,B())}});return new ce(this.root_,new re(t))},t.prototype.installPropertyChangeHooks_=function(){var e=this,t=this.nativeControl_,i=Object.getPrototypeOf(t);nt.forEach((function(n){var s=Object.getOwnPropertyDescriptor(i,n);if(at(s)){var a=s.get,o={configurable:s.configurable,enumerable:s.enumerable,get:a,set:function(i){s.set.call(t,i),e.foundation_.handleChange()}};Object.defineProperty(t,n,o)}}))},t.prototype.uninstallPropertyChangeHooks_=function(){var e=this.nativeControl_,t=Object.getPrototypeOf(e);nt.forEach((function(i){var n=Object.getOwnPropertyDescriptor(t,i);at(n)&&Object.defineProperty(e,i,n)}))},Object.defineProperty(t.prototype,"nativeControl_",{get:function(){var e=it.strings.NATIVE_CONTROL_SELECTOR,t=this.root_.querySelector(e);if(!t)throw new Error("Checkbox component requires a "+e+" element");return t},enumerable:!0,configurable:!0}),t}(U);function at(e){return!!e&&"function"==typeof e.set}function ot(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const rt=new class{constructor(){ot(this,"sharedSteps",{media:30,docs:15,links:15,audio:15}),ot(this,"close",()=>{this.container&&(this.container.hidden=!0,this.peerId=null,document.removeEventListener("keyup",this.onKeyUp))}),ot(this,"onKeyUp",e=>{27!==e.keyCode||ze.isOpen()||this.close()}),ot(this,"onScroll",()=>{const e=this.scrollContainer,t=e.scrollTop+e.offsetHeight>e.scrollHeight-150;this.sharedLoading.loading[this.sharedSection]||this.sharedLoading.noMore[this.sharedSection]||!t||(this.sharedLoading.loading[this.sharedSection]=!0,this.loadMoreShared())}),ot(this,"onSharedTabClick",e=>{const t=e.currentTarget.dataset.jsLabel.replace(/^nav_/,"");this.setSharedSection(t)})}show(e){if(this.container=d(".right_sidebar"),this.container.hidden=!1,e===this.peerId)return;this.peerId=e,this.sharedSection=null,this.sharedLoading={loading:{media:!0,docs:!1,links:!1,audio:!1},noMore:{media:!1,docs:!1,links:!1,audio:!1},offsetMsgId:{media:0,docs:0,links:0,audio:0}};const t=He.getPeerById(e),i=He.getPeerName(t),n=He.getPeerData(t);let s="";"user"===n._&&(s=_t.getUserStatusText(n)),this.container.innerHTML=a.html`
      <div class="right_sidebar_scroll_wrap">
        <div class="sidebar_header">
          <button type="button" class="sidebar_close_button mdc-icon-button"></button>
          <div class="sidebar_header_title">Info</div>
          <button type="button" class="sidebar_extra_menu_button mdc-icon-button"></button>
        </div>
        <div class="sidebar_user_info">
          <div class="sidebar_user_photo"></div>
          <div class="sidebar_user_name">${i}</div>
          <div class="sidebar_user_desc">${s}</div>
        </div>
        <div class="chat_info_desc"></div>
        <div class="nav_tabs_container chat_info_shared_media_nav">
          <div class="nav_tabs_item chat_info_shared_media_nav_item" data-js-label="nav_media">
            <div class="nav_tabs_item_label">Media</div>
          </div>
          <div class="nav_tabs_item chat_info_shared_media_nav_item" data-js-label="nav_docs">
            <div class="nav_tabs_item_label">Docs</div>
          </div>
          <div class="nav_tabs_item chat_info_shared_media_nav_item" data-js-label="nav_links">
            <div class="nav_tabs_item_label">Links</div>
          </div>
          <div class="nav_tabs_item chat_info_shared_media_nav_item" data-js-label="nav_audio">
            <div class="nav_tabs_item_label">Audio</div>
          </div>
        </div>
        <div class="chat_info_shared_wrap">
          <div class="chat_info_shared chat_info_shared_media"></div>
          <div class="chat_info_shared chat_info_shared_docs" hidden></div>
          <div class="chat_info_shared chat_info_shared_links" hidden></div>
          <div class="chat_info_shared chat_info_shared_audio" hidden></div>
        </div>
      </div>
    `,this.scrollContainer=d(".right_sidebar_scroll_wrap",this.container),this.renderPeerPhoto(t),this.bindListeners(),this.loadPeerFullInfo(n).then(e=>{this.renderDesc(n,e)})}bindListeners(){const e=d(".sidebar_close_button",this.container);e.addEventListener("click",this.close),new ce(e).unbounded=!0,document.addEventListener("keyup",this.onKeyUp);const t=d(".sidebar_extra_menu_button",this.container);new ce(t).unbounded=!0,this.scrollContainer.addEventListener("scroll",this.onScroll),this.sharedTabsDom=h(this.container);for(let e in this.sharedTabsDom)this.sharedTabsDom[e].addEventListener("click",this.onSharedTabClick);this.setSharedSection("media")}getNotificationsCheckboxHtml(){return a.html`
      <div class="mdc-form-field">
        <div class="mdc-checkbox">
          <input type="checkbox" class="mdc-checkbox__native-control" id="checkbox-notifications"/>
          <div class="mdc-checkbox__background">
            <svg class="mdc-checkbox__checkmark" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
              <path class="mdc-checkbox__checkmark-path" fill="none" d="M1.73,12.91 8.1,19.28 22.79,4.59"/>
            </svg>
            <div class="mdc-checkbox__mixedmark"></div>
          </div>
          <div class="mdc-checkbox__ripple"></div>
        </div>
      </div>
    `}renderDesc(e,t){const i=!t.notify_settings.pFlags.mute_until,n={bio:t.about,username:e.username,phone:e.phone?`+${e.phone}`:""},s=a.html``;for(const e in n){const t=n[e];t&&s.appendHtml`
        <div class="chat_info_desc_row">
          <div class="chat_info_desc_icon chat_info_desc_icon-${e}"></div>
          <div class="chat_info_desc_row_block">
            <div class="chat_info_desc_row_text">${t}</div>
            <div class="chat_info_desc_row_subtitle">${e}</div>
          </div>
        </div>
      `}s.appendHtml`
      <div class="chat_info_desc_row">
        <div class="chat_info_desc_checkbox">${this.getNotificationsCheckboxHtml()}</div>
        <label for="checkbox-notifications" class="chat_info_desc_row_block">
          <div class="chat_info_desc_row_text">Notifications</div>
          <div class="chat_info_desc_row_subtitle">${i?"Enabled":"Disabled"}</div>
        </label>
      </div>
    `,d(".chat_info_desc").innerHTML=s,new st(document.querySelector(".mdc-checkbox")).checked=i}renderPeerPhoto(e){const t=d(".sidebar_user_photo",this.container);$t.loadPeerPhoto(t,e,!0)}async loadPeerFullInfo(e){return"user"===e._?await He.loadUserFull(this.peerId):await He.loadChatFull(this.peerId)}async loadMoreShared(){const e=this.sharedSection;let t;try{t=await L.callMethod("messages.search",{peer:He.getInputPeerById(this.peerId),filter:He.getInputMessagesFilter(e),limit:this.sharedSteps[e],offset_id:this.sharedLoading.offsetMsgId[e]})}finally{this.sharedLoading.loading[e]=!1}if((t.count<this.sharedSteps[e]||t.messages.length<this.sharedSteps[e])&&(this.sharedLoading.noMore[e]=!0,!t.messages.length))return;const i=t.messages;switch(this.sharedLoading.offsetMsgId[e]=i[i.length-1].id,He.updateMessages(i),e){case"media":return this.renderSharedMedia(i);case"docs":return this.renderSharedDocs(i);case"links":return this.renderSharedLinks(i)}}renderSharedMedia(e){const t=document.createDocumentFragment();for(const i of e){const e=a.html`
        <div class="chat_info_shared_media_item" data-message-id="${i.id}"></div>
      `.buildElement();e.addEventListener("click",_t.onThumbClick),t.append(e),this.loadMediaThumb(i,e)}d(".chat_info_shared_media").append(t)}renderSharedDocs(e){const t=document.createDocumentFragment();for(const i of e){const e=i.media.document,n=Be.getDocumentAttributes(e),s=n.file_name,o=this.getFileExtension(e.mime_type),r=this.getFileIconClass(o),c=this.getFileSizeFormatted(e.size),l=_t.formatMessageDateTime(i.date),u=a.html`
        <div class="chat_info_shared_docs_item" data-message-id="${i.id}">
          <div class="chat_info_shared_docs_item_icon${r}">${o}</div>
          <div class="chat_info_shared_docs_item_info">
            <div class="chat_info_shared_docs_item_name">${s}</div>
            <div class="chat_info_shared_docs_item_desc">${c} &middot; ${l}</div>
          </div>
        </div>
      `.buildElement();u.addEventListener("click",_t.onFileClick),t.append(u),"image"===n.type&&this.loadDocThumb(i.media.document,d(".chat_info_shared_docs_item_icon",u))}d(".chat_info_shared_docs").append(t)}renderSharedLinks(e){const t=document.createDocumentFragment();for(const i of e){const e=_t.getMessageMediaThumb(i),n=i.media;let s="",o="",r="";if(n&&n.webpage&&"webPageEmpty"!==n.webpage._&&(s=n.webpage.title||n.webpage.site_name||"",o=n.webpage.description||"",r=n.webpage.url),!r&&!(r=this.getUrlFromText(i)))continue;const c=a.html`
        <a class="chat_info_shared_link_item" data-message-id="${i.id}" target="_blank" href="${r}">
          <div class="chat_info_shared_link_item_image"></div>
          <div class="chat_info_shared_link_item_info">
            <div class="chat_info_shared_link_item_title">${s}</div>
            <div class="chat_info_shared_link_item_desc">${o}</div>
            <div class="chat_info_shared_link_item_url">${r}</div>
          </div>
        </a>
      `.buildElement();t.append(c),e&&this.loadLinkThumb(e,d(".chat_info_shared_link_item_image",c))}d(".chat_info_shared_links").append(t)}async loadMediaThumb(e,t){const i=_t.getMessageMediaThumb(e),n=Be.choosePhotoSize(i.sizes,"m"),s=await FileApiManager.loadPhoto(i.object,n.type);t.style.backgroundImage=`url(${s})`}async loadDocThumb(e,t){const i=Be.choosePhotoSize(e.thumbs,"m"),n=await FileApiManager.loadDocumentThumb(e,i.type);t.classList.add("chat_info_shared_docs_item_icon-thumb"),t.style.backgroundImage=`url(${n})`}async loadLinkThumb(e,t){const i=Be.choosePhotoSize(e.sizes,"m"),n=await FileApiManager.loadPhoto(e.object,i.type);t.style.backgroundImage=`url(${n})`}setSharedSection(e){const t=this.sharedSection;t!==e&&(t&&this.sharedTabsDom[`nav_${t}`].classList.remove("nav_tabs_item-active"),t&&(d(`.chat_info_shared_${t}`).hidden=!0,d(`.chat_info_shared_${e}`).hidden=!1),this.sharedSection=e,this.sharedTabsDom[`nav_${e}`].classList.add("nav_tabs_item-active"),this.loadMoreShared())}getFileIconClass(e){const t=" chat_info_shared_docs_item_icon-";switch(e){case"pdf":return`${t}pdf`;case"doc":case"docx":case"xls":case"xlsx":case"ppt":case"pptx":case"odp":case"ods":case"odt":case"rtf":case"txt":case"epub":return`${t}doc`;case"zip":case"7z":case"tar.gz":return`${t}zip`}return""}getFileExtension(e){switch(e){case"image/jpeg":case"image/jpg":case"image/png":case"image/gif":case"image/webp":case"video/mp4":case"video/webm":case"video/mov":case"video/avi":case"video/mkv":case"application/pdf":case"application/json":case"application/zip":case"text/csv":case"text/html":case"multipart/x-zip":return e.split(/[.\-\/]/).pop();case"image/vnd.microsoft.icon":return"ico";case"image/svg+xml":return"svg";case"image/tiff":return"tiff";case"audio/ogg":return"ogg";case"audio/wav":return"wav";case"video/x-ms-wmv":return"wmv";case"video/quicktime":return"mov";case"application/doc":case"application/ms-doc":case"application/msword":return"doc";case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":return"docx";case"application/excel":case"application/vnd.ms-excel":case"application/x-excel":case"application/x-msexcel":return"xls";case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":return"xlsx";case"application/mspowerpoint":case"application/powerpoint":case"application/vnd.ms-powerpoint":case"application/x-mspowerpoint":return"ppt";case"application/vnd.openxmlformats-officedocument.presentationml.presentation":return"pptx";case"application/vnd.oasis.opendocument.presentation":return"odp";case"application/vnd.oasis.opendocument.spreadsheet":return"ods";case"application/vnd.oasis.opendocument.text":return"odt";case"text/rtf":case"application/wps-office.doc":return"rtf";case"text/plain":return"txt";case"application/epub+zip":return"epub";case"application/x-compressed-tar":return"tar.gz";case"application/x-7z-compressed":return"7z"}return""}getFileSizeFormatted(e){const t=0===e?0:Math.floor(Math.log(e)/Math.log(1024));return`${(e/Math.pow(1024,t)).toFixed(1)} ${["B","KB","MB","GB","TB"][t]}`}getUrlFromText(e){for(const t of e.entities)if("messageEntityUrl"===t._)return e.message.substring(t.offset,t.offset+t.length);return""}};function ct(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}window.ChatInfoController=rt;const dt=new class{constructor(){ct(this,"onInput",()=>{const e=this.dom.input;e.style.height="",e.style.height=e.scrollHeight+"px";const t=e.value.trim();this.dom.submit_button.classList.toggle("messages_form_button-send",!!t),this.saveDraft(_t.dialog.peer,t)}),ct(this,"onSubmit",()=>{const e=this.dom.input.value.trim();e&&(He.sendMessage(_t.dialog.peer,e),this.clear())}),ct(this,"onKeyDown",e=>{13!==e.keyCode||e.shiftKey||(this.onSubmit(),e.preventDefault())})}init(){this.container=d(".messages_form"),this.container.innerHTML='\n      <div class="messages_form_input_wrap">\n        <textarea class="messages_form_input" placeholder="Message" data-js-label="input"></textarea>\n        <button class="messages_form_emoji_button" data-js-label="emoji_button"></button>\n        <button class="messages_form_media_button" data-js-label="media_button"></button>\n      </div>\n      <button class="messages_form_button mdc-icon-button" data-js-label="submit_button"></button>\n    ',this.dom=h(this.container),this.saveDraft=c((e,t)=>{He.saveDraft(e,t)});const e=this.dom.input;e.addEventListener("input",this.onInput),e.addEventListener("change",this.onInput),e.addEventListener("keydown",this.onKeyDown),this.dom.submit_button.addEventListener("click",this.onSubmit),new ce(this.dom.submit_button).unbounded=!0,We.init(),We.bind(this.dom.emoji_button,e),Xe.init(),Xe.bind(this.dom.media_button),e.parentNode.appendChild(We.container)}focus(){y()||this.dom.input.focus()}clear(){this.dom.input.value&&(this.dom.input.value="",this.onInput())}onStickerSend(e){const t={_:"inputMediaDocument",id:{_:"inputDocument",id:e.id,access_hash:e.access_hash,file_reference:e.file_reference}};He.sendMedia(_t.dialog.peer,t)}async onFileSend(e,t=!1){const i=_t.dialog.peer,n=new AbortController,s=this.buildFileUploadProgressElement(e.name,e.size),a=_t.appendPendingMessage(s);d(".document_icon",s).addEventListener("click",()=>{n.abort(),_t.removePendingMessage(a)});const o=await FileApiManager.uploadFile(e,e.name,{onProgress:t=>{const i=Math.round(t/e.size*100);d(".document_size_percent",s).innerText=`${i}%`,d(".document_icon_progress_path",s).style.strokeDasharray=`${i}, 100`},signal:n.signal});let r;r=t&&e.type.startsWith("image/")?{_:"inputMediaUploadedPhoto",file:o}:{_:"inputMediaUploadedDocument",file:o,mime_type:e.type,attributes:[{_:"documentAttributeFilename",file_name:e.name}]};try{await He.sendMedia(i,r)}catch(e){console.error(e)}_t.removePendingMessage(a)}buildFileUploadProgressElement(e,t){return a.html`
      <div class="document">
        <div class="document_col">
          <div class="document_icon document_icon-loading">
            <svg class="document_icon_progress_svg" viewBox="0 0 36 36" xmlns="http://www.w3.org/2000/svg">
              <path class="document_icon_progress_path" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"/>
            </svg>
          </div>
        </div>
        <div class="document_col">
          <div class="document_filename">${e}</div>
          <div class="document_size"><span class="document_size_percent">0%</span> &middot; ${rt.getFileSizeFormatted(t)}</div>        
        </div>
      </div>
    `.buildElement()}};function lt(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}window.MessagesFormController=dt;const ut=new class{constructor(){lt(this,"close",()=>{this.container&&(this.container.hidden=!0,this.peerId=null)}),lt(this,"onInput",()=>{const e=this.input.value.trim();e?this.loadResults(e):this.listWrap.innerHTML=""})}show(e){if(this.container=d(".right_sidebar"),this.container.hidden=!1,e===this.peerId)return;this.peerId=e,this.container.innerHTML='\n      <div class="sidebar_header">\n        <button type="button" class="sidebar_close_button mdc-icon-button"></button>\n        <input class="sidebar_search_input messages_search_input" type="text" placeholder="Start typing...">\n      </div>\n      <div class="messages_search_results_list"></div>\n    ',d(".sidebar_close_button",this.container).addEventListener("click",this.close),this.input=d(".messages_search_input",this.container),this.input.addEventListener("input",c(this.onInput,100)),this.container.addEventListener("transitionend",()=>{this.input.focus()},{once:!0}),this.listWrap=d(".messages_search_results_list",this.container)}async loadResults(e){const t=await ApiClient.callMethod("messages.search",{peer:He.getInputPeerById(this.peerId),q:e,filter:{_:"inputMessagesFilterEmpty"},offset_id:0,limit:30});He.updateMessages(t.messages),He.updateChats(t.chats),He.updateUsers(t.users);const i=t.count||t.messages.length;this.listWrap.innerHTML="",this.renderResultsHeader(i),this.renderResults(t.messages)}renderResultsHeader(e){const t=P.getPlural("messages_search_n_results_found",e);this.listWrap.insertAdjacentHTML("afterbegin",`\n      <div class="messages_search_results_header">${t}</div>\n    `)}renderResults(e){const t=document.createDocumentFragment();for(const i of e){const e=He.getMessageAuthorPeer(i),n=He.getPeerName(e),s=$t.formatMessageDate(i),o=$t.getMessagePreview(i),r=a.html`
        <div class="messages_search_results_item">
          <div class="messages_search_results_item_content mdc-ripple-surface">
            <div class="messages_search_results_item_photo"></div>
            <div class="messages_search_results_item_text">
              <div class="messages_search_results_item_text_row">
                <div class="messages_search_results_item_title">${n}</div>
                <div class="messages_search_results_item_date">${s}</div>
              </div>
              <div class="messages_search_results_item_text_row">
                <div class="messages_search_results_item_message">${o}</div>
              </div>
            </div>      
          </div>
        </div>
      `.buildElement();this.loadMessagePeerPhoto(r,e),t.append(r)}d(".messages_search_results_list",this.container).append(t)}loadMessagePeerPhoto(e,t){const i=d(".messages_search_results_item_photo",e);$t.loadPeerPhoto(i,t)}};function ht(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}window.MessagesSearchController=ut;const _t=new class{constructor(){ht(this,"messageElements",new Map),ht(this,"loadMore",({down:e=!1}={})=>{if(this.loading||this.noMore||!this.chatId)return;this.loading=!0;const t=e?-20:0,i=e?this.maxMsgId:this.minMsgId;He.loadMessages(this.dialog.peer,i,20,t).then(t=>{t.length||(this.noMore=!0),e?this.appendHistory(t):this.prependHistory(t)}).catch(e=>{const t="An error occurred"+(e.error_message?": "+e.error_message:"");App.alert(t),console.log(e)}).finally(()=>{this.loading=!1})}),ht(this,"onChatMessagesUpdate",e=>{const{dialog:t,messages:i}=e.detail;t===this.dialog&&this.prependHistory(i)}),ht(this,"onNewMessage",e=>{const{dialog:t,message:i}=e.detail;t===this.dialog&&this.appendHistory([i])}),ht(this,"onEditMessage",e=>{const{dialog:t,message:i}=e.detail;if(t===this.dialog){let e=this.messageElements.get(i.id);e&&this.renderMessageContent(e,i)}}),ht(this,"onDeleteMessage",e=>{const{dialog:t,message:i}=e.detail;if(t===this.dialog){const e=this.messageElements.get(i.id);e&&(e.remove(),this.messageElements.delete(i.id))}}),ht(this,"onUserStatusUpdate",e=>{const{user:t}=e.detail;if(this.chatId===t.id){const e=d(".messages_header_peer_status",this.header);e.innerText=this.getUserStatusText(t),e.classList.toggle("messages_header_peer_status-online","userStatusOnline"===t.status._)}}),ht(this,"onScroll",()=>{const e=this.scrollContainer,t=e.scrollTop,i=e.scrollHeight-(t+e.clientHeight),n=!!this.scrolling;this.scrolling=i>0,this.scrolling!==n&&this.scrollContainer.classList.toggle("messages_scroll-scrolling",this.scrolling&&!this.footer.hidden),this.loading||(t<500&&!this.noMore?this.loadMore():i<300&&this.maxMsgId<this.dialog.top_message&&this.loadMore({down:!0}))}),ht(this,"onThumbClick",e=>{const t=e.currentTarget,i=+t.dataset.messageId||+t.closest(".message").dataset.id,n=He.messages.get(i),s=this.getMessageMediaThumb(n);"TGS-PLAYER"===t.firstElementChild.tagName&&(t.firstElementChild.stop(),t.firstElementChild.play()),s&&("photo"===s.type?ze.showPhoto(s.object,t,n):"video"===s.type?ze.showVideo(s.object,t,n):"gif"===s.type&&ze.showGif(s.object,t,n))}),ht(this,"onFileClick",e=>{const t=e.currentTarget;if(t.dataset.loading)return;t.dataset.loading=1;const i=+t.dataset.messageId||+t.closest(".message").dataset.id,n=He.messages.get(i);if(!n)return;const s=n.media.document,a=new AbortController,o=()=>{a.abort(),r()},r=(e=null)=>{if(delete t.dataset.loading,t.removeEventListener("click",o),t.classList.remove("document_icon-loading"),t.innerHTML="",e){const t=Be.getDocumentAttributes(s),i=window.document.createElement("a");i.href=e,i.download=t.file_name,i.click()}};let c;t.classList.contains("document_icon")&&(t.classList.add("document_icon-loading"),t.innerHTML='\n        <svg class="document_icon_progress_svg" viewBox="0 0 36 36" xmlns="http://www.w3.org/2000/svg">\n          <path class="document_icon_progress_path" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"/>\n        </svg>\n      ',t.addEventListener("click",o),c=d(".document_icon_progress_path",t)),FileApiManager.loadDocument(s,{onProgress:e=>{const t=Math.round(e/s.size*100);c&&(c.style.strokeDasharray=`${t}, 100`)},signal:a.signal}).then(r).catch(e=>{console.error(e),r()})})}init(){this.header=d(".messages_header"),this.footer=d(".messages_footer"),this.scrollContainer=d(".messages_scroll"),this.container=d(".messages_list"),this.loader=_(),this.scrollContainer.addEventListener("scroll",this.onScroll),this.initPlaceholder(),this.initBackground(),this.loadAnimatedEmojiStickerSet(),dt.init(),He.emitter.on("chatMessagesUpdate",this.onChatMessagesUpdate),He.emitter.on("chatNewMessage",this.onNewMessage),He.emitter.on("chatEditMessage",this.onEditMessage),He.emitter.on("chatDeleteMessage",this.onDeleteMessage),He.emitter.on("userStatusUpdate",this.onUserStatusUpdate)}setChat(e,t=0){if(e===this.dialog)return void this.scrollToBottom();this.dialog&&this.exitChat(),this.dialog=e,this.chatId=He.getPeerId(e.peer),d(".main_container").dataset.chat=this.chatId,this.placeholder.remove(),this.showHeader(e),this.footer.hidden=!this.canSendMessage(e),this.footer.hidden||dt.focus(),this.container.append(this.loader),t?this.jumpToMessage(t):this.loadHistory();const i=$t.chatElements.get(this.chatId);i&&i.classList.add("chats_item-selected")}async setChatByPeerId(e,t=0){let i=He.getDialog(e);if(!i){const t=He.getPeerById(e);i=await He.loadPeerDialog(t)}_t.setChat(i,t)}exitChat(){const e=$t.chatElements.get(this.chatId);e&&e.classList.remove("chats_item-selected"),dt.clear(),ze.abort(),rt.close(),ut.close(),this.header.hidden=!0,this.footer.hidden=!0,this.dialog=null,this.chatId=null,this.clearMessages(),delete d(".main_container").dataset.chat}clearMessages(){this.container.innerHTML="",this.messageElements.clear(),this.minMsgId=null,this.maxMsgId=null,this.loading=!1,this.noMore=!1,this.scrolling=!1}initPlaceholder(){this.placeholder=a.html`
      <div class="messages_placeholder">
        <div class="messages_placeholder_title">Open chat<br>or create a new one</div>
        <div class="messages_placeholder_actions">
          <button class="messages_placeholder_action messages_placeholder_action-private mdc-icon-button"><div class="messages_placeholder_action_label">Private</div></button>
          <button class="messages_placeholder_action messages_placeholder_action-group mdc-icon-button"><div class="messages_placeholder_action_label">Group</div></button>
          <button class="messages_placeholder_action messages_placeholder_action-channel mdc-icon-button"><div class="messages_placeholder_action_label">Channel</div></button>  
        </div>
      </div>
    `.buildElement(),this.container.append(this.placeholder)}showHeader(e){const t=e.peer,i=He.getPeerName(t);let n="",s="";if("peerUser"===t._){const e=He.getPeerData(t);n=this.getUserStatusText(e),e.status&&"userStatusOnline"===e.status._&&(s="messages_header_peer_status-online")}this.header.innerHTML=a.html`
      <button class="messages_header_back mdc-icon-button"></button>
      <div class="messages_header_peer">
        <div class="messages_header_peer_photo"></div>
        <div class="messages_header_peer_description">
          <div class="messages_header_peer_name">${i}</div>
          <div class="messages_header_peer_status ${s}">${n}</div>
        </div>
      </div>
      <div class="messages_header_actions">
        <button class="messages_header_action_search mdc-icon-button"></button>
        <button class="messages_header_action_more mdc-icon-button"></button>
      </div>
    `,this.header.hidden=!1,d(".messages_header_peer").addEventListener("click",()=>{ut.close(),rt.show(this.chatId)});const o=d(".messages_header_peer_photo",this.header);if($t.loadPeerPhoto(o,e.peer),"peerChannel"===t._||"peerChat"===t._){const e=t.channel_id||t.chat_id;He.loadChatFull(e).then(t=>{let i="";t.participants_count?i=He.isMegagroup(e)?`${E(t.participants_count)} members, ${E(t.online_count)} online`:`${E(t.participants_count)} followers`:t.participants.participants&&(i=`${E(t.participants.participants.length)} members`),d(".messages_header_peer_status",this.header).innerText=i})}Array.from(d(".messages_header_actions",this.header).children).forEach(e=>{new ce(e).unbounded=!0}),d(".messages_header_action_search",this.header).addEventListener("click",()=>{rt.close(),ut.show(this.chatId)}),d(".messages_header_back",this.header).addEventListener("click",()=>{this.exitChat()})}loadHistory(){this.loading||this.noMore||(this.loading=!0,He.loadChatHistory(this.dialog,this.minMsgId,30).then(e=>{e.length||(this.noMore=!0),this.prependHistory(e)}).catch(e=>{const t="An error occurred"+(e.error_message?": "+e.error_message:"");App.alert(t),console.log(e)}).finally(()=>{this.loading=!1}))}jumpToMessage(e){this.clearMessages(),this.loading=!0,He.loadMessages(this.dialog.peer,e,20,-10).then(e=>{console.log(e),this.prependHistory(e)}).catch(e=>{const t="An error occurred"+(e.error_message?": "+e.error_message:"");App.alert(t)}).finally(()=>{this.loading=!1})}canSendMessage(e){const t=He.getPeerData(e.peer);return!!t&&("user"===t._||"chat"===t._||"channel"===t._&&(t.pFlags.creator||t.pFlags.megagroup))}scrollToBottom(){this.scrollContainer.scrollTop=this.scrollContainer.scrollHeight}prependHistory(e){if(this.loader.remove(),this.minMsgId&&(e=e.filter(e=>e.id<this.minMsgId)),!e.length)return;const t=this.scrollContainer.scrollTop,i=this.scrollContainer.scrollHeight,n=this.buildMessagesBatch(e);this.mergeDateGroups(this.container.firstElementChild,n.lastElementChild,!0),this.container.prepend(n),this.minMsgId=e[e.length-1].id,this.maxMsgId=this.maxMsgId||e[0].id,this.scrolling?(this.scrollContainer.style.overflow="hidden",this.scrollContainer.scrollTop=t+(this.scrollContainer.scrollHeight-i),this.scrollContainer.style.overflow=""):this.scrollContainer.scrollHeight<=this.scrollContainer.offsetHeight?setTimeout(this.loadMore,0):this.scrollToBottom(),this.dialog.unread_count&&He.readHistory(this.dialog,this.maxMsgId)}appendHistory(e){if(!this.maxMsgId)return;if(!(e=e.filter(e=>e.id>this.maxMsgId)).length)return;const t=this.buildMessagesBatch(e);this.mergeDateGroups(t.firstElementChild,this.container.lastElementChild,!1),this.container.append(t),this.maxMsgId=e[0].id}mergeDateGroups(e,t,i){if(e&&t&&e.dataset.date===t.dataset.date){const n=e.children[1],s=t.lastElementChild;n.dataset.authorId===s.dataset.authorId&&(i?(n.prepend(...s.children),s.remove()):(s.append(...s.children),e.remove())),i?(e.firstElementChild.after(...Array.from(t.children).slice(1)),t.remove()):(t.append(...Array.from(e.children).slice(1)),e.remove())}}buildMessagesBatch(e){const t=this.dialog.peer,i="peerChat"===t._||"peerChannel"===t._&&He.isMegagroup(t.channel_id),n=document.createDocumentFragment();let s=null,a=0,o=null;for(let t=0;t<e.length;t++){const r=e[t],c=e[t-1],d=e[t+1],l=He.getMessageAuthorPeerId(r);let u=r.from_id&&c&&c.from_id===r.from_id,h=r.from_id&&d&&d.from_id===r.from_id;const _=new Date(1e3*r.date).setHours(0,0,0,0)/1e3;if((!s||a!==_||c&&c.date>_+86400)&&(u=!1,s=this.buildMessagesDateGroupEl(_),a=_,o=null,n.prepend(s)),!o||!c||c.from_id!==r.from_id){const e=i&&"message"===r._&&l!==App.getAuthUserId();if(o=this.buildMessagesAuthorGroupEl(l,e),e){const e=o.firstElementChild;$t.loadPeerPhoto(e,He.getMessageAuthorPeer(r))}s.firstElementChild.after(o)}const m=this.buildMessageEl(r,{stickToNext:u,stickToPrev:h});o.prepend(m)}return n}buildMessagesDateGroupEl(e){return a.html`
      <div class="messages_group-date" data-date="${e}">
        <div class="message-type-service message-type-date">${this.formatMessageDateFull(e)}</div>
      </div>
    `.buildElement()}buildMessagesAuthorGroupEl(e,t=!1){return a.html`
      <div class="messages_group-author ${t?"messages_group-author-with-photo":""}" data-author-id="${e}">
        ${t?a.html`<a class="messages_group_author_photo" href="#${this.getUserHref(e)}"></a>`:""}
      </div>
    `.buildElement()}buildMessageEl(e,t){const i=document.createElement("div");if("message"===e._){const n=(e.pFlags.out||He.getMessageDialogPeerId(e)===App.getAuthUserId())&&e.from_id===App.getAuthUserId();i.className=this.getClasses({message:!0,"message-out":n,"message-stick-to-next":t.stickToNext,"message-stick-to-prev":t.stickToPrev}),this.renderMessageContent(i,e,t)}else"messageService"===e._&&(i.className="message-type-service",i.innerText=this.getServiceMessageText(e));return i.dataset.id=e.id,this.messageElements.set(e.id,i),i}appendPendingMessage(e){const t=a.html`<div class="message message-out message-stick-to-next message-stick-to-prev"></div>`.buildElement();return t.append(e),d(".messages_pending_list").appendChild(t),this.scrollToBottom(),t}removePendingMessage(e){e.remove()}getClasses(e){let t="";for(const[i,n]of Object.entries(e))n&&(t+=" "+i);return t}renderMessageContent(e,t,i={}){const n=this.isEmojiMessage(t),s=this.getMessageMediaThumb(t,n),o=s&&"sticker"===s.type,r=i.stickToPrev||o||n||t.pFlags.out?"":this.formatAuthorName(t);let c=this.formatMessageContent(t,s);t.fwd_from&&(c=this.formatFwdMessageContent(t.fwd_from,c)),t.reply_to_msg_id&&(c=a.html`${this.formatReplyToMessageContent(t.reply_to_msg_id)}${c}`);const l=g(t.date)+" "+f(t.date,{withSeconds:!0}),u=this.formatMessageViews(t),h=f(t.date),_=this.formatMessageStatus(t,this.dialog);if(e.innerHTML=a.html`
      <div class="message_content">
        ${r}
        ${c}
        <div class="message_date" title="${l}">${u}${h}${_}</div>
      </div>
    `,o?e.classList.add("message-type-sticker"):n&&e.classList.add("message-type-emoji"),s)e.classList.add("message-has-thumb"),this.loadMessageMediaThumb(e,s);else if(t.media&&t.media.document){const t=d(".document_icon",e);t&&t.addEventListener("click",this.onFileClick)}}isEmojiMessage(e){if(e.message.length<=12&&!e.media){const t=e.message.match(xe);if(t&&t.length<=3&&t.join("").length===e.message.length)return!0}return!1}getAnimatedEmojiSticker(e){if(this.animatedEmojies)for(const t of this.animatedEmojies.packs)if(t.emoticon===e){const e=t.documents[0];for(const t of this.animatedEmojies.documents)if(t.id===e)return t}}formatAuthorName(e){if(e.from_id&&"peerUser"!==this.dialog.peer._){const t=e.from_id,i=He.getPeerName({_:"peerUser",user_id:t});return a.html`<a class="message_author" href="#${this.getUserHref(t)}">${i}</a>`}return""}getMessageMediaThumb(e,t=!1){if(t){const t=this.getAnimatedEmojiSticker(e.message);if(t){const i=Be.getDocumentAttributes(t);return{type:"sticker",object:t,sizes:t.thumbs,attributes:i,emoji:e.message}}}const i=e.media;if(i)switch(i._){case"messageMediaPhoto":const e=i.photo;return{type:"photo",object:e,sizes:e.sizes};case"messageMediaDocument":{const e=i.document,t=Be.getDocumentAttributes(e);if(["video","gif","sticker"].includes(t.type))return{type:t.type,object:e,sizes:e.thumbs,attributes:t}}break;case"messageMediaWebPage":if("photo"!==i.webpage.type&&i.webpage.document){const e=i.webpage.document;if("video"===i.webpage.type||"gif"===i.webpage.type)return{type:i.webpage.type,object:e,sizes:e.thumbs};{const t=Be.getDocumentAttributes(e);if("video"===t.type||"gif"===t.type)return{type:t.type,object:e,sizes:e.thumbs,attributes:t}}}if(i.webpage.photo){const e=i.webpage.photo;return{type:"photo",object:e,sizes:e.sizes}}}}getThumbWidthHeight(e,t=400,i=200){let n=i,s=Math.round(n*(e.w/e.h));return s>t&&(s=t,n=Math.round(s/(e.w/e.h))),[s,n]}async loadMessageMediaThumb(e,t){let i=d(".message_media_thumb",e);if(!i)return;i.addEventListener("click",this.onThumbClick);const n=t.sizes;let s;if(Be.choosePhotoSize(n,"i")){const e=Be.getPhotoStrippedSize(n);s=a.html`<img class="message_media_thumb_image message_media_thumb_image-blurred" src="${e}">`.buildElement(),i.prepend(s)}if("sticker"===t.type&&t.attributes.animated){const e=await FileApiManager.loadDocument(t.object,{cache:!0}),n=a.html`<tgs-player autoplay src="${e}" class="message_media_thumb_image"></tgs-player>`.buildElement();i.prepend(n)}else try{const e=Be.choosePhotoSize(n,"m");let s;if(Be.isCachedPhotoSize(e)){const i=t.object.mime_type;s=await Be.getCachedPhotoSize(e,i)}else if("document"===t.object._){const i="sticker"===t.type?{mimeType:t.object.mime_type}:{};s=await FileApiManager.loadDocumentThumb(t.object,e.type,i)}else s=await FileApiManager.loadPhoto(t.object,e.type);const o=a.html`<img class="message_media_thumb_image" src="${s}">`.buildElement();i.prepend(o)}catch(e){console.log("thumb load error",e)}s&&s.remove()}formatFwdMessageContent(e,t){let i=e.from_name;if(!i){if(e.from_id){const t=He.users.get(e.from_id);i=He.getUserName(t)}if(e.channel_id){const t=He.chats.get(e.channel_id);i=He.getChatName(t)}}return a.html`
      <div class="message_forwarded_header">Forwarded message</div>
      <div class="message_forwarded_content">
        <div class="message_forwarded_author">
          <a>${i}</a>
        </div>
        ${t}
      </div>
    `}formatReplyToMessageContent(e){const t=He.messages.get(e);if(t){const e=He.getMessageAuthorPeer(t),i=He.getPeerName(e),n=t.message?v(t.message,110,100):this.getMessageContentTypeLabel(t.media);return a.html`
        <div class="message_reply_to_wrap">
          <div class="message_reply_to_content">
            <div class="message_reply_to_author">${i}</div>
            <div class="message_reply_to_text">${n}</div>
          </div>
        </div>
      `}return""}formatMessageViews(e){return e.views?a.html`
        <div class="message_views">${b(e.views)}</div>
      `:""}formatMessageStatus(e,t){if(e.pFlags.out&&e.from_id){const i=e.id<=t.read_outbox_max_id?"read":"sent";return a.html`<div class="message_status message_status-${i}"></div>`}return""}formatMessageContent(e,t){const i=e.media,n=this.formatText(e),s=e.message;if(!i)return t?this.formatThumb(t,s):n;switch(i._){case"messageMediaPhoto":return this.formatThumb(t,s);case"messageMediaDocument":return this.formatDocument(i,t,n,s);case"messageMediaWebPage":return a.html`${n}${this.formatWebPage(i,t)}`;case"messageMediaPoll":return a.html`${n}Poll`;case"messageMediaGeo":return a.html`${n}Geo`;case"messageMediaGeoLive":return a.html`${n}Live Geo`;case"messageMediaContact":return a.html`${n}Contact`;case"messageMediaUnsupported":return"Message unsupported";default:return a.html`${n} [${i._}]`}}formatDocument(e,t,i,n){if(t)return this.formatThumb(t,n);const s=Be.getDocumentAttributes(e.document);switch(s.type){case"video":return"[video]";case"gif":return"[gif]";case"sticker":return"[sticker]"}return a.html`
      ${i}
      <div class="document">
        <div class="document_col">
          <div class="document_icon"></div>
        </div>
        <div class="document_col">
          <div class="document_filename">${s.file_name}</div>
          <div class="document_size">${this.formatDocSize(e.document.size)}</div>        
        </div>      
      </div>
    `}formatDocSize(e){if(e){if(e<1024)return"1 KB";if(e<1048576)return Math.floor(e/1024)+" KB";if(e<1073741824)return Math.floor(e/1048576)+" MB"}return""}formatWebPage(e,t){const i=e.webpage;if("webPage"===i._){const e=this.formatThumb(t);if(i.site_name&&e.appendHtml`<a class="wepbage_site_name" href="${encodeURI(i.url)}" target="_blank">${i.site_name}</a>`,i.title&&e.appendHtml`<div class="wepbage_title">${i.title}</div>`,i.description){const t=v(i.description,300,255);e.appendHtml`<div class="webpage_description">${a.raw`${t}`.replaceLineBreaks()}</div>`}return a.html`<div class="webpage_content">${e}</div>`}return""}formatText(e){const t=e.message;let i=a.html``;if(e.entities){let n=0;for(const s of e.entities){i.appendHtml`${t.substring(n,s.offset)}`,n=s.offset+s.length;const e=t.substr(s.offset,s.length);i.appendHtml`${this.processEntity(e,s)}`}i.appendHtml`${t.substring(n)}`}else i.appendHtml`${t}`;return i.length?(i.replaceLineBreaks(),a.html`<span class="message_text ${""}">${i}</span>`):i}processEntity(e,t){switch(t._){case"messageEntityUrl":const i=/^https?:\/\//.test(e)?e:"http://"+e;return a.html`<a href="${i}" target="_blank" rel="noopener" data-entity="url">${v(e,60,50)}</a>`;case"messageEntityTextUrl":return a.html`<a href="${t.url}" target="_blank" rel="noopener" data-entity="text_url">${e}</a>`;case"messageEntityBold":return a.html`<b>${e}</b>`;case"messageEntityItalic":return a.html`<i>${e}</i>`;case"messageEntityUnderline":return a.html`<u>${e}</u>`;case"messageEntityStrike":return a.html`<s>${e}</s>`;case"messageEntityCode":return a.html`<code>${e}</code>`;case"messageEntityPre":return a.html`<pre>${e}</pre>`;case"textEntityTypePreCode":return a.html`<pre><code>${e}</code></pre>`;case"messageEntityMention":return a.html`<a href="#${e}" data-entity="mention">${e}</a>`;case"messageEntityMentionName":return a.html`<a href="#${this.getUserHref(t.user_id)}" data-entity="mention">${e}</a>`;case"messageEntityHashtag":return a.html`<a data-entity="hashtag">${e}</a>`;case"messageEntityBotCommand":return a.html`<a data-entity="bot_command">${e}</a>`;case"messageEntityEmail":return a.html`<a href="mailto:${e}" data-entity="email_address">${e}</a>`;case"messageEntityPhone":return a.html`<a href="tel:${e}" data-entity="phone_number">${e}</a>`;default:return e}}formatThumb(e,t){const i=a.html``;let n,s;if(e){let o=300,r=200;"sticker"===e.type&&(o=e.emoji?100:150,r=e.emoji?100:150);const c=Be.choosePhotoSize(e.sizes);[n,s]=this.getThumbWidthHeight(c,o,r),t&&t.length>100&&n<300&&(n=300),i.appendHtml`
        <div class="message_media_thumb message_media_thumb-${e.type}" style="width:${n}px;height:${s}px;">
          ${["video","gif"].includes(e.type)?a.html`<div class="message_media_thumb_play"></div>`:""}
        </div>
      `}if(t&&"sticker"!==e.type){const e=n?`width:${n}px;`:"";i.appendHtml`<div class="message_media_caption" style="${e}">${t}</div>`}return i}formatMessageDateFull(e){let t;return t=e>(new Date).setHours(0,0,0,0)/1e3?"Today":g(e,{longMonth:!0,withYear:new Date(1e3*e).getFullYear()!==(new Date).getFullYear()})}formatMessageDateTime(e){return`${this.formatMessageDateFull(e)} at ${f(e)}`}getMessageContentTypeLabel(e){if(!e)return"";switch(e._){case"messageMediaPhoto":return"Photo";case"messageMediaDocument":return this.getMessageContentDocumentLabel(e.document);case"messageMediaWebPage":return"Link";case"messageMediaPoll":return"Poll";case"messageMediaGeo":return"Geo";case"messageMediaGeoLive":return"Live Geo";case"messageMediaContact":return"Contact";case"messageMediaUnsupported":return"Message unsupported"}return""}getMessageContentDocumentLabel(e){const t=Be.getDocumentAttributes(e);switch(t.type){case"video":return"Video";case"gif":return"Gif";case"sticker":return"Sticker"+(t.stickerEmoji?" "+t.stickerEmoji:"");case"voice":return"Voice";case"audio":return"Audio"}return"File"}getServiceMessageText(e){switch(e.action._){case"messageActionChatCreate":{const t=He.users.get(e.from_id);return`${He.getUserName(t)} created the group "${e.action.title}"`}case"messageActionChatEditTitle":return"Chat name changed";case"messageActionChatEditPhoto":return"Chat photo changed";case"messageActionChatDeletePhoto":return"Chat photo deleted";case"messageActionChatAddUser":{const t=He.users.get(e.from_id),i=He.getUserName(t),n=e.action.users.map(e=>He.getUserName(He.users.get(e)));if(n.length>1){return`${i} invited ${n.slice(0,-1).join(", ")+" and "+n.slice(-1)}`}return e.from_id===e.action.users[0]?i+" joined the group":i+" invited "+n[0]}case"messageActionChatDeleteUser":const t=He.users.get(e.from_id);return`${He.getUserName(t)} left the group`;case"messageActionChatJoinedByLink":{const t=He.users.get(e.from_id);return`${He.getUserName(t)} joined the group via invite link`}case"messageActionChannelCreate":return"Channel created";case"messageActionChatMigrateTo":case"messageActionChannelMigrateFrom":return"Chat was upgraded to supergroup";case"messageActionPinMessage":{let t="";if(e.from_id){const i=He.users.get(e.from_id);t=He.getUserName(i)}else t=He.getPeerName(e.to_id);const i=He.messages.get(e.reply_to_msg_id);return`${t} pinned ${i&&i.message?`"${v(i.message,30,20)}"`:"message"}`}case"messageActionHistoryClear":return"Chat history was cleared";case"messageActionGameScore":return"Someone scored in a game";case"messageActionPaymentSent":return"Payment was sent";case"messageActionPhoneCall":return"Phone call";case"messageActionScreenshotTaken":return"Screenshot was taken";case"messageActionContactSignUp":{const t=He.users.get(e.from_id);return`${He.getUserName(t)} joined Telegram`}}return""}getUserStatusText(e){if(e.pFlags.bot)return"bot";if(e.status)switch(e.status._){case"userStatusOnline":return"online";case"userStatusOffline":return e.status.was_online?"last seen "+function(e,t){if(t-e<3600){const i=Math.floor((t-e)/60);return i?i+" minutes ago":"just now"}const i=new Date(1e3*t);return i.setHours(0,0,0,0),e>i.getTime()/1e3?"today at "+f(e):(i.setDate(i.getDate()-1),e>i.getTime()/1e3?"yesterday at "+f(e):g(e))}(e.status.was_online,L.getServerTimeNow()):"offline";case"userStatusRecently":return"last seen recently";case"userStatusLastWeek":return"last seen last week";case"userStatusLastMonth":return"last seen last month"}return"last seen a long time ago"}getUserHref(e){const t=He.users.get(e);return t&&t.username?"@"+t.username:"@"+e}async initBackground(){const e=d(".messages_container");if(!window.caches)return void e.prepend(a.html`<div class="messages_bg_image"></div>`.buildElement());const t=await caches.open("v1");if(!await t.match("bg.jpg?blurred")&&window.OffscreenCanvas){const e=await fetch("bg.jpg"),i=await createImageBitmap(await e.blob()),n=i.width/i.height,s=new OffscreenCanvas(...function(e){return screen.width>screen.height?[screen.width,screen.width/e]:[screen.height*e,screen.height]}(n)),a=s.getContext("2d");a.fillStyle="#91b087",a.fillRect(0,0,s.width,s.height),a.filter="blur(10px)",a.drawImage(i,-10,-10,s.width+20,s.height+20);const o=await s.convertToBlob({type:"image/jpeg",quality:.95});t.put("bg.jpg?blurred",new Response(o))}e.style.backgroundImage="url(bg.jpg?blurred)"}async loadAnimatedEmojiStickerSet(){this.animatedEmojies||(this.animatedEmojies=await L.callMethod("messages.getStickerSet",{stickerset:{_:"inputStickerSetAnimatedEmoji"}}))}};window.MessagesController=_t;
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
var mt={LIST_ITEM_ACTIVATED_CLASS:"mdc-list-item--activated",LIST_ITEM_CLASS:"mdc-list-item",LIST_ITEM_DISABLED_CLASS:"mdc-list-item--disabled",LIST_ITEM_SELECTED_CLASS:"mdc-list-item--selected",ROOT:"mdc-list"},pt={ACTION_EVENT:"MDCList:action",ARIA_CHECKED:"aria-checked",ARIA_CHECKED_CHECKBOX_SELECTOR:'[role="checkbox"][aria-checked="true"]',ARIA_CHECKED_RADIO_SELECTOR:'[role="radio"][aria-checked="true"]',ARIA_CURRENT:"aria-current",ARIA_DISABLED:"aria-disabled",ARIA_ORIENTATION:"aria-orientation",ARIA_ORIENTATION_HORIZONTAL:"horizontal",ARIA_ROLE_CHECKBOX_SELECTOR:'[role="checkbox"]',ARIA_SELECTED:"aria-selected",CHECKBOX_RADIO_SELECTOR:'input[type="checkbox"], input[type="radio"]',CHECKBOX_SELECTOR:'input[type="checkbox"]',CHILD_ELEMENTS_TO_TOGGLE_TABINDEX:"\n    ."+mt.LIST_ITEM_CLASS+" button:not(:disabled),\n    ."+mt.LIST_ITEM_CLASS+" a\n  ",FOCUSABLE_CHILD_ELEMENTS:"\n    ."+mt.LIST_ITEM_CLASS+" button:not(:disabled),\n    ."+mt.LIST_ITEM_CLASS+" a,\n    ."+mt.LIST_ITEM_CLASS+' input[type="radio"]:not(:disabled),\n    .'+mt.LIST_ITEM_CLASS+' input[type="checkbox"]:not(:disabled)\n  ',RADIO_SELECTOR:'input[type="radio"]'},gt={UNSET_INDEX:-1},ft=["input","button","textarea","select"];var vt,bt,Et=function(e){function t(i){var n=e.call(this,k({},t.defaultAdapter,i))||this;return n.wrapFocus_=!1,n.isVertical_=!0,n.isSingleSelectionList_=!1,n.selectedIndex_=gt.UNSET_INDEX,n.focusedItemIndex_=gt.UNSET_INDEX,n.useActivatedClass_=!1,n.ariaCurrentAttrValue_=null,n.isCheckboxList_=!1,n.isRadioList_=!1,n}return x(t,e),Object.defineProperty(t,"strings",{get:function(){return pt},enumerable:!0,configurable:!0}),Object.defineProperty(t,"cssClasses",{get:function(){return mt},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return gt},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClassForElementIndex:function(){},focusItemAtIndex:function(){},getAttributeForElementIndex:function(){return null},getFocusedElementIndex:function(){return 0},getListItemCount:function(){return 0},hasCheckboxAtIndex:function(){return!1},hasRadioAtIndex:function(){return!1},isCheckboxCheckedAtIndex:function(){return!1},isFocusInsideList:function(){return!1},isRootFocused:function(){return!1},listItemAtIndexHasClass:function(){return!1},notifyAction:function(){},removeClassForElementIndex:function(){},setAttributeForElementIndex:function(){},setCheckedCheckboxOrRadioAtIndex:function(){},setTabIndexForListItemChildren:function(){}}},enumerable:!0,configurable:!0}),t.prototype.layout=function(){0!==this.adapter_.getListItemCount()&&(this.adapter_.hasCheckboxAtIndex(0)?this.isCheckboxList_=!0:this.adapter_.hasRadioAtIndex(0)&&(this.isRadioList_=!0))},t.prototype.setWrapFocus=function(e){this.wrapFocus_=e},t.prototype.setVerticalOrientation=function(e){this.isVertical_=e},t.prototype.setSingleSelection=function(e){this.isSingleSelectionList_=e},t.prototype.setUseActivatedClass=function(e){this.useActivatedClass_=e},t.prototype.getSelectedIndex=function(){return this.selectedIndex_},t.prototype.setSelectedIndex=function(e){this.isIndexValid_(e)&&(this.isCheckboxList_?this.setCheckboxAtIndex_(e):this.isRadioList_?this.setRadioAtIndex_(e):this.setSingleSelectionAtIndex_(e))},t.prototype.handleFocusIn=function(e,t){t>=0&&this.adapter_.setTabIndexForListItemChildren(t,"0")},t.prototype.handleFocusOut=function(e,t){var i=this;t>=0&&this.adapter_.setTabIndexForListItemChildren(t,"-1"),setTimeout((function(){i.adapter_.isFocusInsideList()||i.setTabindexToFirstSelectedItem_()}),0)},t.prototype.handleKeydown=function(e,t,i){var n="ArrowLeft"===e.key||37===e.keyCode,s="ArrowUp"===e.key||38===e.keyCode,a="ArrowRight"===e.key||39===e.keyCode,o="ArrowDown"===e.key||40===e.keyCode,r="Home"===e.key||36===e.keyCode,c="End"===e.key||35===e.keyCode,d="Enter"===e.key||13===e.keyCode,l="Space"===e.key||32===e.keyCode;if(this.adapter_.isRootFocused())s||c?(e.preventDefault(),this.focusLastElement()):(o||r)&&(e.preventDefault(),this.focusFirstElement());else{var u=this.adapter_.getFocusedElementIndex();if(!(-1===u&&(u=i)<0)){var h;if(this.isVertical_&&o||!this.isVertical_&&a)this.preventDefaultEvent_(e),h=this.focusNextElement(u);else if(this.isVertical_&&s||!this.isVertical_&&n)this.preventDefaultEvent_(e),h=this.focusPrevElement(u);else if(r)this.preventDefaultEvent_(e),h=this.focusFirstElement();else if(c)this.preventDefaultEvent_(e),h=this.focusLastElement();else if((d||l)&&t){var _=e.target;if(_&&"A"===_.tagName&&d)return;this.preventDefaultEvent_(e),this.isSelectableList_()&&this.setSelectedIndexOnAction_(u),this.adapter_.notifyAction(u)}this.focusedItemIndex_=u,void 0!==h&&(this.setTabindexAtIndex_(h),this.focusedItemIndex_=h)}}},t.prototype.handleClick=function(e,t){e!==gt.UNSET_INDEX&&(this.isSelectableList_()&&this.setSelectedIndexOnAction_(e,t),this.adapter_.notifyAction(e),this.setTabindexAtIndex_(e),this.focusedItemIndex_=e)},t.prototype.focusNextElement=function(e){var t=e+1;if(t>=this.adapter_.getListItemCount()){if(!this.wrapFocus_)return e;t=0}return this.adapter_.focusItemAtIndex(t),t},t.prototype.focusPrevElement=function(e){var t=e-1;if(t<0){if(!this.wrapFocus_)return e;t=this.adapter_.getListItemCount()-1}return this.adapter_.focusItemAtIndex(t),t},t.prototype.focusFirstElement=function(){return this.adapter_.focusItemAtIndex(0),0},t.prototype.focusLastElement=function(){var e=this.adapter_.getListItemCount()-1;return this.adapter_.focusItemAtIndex(e),e},t.prototype.setEnabled=function(e,t){this.isIndexValid_(e)&&(t?(this.adapter_.removeClassForElementIndex(e,mt.LIST_ITEM_DISABLED_CLASS),this.adapter_.setAttributeForElementIndex(e,pt.ARIA_DISABLED,"false")):(this.adapter_.addClassForElementIndex(e,mt.LIST_ITEM_DISABLED_CLASS),this.adapter_.setAttributeForElementIndex(e,pt.ARIA_DISABLED,"true")))},t.prototype.preventDefaultEvent_=function(e){var t=(""+e.target.tagName).toLowerCase();-1===ft.indexOf(t)&&e.preventDefault()},t.prototype.setSingleSelectionAtIndex_=function(e){if(this.selectedIndex_!==e){var t=mt.LIST_ITEM_SELECTED_CLASS;this.useActivatedClass_&&(t=mt.LIST_ITEM_ACTIVATED_CLASS),this.selectedIndex_!==gt.UNSET_INDEX&&this.adapter_.removeClassForElementIndex(this.selectedIndex_,t),this.adapter_.addClassForElementIndex(e,t),this.setAriaForSingleSelectionAtIndex_(e),this.selectedIndex_=e}},t.prototype.setAriaForSingleSelectionAtIndex_=function(e){this.selectedIndex_===gt.UNSET_INDEX&&(this.ariaCurrentAttrValue_=this.adapter_.getAttributeForElementIndex(e,pt.ARIA_CURRENT));var t=null!==this.ariaCurrentAttrValue_,i=t?pt.ARIA_CURRENT:pt.ARIA_SELECTED;this.selectedIndex_!==gt.UNSET_INDEX&&this.adapter_.setAttributeForElementIndex(this.selectedIndex_,i,"false");var n=t?this.ariaCurrentAttrValue_:"true";this.adapter_.setAttributeForElementIndex(e,i,n)},t.prototype.setRadioAtIndex_=function(e){this.adapter_.setCheckedCheckboxOrRadioAtIndex(e,!0),this.selectedIndex_!==gt.UNSET_INDEX&&this.adapter_.setAttributeForElementIndex(this.selectedIndex_,pt.ARIA_CHECKED,"false"),this.adapter_.setAttributeForElementIndex(e,pt.ARIA_CHECKED,"true"),this.selectedIndex_=e},t.prototype.setCheckboxAtIndex_=function(e){for(var t=0;t<this.adapter_.getListItemCount();t++){var i=!1;e.indexOf(t)>=0&&(i=!0),this.adapter_.setCheckedCheckboxOrRadioAtIndex(t,i),this.adapter_.setAttributeForElementIndex(t,pt.ARIA_CHECKED,i?"true":"false")}this.selectedIndex_=e},t.prototype.setTabindexAtIndex_=function(e){this.focusedItemIndex_===gt.UNSET_INDEX&&0!==e?this.adapter_.setAttributeForElementIndex(0,"tabindex","-1"):this.focusedItemIndex_>=0&&this.focusedItemIndex_!==e&&this.adapter_.setAttributeForElementIndex(this.focusedItemIndex_,"tabindex","-1"),this.adapter_.setAttributeForElementIndex(e,"tabindex","0")},t.prototype.isSelectableList_=function(){return this.isSingleSelectionList_||this.isCheckboxList_||this.isRadioList_},t.prototype.setTabindexToFirstSelectedItem_=function(){var e=0;this.isSelectableList_()&&("number"==typeof this.selectedIndex_&&this.selectedIndex_!==gt.UNSET_INDEX?e=this.selectedIndex_:this.selectedIndex_ instanceof Array&&this.selectedIndex_.length>0&&(e=this.selectedIndex_.reduce((function(e,t){return Math.min(e,t)})))),this.setTabindexAtIndex_(e)},t.prototype.isIndexValid_=function(e){var t=this;if(e instanceof Array){if(!this.isCheckboxList_)throw new Error("MDCListFoundation: Array of index is only supported for checkbox based list");return 0===e.length||e.some((function(e){return t.isIndexInRange_(e)}))}if("number"==typeof e){if(this.isCheckboxList_)throw new Error("MDCListFoundation: Expected array of index for checkbox based list but got number: "+e);return this.isIndexInRange_(e)}return!1},t.prototype.isIndexInRange_=function(e){var t=this.adapter_.getListItemCount();return e>=0&&e<t},t.prototype.setSelectedIndexOnAction_=function(e,t){void 0===t&&(t=!0),this.adapter_.listItemAtIndexHasClass(e,mt.LIST_ITEM_DISABLED_CLASS)||(this.isCheckboxList_?this.toggleCheckboxAtIndex_(e,t):this.setSelectedIndex(e))},t.prototype.toggleCheckboxAtIndex_=function(e,t){var i=this.adapter_.isCheckboxCheckedAtIndex(e);t&&(i=!i,this.adapter_.setCheckedCheckboxOrRadioAtIndex(e,i)),this.adapter_.setAttributeForElementIndex(e,pt.ARIA_CHECKED,i?"true":"false");var n=this.selectedIndex_===gt.UNSET_INDEX?[]:this.selectedIndex_.slice();i?n.push(e):n=n.filter((function(t){return t!==e})),this.selectedIndex_=n},t}(H),yt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return x(t,e),Object.defineProperty(t.prototype,"vertical",{set:function(e){this.foundation_.setVerticalOrientation(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"listElements",{get:function(){return[].slice.call(this.root_.querySelectorAll("."+mt.LIST_ITEM_CLASS))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wrapFocus",{set:function(e){this.foundation_.setWrapFocus(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"singleSelection",{set:function(e){this.foundation_.setSingleSelection(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedIndex",{get:function(){return this.foundation_.getSelectedIndex()},set:function(e){this.foundation_.setSelectedIndex(e)},enumerable:!0,configurable:!0}),t.attachTo=function(e){return new t(e)},t.prototype.initialSyncWithDOM=function(){this.handleClick_=this.handleClickEvent_.bind(this),this.handleKeydown_=this.handleKeydownEvent_.bind(this),this.focusInEventListener_=this.handleFocusInEvent_.bind(this),this.focusOutEventListener_=this.handleFocusOutEvent_.bind(this),this.listen("keydown",this.handleKeydown_),this.listen("click",this.handleClick_),this.listen("focusin",this.focusInEventListener_),this.listen("focusout",this.focusOutEventListener_),this.layout(),this.initializeListType()},t.prototype.destroy=function(){this.unlisten("keydown",this.handleKeydown_),this.unlisten("click",this.handleClick_),this.unlisten("focusin",this.focusInEventListener_),this.unlisten("focusout",this.focusOutEventListener_)},t.prototype.layout=function(){var e=this.root_.getAttribute(pt.ARIA_ORIENTATION);this.vertical=e!==pt.ARIA_ORIENTATION_HORIZONTAL,[].slice.call(this.root_.querySelectorAll(".mdc-list-item:not([tabindex])")).forEach((function(e){e.setAttribute("tabindex","-1")})),[].slice.call(this.root_.querySelectorAll(pt.FOCUSABLE_CHILD_ELEMENTS)).forEach((function(e){return e.setAttribute("tabindex","-1")})),this.foundation_.layout()},t.prototype.initializeListType=function(){var e=this,t=this.root_.querySelectorAll(pt.ARIA_ROLE_CHECKBOX_SELECTOR),i=this.root_.querySelector("\n      ."+mt.LIST_ITEM_ACTIVATED_CLASS+",\n      ."+mt.LIST_ITEM_SELECTED_CLASS+"\n    "),n=this.root_.querySelector(pt.ARIA_CHECKED_RADIO_SELECTOR);if(t.length){var s=this.root_.querySelectorAll(pt.ARIA_CHECKED_CHECKBOX_SELECTOR);this.selectedIndex=[].map.call(s,(function(t){return e.listElements.indexOf(t)}))}else i?(i.classList.contains(mt.LIST_ITEM_ACTIVATED_CLASS)&&this.foundation_.setUseActivatedClass(!0),this.singleSelection=!0,this.selectedIndex=this.listElements.indexOf(i)):n&&(this.selectedIndex=this.listElements.indexOf(n))},t.prototype.setEnabled=function(e,t){this.foundation_.setEnabled(e,t)},t.prototype.getDefaultFoundation=function(){var e=this;return new Et({addClassForElementIndex:function(t,i){var n=e.listElements[t];n&&n.classList.add(i)},focusItemAtIndex:function(t){var i=e.listElements[t];i&&i.focus()},getAttributeForElementIndex:function(t,i){return e.listElements[t].getAttribute(i)},getFocusedElementIndex:function(){return e.listElements.indexOf(document.activeElement)},getListItemCount:function(){return e.listElements.length},hasCheckboxAtIndex:function(t){return!!e.listElements[t].querySelector(pt.CHECKBOX_SELECTOR)},hasRadioAtIndex:function(t){return!!e.listElements[t].querySelector(pt.RADIO_SELECTOR)},isCheckboxCheckedAtIndex:function(t){return e.listElements[t].querySelector(pt.CHECKBOX_SELECTOR).checked},isFocusInsideList:function(){return e.root_.contains(document.activeElement)},isRootFocused:function(){return document.activeElement===e.root_},listItemAtIndexHasClass:function(t,i){return e.listElements[t].classList.contains(i)},notifyAction:function(t){e.emit(pt.ACTION_EVENT,{index:t},!0)},removeClassForElementIndex:function(t,i){var n=e.listElements[t];n&&n.classList.remove(i)},setAttributeForElementIndex:function(t,i,n){var s=e.listElements[t];s&&s.setAttribute(i,n)},setCheckedCheckboxOrRadioAtIndex:function(t,i){var n=e.listElements[t].querySelector(pt.CHECKBOX_RADIO_SELECTOR);n.checked=i;var s=document.createEvent("Event");s.initEvent("change",!0,!0),n.dispatchEvent(s)},setTabIndexForListItemChildren:function(t,i){var n=e.listElements[t];[].slice.call(n.querySelectorAll(pt.CHILD_ELEMENTS_TO_TOGGLE_TABINDEX)).forEach((function(e){return e.setAttribute("tabindex",i)}))}})},t.prototype.getListItemIndex_=function(e){var t=j(e.target,"."+mt.LIST_ITEM_CLASS+", ."+mt.ROOT);return t&&V(t,"."+mt.LIST_ITEM_CLASS)?this.listElements.indexOf(t):-1},t.prototype.handleFocusInEvent_=function(e){var t=this.getListItemIndex_(e);this.foundation_.handleFocusIn(e,t)},t.prototype.handleFocusOutEvent_=function(e){var t=this.getListItemIndex_(e);this.foundation_.handleFocusOut(e,t)},t.prototype.handleKeydownEvent_=function(e){var t=this.getListItemIndex_(e),i=e.target;this.foundation_.handleKeydown(e,i.classList.contains(mt.LIST_ITEM_CLASS),t)},t.prototype.handleClickEvent_=function(e){var t=this.getListItemIndex_(e),i=!V(e.target,pt.CHECKBOX_RADIO_SELECTOR);this.foundation_.handleClick(t,i)},t}(U),Ct={ANCHOR:"mdc-menu-surface--anchor",ANIMATING_CLOSED:"mdc-menu-surface--animating-closed",ANIMATING_OPEN:"mdc-menu-surface--animating-open",FIXED:"mdc-menu-surface--fixed",OPEN:"mdc-menu-surface--open",ROOT:"mdc-menu-surface"},It={CLOSED_EVENT:"MDCMenuSurface:closed",OPENED_EVENT:"MDCMenuSurface:opened",FOCUSABLE_ELEMENTS:["button:not(:disabled)",'[href]:not([aria-disabled="true"])',"input:not(:disabled)","select:not(:disabled)","textarea:not(:disabled)",'[tabindex]:not([tabindex="-1"]):not([aria-disabled="true"])'].join(", ")},At={TRANSITION_OPEN_DURATION:120,TRANSITION_CLOSE_DURATION:75,MARGIN_TO_EDGE:32,ANCHOR_TO_MENU_SURFACE_WIDTH_RATIO:.67};!function(e){e[e.BOTTOM=1]="BOTTOM",e[e.CENTER=2]="CENTER",e[e.RIGHT=4]="RIGHT",e[e.FLIP_RTL=8]="FLIP_RTL"}(vt||(vt={})),function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=4]="TOP_RIGHT",e[e.BOTTOM_LEFT=1]="BOTTOM_LEFT",e[e.BOTTOM_RIGHT=5]="BOTTOM_RIGHT",e[e.TOP_START=8]="TOP_START",e[e.TOP_END=12]="TOP_END",e[e.BOTTOM_START=9]="BOTTOM_START",e[e.BOTTOM_END=13]="BOTTOM_END"}(bt||(bt={}));
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
var Tt,St=function(e){function t(i){var n=e.call(this,k({},t.defaultAdapter,i))||this;return n.isOpen_=!1,n.isQuickOpen_=!1,n.isHoistedElement_=!1,n.isFixedPosition_=!1,n.openAnimationEndTimerId_=0,n.closeAnimationEndTimerId_=0,n.animationRequestId_=0,n.anchorCorner_=bt.TOP_START,n.anchorMargin_={top:0,right:0,bottom:0,left:0},n.position_={x:0,y:0},n}return x(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return Ct},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return It},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return At},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Corner",{get:function(){return bt},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},hasAnchor:function(){return!1},isElementInContainer:function(){return!1},isFocused:function(){return!1},isRtl:function(){return!1},getInnerDimensions:function(){return{height:0,width:0}},getAnchorDimensions:function(){return null},getWindowDimensions:function(){return{height:0,width:0}},getBodyDimensions:function(){return{height:0,width:0}},getWindowScroll:function(){return{x:0,y:0}},setPosition:function(){},setMaxHeight:function(){},setTransformOrigin:function(){},saveFocus:function(){},restoreFocus:function(){},notifyClose:function(){},notifyOpen:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){var e=t.cssClasses,i=e.ROOT,n=e.OPEN;if(!this.adapter_.hasClass(i))throw new Error(i+" class required in root element.");this.adapter_.hasClass(n)&&(this.isOpen_=!0)},t.prototype.destroy=function(){clearTimeout(this.openAnimationEndTimerId_),clearTimeout(this.closeAnimationEndTimerId_),cancelAnimationFrame(this.animationRequestId_)},t.prototype.setAnchorCorner=function(e){this.anchorCorner_=e},t.prototype.setAnchorMargin=function(e){this.anchorMargin_.top=e.top||0,this.anchorMargin_.right=e.right||0,this.anchorMargin_.bottom=e.bottom||0,this.anchorMargin_.left=e.left||0},t.prototype.setIsHoisted=function(e){this.isHoistedElement_=e},t.prototype.setFixedPosition=function(e){this.isFixedPosition_=e},t.prototype.setAbsolutePosition=function(e,t){this.position_.x=this.isFinite_(e)?e:0,this.position_.y=this.isFinite_(t)?t:0},t.prototype.setQuickOpen=function(e){this.isQuickOpen_=e},t.prototype.isOpen=function(){return this.isOpen_},t.prototype.open=function(){var e=this;this.adapter_.saveFocus(),this.isQuickOpen_||this.adapter_.addClass(t.cssClasses.ANIMATING_OPEN),this.animationRequestId_=requestAnimationFrame((function(){e.adapter_.addClass(t.cssClasses.OPEN),e.dimensions_=e.adapter_.getInnerDimensions(),e.autoPosition_(),e.isQuickOpen_?e.adapter_.notifyOpen():e.openAnimationEndTimerId_=setTimeout((function(){e.openAnimationEndTimerId_=0,e.adapter_.removeClass(t.cssClasses.ANIMATING_OPEN),e.adapter_.notifyOpen()}),At.TRANSITION_OPEN_DURATION)})),this.isOpen_=!0},t.prototype.close=function(e){var i=this;void 0===e&&(e=!1),this.isQuickOpen_||this.adapter_.addClass(t.cssClasses.ANIMATING_CLOSED),requestAnimationFrame((function(){i.adapter_.removeClass(t.cssClasses.OPEN),i.isQuickOpen_?i.adapter_.notifyClose():i.closeAnimationEndTimerId_=setTimeout((function(){i.closeAnimationEndTimerId_=0,i.adapter_.removeClass(t.cssClasses.ANIMATING_CLOSED),i.adapter_.notifyClose()}),At.TRANSITION_CLOSE_DURATION)})),this.isOpen_=!1,e||this.maybeRestoreFocus_()},t.prototype.handleBodyClick=function(e){var t=e.target;this.adapter_.isElementInContainer(t)||this.close()},t.prototype.handleKeydown=function(e){var t=e.keyCode;("Escape"===e.key||27===t)&&this.close()},t.prototype.autoPosition_=function(){var e;this.measurements_=this.getAutoLayoutMeasurements_();var t=this.getOriginCorner_(),i=this.getMenuSurfaceMaxHeight_(t),n=this.hasBit_(t,vt.BOTTOM)?"bottom":"top",s=this.hasBit_(t,vt.RIGHT)?"right":"left",a=this.getHorizontalOriginOffset_(t),o=this.getVerticalOriginOffset_(t),r=this.measurements_,c=r.anchorSize,d=r.surfaceSize,l=((e={})[s]=a,e[n]=o,e);c.width/d.width>At.ANCHOR_TO_MENU_SURFACE_WIDTH_RATIO&&(s="center"),(this.isHoistedElement_||this.isFixedPosition_)&&this.adjustPositionForHoistedElement_(l),this.adapter_.setTransformOrigin(s+" "+n),this.adapter_.setPosition(l),this.adapter_.setMaxHeight(i?i+"px":"")},t.prototype.getAutoLayoutMeasurements_=function(){var e=this.adapter_.getAnchorDimensions(),t=this.adapter_.getBodyDimensions(),i=this.adapter_.getWindowDimensions(),n=this.adapter_.getWindowScroll();return e||(e={top:this.position_.y,right:this.position_.x,bottom:this.position_.y,left:this.position_.x,width:0,height:0}),{anchorSize:e,bodySize:t,surfaceSize:this.dimensions_,viewportDistance:{top:e.top,right:i.width-e.right,bottom:i.height-e.bottom,left:e.left},viewportSize:i,windowScroll:n}},t.prototype.getOriginCorner_=function(){var e=bt.TOP_LEFT,t=this.measurements_,i=t.viewportDistance,n=t.anchorSize,s=t.surfaceSize,a=this.hasBit_(this.anchorCorner_,vt.BOTTOM),o=a?i.top+n.height+this.anchorMargin_.bottom:i.top+this.anchorMargin_.top,r=a?i.bottom-this.anchorMargin_.bottom:i.bottom+n.height-this.anchorMargin_.top,c=s.height-o,d=s.height-r;d>0&&c<d&&(e=this.setBit_(e,vt.BOTTOM));var l=this.adapter_.isRtl(),u=this.hasBit_(this.anchorCorner_,vt.FLIP_RTL),h=this.hasBit_(this.anchorCorner_,vt.RIGHT),_=h&&!l||!h&&u&&l,m=_?i.left+n.width+this.anchorMargin_.right:i.left+this.anchorMargin_.left,p=_?i.right-this.anchorMargin_.right:i.right+n.width-this.anchorMargin_.left,g=s.width-m,f=s.width-p;return(g<0&&_&&l||h&&!_&&g<0||f>0&&g<f)&&(e=this.setBit_(e,vt.RIGHT)),e},t.prototype.getMenuSurfaceMaxHeight_=function(e){var i=this.measurements_.viewportDistance,n=0,s=this.hasBit_(e,vt.BOTTOM),a=this.hasBit_(this.anchorCorner_,vt.BOTTOM),o=t.numbers.MARGIN_TO_EDGE;return s?(n=i.top+this.anchorMargin_.top-o,a||(n+=this.measurements_.anchorSize.height)):(n=i.bottom-this.anchorMargin_.bottom+this.measurements_.anchorSize.height-o,a&&(n-=this.measurements_.anchorSize.height)),n},t.prototype.getHorizontalOriginOffset_=function(e){var t=this.measurements_.anchorSize,i=this.hasBit_(e,vt.RIGHT),n=this.hasBit_(this.anchorCorner_,vt.RIGHT);if(i){var s=n?t.width-this.anchorMargin_.left:this.anchorMargin_.right;return this.isHoistedElement_||this.isFixedPosition_?s-(this.measurements_.viewportSize.width-this.measurements_.bodySize.width):s}return n?t.width-this.anchorMargin_.right:this.anchorMargin_.left},t.prototype.getVerticalOriginOffset_=function(e){var t=this.measurements_.anchorSize,i=this.hasBit_(e,vt.BOTTOM),n=this.hasBit_(this.anchorCorner_,vt.BOTTOM);return i?n?t.height-this.anchorMargin_.top:-this.anchorMargin_.bottom:n?t.height+this.anchorMargin_.bottom:this.anchorMargin_.top},t.prototype.adjustPositionForHoistedElement_=function(e){var t,i,n=this.measurements_,s=n.windowScroll,a=n.viewportDistance,o=Object.keys(e);try{for(var r=N(o),c=r.next();!c.done;c=r.next()){var d=c.value,l=e[d]||0;l+=a[d],this.isFixedPosition_||("top"===d?l+=s.y:"bottom"===d?l-=s.y:"left"===d?l+=s.x:l-=s.x),e[d]=l}}catch(e){t={error:e}}finally{try{c&&!c.done&&(i=r.return)&&i.call(r)}finally{if(t)throw t.error}}},t.prototype.maybeRestoreFocus_=function(){var e=this.adapter_.isFocused(),t=document.activeElement&&this.adapter_.isElementInContainer(document.activeElement);(e||t)&&this.adapter_.restoreFocus()},t.prototype.hasBit_=function(e,t){return Boolean(e&t)},t.prototype.setBit_=function(e,t){return e|t},t.prototype.isFinite_=function(e){return"number"==typeof e&&isFinite(e)},t}(H);
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
var wt,Mt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return x(t,e),t.attachTo=function(e){return new t(e)},t.prototype.initialSyncWithDOM=function(){var e=this,t=this.root_.parentElement;this.anchorElement=t&&t.classList.contains(Ct.ANCHOR)?t:null,this.root_.classList.contains(Ct.FIXED)&&this.setFixedPosition(!0),this.handleKeydown_=function(t){return e.foundation_.handleKeydown(t)},this.handleBodyClick_=function(t){return e.foundation_.handleBodyClick(t)},this.registerBodyClickListener_=function(){return document.body.addEventListener("click",e.handleBodyClick_)},this.deregisterBodyClickListener_=function(){return document.body.removeEventListener("click",e.handleBodyClick_)},this.listen("keydown",this.handleKeydown_),this.listen(It.OPENED_EVENT,this.registerBodyClickListener_),this.listen(It.CLOSED_EVENT,this.deregisterBodyClickListener_)},t.prototype.destroy=function(){this.unlisten("keydown",this.handleKeydown_),this.unlisten(It.OPENED_EVENT,this.registerBodyClickListener_),this.unlisten(It.CLOSED_EVENT,this.deregisterBodyClickListener_),e.prototype.destroy.call(this)},t.prototype.isOpen=function(){return this.foundation_.isOpen()},t.prototype.open=function(){this.foundation_.open()},t.prototype.close=function(e){void 0===e&&(e=!1),this.foundation_.close(e)},Object.defineProperty(t.prototype,"quickOpen",{set:function(e){this.foundation_.setQuickOpen(e)},enumerable:!0,configurable:!0}),t.prototype.setIsHoisted=function(e){this.foundation_.setIsHoisted(e)},t.prototype.setMenuSurfaceAnchorElement=function(e){this.anchorElement=e},t.prototype.setFixedPosition=function(e){e?this.root_.classList.add(Ct.FIXED):this.root_.classList.remove(Ct.FIXED),this.foundation_.setFixedPosition(e)},t.prototype.setAbsolutePosition=function(e,t){this.foundation_.setAbsolutePosition(e,t),this.setIsHoisted(!0)},t.prototype.setAnchorCorner=function(e){this.foundation_.setAnchorCorner(e)},t.prototype.setAnchorMargin=function(e){this.foundation_.setAnchorMargin(e)},t.prototype.getDefaultFoundation=function(){var e=this;return new St({addClass:function(t){return e.root_.classList.add(t)},removeClass:function(t){return e.root_.classList.remove(t)},hasClass:function(t){return e.root_.classList.contains(t)},hasAnchor:function(){return!!e.anchorElement},notifyClose:function(){return e.emit(St.strings.CLOSED_EVENT,{})},notifyOpen:function(){return e.emit(St.strings.OPENED_EVENT,{})},isElementInContainer:function(t){return e.root_.contains(t)},isRtl:function(){return"rtl"===getComputedStyle(e.root_).getPropertyValue("direction")},setTransformOrigin:function(t){var i=function(e,t){if(void 0===t&&(t=!1),void 0===Tt||t){var i=e.document.createElement("div");Tt="transform"in i.style?"transform":"webkitTransform"}return Tt}(window)+"-origin";e.root_.style.setProperty(i,t)},isFocused:function(){return document.activeElement===e.root_},saveFocus:function(){e.previousFocus_=document.activeElement},restoreFocus:function(){e.root_.contains(document.activeElement)&&e.previousFocus_&&e.previousFocus_.focus&&e.previousFocus_.focus()},getInnerDimensions:function(){return{width:e.root_.offsetWidth,height:e.root_.offsetHeight}},getAnchorDimensions:function(){return e.anchorElement?e.anchorElement.getBoundingClientRect():null},getWindowDimensions:function(){return{width:window.innerWidth,height:window.innerHeight}},getBodyDimensions:function(){return{width:document.body.clientWidth,height:document.body.clientHeight}},getWindowScroll:function(){return{x:window.pageXOffset,y:window.pageYOffset}},setPosition:function(t){e.root_.style.left="left"in t?t.left+"px":"",e.root_.style.right="right"in t?t.right+"px":"",e.root_.style.top="top"in t?t.top+"px":"",e.root_.style.bottom="bottom"in t?t.bottom+"px":""},setMaxHeight:function(t){e.root_.style.maxHeight=t}})},t}(U),Lt={MENU_SELECTED_LIST_ITEM:"mdc-menu-item--selected",MENU_SELECTION_GROUP:"mdc-menu__selection-group",ROOT:"mdc-menu"},Ot={ARIA_CHECKED_ATTR:"aria-checked",ARIA_DISABLED_ATTR:"aria-disabled",CHECKBOX_SELECTOR:'input[type="checkbox"]',LIST_SELECTOR:".mdc-list",SELECTED_EVENT:"MDCMenu:selected"},Pt={FOCUS_ROOT_INDEX:-1};
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */!function(e){e[e.NONE=0]="NONE",e[e.LIST_ROOT=1]="LIST_ROOT",e[e.FIRST_ITEM=2]="FIRST_ITEM",e[e.LAST_ITEM=3]="LAST_ITEM"}(wt||(wt={}));
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
var Dt=function(e){function t(i){var n=e.call(this,k({},t.defaultAdapter,i))||this;return n.closeAnimationEndTimerId_=0,n.defaultFocusState_=wt.LIST_ROOT,n}return x(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return Lt},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return Ot},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return Pt},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClassToElementAtIndex:function(){},removeClassFromElementAtIndex:function(){},addAttributeToElementAtIndex:function(){},removeAttributeFromElementAtIndex:function(){},elementContainsClass:function(){return!1},closeSurface:function(){},getElementIndex:function(){return-1},notifySelected:function(){},getMenuItemCount:function(){return 0},focusItemAtIndex:function(){},focusListRoot:function(){},getSelectedSiblingOfItemAtIndex:function(){return-1},isSelectableItemAtIndex:function(){return!1}}},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){this.closeAnimationEndTimerId_&&clearTimeout(this.closeAnimationEndTimerId_),this.adapter_.closeSurface()},t.prototype.handleKeydown=function(e){var t=e.key,i=e.keyCode;("Tab"===t||9===i)&&this.adapter_.closeSurface(!0)},t.prototype.handleItemAction=function(e){var t=this,i=this.adapter_.getElementIndex(e);i<0||(this.adapter_.notifySelected({index:i}),this.adapter_.closeSurface(),this.closeAnimationEndTimerId_=setTimeout((function(){var i=t.adapter_.getElementIndex(e);t.adapter_.isSelectableItemAtIndex(i)&&t.setSelectedIndex(i)}),St.numbers.TRANSITION_CLOSE_DURATION))},t.prototype.handleMenuSurfaceOpened=function(){switch(this.defaultFocusState_){case wt.FIRST_ITEM:this.adapter_.focusItemAtIndex(0);break;case wt.LAST_ITEM:this.adapter_.focusItemAtIndex(this.adapter_.getMenuItemCount()-1);break;case wt.NONE:break;default:this.adapter_.focusListRoot()}},t.prototype.setDefaultFocusState=function(e){this.defaultFocusState_=e},t.prototype.setSelectedIndex=function(e){if(this.validatedIndex_(e),!this.adapter_.isSelectableItemAtIndex(e))throw new Error("MDCMenuFoundation: No selection group at specified index.");var t=this.adapter_.getSelectedSiblingOfItemAtIndex(e);t>=0&&(this.adapter_.removeAttributeFromElementAtIndex(t,Ot.ARIA_CHECKED_ATTR),this.adapter_.removeClassFromElementAtIndex(t,Lt.MENU_SELECTED_LIST_ITEM)),this.adapter_.addClassToElementAtIndex(e,Lt.MENU_SELECTED_LIST_ITEM),this.adapter_.addAttributeToElementAtIndex(e,Ot.ARIA_CHECKED_ATTR,"true")},t.prototype.setEnabled=function(e,t){this.validatedIndex_(e),t?(this.adapter_.removeClassFromElementAtIndex(e,mt.LIST_ITEM_DISABLED_CLASS),this.adapter_.addAttributeToElementAtIndex(e,Ot.ARIA_DISABLED_ATTR,"false")):(this.adapter_.addClassToElementAtIndex(e,mt.LIST_ITEM_DISABLED_CLASS),this.adapter_.addAttributeToElementAtIndex(e,Ot.ARIA_DISABLED_ATTR,"true"))},t.prototype.validatedIndex_=function(e){var t=this.adapter_.getMenuItemCount();if(!(e>=0&&e<t))throw new Error("MDCMenuFoundation: No list item at specified index.")},t}(H),xt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return x(t,e),t.attachTo=function(e){return new t(e)},t.prototype.initialize=function(e,t){void 0===e&&(e=function(e){return new Mt(e)}),void 0===t&&(t=function(e){return new yt(e)}),this.menuSurfaceFactory_=e,this.listFactory_=t},t.prototype.initialSyncWithDOM=function(){var e=this;this.menuSurface_=this.menuSurfaceFactory_(this.root_);var t=this.root_.querySelector(Ot.LIST_SELECTOR);t?(this.list_=this.listFactory_(t),this.list_.wrapFocus=!0):this.list_=null,this.handleKeydown_=function(t){return e.foundation_.handleKeydown(t)},this.handleItemAction_=function(t){return e.foundation_.handleItemAction(e.items[t.detail.index])},this.handleMenuSurfaceOpened_=function(){return e.foundation_.handleMenuSurfaceOpened()},this.menuSurface_.listen(St.strings.OPENED_EVENT,this.handleMenuSurfaceOpened_),this.listen("keydown",this.handleKeydown_),this.listen(Et.strings.ACTION_EVENT,this.handleItemAction_)},t.prototype.destroy=function(){this.list_&&this.list_.destroy(),this.menuSurface_.destroy(),this.menuSurface_.unlisten(St.strings.OPENED_EVENT,this.handleMenuSurfaceOpened_),this.unlisten("keydown",this.handleKeydown_),this.unlisten(Et.strings.ACTION_EVENT,this.handleItemAction_),e.prototype.destroy.call(this)},Object.defineProperty(t.prototype,"open",{get:function(){return this.menuSurface_.isOpen()},set:function(e){e?this.menuSurface_.open():this.menuSurface_.close()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wrapFocus",{get:function(){return!!this.list_&&this.list_.wrapFocus},set:function(e){this.list_&&(this.list_.wrapFocus=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){return this.list_?this.list_.listElements:[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"quickOpen",{set:function(e){this.menuSurface_.quickOpen=e},enumerable:!0,configurable:!0}),t.prototype.setDefaultFocusState=function(e){this.foundation_.setDefaultFocusState(e)},t.prototype.setAnchorCorner=function(e){this.menuSurface_.setAnchorCorner(e)},t.prototype.setAnchorMargin=function(e){this.menuSurface_.setAnchorMargin(e)},t.prototype.setSelectedIndex=function(e){this.foundation_.setSelectedIndex(e)},t.prototype.setEnabled=function(e,t){this.foundation_.setEnabled(e,t)},t.prototype.getOptionByIndex=function(e){return e<this.items.length?this.items[e]:null},t.prototype.setFixedPosition=function(e){this.menuSurface_.setFixedPosition(e)},t.prototype.setIsHoisted=function(e){this.menuSurface_.setIsHoisted(e)},t.prototype.setAbsolutePosition=function(e,t){this.menuSurface_.setAbsolutePosition(e,t)},t.prototype.setAnchorElement=function(e){this.menuSurface_.anchorElement=e},t.prototype.getDefaultFoundation=function(){var e=this;return new Dt({addClassToElementAtIndex:function(t,i){e.items[t].classList.add(i)},removeClassFromElementAtIndex:function(t,i){e.items[t].classList.remove(i)},addAttributeToElementAtIndex:function(t,i,n){e.items[t].setAttribute(i,n)},removeAttributeFromElementAtIndex:function(t,i){e.items[t].removeAttribute(i)},elementContainsClass:function(e,t){return e.classList.contains(t)},closeSurface:function(t){return e.menuSurface_.close(t)},getElementIndex:function(t){return e.items.indexOf(t)},notifySelected:function(t){return e.emit(Ot.SELECTED_EVENT,{index:t.index,item:e.items[t.index]})},getMenuItemCount:function(){return e.items.length},focusItemAtIndex:function(t){return e.items[t].focus()},focusListRoot:function(){return e.root_.querySelector(Ot.LIST_SELECTOR).focus()},isSelectableItemAtIndex:function(t){return!!j(e.items[t],"."+Lt.MENU_SELECTION_GROUP)},getSelectedSiblingOfItemAtIndex:function(t){var i=j(e.items[t],"."+Lt.MENU_SELECTION_GROUP).querySelector("."+Lt.MENU_SELECTED_LIST_ITEM);return i?e.items.indexOf(i):-1}})},t}(U);function kt(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const Nt=new class{constructor(){kt(this,"onBack",e=>{this.container.hidden=!0,this.container.innerHTML="";const t=e.currentTarget;t.removeEventListener("click",this.onBack),t.hidden=!0}),kt(this,"onExtraMenuClick",()=>{const e=d(".sidebar_extra_menu",this.container),t=new xt(e);t.open||(t.open=!0,t.setAbsolutePosition(239,57))}),kt(this,"onLogoutClick",()=>{App.logOut()})}show(){const e=App.getAuthUserId(),t=He.users.get(e),i=He.getUserName(t);this.container=d(".settings_sidebar"),this.container.hidden=!1,this.container.innerHTML=`\n      <div class="sidebar_header">\n        <div class="sidebar_header_title">Settings</div>\n        <button type="button" class="sidebar_extra_menu_button mdc-icon-button"></button>\n        <div class="sidebar_extra_menu mdc-menu mdc-menu-surface">\n          <ul class="mdc-list" role="menu" aria-hidden="true" aria-orientation="vertical" tabindex="-1">\n            <li class="mdc-list-item settings_extra_menu_item-log_out" role="menuitem">\n              <span class="mdc-list-item__text">Log out</span>\n            </li>\n          </ul>\n        </div>\n      </div>\n      <div class="sidebar_user_info">\n        <div class="sidebar_user_photo"></div>\n        <div class="sidebar_user_name">${i}</div>\n        <div class="sidebar_user_desc">+${t.phone}</div>\n      </div>\n      <ul class="settings_main_menu_list mdc-list">\n        <li class="mdc-list-item settings_main_menu_item-edit" tabindex="0">\n          <span class="mdc-list-item__text">Edit Profile</span>\n        </li>\n        <li class="mdc-list-item settings_main_menu_item-general">\n          <span class="mdc-list-item__text">General Settings</span>\n        </li>\n        <li class="mdc-list-item settings_main_menu_item-notifications">\n          <span class="mdc-list-item__text">Notifications</span>\n        </li>\n        <li class="mdc-list-item settings_main_menu_item-privacy">\n          <span class="mdc-list-item__text">Privacy and Security</span>\n        </li>\n        <li class="mdc-list-item settings_main_menu_item-language">\n          <span class="mdc-list-item__text">Language</span>\n        </li>\n      </ul>\n    `,this.loadUserPhoto(t);const n=d(".chats_header_back_button");n.addEventListener("click",this.onBack),n.hidden=!1,d(".sidebar_extra_menu_button",this.container).addEventListener("click",this.onExtraMenuClick),d(".settings_extra_menu_item-log_out",this.container).addEventListener("click",this.onLogoutClick)}loadUserPhoto(e){const t=d(".sidebar_user_photo",this.container),i=He.getUserPeer(e);$t.loadPeerPhoto(t,i,!0)}};function Ft(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}window.SettingsController=Nt;const Rt=new class{constructor(){Ft(this,"onBack",()=>{this.container.hidden=!0,this.container.innerHTML="",$t.container.hidden=!1;const e=d(".chats_header_back_button");e.hidden=!0,e.removeEventListener("click",this.onBack),d(".chats_header_menu_button").hidden=!1}),Ft(this,"onContactClick",e=>{const t=+e.currentTarget.dataset.userId;_t.setChatByPeerId(t)})}show(){$t.container.hidden=!0,this.container=d(".contacts_sidebar"),this.container.hidden=!1,this.loader=_(this.container);const e=d(".chats_header_back_button");e.addEventListener("click",this.onBack),e.hidden=!1,d(".chats_header_menu_button").hidden=!0,ApiClient.callMethod("contacts.getContacts").then(e=>{He.updateUsers(e.users),this.loader.remove(),this.render(e.contacts)})}render(e){const t=document.createDocumentFragment();for(const i of e){const e=He.users.get(i.user_id),n=this.buildItemElement(e);t.append(n)}this.container.append(t)}buildItemElement(e){const t=He.getUserName(e)||`+${e.phone}`,i=_t.getUserStatusText(e),n=a.html`
      <div class="contacts_item" data-user-id="${e.id}">
        <div class="contacts_item_content mdc-ripple-surface">
          <div class="contacts_item_photo"></div>
          <div class="contacts_item_text">
            <div class="contacts_item_text_row">
              <div class="contacts_item_title">${t}</div>
            </div>
            <div class="contacts_item_text_row">
              <div class="contacts_item_status">${i}</div>
            </div>
          </div>
        </div>
      </div>
    `.buildElement();return this.loadContactPhoto(n,e),n.addEventListener("click",this.onContactClick),new ce(n.firstElementChild),n}loadContactPhoto(e,t){const i=d(".contacts_item_photo",e),n=He.getUserPeer(t);$t.loadPeerPhoto(i,n)}};function Ht(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}window.ContactsController=Rt;const Ut=new class{constructor(){Ht(this,"users",new Map),Ht(this,"chats",new Map),Ht(this,"onBack",()=>{this.input.removeEventListener("input",this.onInput),this.input.value="",this.users.clear(),this.chats.clear(),this.container.hidden=!0,this.container.innerHTML="",$t.container.hidden=!1;const e=d(".chats_header_back_button");e.hidden=!0,e.removeEventListener("click",this.onBack),d(".chats_header_menu_button").hidden=!1}),Ht(this,"onInput",()=>{const e=this.input.value.trim();e?(this.container.innerHTML="",this.container.append(this.loader),this.loadResults(e)):this.onBack()}),Ht(this,"onPeerClick",e=>{const t=e.currentTarget,i=+t.dataset.peerId,n=+(t.dataset.messageId||0);_t.setChatByPeerId(i,n)})}show(e){this.input=e,this.input.addEventListener("input",this.onInput),$t.container.hidden=!0,this.container=d(".global_search_sidebar"),this.container.hidden=!1,this.loader=_();const t=d(".chats_header_back_button");t.addEventListener("click",this.onBack),t.hidden=!1,d(".chats_header_menu_button").hidden=!0,this.onInput()}async loadResults(e,t=20,i=20){const[n,s]=await Promise.all([ApiClient.callMethod("contacts.search",{q:e,limit:t}),ApiClient.callMethod("messages.searchGlobal",{q:e,limit:i,offset_peer:{_:"inputPeerEmpty"}})]);He.updateUsers(n.users),He.updateUsers(s.users),He.updateChats(n.chats),He.updateChats(s.chats),this.renderResults(n.my_results,n.results,s.messages)}renderResults(e,t,i){const n=document.createDocumentFragment();n.append(this.buildContactsSublist("Contacts and Chats",e),this.buildContactsSublist("Global Search",t),this.buildMessagesSublist("Messages",i)),this.container.innerHTML="",this.container.append(n)}buildContactsSublist(e,t){if(!t.length)return"";const i=a.html`
      <div class="global_search_sublist">
        <div class="global_search_sublist_header">${e}</div>
      </div>
    `.buildElement();for(const e of t){const t=He.getPeerId(e),n=He.getPeerName(e),s="peerUser"===e._?_t.getUserStatusText(He.getPeerData(e)):"",o=a.html`
        <div class="contacts_item" data-peer-id="${t}">
          <div class="contacts_item_content mdc-ripple-surface">
            <div class="contacts_item_photo"></div>
            <div class="contacts_item_text">
              <div class="contacts_item_text_row">
                <div class="contacts_item_title">${n}</div>
              </div>
              <div class="contacts_item_text_row">
                <div class="contacts_item_status">${s}</div>
              </div>
            </div>
          </div>
        </div>
      `.buildElement();$t.loadPeerPhoto(d(".contacts_item_photo",o),e),o.addEventListener("click",this.onPeerClick),new ce(o.firstElementChild),i.append(o)}return i}buildMessagesSublist(e,t){if(!t.length)return"";const i=a.html`
      <div class="global_search_sublist">
        <div class="global_search_sublist_header">${e}</div>
      </div>
    `.buildElement();for(const e of t){const t=He.getMessageDialogPeer(e),n=He.getPeerId(t),s=He.getPeerName(t),o=$t.formatMessageDate(e),r=$t.getMessagePreview(e),c=a.html`
        <div class="messages_search_results_item" data-peer-id="${n}" data-message-id="${e.id}">
          <div class="messages_search_results_item_content mdc-ripple-surface">
            <div class="messages_search_results_item_photo"></div>
            <div class="messages_search_results_item_text">
              <div class="messages_search_results_item_text_row">
                <div class="messages_search_results_item_title">${s}</div>
                <div class="messages_search_results_item_date">${o}</div>
              </div>
              <div class="messages_search_results_item_text_row">
                <div class="messages_search_results_item_message">${r}</div>
              </div>
            </div>      
          </div>
        </div>
      `.buildElement();$t.loadPeerPhoto(d(".messages_search_results_item_photo",c),t),c.addEventListener("click",this.onPeerClick),i.append(c)}return i}saveTmpPeers(e,...t){for(const i of t)for(const t of i)e.set(t.id,t)}};function Bt(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}window.GlobalSearchController=Ut;const jt=new class{constructor(){Bt(this,"chatElements",new Map),Bt(this,"onBack",e=>{this.chatElements.clear(),this.container.hidden=!0;const t=e.currentTarget;t.removeEventListener("click",this.onBack),t.hidden=!0}),Bt(this,"onDialogsUpdate",e=>{const{dialogs:t,folderId:i}=e.detail;1===i&&this.renderChats(t)})}show(){this.container=d(".archived_chats_sidebar"),this.container.hidden=!1,this.container.innerHTML='\n      <div class="sidebar_header">\n        <div class="sidebar_header_title">Archived chats</div>\n      </div>\n      <div class="archived_chats_list"></div>\n    ',this.scrollContainer=d(".archived_chats_list",this.container),this.loader=_(this.scrollContainer);const e=d(".chats_header_back_button");e.addEventListener("click",this.onBack),e.hidden=!1,He.emitter.on("dialogsUpdate",this.onDialogsUpdate),He.archivedDialogs.length?this.renderChats(He.archivedDialogs):this.loadMore()}loadMore(){this.loading=!0,He.loadArchivedDialogs(this.offset).then(e=>{e.length||(this.noMore=!0)}).finally(()=>{this.loading=!1})}renderChats(e){this.loader.remove();const t=document.createDocumentFragment();for(const i of e){const e=He.getPeerId(i.peer);if(this.chatElements.has(e))continue;const n=this.buildChatPreviewElement(i);t.append(n)}this.scrollContainer.append(t);const i=e[e.length-1],n=He.messages.get(i.top_message);this.offset={id:i.top_message,peer:i.peer,date:n.date}}buildChatPreviewElement(e){const t=He.getPeerId(e.peer),i=a.html`
      <div class="chats_item" data-peer-id="${t}">
        <div class="chats_item_content mdc-ripple-surface">
          <div class="chats_item_photo"></div>
          <div class="chats_item_text"></div>        
        </div>
      </div>
    `.buildElement();return ChatsController.renderChatPreviewContent(i,e),ChatsController.loadChatPhoto(i,e),i.addEventListener("click",ChatsController.onChatClick),new ce(i.firstElementChild),this.chatElements.set(t,i),i}};function Vt(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}window.ArchivedChatsController=jt;const $t=new class{constructor(){Vt(this,"chatElements",new Map),Vt(this,"onDialogsUpdate",e=>{const{dialogs:t,folderId:i}=e.detail;i||this.renderChats(t)}),Vt(this,"onDialogNewMessage",e=>{const{dialog:t,message:i}=e.detail;if("messageService"===i._)return;const n=He.getPeerId(t.peer);let s=this.chatElements.get(n);s?this.renderChatPreviewContent(s,t):this.buildChatPreviewElement(t)}),Vt(this,"onDialogOrderUpdate",e=>{const{dialog:t,index:i,folderId:n}=e.detail;if(n)return;const s=He.getPeerId(t.peer);let a=this.chatElements.get(s);a||(a=this.buildChatPreviewElement(t)),this.container.insertBefore(a,this.container.children[i])}),Vt(this,"onDialogTopMessageUpdate",e=>{const{dialog:t}=e.detail,i=He.getPeerId(t.peer),n=this.chatElements.get(i);n&&this.renderChatPreviewContent(n,t)}),Vt(this,"onDialogUnreadCountUpdate",e=>{const{dialog:t}=e.detail,i=He.getPeerId(t.peer),n=this.chatElements.get(i);this.renderChatPreviewContent(n,t)}),Vt(this,"onUserStatusUpdate",e=>{const{user:t}=e.detail,i=this.chatElements.get(t.id);i&&this.updateChatStatus(i,t.status)}),Vt(this,"onScroll",()=>{const e=this.container;!this.loading&&!this.noMore&&e.scrollTop+e.offsetHeight>e.scrollHeight-300&&this.loadMore()}),Vt(this,"onChatClick",e=>{e.preventDefault();const t=+e.currentTarget.dataset.peerId,i=He.getDialog(t);_t.setChat(i)})}init(){this.container=d(".chats_sidebar"),this.container.addEventListener("scroll",this.onScroll),this.initHeader(),this.loader=_(this.container),He.emitter.on("dialogsUpdate",this.onDialogsUpdate),He.emitter.on("dialogOrderUpdate",this.onDialogOrderUpdate),He.emitter.on("dialogTopMessageUpdate",this.onDialogTopMessageUpdate),He.emitter.on("chatNewMessage",this.onDialogNewMessage),He.emitter.on("chatUnreadCountUpdate",this.onDialogUnreadCountUpdate),He.emitter.on("userStatusUpdate",this.onUserStatusUpdate),this.loadMore()}initHeader(){this.header=d(".chats_header"),this.header.innerHTML='\n      <button type="button" class="chats_header_menu_button mdc-icon-button"></button>\n      <button type="button" class="mdc-icon-button sidebar_back_button chats_header_back_button" hidden></button>\n      <div class="chats_header_menu mdc-menu mdc-menu-surface">\n        <ul class="mdc-list" role="menu" aria-hidden="true" aria-orientation="vertical" tabindex="-1">\n          <li class="mdc-list-item chats_header_menu_item chats_header_menu_item-new_group" role="menuitem">\n            <span class="mdc-list-item__text">New Group</span>\n          </li>\n          <li class="mdc-list-item chats_header_menu_item chats_header_menu_item-contacts" role="menuitem">\n            <span class="mdc-list-item__text">Contacts</span>\n          </li>\n          <li class="mdc-list-item chats_header_menu_item chats_header_menu_item-archived" role="menuitem">\n            <span class="mdc-list-item__text">Archived</span>\n          </li>\n          <li class="mdc-list-item chats_header_menu_item chats_header_menu_item-saved" role="menuitem">\n            <span class="mdc-list-item__text">Saved</span>\n          </li>\n          <li class="mdc-list-item chats_header_menu_item chats_header_menu_item-settings" role="menuitem">\n            <span class="mdc-list-item__text">Settings</span>\n          </li>\n          <li class="mdc-list-item chats_header_menu_item chats_header_menu_item-help" role="menuitem">\n            <span class="mdc-list-item__text">Help</span>\n          </li>\n        </ul>\n      </div>\n      <input type="text" placeholder="Telegram Search" class="sidebar_search_input chats_header_search_input">\n    ',this.initHeaderMenu(),this.initHeaderSearch()}initHeaderMenu(){const e=d(".chats_header_menu",this.header),t=new xt(e),i=d(".chats_header_menu_button",this.header);i.addEventListener("mousedown",()=>{t.open||(t.open=!0,t.setAbsolutePosition(14,60))});for(const t of l(".chats_header_menu_item",e))new ce(t).unbounded=!0;new ce(i).unbounded=!0,d(".chats_header_menu_item-contacts",e).addEventListener("click",()=>{Rt.show()}),d(".chats_header_menu_item-archived",e).addEventListener("click",()=>{jt.show()}),d(".chats_header_menu_item-settings",e).addEventListener("click",()=>{Nt.show()})}initHeaderSearch(){const e=d(".chats_header_search_input");e.addEventListener("input",()=>{Ut.show(e)})}loadMore(){this.loading=!0,He.loadDialogs(this.offset,20).then(e=>{e.length||(this.noMore=!0)}).catch(e=>{const t="An error occurred"+(e.error_message?": "+e.error_message:"");hi.alert(t)}).finally(()=>{this.loading=!1})}renderChats(e){this.loader.remove();const t=document.createDocumentFragment();for(const i of e){const e=He.getPeerId(i.peer);if(this.chatElements.has(e))continue;const n=this.buildChatPreviewElement(i);t.append(n)}this.container.append(t);const i=e[e.length-1];if(i){const e=He.messages.get(i.top_message);this.offset={id:i.top_message,peer:i.peer,date:e.date}}else this.offset={id:0,peer:0,date:0}}buildChatPreviewElement(e){const t=He.getPeerId(e.peer),i=a.html`
      <div class="chats_item ${e.pFlags.pinned?" chats_item_pinned":""}" data-peer-id="${t}">
        <div class="chats_item_content mdc-ripple-surface">
          <div class="chats_item_photo"></div>
          <div class="chats_item_text"></div>        
        </div>
      </div>
    `.buildElement();if(this.renderChatPreviewContent(i,e),this.loadChatPhoto(i,e),"peerUser"===e.peer._){const t=He.getPeerData(e.peer);this.updateChatStatus(i,t.status)}return i.addEventListener("click",this.onChatClick),y()||new ce(i.firstElementChild),this.chatElements.set(t,i),i}renderChatPreviewContent(e,t){const i=this.isPeerSelf(t.peer)?"Saved Messages":He.getPeerName(t.peer),n=this.getChatBadge(t),s=this.formatDate(t),o=He.messages.get(t.top_message),r=o?this.getMessagePreview(o):"";d(".chats_item_text",e).innerHTML=a.html`
      <div class="chats_item_text_row">
        <div class="chats_item_title">${i}</div>
        <div class="chats_item_date">${s}</div>
      </div>
      <div class="chats_item_text_row">
        <div class="chats_item_message">${r}</div>
        ${n}
      </div>
    `}formatDate(e){const t=He.messages.get(e.top_message);return t?this.formatMessageDate(t):""}formatMessageDate(e){const t=new Date(1e3*e.date),i=Date.now();return t.getTime()>i-864e5?f(e.date):t.getTime()>i-5184e5?(n=e.date,new Intl.DateTimeFormat("en-US",{weekday:"short"}).format(1e3*n)):g(e.date,{longMonth:!1,withYear:t.getFullYear()!==(new Date).getFullYear()});var n}getChatBadge(e){if(e.unread_count){let t="chats_item_badge chats_item_badge-unread";return e.notify_settings.mute_until&&(t+=" chats_item_badge-unread_muted"),a.html`<span class="${t}">${b(e.unread_count)}</span>`}return e.pFlags.pinned?a.html`<span class="chats_item_badge chats_item_badge-pinned"></span>`:""}getMessagePreview(e){if("messageService"===e._)return _t.getServiceMessageText(e);let t="";if(e.message)t=a.html`${e.message}`;else{const i=_t.getMessageContentTypeLabel(e.media);t=a.html`<span class="chats_item_message_content_label">${i}</span>`}if("peerChannel"===e.to_id._&&e.from_id){const i=He.users.get(e.from_id),n=He.getUserName(i,!1);t=a.html`<span class="chats_item_message_author_label">${n}:</span> ${t}`}else e.pFlags.out&&(t=a.html`<span class="chats_item_message_author_label">You:</span> ${t}`);return t}updateChatStatus(e,t){const i=!!t&&"userStatusOnline"===t._;d(".chats_item_photo",e).classList.toggle("chats_item_photo-online",i)}loadChatPhoto(e,t){const i=d(".chats_item_photo",e);this.isPeerSelf(t.peer)?i.classList.add("chats_item_photo_saved_messages"):this.loadPeerPhoto(i,t.peer)}loadPeerPhoto(e,t,i=!1){const n=He.getPeerId(t),s=He.getPeerData(t),a=s.photo;s.pFlags.deleted?this.setChatPhotoDeletedPlaceholder(e,n):a&&"chatPhotoEmpty"!==a._?FileApiManager.loadPeerPhoto(t,a,i,a.dc_id,{priority:10,cache:!0}).then(t=>{e.innerHTML=`<img src="${t}" alt class="peer_photo_img">`}).catch(t=>{console.warn("chat photo load error",t),this.setChatPhotoPlaceholder(e,n)}):this.setChatPhotoPlaceholder(e,n)}setChatPhotoDeletedPlaceholder(e){e.style.backgroundColor="#ACB2B6",e.innerHTML='<div class="peer_photo_deleted_placeholder"></div>'}setChatPhotoPlaceholder(e,t){const i=He.getPeerById(t),n=He.getPeerName(i);e.style.backgroundColor=this.getPlaceholderColor(t),e.innerHTML='<div class="peer_photo_placeholder">'+n.charAt(0)+"</div>"}getPlaceholderColor(e){const t=["#FFBF69","#247BA0","#EA526F","#2EC4B6","#F79256","#662C91","#049A8F","#06D6A0","#F25C54"];return t[e%t.length]}isPeerSelf(e){return"peerUser"===e._&&e.user_id===hi.getAuthUserId()}};window.ChatsController=$t;
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
var Gt={CLOSING:"mdc-snackbar--closing",OPEN:"mdc-snackbar--open",OPENING:"mdc-snackbar--opening"},zt={ACTION_SELECTOR:".mdc-snackbar__action",ARIA_LIVE_LABEL_TEXT_ATTR:"data-mdc-snackbar-label-text",CLOSED_EVENT:"MDCSnackbar:closed",CLOSING_EVENT:"MDCSnackbar:closing",DISMISS_SELECTOR:".mdc-snackbar__dismiss",LABEL_SELECTOR:".mdc-snackbar__label",OPENED_EVENT:"MDCSnackbar:opened",OPENING_EVENT:"MDCSnackbar:opening",REASON_ACTION:"action",REASON_DISMISS:"dismiss",SURFACE_SELECTOR:".mdc-snackbar__surface"},Kt={DEFAULT_AUTO_DISMISS_TIMEOUT_MS:5e3,INDETERMINATE:-1,MAX_AUTO_DISMISS_TIMEOUT_MS:1e4,MIN_AUTO_DISMISS_TIMEOUT_MS:4e3,SNACKBAR_ANIMATION_CLOSE_TIME_MS:75,SNACKBAR_ANIMATION_OPEN_TIME_MS:150,ARIA_LIVE_DELAY_MS:1e3},Wt=Gt.OPENING,qt=Gt.OPEN,Xt=Gt.CLOSING,Yt=zt.REASON_ACTION,Qt=zt.REASON_DISMISS,Jt=function(e){function t(i){var n=e.call(this,k({},t.defaultAdapter,i))||this;return n.isOpen_=!1,n.animationFrame_=0,n.animationTimer_=0,n.autoDismissTimer_=0,n.autoDismissTimeoutMs_=Kt.DEFAULT_AUTO_DISMISS_TIMEOUT_MS,n.closeOnEscape_=!0,n}return x(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return Gt},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return zt},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return Kt},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},announce:function(){},notifyClosed:function(){},notifyClosing:function(){},notifyOpened:function(){},notifyOpening:function(){},removeClass:function(){}}},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){this.clearAutoDismissTimer_(),cancelAnimationFrame(this.animationFrame_),this.animationFrame_=0,clearTimeout(this.animationTimer_),this.animationTimer_=0,this.adapter_.removeClass(Wt),this.adapter_.removeClass(qt),this.adapter_.removeClass(Xt)},t.prototype.open=function(){var e=this;this.clearAutoDismissTimer_(),this.isOpen_=!0,this.adapter_.notifyOpening(),this.adapter_.removeClass(Xt),this.adapter_.addClass(Wt),this.adapter_.announce(),this.runNextAnimationFrame_((function(){e.adapter_.addClass(qt),e.animationTimer_=setTimeout((function(){var t=e.getTimeoutMs();e.handleAnimationTimerEnd_(),e.adapter_.notifyOpened(),t!==Kt.INDETERMINATE&&(e.autoDismissTimer_=setTimeout((function(){e.close(Qt)}),t))}),Kt.SNACKBAR_ANIMATION_OPEN_TIME_MS)}))},t.prototype.close=function(e){var t=this;void 0===e&&(e=""),this.isOpen_&&(cancelAnimationFrame(this.animationFrame_),this.animationFrame_=0,this.clearAutoDismissTimer_(),this.isOpen_=!1,this.adapter_.notifyClosing(e),this.adapter_.addClass(Gt.CLOSING),this.adapter_.removeClass(Gt.OPEN),this.adapter_.removeClass(Gt.OPENING),clearTimeout(this.animationTimer_),this.animationTimer_=setTimeout((function(){t.handleAnimationTimerEnd_(),t.adapter_.notifyClosed(e)}),Kt.SNACKBAR_ANIMATION_CLOSE_TIME_MS))},t.prototype.isOpen=function(){return this.isOpen_},t.prototype.getTimeoutMs=function(){return this.autoDismissTimeoutMs_},t.prototype.setTimeoutMs=function(e){var t=Kt.MIN_AUTO_DISMISS_TIMEOUT_MS,i=Kt.MAX_AUTO_DISMISS_TIMEOUT_MS,n=Kt.INDETERMINATE;if(!(e===Kt.INDETERMINATE||e<=i&&e>=t))throw new Error("\n        timeoutMs must be an integer in the range "+t+"–"+i+"\n        (or "+n+" to disable), but got '"+e+"'");this.autoDismissTimeoutMs_=e},t.prototype.getCloseOnEscape=function(){return this.closeOnEscape_},t.prototype.setCloseOnEscape=function(e){this.closeOnEscape_=e},t.prototype.handleKeyDown=function(e){("Escape"===e.key||27===e.keyCode)&&this.getCloseOnEscape()&&this.close(Qt)},t.prototype.handleActionButtonClick=function(e){this.close(Yt)},t.prototype.handleActionIconClick=function(e){this.close(Qt)},t.prototype.clearAutoDismissTimer_=function(){clearTimeout(this.autoDismissTimer_),this.autoDismissTimer_=0},t.prototype.handleAnimationTimerEnd_=function(){this.animationTimer_=0,this.adapter_.removeClass(Gt.OPENING),this.adapter_.removeClass(Gt.CLOSING)},t.prototype.runNextAnimationFrame_=function(e){var t=this;cancelAnimationFrame(this.animationFrame_),this.animationFrame_=requestAnimationFrame((function(){t.animationFrame_=0,clearTimeout(t.animationTimer_),t.animationTimer_=setTimeout(e,0)}))},t}(H),Zt=Kt.ARIA_LIVE_DELAY_MS,ei=zt.ARIA_LIVE_LABEL_TEXT_ATTR;function ti(e,t){void 0===t&&(t=e);var i=e.getAttribute("aria-live"),n=t.textContent.trim();n&&i&&(e.setAttribute("aria-live","off"),t.textContent="",t.innerHTML='<span style="display: inline-block; width: 0; height: 1px;">&nbsp;</span>',t.setAttribute(ei,n),setTimeout((function(){e.setAttribute("aria-live",i),t.removeAttribute(ei),t.textContent=n}),Zt))}
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var ii=zt.SURFACE_SELECTOR,ni=zt.LABEL_SELECTOR,si=zt.ACTION_SELECTOR,ai=zt.DISMISS_SELECTOR,oi=zt.OPENING_EVENT,ri=zt.OPENED_EVENT,ci=zt.CLOSING_EVENT,di=zt.CLOSED_EVENT,li=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return x(t,e),t.attachTo=function(e){return new t(e)},t.prototype.initialize=function(e){void 0===e&&(e=function(){return ti}),this.announce_=e()},t.prototype.initialSyncWithDOM=function(){var e=this;this.surfaceEl_=this.root_.querySelector(ii),this.labelEl_=this.root_.querySelector(ni),this.actionEl_=this.root_.querySelector(si),this.handleKeyDown_=function(t){return e.foundation_.handleKeyDown(t)},this.handleSurfaceClick_=function(t){var i=t.target;e.isActionButton_(i)?e.foundation_.handleActionButtonClick(t):e.isActionIcon_(i)&&e.foundation_.handleActionIconClick(t)},this.registerKeyDownHandler_(this.handleKeyDown_),this.registerSurfaceClickHandler_(this.handleSurfaceClick_)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.deregisterKeyDownHandler_(this.handleKeyDown_),this.deregisterSurfaceClickHandler_(this.handleSurfaceClick_)},t.prototype.open=function(){this.foundation_.open()},t.prototype.close=function(e){void 0===e&&(e=""),this.foundation_.close(e)},t.prototype.getDefaultFoundation=function(){var e=this;return new Jt({addClass:function(t){return e.root_.classList.add(t)},announce:function(){return e.announce_(e.labelEl_)},notifyClosed:function(t){return e.emit(di,t?{reason:t}:{})},notifyClosing:function(t){return e.emit(ci,t?{reason:t}:{})},notifyOpened:function(){return e.emit(ri,{})},notifyOpening:function(){return e.emit(oi,{})},removeClass:function(t){return e.root_.classList.remove(t)}})},Object.defineProperty(t.prototype,"timeoutMs",{get:function(){return this.foundation_.getTimeoutMs()},set:function(e){this.foundation_.setTimeoutMs(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"closeOnEscape",{get:function(){return this.foundation_.getCloseOnEscape()},set:function(e){this.foundation_.setCloseOnEscape(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isOpen",{get:function(){return this.foundation_.isOpen()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"labelText",{get:function(){return this.labelEl_.textContent},set:function(e){this.labelEl_.textContent=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"actionButtonText",{get:function(){return this.actionEl_.textContent},set:function(e){this.actionEl_.textContent=e},enumerable:!0,configurable:!0}),t.prototype.registerKeyDownHandler_=function(e){this.listen("keydown",e)},t.prototype.deregisterKeyDownHandler_=function(e){this.unlisten("keydown",e)},t.prototype.registerSurfaceClickHandler_=function(e){this.surfaceEl_.addEventListener("click",e)},t.prototype.deregisterSurfaceClickHandler_=function(e){this.surfaceEl_.removeEventListener("click",e)},t.prototype.isActionButton_=function(e){return Boolean(j(e,si))},t.prototype.isActionIcon_=function(e){return Boolean(j(e,ai))},t}(U);function ui(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const hi=new class{constructor(){ui(this,"API_ID",884322),ui(this,"API_HASH","77498db3367014eec55b317377f52779"),ui(this,"APP_VERSION","0.0.1"),ui(this,"auth_user_id",0),ui(this,"onResize",()=>{document.body.classList.toggle("mobile_view",window.innerWidth<1160)});const e=n.get("api_auth");e?(this.auth_user_id=e.user_id,this.initMainView()):Fe.init(),window.addEventListener("resize",this.onResize),this.onResize()}authDone(e){this.auth_user_id=e.user.id,n.set("api_auth",{user_id:e.user.id}),Fe.destroy(),this.initMainView()}getAuthUserId(){return this.auth_user_id}logOut(){ApiClient.callMethod("auth.logOut",{}).then(e=>{"boolTrue"===e._?this.logOutDone():this.alert("logout error")})}logOutDone(){localStorage.clear(),location.reload()}initMainView(){const e=u("main");document.body.append(e),$t.init(),_t.init()}alert(e){this.snackbar&&this.snackbar.destroy();const t=a.html`
      <div class="mdc-snackbar">
        <div class="mdc-snackbar__surface">
          <div class="mdc-snackbar__label">${e}</div>
        </div>
      </div>
    `.buildElement();document.body.append(t),this.snackbar=new li(t),this.snackbar.open()}};window.App=hi,"serviceWorker"in navigator&&navigator.serviceWorker.register("./sw.js")}]);