!function(t){function e(e){for(var n,r,s=e[0],o=e[1],a=0,u=[];a<s.length;a++)r=s[a],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&u.push(i[r][0]),i[r]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n]);for(c&&c(e);u.length;)u.shift()()}var n={},i={2:0};function r(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.e=function(t){var e=[],n=i[t];if(0!==n)if(n)e.push(n[2]);else{var s=new Promise((function(e,r){n=i[t]=[e,r]}));e.push(n[2]=s);var o,a=document.createElement("script");a.charset="utf-8",a.timeout=120,r.nc&&a.setAttribute("nonce",r.nc),a.src=function(t){return r.p+""+t+".main.js"}(t);var c=new Error;o=function(e){a.onerror=a.onload=null,clearTimeout(u);var n=i[t];if(0!==n){if(n){var r=e&&("load"===e.type?"missing":e.type),s=e&&e.target&&e.target.src;c.message="Loading chunk "+t+" failed.\n("+r+": "+s+")",c.name="ChunkLoadError",c.type=r,c.request=s,n[1](c)}i[t]=void 0}};var u=setTimeout((function(){o({type:"timeout",target:a})}),12e4);a.onerror=a.onload=o,document.head.appendChild(a)}return Promise.all(e)},r.m=t,r.c=n,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r.oe=function(t){throw console.error(t),t};var s=window.webpackJsonp=window.webpackJsonp||[],o=s.push.bind(s);s.push=e,s=s.slice();for(var a=0;a<s.length;a++)e(s[a]);var c=o;r(r.s=0)}([function(t,e,n){n(1),t.exports=n(2)},function(t,e,n){t.exports=n.p+"main.css"},function(t,e,n){"use strict";n.r(e);class i{static get(t){try{return JSON.parse(localStorage.getItem(t))}catch(t){return null}}static set(t,e){try{localStorage.setItem(t,JSON.stringify(e))}catch(t){}}static remove(t){try{localStorage.removeItem(t)}catch(t){}}}class r{constructor(){var t,e,n;t=this,e="port",n=(new MessageChannel).port1,e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}on(t,e){this.port.addEventListener(t,e)}off(t,e){this.port.removeEventListener(t,e)}trigger(t,e){this.port.dispatchEvent(new CustomEvent(t,{detail:e}))}}function s(){const t={};return t.promise=new Promise((e,n)=>{t.resolve=e,t.reject=n}),t}function o(t,e=document){return e.querySelector(t)}function a(t){const e=o("#template_"+t);return document.importNode(e.content,!0)}function c(t){const e={};if(t.childElementCount)for(const n of t.children){n.dataset.jsLabel&&(e[n.dataset.jsLabel]=n),Object.assign(e,c(n))}return e}function u(t){const e=document.createElement("div");return e.innerHTML=t,e.firstElementChild}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class d{constructor(t={}){l(this,"connectionReady",!1),l(this,"connectionInited",!1),l(this,"config",!1),l(this,"emitter",new r),l(this,"onUpdates",t=>{this.emitter.trigger("updates",t)}),this.options=t,this.connectionDefered=s(),n.e(0).then(n.bind(null,42)).then(({MTProto:e})=>{this.updateConnectionState("connecting"),this.mtproto=new e({dcId:t.dcId,onConnectionReady:()=>{this.init(),this.updateConnectionState("connected")},onUpdates:this.onUpdates})})}exportAuthorization(t){return ApiClient.callMethod("auth.exportAuthorization",{dc_id:t})}async importAuthorization({id:t,bytes:e}){await this.callMethod("auth.importAuthorization",{id:t,bytes:e},!0)}updateConnectionState(t){this.emitter.trigger("updateConnectionState",t)}async init(){if(this.options.upload&&!this.mtproto.hasApiAuth())try{const t=await ApiClient.exportAuthorization(this.options.dcId);await this.importAuthorization(t)}catch(t){return void this.connectionDefered.reject(t)}this.connectionReady=!0,this.connectionDefered.resolve()}destroy(){this.mtproto.destroy()}wrapCall(t,e){const n=this.mtproto.getSerializer();if(!this.connectionInited){const t=this.mtproto.getSchema();n.storeInt(3667594509,"invokeWithLayer"),n.storeInt(t.API.layer,"layer"),n.storeInt(3343392166,"initConnection"),n.storeInt(Jt.API_ID,"api_id"),n.storeString(function(){const t=!!document.documentMode,e=!t&&!!window.StyleMedia;if(navigator.userAgent.includes("Chrome")&&!e)return"Chrome";if(navigator.userAgent.includes("Safari")&&!e)return"Safari";if(navigator.userAgent.includes("Firefox"))return"Firefox";if(navigator.userAgent.includes("MSIE")||t)return"IE";if(e)return"Edge";return"Unknown"}(),"device_model"),n.storeString(function(){if(window.navigator.userAgent.includes("Windows NT 10.0"))return"Windows 10";if(window.navigator.userAgent.includes("Windows NT 6.2"))return"Windows 8";if(window.navigator.userAgent.includes("Windows NT 6.1"))return"Windows 7";if(window.navigator.userAgent.includes("Windows NT 6.0"))return"Windows Vista";if(window.navigator.userAgent.includes("Windows NT 5.1"))return"Windows XP";if(window.navigator.userAgent.includes("Windows NT 5.0"))return"Windows 2000";if(window.navigator.userAgent.includes("Mac"))return"Mac/iOS";if(window.navigator.userAgent.includes("X11"))return"UNIX";if(window.navigator.userAgent.includes("Linux"))return"Linux";return"Unknown"}(),"system_version"),n.storeString(Jt.APP_VERSION,"app_version"),n.storeString(_(),"system_lang_code"),n.storeString("","lang_pack"),n.storeString(_(),"lang_code"),this.connectionInited=!0}const i={api:!0,source:t};return i.resultType=n.storeMethod(t,e),this.mtproto.prepareMessageFromBuffer(n.getBuffer(),i)}async callMethod(t,e={},n=!1){this.connectionReady||n||await this.connectionDefered.promise;const i=this.wrapCall(t,e),r=await this.mtproto.pushMessage(i);return"rpc_error"===r._?303===r.error_code?(await this.migrateDC(this.getMigrateErrorDcId(r.error_message)),this.callMethod(t,e)):("AUTH_KEY_UNREGISTERED"===r.error_message&&(this.options.upload||Jt.logOut()),Promise.reject(r)):("auth.authorization"===r._&&this.mtproto.saveApiAuth(),r)}getDcId(){return this.mtproto.dcId}migrateDC(t){return this.connectionInited=!1,this.mtproto.migrateDC(t)}getMigrateErrorDcId(t){return+t.match(/\d+$/)[0]}}function _(){return navigator.language||"en"}const h=new d;window.ApiClient=h;const p={login_flood_pluralize_seconds:["","Try again in {} second","Try again in {} seconds"],login_flood_pluralize_minutes:["","Try again in {} minute","Try again in {} minutes"],login_flood_pluralize_hours:["","Try again in {} hour","Try again in {} hours"],country_select_country_ab:"Abkhazia",country_select_country_af:"Afghanistan",country_select_country_ax:"Åland Islands",country_select_country_al:"Albania",country_select_country_dz:"Algeria",country_select_country_as:"American Samoa",country_select_country_ad:"Andorra",country_select_country_ao:"Angola",country_select_country_ai:"Anguilla",country_select_country_ag:"Antigua & Barbuda",country_select_country_ar:"Argentina",country_select_country_am:"Armenia",country_select_country_aw:"Aruba",country_select_country_sh_ac:"Ascension",country_select_country_au:"Australia",country_select_country_au_et:"Australian External Territories",country_select_country_at:"Austria",country_select_country_az:"Azerbaijan",country_select_country_bs:"Bahamas",country_select_country_bh:"Bahrain",country_select_country_bd:"Bangladesh",country_select_country_bb:"Barbados",country_select_country_ag_bar:"Barbuda",country_select_country_by:"Belarus",country_select_country_be:"Belgium",country_select_country_bz:"Belize",country_select_country_bj:"Benin",country_select_country_bm:"Bermuda",country_select_country_bt:"Bhutan",country_select_country_bo:"Bolivia",country_select_country_bq:"Caribbean Netherlands",country_select_country_ba:"Bosnia & Herzegovina",country_select_country_bw:"Botswana",country_select_country_br:"Brazil",country_select_country_io:"British Indian Ocean Territory",country_select_country_vg:"British Virgin Islands",country_select_country_bn:"Brunei",country_select_country_bg:"Bulgaria",country_select_country_bf:"Burkina Faso",country_select_country_mm:"Myanmar (Burma)",country_select_country_bi:"Burundi",country_select_country_kh:"Cambodia",country_select_country_cm:"Cameroon",country_select_country_ca:"Canada",country_select_country_cv:"Cape Verde",country_select_country_ky:"Cayman Islands",country_select_country_cf:"Central African Republic",country_select_country_td:"Chad",country_select_country_cl:"Chile",country_select_country_cn:"China",country_select_country_cx:"Christmas Island",country_select_country_cc:"Cocos (Keeling) Islands",country_select_country_co:"Colombia",country_select_country_km:"Comoros",country_select_country_cg:"Congo - Brazzaville",country_select_country_cd:"Congo - Kinshasa",country_select_country_ck:"Cook Islands",country_select_country_cr:"Costa Rica",country_select_country_ci:"Côte d’Ivoire",country_select_country_hr:"Croatia",country_select_country_cu:"Cuba",country_select_country_cw:"Curaçao",country_select_country_cy:"Cyprus",country_select_country_cz:"Czech Republic",country_select_country_dk:"Denmark",country_select_country_dg:"Diego Garcia",country_select_country_dj:"Djibouti",country_select_country_dm:"Dominica",country_select_country_do:"Dominican Republic",country_select_country_tl:"Timor-Leste",country_select_country_ec:"Ecuador",country_select_country_eg:"Egypt",country_select_country_sv:"El Salvador",country_select_country_gq:"Equatorial Guinea",country_select_country_er:"Eritrea",country_select_country_ee:"Estonia",country_select_country_et:"Ethiopia",country_select_country_fk:"Falkland Islands",country_select_country_fo:"Faroe Islands",country_select_country_fj:"Fiji",country_select_country_fi:"Finland",country_select_country_fr:"France",country_select_country_gf:"French Guiana",country_select_country_pf:"French Polynesia",country_select_country_ga:"Gabon",country_select_country_gm:"Gambia",country_select_country_ge:"Georgia",country_select_country_de:"Germany",country_select_country_gh:"Ghana",country_select_country_gi:"Gibraltar",country_select_country_gr:"Greece",country_select_country_gl:"Greenland",country_select_country_gd:"Grenada",country_select_country_gp:"Guadeloupe",country_select_country_gu:"Guam",country_select_country_gt:"Guatemala",country_select_country_gg:"Guernsey",country_select_country_gn:"Guinea",country_select_country_gw:"Guinea-Bissau",country_select_country_gy:"Guyana",country_select_country_ht:"Haiti",country_select_country_hn:"Honduras",country_select_country_hk:"Hong Kong SAR China",country_select_country_hu:"Hungary",country_select_country_is:"Iceland",country_select_country_in:"India",country_select_country_id:"Indonesia",country_select_country_ir:"Iran",country_select_country_iq:"Iraq",country_select_country_ie:"Ireland",country_select_country_il:"Israel",country_select_country_it:"Italy",country_select_country_jm:"Jamaica",country_select_country_sj:"Svalbard & Jan Mayen",country_select_country_jp:"Japan",country_select_country_je:"Jersey",country_select_country_jo:"Jordan",country_select_country_kz:"Kazakhstan",country_select_country_ke:"Kenya",country_select_country_ki:"Kiribati",country_select_country_kp:"North Korea",country_select_country_kr:"South Korea",country_select_country_kw:"Kuwait",country_select_country_kg:"Kyrgyzstan",country_select_country_la:"Laos",country_select_country_lv:"Latvia",country_select_country_lb:"Lebanon",country_select_country_ls:"Lesotho",country_select_country_lr:"Liberia",country_select_country_ly:"Libya",country_select_country_li:"Liechtenstein",country_select_country_lt:"Lithuania",country_select_country_lu:"Luxembourg",country_select_country_mo:"Macau SAR China",country_select_country_mk:"Macedonia",country_select_country_mg:"Madagascar",country_select_country_mw:"Malawi",country_select_country_my:"Malaysia",country_select_country_mv:"Maldives",country_select_country_ml:"Mali",country_select_country_mt:"Malta",country_select_country_mh:"Marshall Islands",country_select_country_mq:"Martinique",country_select_country_mr:"Mauritania",country_select_country_mu:"Mauritius",country_select_country_yt:"Mayotte",country_select_country_mx:"Mexico",country_select_country_fm:"Micronesia",country_select_country_md:"Moldova",country_select_country_mc:"Monaco",country_select_country_mn:"Mongolia",country_select_country_me:"Montenegro",country_select_country_ms:"Montserrat",country_select_country_ma:"Morocco",country_select_country_mz:"Mozambique",country_select_country_na:"Namibia",country_select_country_nr:"Nauru",country_select_country_np:"Nepal",country_select_country_nl:"Netherlands",country_select_country_nc:"New Caledonia",country_select_country_nz:"New Zealand",country_select_country_ni:"Nicaragua",country_select_country_ne:"Niger",country_select_country_ng:"Nigeria",country_select_country_nu:"Niue",country_select_country_nf:"Norfolk Island",country_select_country_mp:"Northern Mariana Islands",country_select_country_no:"Norway",country_select_country_om:"Oman",country_select_country_pk:"Pakistan",country_select_country_pw:"Palau",country_select_country_ps:"Palestinian Territories",country_select_country_pa:"Panama",country_select_country_pg:"Papua New Guinea",country_select_country_py:"Paraguay",country_select_country_pe:"Peru",country_select_country_ph:"Philippines",country_select_country_pn:"Pitcairn Islands",country_select_country_pl:"Poland",country_select_country_pt:"Portugal",country_select_country_pr:"Puerto Rico",country_select_country_qa:"Qatar",country_select_country_re:"Réunion",country_select_country_ro:"Romania",country_select_country_ru:"Russia",country_select_country_rw:"Rwanda",country_select_country_bl:"St. Barthélemy",country_select_country_sh:"St. Helena",country_select_country_kn:"St. Kitts & Nevis",country_select_country_lc:"St. Lucia",country_select_country_mf:"St. Martin (France)",country_select_country_pm:"St. Pierre and Miquelon",country_select_country_vc:"St. Vincent and the Grenadines",country_select_country_ws:"Samoa",country_select_country_sm:"San Marino",country_select_country_st:"São Tomé & Príncipe",country_select_country_sa:"Saudi Arabia",country_select_country_sn:"Senegal",country_select_country_rs:"Serbia",country_select_country_sc:"Seychelles",country_select_country_sl:"Sierra Leone",country_select_country_sg:"Singapore",country_select_country_nl_bq3:"Sint Eustatius",country_select_country_sx:"Sint Maarten",country_select_country_sk:"Slovakia",country_select_country_si:"Slovenia",country_select_country_sb:"Solomon Islands",country_select_country_so:"Somalia",country_select_country_za:"South Africa",country_select_country_gs:"South Georgia & South Sandwich Islands",country_select_country_ge_so:"South Ossetia",country_select_country_ss:"South Sudan",country_select_country_es:"Spain",country_select_country_lk:"Sri Lanka",country_select_country_sd:"Sudan",country_select_country_sr:"Suriname",country_select_country_sj_no:"Svalbard",country_select_country_sz:"Swaziland",country_select_country_se:"Sweden",country_select_country_ch:"Switzerland",country_select_country_sy:"Syria",country_select_country_tw:"Taiwan",country_select_country_tj:"Tajikistan",country_select_country_tz:"Tanzania",country_select_country_th:"Thailand",country_select_country_tg:"Togo",country_select_country_tk:"Tokelau",country_select_country_to:"Tonga",country_select_country_tt:"Trinidad & Tobago",country_select_country_tn:"Tunisia",country_select_country_tr:"Turkey",country_select_country_tm:"Turkmenistan",country_select_country_tc:"Turks & Caicos Islands",country_select_country_tv:"Tuvalu",country_select_country_ug:"Uganda",country_select_country_ua:"Ukraine",country_select_country_ae:"United Arab Emirates",country_select_country_uk:"United Kingdom",country_select_country_us:"United States",country_select_country_uy:"Uruguay",country_select_country_vi:"U.S. Virgin Islands",country_select_country_uz:"Uzbekistan",country_select_country_vu:"Vanuatu",country_select_country_ve:"Venezuela",country_select_country_va:"Vatican City",country_select_country_vn:"Vietnam",country_select_country_wf:"Wallis & Futuna",country_select_country_ye:"Yemen",country_select_country_zm:"Zambia",country_select_country_tz_uk:"Zanzibar",country_select_country_zw:"Zimbabwe"},m=new class{get(t,e=!1){const n=p[t]||"";return this.replaceTokens(n,e)}replaceTokens(t,e){if(!e)return t;for(const[n,i]of Object.entries(e))t=t.replace(`{${n}}`,i);return t}getPlural(t,e,n){const i=JSON.parse(p[t]);let r;r=(r=!e&&i[0]?i[0]:1===e?i[1]:i[2]).replace("{}",e),this.replaceTokens(r,n)}};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var g=function(t,e){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function f(t,e){function n(){this.constructor=t}g(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var y=function(){return(y=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function b(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,s=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(i=s.next()).done;)o.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return o}
/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
var v,C=function(){function t(t){void 0===t&&(t={}),this.adapter_=t}return Object.defineProperty(t,"cssClasses",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{}},enumerable:!0,configurable:!0}),t.prototype.init=function(){},t.prototype.destroy=function(){},t}(),A=function(){function t(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];this.root_=t,this.initialize.apply(this,function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(b(arguments[e]));return t}(n)),this.foundation_=void 0===e?this.getDefaultFoundation():e,this.foundation_.init(),this.initialSyncWithDOM()}return t.attachTo=function(e){return new t(e,new C({}))},t.prototype.initialize=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},t.prototype.getDefaultFoundation=function(){throw new Error("Subclasses must override getDefaultFoundation to return a properly configured foundation class")},t.prototype.initialSyncWithDOM=function(){},t.prototype.destroy=function(){this.foundation_.destroy()},t.prototype.listen=function(t,e,n){this.root_.addEventListener(t,e,n)},t.prototype.unlisten=function(t,e,n){this.root_.removeEventListener(t,e,n)},t.prototype.emit=function(t,e,n){var i;void 0===n&&(n=!1),"function"==typeof CustomEvent?i=new CustomEvent(t,{bubbles:n,detail:e}):(i=document.createEvent("CustomEvent")).initCustomEvent(t,n,!1,e),this.root_.dispatchEvent(i)},t}();function E(t,e){if(void 0===t&&(t=window),void 0===e&&(e=!1),void 0===v||e){var n=!1;try{t.document.addEventListener("test",(function(){}),{get passive(){return n=!0}})}catch(t){}v=n}return!!v&&{passive:!0}}
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */function T(t,e){if(t.closest)return t.closest(e);for(var n=t;n;){if(I(n,e))return n;n=n.parentElement}return null}function I(t,e){return(t.matches||t.webkitMatchesSelector||t.msMatchesSelector).call(t,e)}
/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var w,P={LABEL_FLOAT_ABOVE:"mdc-floating-label--float-above",LABEL_SHAKE:"mdc-floating-label--shake",ROOT:"mdc-floating-label"},S=function(t){function e(n){var i=t.call(this,y({},e.defaultAdapter,n))||this;return i.shakeAnimationEndHandler_=function(){return i.handleShakeAnimationEnd_()},i}return f(e,t),Object.defineProperty(e,"cssClasses",{get:function(){return P},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},getWidth:function(){return 0},registerInteractionHandler:function(){},deregisterInteractionHandler:function(){}}},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.adapter_.registerInteractionHandler("animationend",this.shakeAnimationEndHandler_)},e.prototype.destroy=function(){this.adapter_.deregisterInteractionHandler("animationend",this.shakeAnimationEndHandler_)},e.prototype.getWidth=function(){return this.adapter_.getWidth()},e.prototype.shake=function(t){var n=e.cssClasses.LABEL_SHAKE;t?this.adapter_.addClass(n):this.adapter_.removeClass(n)},e.prototype.float=function(t){var n=e.cssClasses,i=n.LABEL_FLOAT_ABOVE,r=n.LABEL_SHAKE;t?this.adapter_.addClass(i):(this.adapter_.removeClass(i),this.adapter_.removeClass(r))},e.prototype.handleShakeAnimationEnd_=function(){var t=e.cssClasses.LABEL_SHAKE;this.adapter_.removeClass(t)},e}(C),M=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return f(e,t),e.attachTo=function(t){return new e(t)},e.prototype.shake=function(t){this.foundation_.shake(t)},e.prototype.float=function(t){this.foundation_.float(t)},e.prototype.getWidth=function(){return this.foundation_.getWidth()},e.prototype.getDefaultFoundation=function(){var t=this;return new S({addClass:function(e){return t.root_.classList.add(e)},removeClass:function(e){return t.root_.classList.remove(e)},getWidth:function(){return t.root_.scrollWidth},registerInteractionHandler:function(e,n){return t.listen(e,n)},deregisterInteractionHandler:function(e,n){return t.unlisten(e,n)}})},e}(A),O={LINE_RIPPLE_ACTIVE:"mdc-line-ripple--active",LINE_RIPPLE_DEACTIVATING:"mdc-line-ripple--deactivating"},L=function(t){function e(n){var i=t.call(this,y({},e.defaultAdapter,n))||this;return i.transitionEndHandler_=function(t){return i.handleTransitionEnd(t)},i}return f(e,t),Object.defineProperty(e,"cssClasses",{get:function(){return O},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},setStyle:function(){},registerEventHandler:function(){},deregisterEventHandler:function(){}}},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.adapter_.registerEventHandler("transitionend",this.transitionEndHandler_)},e.prototype.destroy=function(){this.adapter_.deregisterEventHandler("transitionend",this.transitionEndHandler_)},e.prototype.activate=function(){this.adapter_.removeClass(O.LINE_RIPPLE_DEACTIVATING),this.adapter_.addClass(O.LINE_RIPPLE_ACTIVE)},e.prototype.setRippleCenter=function(t){this.adapter_.setStyle("transform-origin",t+"px center")},e.prototype.deactivate=function(){this.adapter_.addClass(O.LINE_RIPPLE_DEACTIVATING)},e.prototype.handleTransitionEnd=function(t){var e=this.adapter_.hasClass(O.LINE_RIPPLE_DEACTIVATING);"opacity"===t.propertyName&&e&&(this.adapter_.removeClass(O.LINE_RIPPLE_ACTIVE),this.adapter_.removeClass(O.LINE_RIPPLE_DEACTIVATING))},e}(C),D=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return f(e,t),e.attachTo=function(t){return new e(t)},e.prototype.activate=function(){this.foundation_.activate()},e.prototype.deactivate=function(){this.foundation_.deactivate()},e.prototype.setRippleCenter=function(t){this.foundation_.setRippleCenter(t)},e.prototype.getDefaultFoundation=function(){var t=this;return new L({addClass:function(e){return t.root_.classList.add(e)},removeClass:function(e){return t.root_.classList.remove(e)},hasClass:function(e){return t.root_.classList.contains(e)},setStyle:function(e,n){return t.root_.style.setProperty(e,n)},registerEventHandler:function(e,n){return t.listen(e,n)},deregisterEventHandler:function(e,n){return t.unlisten(e,n)}})},e}(A),N={NOTCH_ELEMENT_SELECTOR:".mdc-notched-outline__notch"},k={NOTCH_ELEMENT_PADDING:8},R={NO_LABEL:"mdc-notched-outline--no-label",OUTLINE_NOTCHED:"mdc-notched-outline--notched",OUTLINE_UPGRADED:"mdc-notched-outline--upgraded"},F=function(t){function e(n){return t.call(this,y({},e.defaultAdapter,n))||this}return f(e,t),Object.defineProperty(e,"strings",{get:function(){return N},enumerable:!0,configurable:!0}),Object.defineProperty(e,"cssClasses",{get:function(){return R},enumerable:!0,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return k},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},setNotchWidthProperty:function(){},removeNotchWidthProperty:function(){}}},enumerable:!0,configurable:!0}),e.prototype.notch=function(t){var n=e.cssClasses.OUTLINE_NOTCHED;t>0&&(t+=k.NOTCH_ELEMENT_PADDING),this.adapter_.setNotchWidthProperty(t),this.adapter_.addClass(n)},e.prototype.closeNotch=function(){var t=e.cssClasses.OUTLINE_NOTCHED;this.adapter_.removeClass(t),this.adapter_.removeNotchWidthProperty()},e}(C),x=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return f(e,t),e.attachTo=function(t){return new e(t)},e.prototype.initialSyncWithDOM=function(){this.notchElement_=this.root_.querySelector(N.NOTCH_ELEMENT_SELECTOR);var t=this.root_.querySelector("."+S.cssClasses.ROOT);t?(t.style.transitionDuration="0s",this.root_.classList.add(R.OUTLINE_UPGRADED),requestAnimationFrame((function(){t.style.transitionDuration=""}))):this.root_.classList.add(R.NO_LABEL)},e.prototype.notch=function(t){this.foundation_.notch(t)},e.prototype.closeNotch=function(){this.foundation_.closeNotch()},e.prototype.getDefaultFoundation=function(){var t=this;return new F({addClass:function(e){return t.root_.classList.add(e)},removeClass:function(e){return t.root_.classList.remove(e)},setNotchWidthProperty:function(e){return t.notchElement_.style.setProperty("width",e+"px")},removeNotchWidthProperty:function(){return t.notchElement_.style.removeProperty("width")}})},e}(A),H={BG_FOCUSED:"mdc-ripple-upgraded--background-focused",FG_ACTIVATION:"mdc-ripple-upgraded--foreground-activation",FG_DEACTIVATION:"mdc-ripple-upgraded--foreground-deactivation",ROOT:"mdc-ripple-upgraded",UNBOUNDED:"mdc-ripple-upgraded--unbounded"},B={VAR_FG_SCALE:"--mdc-ripple-fg-scale",VAR_FG_SIZE:"--mdc-ripple-fg-size",VAR_FG_TRANSLATE_END:"--mdc-ripple-fg-translate-end",VAR_FG_TRANSLATE_START:"--mdc-ripple-fg-translate-start",VAR_LEFT:"--mdc-ripple-left",VAR_TOP:"--mdc-ripple-top"},U={DEACTIVATION_TIMEOUT_MS:225,FG_DEACTIVATION_MS:150,INITIAL_ORIGIN_SCALE:.6,PADDING:10,TAP_DELAY_MS:300};
/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
var j=["touchstart","pointerdown","mousedown","keydown"],V=["touchend","pointerup","mouseup","contextmenu"],z=[],G=function(t){function e(n){var i=t.call(this,y({},e.defaultAdapter,n))||this;return i.activationAnimationHasEnded_=!1,i.activationTimer_=0,i.fgDeactivationRemovalTimer_=0,i.fgScale_="0",i.frame_={width:0,height:0},i.initialSize_=0,i.layoutFrame_=0,i.maxRadius_=0,i.unboundedCoords_={left:0,top:0},i.activationState_=i.defaultActivationState_(),i.activationTimerCallback_=function(){i.activationAnimationHasEnded_=!0,i.runDeactivationUXLogicIfReady_()},i.activateHandler_=function(t){return i.activate_(t)},i.deactivateHandler_=function(){return i.deactivate_()},i.focusHandler_=function(){return i.handleFocus()},i.blurHandler_=function(){return i.handleBlur()},i.resizeHandler_=function(){return i.layout()},i}return f(e,t),Object.defineProperty(e,"cssClasses",{get:function(){return H},enumerable:!0,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return B},enumerable:!0,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return U},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},browserSupportsCssVars:function(){return!0},computeBoundingRect:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},containsEventTarget:function(){return!0},deregisterDocumentInteractionHandler:function(){},deregisterInteractionHandler:function(){},deregisterResizeHandler:function(){},getWindowPageOffset:function(){return{x:0,y:0}},isSurfaceActive:function(){return!0},isSurfaceDisabled:function(){return!0},isUnbounded:function(){return!0},registerDocumentInteractionHandler:function(){},registerInteractionHandler:function(){},registerResizeHandler:function(){},removeClass:function(){},updateCssVariable:function(){}}},enumerable:!0,configurable:!0}),e.prototype.init=function(){var t=this,n=this.supportsPressRipple_();if(this.registerRootHandlers_(n),n){var i=e.cssClasses,r=i.ROOT,s=i.UNBOUNDED;requestAnimationFrame((function(){t.adapter_.addClass(r),t.adapter_.isUnbounded()&&(t.adapter_.addClass(s),t.layoutInternal_())}))}},e.prototype.destroy=function(){var t=this;if(this.supportsPressRipple_()){this.activationTimer_&&(clearTimeout(this.activationTimer_),this.activationTimer_=0,this.adapter_.removeClass(e.cssClasses.FG_ACTIVATION)),this.fgDeactivationRemovalTimer_&&(clearTimeout(this.fgDeactivationRemovalTimer_),this.fgDeactivationRemovalTimer_=0,this.adapter_.removeClass(e.cssClasses.FG_DEACTIVATION));var n=e.cssClasses,i=n.ROOT,r=n.UNBOUNDED;requestAnimationFrame((function(){t.adapter_.removeClass(i),t.adapter_.removeClass(r),t.removeCssVars_()}))}this.deregisterRootHandlers_(),this.deregisterDeactivationHandlers_()},e.prototype.activate=function(t){this.activate_(t)},e.prototype.deactivate=function(){this.deactivate_()},e.prototype.layout=function(){var t=this;this.layoutFrame_&&cancelAnimationFrame(this.layoutFrame_),this.layoutFrame_=requestAnimationFrame((function(){t.layoutInternal_(),t.layoutFrame_=0}))},e.prototype.setUnbounded=function(t){var n=e.cssClasses.UNBOUNDED;t?this.adapter_.addClass(n):this.adapter_.removeClass(n)},e.prototype.handleFocus=function(){var t=this;requestAnimationFrame((function(){return t.adapter_.addClass(e.cssClasses.BG_FOCUSED)}))},e.prototype.handleBlur=function(){var t=this;requestAnimationFrame((function(){return t.adapter_.removeClass(e.cssClasses.BG_FOCUSED)}))},e.prototype.supportsPressRipple_=function(){return this.adapter_.browserSupportsCssVars()},e.prototype.defaultActivationState_=function(){return{activationEvent:void 0,hasDeactivationUXRun:!1,isActivated:!1,isProgrammatic:!1,wasActivatedByPointer:!1,wasElementMadeActive:!1}},e.prototype.registerRootHandlers_=function(t){var e=this;t&&(j.forEach((function(t){e.adapter_.registerInteractionHandler(t,e.activateHandler_)})),this.adapter_.isUnbounded()&&this.adapter_.registerResizeHandler(this.resizeHandler_)),this.adapter_.registerInteractionHandler("focus",this.focusHandler_),this.adapter_.registerInteractionHandler("blur",this.blurHandler_)},e.prototype.registerDeactivationHandlers_=function(t){var e=this;"keydown"===t.type?this.adapter_.registerInteractionHandler("keyup",this.deactivateHandler_):V.forEach((function(t){e.adapter_.registerDocumentInteractionHandler(t,e.deactivateHandler_)}))},e.prototype.deregisterRootHandlers_=function(){var t=this;j.forEach((function(e){t.adapter_.deregisterInteractionHandler(e,t.activateHandler_)})),this.adapter_.deregisterInteractionHandler("focus",this.focusHandler_),this.adapter_.deregisterInteractionHandler("blur",this.blurHandler_),this.adapter_.isUnbounded()&&this.adapter_.deregisterResizeHandler(this.resizeHandler_)},e.prototype.deregisterDeactivationHandlers_=function(){var t=this;this.adapter_.deregisterInteractionHandler("keyup",this.deactivateHandler_),V.forEach((function(e){t.adapter_.deregisterDocumentInteractionHandler(e,t.deactivateHandler_)}))},e.prototype.removeCssVars_=function(){var t=this,n=e.strings;Object.keys(n).forEach((function(e){0===e.indexOf("VAR_")&&t.adapter_.updateCssVariable(n[e],null)}))},e.prototype.activate_=function(t){var e=this;if(!this.adapter_.isSurfaceDisabled()){var n=this.activationState_;if(!n.isActivated){var i=this.previousActivationEvent_;if(!(i&&void 0!==t&&i.type!==t.type))n.isActivated=!0,n.isProgrammatic=void 0===t,n.activationEvent=t,n.wasActivatedByPointer=!n.isProgrammatic&&(void 0!==t&&("mousedown"===t.type||"touchstart"===t.type||"pointerdown"===t.type)),void 0!==t&&z.length>0&&z.some((function(t){return e.adapter_.containsEventTarget(t)}))?this.resetActivationState_():(void 0!==t&&(z.push(t.target),this.registerDeactivationHandlers_(t)),n.wasElementMadeActive=this.checkElementMadeActive_(t),n.wasElementMadeActive&&this.animateActivation_(),requestAnimationFrame((function(){z=[],n.wasElementMadeActive||void 0===t||" "!==t.key&&32!==t.keyCode||(n.wasElementMadeActive=e.checkElementMadeActive_(t),n.wasElementMadeActive&&e.animateActivation_()),n.wasElementMadeActive||(e.activationState_=e.defaultActivationState_())})))}}},e.prototype.checkElementMadeActive_=function(t){return void 0===t||"keydown"!==t.type||this.adapter_.isSurfaceActive()},e.prototype.animateActivation_=function(){var t=this,n=e.strings,i=n.VAR_FG_TRANSLATE_START,r=n.VAR_FG_TRANSLATE_END,s=e.cssClasses,o=s.FG_DEACTIVATION,a=s.FG_ACTIVATION,c=e.numbers.DEACTIVATION_TIMEOUT_MS;this.layoutInternal_();var u="",l="";if(!this.adapter_.isUnbounded()){var d=this.getFgTranslationCoordinates_(),_=d.startPoint,h=d.endPoint;u=_.x+"px, "+_.y+"px",l=h.x+"px, "+h.y+"px"}this.adapter_.updateCssVariable(i,u),this.adapter_.updateCssVariable(r,l),clearTimeout(this.activationTimer_),clearTimeout(this.fgDeactivationRemovalTimer_),this.rmBoundedActivationClasses_(),this.adapter_.removeClass(o),this.adapter_.computeBoundingRect(),this.adapter_.addClass(a),this.activationTimer_=setTimeout((function(){return t.activationTimerCallback_()}),c)},e.prototype.getFgTranslationCoordinates_=function(){var t,e=this.activationState_,n=e.activationEvent;return{startPoint:t={x:(t=e.wasActivatedByPointer?function(t,e,n){if(!t)return{x:0,y:0};var i,r,s=e.x,o=e.y,a=s+n.left,c=o+n.top;if("touchstart"===t.type){var u=t;i=u.changedTouches[0].pageX-a,r=u.changedTouches[0].pageY-c}else{var l=t;i=l.pageX-a,r=l.pageY-c}return{x:i,y:r}}(n,this.adapter_.getWindowPageOffset(),this.adapter_.computeBoundingRect()):{x:this.frame_.width/2,y:this.frame_.height/2}).x-this.initialSize_/2,y:t.y-this.initialSize_/2},endPoint:{x:this.frame_.width/2-this.initialSize_/2,y:this.frame_.height/2-this.initialSize_/2}}},e.prototype.runDeactivationUXLogicIfReady_=function(){var t=this,n=e.cssClasses.FG_DEACTIVATION,i=this.activationState_,r=i.hasDeactivationUXRun,s=i.isActivated;(r||!s)&&this.activationAnimationHasEnded_&&(this.rmBoundedActivationClasses_(),this.adapter_.addClass(n),this.fgDeactivationRemovalTimer_=setTimeout((function(){t.adapter_.removeClass(n)}),U.FG_DEACTIVATION_MS))},e.prototype.rmBoundedActivationClasses_=function(){var t=e.cssClasses.FG_ACTIVATION;this.adapter_.removeClass(t),this.activationAnimationHasEnded_=!1,this.adapter_.computeBoundingRect()},e.prototype.resetActivationState_=function(){var t=this;this.previousActivationEvent_=this.activationState_.activationEvent,this.activationState_=this.defaultActivationState_(),setTimeout((function(){return t.previousActivationEvent_=void 0}),e.numbers.TAP_DELAY_MS)},e.prototype.deactivate_=function(){var t=this,e=this.activationState_;if(e.isActivated){var n=y({},e);e.isProgrammatic?(requestAnimationFrame((function(){return t.animateDeactivation_(n)})),this.resetActivationState_()):(this.deregisterDeactivationHandlers_(),requestAnimationFrame((function(){t.activationState_.hasDeactivationUXRun=!0,t.animateDeactivation_(n),t.resetActivationState_()})))}},e.prototype.animateDeactivation_=function(t){var e=t.wasActivatedByPointer,n=t.wasElementMadeActive;(e||n)&&this.runDeactivationUXLogicIfReady_()},e.prototype.layoutInternal_=function(){var t=this;this.frame_=this.adapter_.computeBoundingRect();var n=Math.max(this.frame_.height,this.frame_.width);this.maxRadius_=this.adapter_.isUnbounded()?n:Math.sqrt(Math.pow(t.frame_.width,2)+Math.pow(t.frame_.height,2))+e.numbers.PADDING;var i=Math.floor(n*e.numbers.INITIAL_ORIGIN_SCALE);this.adapter_.isUnbounded()&&i%2!=0?this.initialSize_=i-1:this.initialSize_=i,this.fgScale_=""+this.maxRadius_/this.initialSize_,this.updateLayoutCssVars_()},e.prototype.updateLayoutCssVars_=function(){var t=e.strings,n=t.VAR_FG_SIZE,i=t.VAR_LEFT,r=t.VAR_TOP,s=t.VAR_FG_SCALE;this.adapter_.updateCssVariable(n,this.initialSize_+"px"),this.adapter_.updateCssVariable(s,this.fgScale_),this.adapter_.isUnbounded()&&(this.unboundedCoords_={left:Math.round(this.frame_.width/2-this.initialSize_/2),top:Math.round(this.frame_.height/2-this.initialSize_/2)},this.adapter_.updateCssVariable(i,this.unboundedCoords_.left+"px"),this.adapter_.updateCssVariable(r,this.unboundedCoords_.top+"px"))},e}(C),W=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.disabled=!1,e}return f(e,t),e.attachTo=function(t,n){void 0===n&&(n={isUnbounded:void 0});var i=new e(t);return void 0!==n.isUnbounded&&(i.unbounded=n.isUnbounded),i},e.createAdapter=function(t){return{addClass:function(e){return t.root_.classList.add(e)},browserSupportsCssVars:function(){return function(t,e){void 0===e&&(e=!1);var n=t.CSS,i=w;if("boolean"==typeof w&&!e)return w;if(!(n&&"function"==typeof n.supports))return!1;var r=n.supports("--css-vars","yes"),s=n.supports("(--css-vars: yes)")&&n.supports("color","#00000000");return i=!(!r&&!s)&&!function(t){var e=t.document,n=e.createElement("div");n.className="mdc-ripple-surface--test-edge-var-bug",e.head.appendChild(n);var i=t.getComputedStyle(n),r=null!==i&&"solid"===i.borderTopStyle;return n.parentNode&&n.parentNode.removeChild(n),r}(t),e||(w=i),i}(window)},computeBoundingRect:function(){return t.root_.getBoundingClientRect()},containsEventTarget:function(e){return t.root_.contains(e)},deregisterDocumentInteractionHandler:function(t,e){return document.documentElement.removeEventListener(t,e,E())},deregisterInteractionHandler:function(e,n){return t.root_.removeEventListener(e,n,E())},deregisterResizeHandler:function(t){return window.removeEventListener("resize",t)},getWindowPageOffset:function(){return{x:window.pageXOffset,y:window.pageYOffset}},isSurfaceActive:function(){return I(t.root_,":active")},isSurfaceDisabled:function(){return Boolean(t.disabled)},isUnbounded:function(){return Boolean(t.unbounded)},registerDocumentInteractionHandler:function(t,e){return document.documentElement.addEventListener(t,e,E())},registerInteractionHandler:function(e,n){return t.root_.addEventListener(e,n,E())},registerResizeHandler:function(t){return window.addEventListener("resize",t)},removeClass:function(e){return t.root_.classList.remove(e)},updateCssVariable:function(e,n){return t.root_.style.setProperty(e,n)}}},Object.defineProperty(e.prototype,"unbounded",{get:function(){return Boolean(this.unbounded_)},set:function(t){this.unbounded_=Boolean(t),this.setUnbounded_()},enumerable:!0,configurable:!0}),e.prototype.activate=function(){this.foundation_.activate()},e.prototype.deactivate=function(){this.foundation_.deactivate()},e.prototype.layout=function(){this.foundation_.layout()},e.prototype.getDefaultFoundation=function(){return new G(e.createAdapter(this))},e.prototype.initialSyncWithDOM=function(){var t=this.root_;this.unbounded="mdcRippleIsUnbounded"in t.dataset},e.prototype.setUnbounded_=function(){this.foundation_.setUnbounded(Boolean(this.unbounded_))},e}(A),$={ROOT:"mdc-text-field-character-counter"},q={ROOT_SELECTOR:"."+$.ROOT},K=function(t){function e(n){return t.call(this,y({},e.defaultAdapter,n))||this}return f(e,t),Object.defineProperty(e,"cssClasses",{get:function(){return $},enumerable:!0,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return q},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{setContent:function(){}}},enumerable:!0,configurable:!0}),e.prototype.setCounterValue=function(t,e){t=Math.min(t,e),this.adapter_.setContent(t+" / "+e)},e}(C),X=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return f(e,t),e.attachTo=function(t){return new e(t)},Object.defineProperty(e.prototype,"foundation",{get:function(){return this.foundation_},enumerable:!0,configurable:!0}),e.prototype.getDefaultFoundation=function(){var t=this;return new K({setContent:function(e){t.root_.textContent=e}})},e}(A),Q={ARIA_CONTROLS:"aria-controls",ICON_SELECTOR:".mdc-text-field__icon",INPUT_SELECTOR:".mdc-text-field__input",LABEL_SELECTOR:".mdc-floating-label",LINE_RIPPLE_SELECTOR:".mdc-line-ripple",OUTLINE_SELECTOR:".mdc-notched-outline"},Y={DENSE:"mdc-text-field--dense",DISABLED:"mdc-text-field--disabled",FOCUSED:"mdc-text-field--focused",FULLWIDTH:"mdc-text-field--fullwidth",HELPER_LINE:"mdc-text-field-helper-line",INVALID:"mdc-text-field--invalid",NO_LABEL:"mdc-text-field--no-label",OUTLINED:"mdc-text-field--outlined",ROOT:"mdc-text-field",TEXTAREA:"mdc-text-field--textarea",WITH_LEADING_ICON:"mdc-text-field--with-leading-icon",WITH_TRAILING_ICON:"mdc-text-field--with-trailing-icon"},J={DENSE_LABEL_SCALE:.923,LABEL_SCALE:.75},Z=["pattern","min","max","required","step","minlength","maxlength"],tt=["color","date","datetime-local","month","range","time","week"],et=["mousedown","touchstart"],nt=["click","keydown"],it=function(t){function e(n,i){void 0===i&&(i={});var r=t.call(this,y({},e.defaultAdapter,n))||this;return r.isFocused_=!1,r.receivedUserInput_=!1,r.isValid_=!0,r.useNativeValidation_=!0,r.helperText_=i.helperText,r.characterCounter_=i.characterCounter,r.leadingIcon_=i.leadingIcon,r.trailingIcon_=i.trailingIcon,r.inputFocusHandler_=function(){return r.activateFocus()},r.inputBlurHandler_=function(){return r.deactivateFocus()},r.inputInputHandler_=function(){return r.handleInput()},r.setPointerXOffset_=function(t){return r.setTransformOrigin(t)},r.textFieldInteractionHandler_=function(){return r.handleTextFieldInteraction()},r.validationAttributeChangeHandler_=function(t){return r.handleValidationAttributeChange(t)},r}return f(e,t),Object.defineProperty(e,"cssClasses",{get:function(){return Y},enumerable:!0,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return Q},enumerable:!0,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return J},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shouldAlwaysFloat_",{get:function(){var t=this.getNativeInput_().type;return tt.indexOf(t)>=0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shouldFloat",{get:function(){return this.shouldAlwaysFloat_||this.isFocused_||!!this.getValue()||this.isBadInput_()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shouldShake",{get:function(){return!this.isFocused_&&!this.isValid()&&!!this.getValue()},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!0},registerTextFieldInteractionHandler:function(){},deregisterTextFieldInteractionHandler:function(){},registerInputInteractionHandler:function(){},deregisterInputInteractionHandler:function(){},registerValidationAttributeChangeHandler:function(){return new MutationObserver((function(){}))},deregisterValidationAttributeChangeHandler:function(){},getNativeInput:function(){return null},isFocused:function(){return!1},activateLineRipple:function(){},deactivateLineRipple:function(){},setLineRippleTransformOrigin:function(){},shakeLabel:function(){},floatLabel:function(){},hasLabel:function(){return!1},getLabelWidth:function(){return 0},hasOutline:function(){return!1},notchOutline:function(){},closeOutline:function(){}}},enumerable:!0,configurable:!0}),e.prototype.init=function(){var t=this;this.adapter_.isFocused()?this.inputFocusHandler_():this.adapter_.hasLabel()&&this.shouldFloat&&(this.notchOutline(!0),this.adapter_.floatLabel(!0)),this.adapter_.registerInputInteractionHandler("focus",this.inputFocusHandler_),this.adapter_.registerInputInteractionHandler("blur",this.inputBlurHandler_),this.adapter_.registerInputInteractionHandler("input",this.inputInputHandler_),et.forEach((function(e){t.adapter_.registerInputInteractionHandler(e,t.setPointerXOffset_)})),nt.forEach((function(e){t.adapter_.registerTextFieldInteractionHandler(e,t.textFieldInteractionHandler_)})),this.validationObserver_=this.adapter_.registerValidationAttributeChangeHandler(this.validationAttributeChangeHandler_),this.setCharacterCounter_(this.getValue().length)},e.prototype.destroy=function(){var t=this;this.adapter_.deregisterInputInteractionHandler("focus",this.inputFocusHandler_),this.adapter_.deregisterInputInteractionHandler("blur",this.inputBlurHandler_),this.adapter_.deregisterInputInteractionHandler("input",this.inputInputHandler_),et.forEach((function(e){t.adapter_.deregisterInputInteractionHandler(e,t.setPointerXOffset_)})),nt.forEach((function(e){t.adapter_.deregisterTextFieldInteractionHandler(e,t.textFieldInteractionHandler_)})),this.adapter_.deregisterValidationAttributeChangeHandler(this.validationObserver_)},e.prototype.handleTextFieldInteraction=function(){var t=this.adapter_.getNativeInput();t&&t.disabled||(this.receivedUserInput_=!0)},e.prototype.handleValidationAttributeChange=function(t){var e=this;t.some((function(t){return Z.indexOf(t)>-1&&(e.styleValidity_(!0),!0)})),t.indexOf("maxlength")>-1&&this.setCharacterCounter_(this.getValue().length)},e.prototype.notchOutline=function(t){if(this.adapter_.hasOutline())if(t){var e=this.adapter_.hasClass(Y.DENSE)?J.DENSE_LABEL_SCALE:J.LABEL_SCALE,n=this.adapter_.getLabelWidth()*e;this.adapter_.notchOutline(n)}else this.adapter_.closeOutline()},e.prototype.activateFocus=function(){this.isFocused_=!0,this.styleFocused_(this.isFocused_),this.adapter_.activateLineRipple(),this.adapter_.hasLabel()&&(this.notchOutline(this.shouldFloat),this.adapter_.floatLabel(this.shouldFloat),this.adapter_.shakeLabel(this.shouldShake)),this.helperText_&&this.helperText_.showToScreenReader()},e.prototype.setTransformOrigin=function(t){var e=t.touches,n=e?e[0]:t,i=n.target.getBoundingClientRect(),r=n.clientX-i.left;this.adapter_.setLineRippleTransformOrigin(r)},e.prototype.handleInput=function(){this.autoCompleteFocus(),this.setCharacterCounter_(this.getValue().length)},e.prototype.autoCompleteFocus=function(){this.receivedUserInput_||this.activateFocus()},e.prototype.deactivateFocus=function(){this.isFocused_=!1,this.adapter_.deactivateLineRipple();var t=this.isValid();this.styleValidity_(t),this.styleFocused_(this.isFocused_),this.adapter_.hasLabel()&&(this.notchOutline(this.shouldFloat),this.adapter_.floatLabel(this.shouldFloat),this.adapter_.shakeLabel(this.shouldShake)),this.shouldFloat||(this.receivedUserInput_=!1)},e.prototype.getValue=function(){return this.getNativeInput_().value},e.prototype.setValue=function(t){this.getValue()!==t&&(this.getNativeInput_().value=t),this.setCharacterCounter_(t.length);var e=this.isValid();this.styleValidity_(e),this.adapter_.hasLabel()&&(this.notchOutline(this.shouldFloat),this.adapter_.floatLabel(this.shouldFloat),this.adapter_.shakeLabel(this.shouldShake))},e.prototype.isValid=function(){return this.useNativeValidation_?this.isNativeInputValid_():this.isValid_},e.prototype.setValid=function(t){this.isValid_=t,this.styleValidity_(t);var e=!t&&!this.isFocused_&&!!this.getValue();this.adapter_.hasLabel()&&this.adapter_.shakeLabel(e)},e.prototype.setUseNativeValidation=function(t){this.useNativeValidation_=t},e.prototype.isDisabled=function(){return this.getNativeInput_().disabled},e.prototype.setDisabled=function(t){this.getNativeInput_().disabled=t,this.styleDisabled_(t)},e.prototype.setHelperTextContent=function(t){this.helperText_&&this.helperText_.setContent(t)},e.prototype.setLeadingIconAriaLabel=function(t){this.leadingIcon_&&this.leadingIcon_.setAriaLabel(t)},e.prototype.setLeadingIconContent=function(t){this.leadingIcon_&&this.leadingIcon_.setContent(t)},e.prototype.setTrailingIconAriaLabel=function(t){this.trailingIcon_&&this.trailingIcon_.setAriaLabel(t)},e.prototype.setTrailingIconContent=function(t){this.trailingIcon_&&this.trailingIcon_.setContent(t)},e.prototype.setCharacterCounter_=function(t){if(this.characterCounter_){var e=this.getNativeInput_().maxLength;if(-1===e)throw new Error("MDCTextFieldFoundation: Expected maxlength html property on text input or textarea.");this.characterCounter_.setCounterValue(t,e)}},e.prototype.isBadInput_=function(){return this.getNativeInput_().validity.badInput||!1},e.prototype.isNativeInputValid_=function(){return this.getNativeInput_().validity.valid},e.prototype.styleValidity_=function(t){var n=e.cssClasses.INVALID;t?this.adapter_.removeClass(n):this.adapter_.addClass(n),this.helperText_&&this.helperText_.setValidity(t)},e.prototype.styleFocused_=function(t){var n=e.cssClasses.FOCUSED;t?this.adapter_.addClass(n):this.adapter_.removeClass(n)},e.prototype.styleDisabled_=function(t){var n=e.cssClasses,i=n.DISABLED,r=n.INVALID;t?(this.adapter_.addClass(i),this.adapter_.removeClass(r)):this.adapter_.removeClass(i),this.leadingIcon_&&this.leadingIcon_.setDisabled(t),this.trailingIcon_&&this.trailingIcon_.setDisabled(t)},e.prototype.getNativeInput_=function(){return(this.adapter_?this.adapter_.getNativeInput():null)||{disabled:!1,maxLength:-1,type:"input",validity:{badInput:!1,valid:!0},value:""}},e}(C),rt={HELPER_TEXT_PERSISTENT:"mdc-text-field-helper-text--persistent",HELPER_TEXT_VALIDATION_MSG:"mdc-text-field-helper-text--validation-msg",ROOT:"mdc-text-field-helper-text"},st={ARIA_HIDDEN:"aria-hidden",ROLE:"role",ROOT_SELECTOR:"."+rt.ROOT},ot=function(t){function e(n){return t.call(this,y({},e.defaultAdapter,n))||this}return f(e,t),Object.defineProperty(e,"cssClasses",{get:function(){return rt},enumerable:!0,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return st},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},setAttr:function(){},removeAttr:function(){},setContent:function(){}}},enumerable:!0,configurable:!0}),e.prototype.setContent=function(t){this.adapter_.setContent(t)},e.prototype.setPersistent=function(t){t?this.adapter_.addClass(rt.HELPER_TEXT_PERSISTENT):this.adapter_.removeClass(rt.HELPER_TEXT_PERSISTENT)},e.prototype.setValidation=function(t){t?this.adapter_.addClass(rt.HELPER_TEXT_VALIDATION_MSG):this.adapter_.removeClass(rt.HELPER_TEXT_VALIDATION_MSG)},e.prototype.showToScreenReader=function(){this.adapter_.removeAttr(st.ARIA_HIDDEN)},e.prototype.setValidity=function(t){var e=this.adapter_.hasClass(rt.HELPER_TEXT_PERSISTENT),n=this.adapter_.hasClass(rt.HELPER_TEXT_VALIDATION_MSG)&&!t;n?this.adapter_.setAttr(st.ROLE,"alert"):this.adapter_.removeAttr(st.ROLE),e||n||this.hide_()},e.prototype.hide_=function(){this.adapter_.setAttr(st.ARIA_HIDDEN,"true")},e}(C),at=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return f(e,t),e.attachTo=function(t){return new e(t)},Object.defineProperty(e.prototype,"foundation",{get:function(){return this.foundation_},enumerable:!0,configurable:!0}),e.prototype.getDefaultFoundation=function(){var t=this;return new ot({addClass:function(e){return t.root_.classList.add(e)},removeClass:function(e){return t.root_.classList.remove(e)},hasClass:function(e){return t.root_.classList.contains(e)},setAttr:function(e,n){return t.root_.setAttribute(e,n)},removeAttr:function(e){return t.root_.removeAttribute(e)},setContent:function(e){t.root_.textContent=e}})},e}(A),ct={ICON_EVENT:"MDCTextField:icon",ICON_ROLE:"button"},ut={ROOT:"mdc-text-field__icon"},lt=["click","keydown"],dt=function(t){function e(n){var i=t.call(this,y({},e.defaultAdapter,n))||this;return i.savedTabIndex_=null,i.interactionHandler_=function(t){return i.handleInteraction(t)},i}return f(e,t),Object.defineProperty(e,"strings",{get:function(){return ct},enumerable:!0,configurable:!0}),Object.defineProperty(e,"cssClasses",{get:function(){return ut},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{getAttr:function(){return null},setAttr:function(){},removeAttr:function(){},setContent:function(){},registerInteractionHandler:function(){},deregisterInteractionHandler:function(){},notifyIconAction:function(){}}},enumerable:!0,configurable:!0}),e.prototype.init=function(){var t=this;this.savedTabIndex_=this.adapter_.getAttr("tabindex"),lt.forEach((function(e){t.adapter_.registerInteractionHandler(e,t.interactionHandler_)}))},e.prototype.destroy=function(){var t=this;lt.forEach((function(e){t.adapter_.deregisterInteractionHandler(e,t.interactionHandler_)}))},e.prototype.setDisabled=function(t){this.savedTabIndex_&&(t?(this.adapter_.setAttr("tabindex","-1"),this.adapter_.removeAttr("role")):(this.adapter_.setAttr("tabindex",this.savedTabIndex_),this.adapter_.setAttr("role",ct.ICON_ROLE)))},e.prototype.setAriaLabel=function(t){this.adapter_.setAttr("aria-label",t)},e.prototype.setContent=function(t){this.adapter_.setContent(t)},e.prototype.handleInteraction=function(t){var e="Enter"===t.key||13===t.keyCode;("click"===t.type||e)&&this.adapter_.notifyIconAction()},e}(C),_t=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return f(e,t),e.attachTo=function(t){return new e(t)},Object.defineProperty(e.prototype,"foundation",{get:function(){return this.foundation_},enumerable:!0,configurable:!0}),e.prototype.getDefaultFoundation=function(){var t=this;return new dt({getAttr:function(e){return t.root_.getAttribute(e)},setAttr:function(e,n){return t.root_.setAttribute(e,n)},removeAttr:function(e){return t.root_.removeAttribute(e)},setContent:function(e){t.root_.textContent=e},registerInteractionHandler:function(e,n){return t.listen(e,n)},deregisterInteractionHandler:function(e,n){return t.unlisten(e,n)},notifyIconAction:function(){return t.emit(dt.strings.ICON_EVENT,{},!0)}})},e}(A),ht=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return f(e,t),e.attachTo=function(t){return new e(t)},e.prototype.initialize=function(t,e,n,i,r,s,o){void 0===t&&(t=function(t,e){return new W(t,e)}),void 0===e&&(e=function(t){return new D(t)}),void 0===n&&(n=function(t){return new at(t)}),void 0===i&&(i=function(t){return new X(t)}),void 0===r&&(r=function(t){return new _t(t)}),void 0===s&&(s=function(t){return new M(t)}),void 0===o&&(o=function(t){return new x(t)}),this.input_=this.root_.querySelector(Q.INPUT_SELECTOR);var a=this.root_.querySelector(Q.LABEL_SELECTOR);this.label_=a?s(a):null;var c=this.root_.querySelector(Q.LINE_RIPPLE_SELECTOR);this.lineRipple_=c?e(c):null;var u=this.root_.querySelector(Q.OUTLINE_SELECTOR);this.outline_=u?o(u):null;var l=ot.strings,d=this.root_.nextElementSibling,_=d&&d.classList.contains(Y.HELPER_LINE),h=_&&d&&d.querySelector(l.ROOT_SELECTOR);this.helperText_=h?n(h):null;var p=K.strings,m=this.root_.querySelector(p.ROOT_SELECTOR);!m&&_&&d&&(m=d.querySelector(p.ROOT_SELECTOR)),this.characterCounter_=m?i(m):null,this.leadingIcon_=null,this.trailingIcon_=null;var g=this.root_.querySelectorAll(Q.ICON_SELECTOR);g.length>0&&(g.length>1?(this.leadingIcon_=r(g[0]),this.trailingIcon_=r(g[1])):this.root_.classList.contains(Y.WITH_LEADING_ICON)?this.leadingIcon_=r(g[0]):this.trailingIcon_=r(g[0])),this.ripple=this.createRipple_(t)},e.prototype.destroy=function(){this.ripple&&this.ripple.destroy(),this.lineRipple_&&this.lineRipple_.destroy(),this.helperText_&&this.helperText_.destroy(),this.characterCounter_&&this.characterCounter_.destroy(),this.leadingIcon_&&this.leadingIcon_.destroy(),this.trailingIcon_&&this.trailingIcon_.destroy(),this.label_&&this.label_.destroy(),this.outline_&&this.outline_.destroy(),t.prototype.destroy.call(this)},e.prototype.initialSyncWithDOM=function(){this.disabled=this.input_.disabled},Object.defineProperty(e.prototype,"value",{get:function(){return this.foundation_.getValue()},set:function(t){this.foundation_.setValue(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return this.foundation_.isDisabled()},set:function(t){this.foundation_.setDisabled(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valid",{get:function(){return this.foundation_.isValid()},set:function(t){this.foundation_.setValid(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"required",{get:function(){return this.input_.required},set:function(t){this.input_.required=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pattern",{get:function(){return this.input_.pattern},set:function(t){this.input_.pattern=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minLength",{get:function(){return this.input_.minLength},set:function(t){this.input_.minLength=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxLength",{get:function(){return this.input_.maxLength},set:function(t){t<0?this.input_.removeAttribute("maxLength"):this.input_.maxLength=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"min",{get:function(){return this.input_.min},set:function(t){this.input_.min=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"max",{get:function(){return this.input_.max},set:function(t){this.input_.max=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"step",{get:function(){return this.input_.step},set:function(t){this.input_.step=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"helperTextContent",{set:function(t){this.foundation_.setHelperTextContent(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"leadingIconAriaLabel",{set:function(t){this.foundation_.setLeadingIconAriaLabel(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"leadingIconContent",{set:function(t){this.foundation_.setLeadingIconContent(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"trailingIconAriaLabel",{set:function(t){this.foundation_.setTrailingIconAriaLabel(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"trailingIconContent",{set:function(t){this.foundation_.setTrailingIconContent(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"useNativeValidation",{set:function(t){this.foundation_.setUseNativeValidation(t)},enumerable:!0,configurable:!0}),e.prototype.focus=function(){this.input_.focus()},e.prototype.layout=function(){var t=this.foundation_.shouldFloat;this.foundation_.notchOutline(t)},e.prototype.getDefaultFoundation=function(){var t=y({},this.getRootAdapterMethods_(),this.getInputAdapterMethods_(),this.getLabelAdapterMethods_(),this.getLineRippleAdapterMethods_(),this.getOutlineAdapterMethods_());return new it(t,this.getFoundationMap_())},e.prototype.getRootAdapterMethods_=function(){var t=this;return{addClass:function(e){return t.root_.classList.add(e)},removeClass:function(e){return t.root_.classList.remove(e)},hasClass:function(e){return t.root_.classList.contains(e)},registerTextFieldInteractionHandler:function(e,n){return t.listen(e,n)},deregisterTextFieldInteractionHandler:function(e,n){return t.unlisten(e,n)},registerValidationAttributeChangeHandler:function(e){var n=new MutationObserver((function(t){return e(function(t){return t.map((function(t){return t.attributeName})).filter((function(t){return t}))}(t))}));return n.observe(t.input_,{attributes:!0}),n},deregisterValidationAttributeChangeHandler:function(t){return t.disconnect()}}},e.prototype.getInputAdapterMethods_=function(){var t=this;return{getNativeInput:function(){return t.input_},isFocused:function(){return document.activeElement===t.input_},registerInputInteractionHandler:function(e,n){return t.input_.addEventListener(e,n,E())},deregisterInputInteractionHandler:function(e,n){return t.input_.removeEventListener(e,n,E())}}},e.prototype.getLabelAdapterMethods_=function(){var t=this;return{floatLabel:function(e){return t.label_&&t.label_.float(e)},getLabelWidth:function(){return t.label_?t.label_.getWidth():0},hasLabel:function(){return Boolean(t.label_)},shakeLabel:function(e){return t.label_&&t.label_.shake(e)}}},e.prototype.getLineRippleAdapterMethods_=function(){var t=this;return{activateLineRipple:function(){t.lineRipple_&&t.lineRipple_.activate()},deactivateLineRipple:function(){t.lineRipple_&&t.lineRipple_.deactivate()},setLineRippleTransformOrigin:function(e){t.lineRipple_&&t.lineRipple_.setRippleCenter(e)}}},e.prototype.getOutlineAdapterMethods_=function(){var t=this;return{closeOutline:function(){return t.outline_&&t.outline_.closeNotch()},hasOutline:function(){return Boolean(t.outline_)},notchOutline:function(e){return t.outline_&&t.outline_.notch(e)}}},e.prototype.getFoundationMap_=function(){return{characterCounter:this.characterCounter_?this.characterCounter_.foundation:void 0,helperText:this.helperText_?this.helperText_.foundation:void 0,leadingIcon:this.leadingIcon_?this.leadingIcon_.foundation:void 0,trailingIcon:this.trailingIcon_?this.trailingIcon_.foundation:void 0}},e.prototype.createRipple_=function(t){var e=this,n=this.root_.classList.contains(Y.TEXTAREA),i=this.root_.classList.contains(Y.OUTLINED);if(n||i)return null;var r=y({},W.createAdapter(this),{isSurfaceActive:function(){return I(e.input_,":active")},registerInteractionHandler:function(t,n){return e.input_.addEventListener(t,n,E())},deregisterInteractionHandler:function(t,n){return e.input_.removeEventListener(t,n,E())}});return t(this.root_,new G(r))},e}(A);function pt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const mt=new class{constructor(){pt(this,"dom",{}),pt(this,"mdcComponents",[]),pt(this,"authParams",{}),pt(this,"checkInput",()=>{switch(this.step){case 0:this.phoneTextField.value.replace(/\D/g,"").length>=8&&(this.submitButton.hidden=!1);break;case 1:this.codeTextField.value.length>=this.authParams.codeLength&&(this.submitButton.hidden=!1);break;case 2:this.passwordTextField.value&&(this.submitButton.hidden=!1);break;case 3:this.firstNameTextField.value.trim()&&(this.submitButton.hidden=!1)}}),pt(this,"onFormSubmit",t=>{switch(t.preventDefault(),this.step){case 0:this.submitPhoneNumber();break;case 1:this.submitConfirmationCode();break;case 2:this.submitPassword();break;case 3:this.submitSignUp()}})}init(){const t=o(".login_container",a("login"));this.dom=c(t),this.dom.container=t,this.dom.form.addEventListener("submit",this.onFormSubmit),this.setStep(0),document.body.append(t),Promise.all([n.e(0),n.e(1)]).then(n.bind(null,43))}setDomContent(t,e){this.dom[t].innerHTML=e}setDomText(t,e){this.dom[t].textContent=e}setStep(t,e={}){switch(this.step=t,t){case 0:{const t='<div class="login_telegram_logo login_image_content"></div>';this.setDomContent("image",t,!1),this.setDomContent("header","Sign in to Telegram"),this.setDomContent("subheader","Please enter your phone number",!1),this.dom.form.innerHTML="";const e=this.buildInput("Phone Number","tel");this.submitButton=this.buildButton("Next"),this.phoneTextField=new ht(e),this.dom.form.append(e,this.submitButton),this.mdcComponents.push(this.phoneTextField)}break;case 1:{const t='<tgs-player autoplay="" loop="" intermission="1000" mode="normal" src="tgs/TwoFactorSetupMonkeyTracking.tgs" background="transparent" class="login_image_content"></tgs-player>';this.setDomContent("image",t,!1),this.setDomText("header","+"+this.authParams.phoneNumber),this.setDomContent("subheader","We have sent you an SMS<br>with the code."),this.dom.form.innerHTML="";const e=this.buildInput("Code");this.submitButton=this.buildButton("Next"),this.codeTextField=new ht(e),this.dom.form.append(e,this.submitButton),this.mdcComponents.push(this.codeTextField)}break;case 2:{const t='<tgs-player autoplay="" loop="" intermission="3000" mode="normal" src="tgs/TwoFactorSetupMonkeyPeek.tgs" background="transparent" class="login_image_content"></tgs-player>';this.setDomContent("image",t),this.setDomContent("header","Enter a password"),this.setDomContent("subheader","Your account is protected with<br>an additional password",!1),this.dom.form.innerHTML="";const e=this.buildInput("Password","password");this.submitButton=this.buildButton("Next"),this.passwordTextField=new ht(e),this.dom.form.append(e,this.submitButton),this.mdcComponents.push(this.passwordTextField)}break;case 3:{const t='<div class="login_upload_photo login_image_content">';this.setDomContent("image",t),this.setDomContent("header","Your Name"),this.setDomContent("subheader","Enter your name and add<br>a profile picture",!1),this.dom.form.innerHTML="";const e=this.buildInput("Name"),n=this.buildInput("Last Name (optional)");this.submitButton=this.buildButton("Start messaging"),this.firstNameTextField=new ht(e),this.lastNameTextField=new ht(n),this.dom.form.append(e,n,this.submitButton),this.mdcComponents.push(this.firstNameTextField,this.lastNameTextField)}}}submitPhoneNumber(){const t=this.phoneTextField.value.replace(/\D/g,"");t.length<8?this.phoneTextField.valid=!1:(this.submitButton.disabled=!0,h.callMethod("auth.sendCode",{phone_number:t,api_id:Jt.API_ID,api_hash:Jt.API_HASH,settings:{_:"codeSettings"}}).then(e=>{console.log(e),this.authParams.phoneNumber=t,this.authParams.phoneCodeHash=e.phone_code_hash,this.authParams.codeType=e.type._,this.authParams.codeLength=e.type.length,this.setStep(1)}).catch(t=>{"AUTH_RESTART"===t.error_message?this.submitPhoneNumber():(this.phoneTextField.valid=!1,Jt.alert(this.getApiErrorDescription(t.error_code,t.error_message)))}).finally(()=>{this.submitButton.disabled=!1}))}submitConfirmationCode(){const t=this.codeTextField.value;t.length===this.authParams.codeLength?(this.submitButton.disabled=!0,h.callMethod("auth.signIn",{phone_number:this.authParams.phoneNumber,phone_code_hash:this.authParams.phoneCodeHash,phone_code:t}).then(t=>{this.onAuthResult(t)}).catch(e=>{"PHONE_CODE_INVALID"===e.error_message?this.codeTextField.valid=!1:"SESSION_PASSWORD_NEEDED"===e.error_message?this.setStep(2):"PHONE_NUMBER_UNOCCUPIED"===e.error_message?(this.authParams.phoneCode=t,this.setStep(3)):(this.codeTextField.valid=!1,Jt.alert(this.getApiErrorDescription(e.error_code,e.error_message)))}).finally(()=>{this.submitButton.disabled=!1})):this.codeTextField.valid=!1}async submitPassword(){const t=this.passwordTextField.value;if(!t.length)return void(this.passwordTextField.valid=!1);const e=await h.callMethod("account.getPassword");console.log(e);const{getInputPasswordSRP:i}=await Promise.all([n.e(0),n.e(1)]).then(n.bind(null,43)),r=await i(t,e);this.submitButton.disabled=!0,h.callMethod("auth.checkPassword",{password:Object.assign({_:"inputCheckPasswordSRP"},r)}).then(t=>{this.onAuthResult(t)}).catch(t=>{this.passwordTextField.valid=!1,Jt.alert(this.getApiErrorDescription(t.error_code,t.error_message))}).finally(()=>{this.submitButton.disabled=!1})}loadPasswordManager(){return Promise.all([n.e(0),n.e(1)]).then(n.bind(null,43))}async getPasswordHash(t,e){const{bufferConcat:i}=await n.e(0).then(n.bind(null,40)),{sha256Hash:r}=await n.e(0).then(n.bind(null,41)),s=(new TextEncoder).encode(t);return r(i(e.current_salt,s,e.current_salt))}submitSignUp(){const t=this.firstNameTextField.value,e=this.lastNameTextField.value;t?(this.submitButton.disabled=!0,h.callMethod("auth.signUp",{phone_number:this.authParams.phoneNumber,phone_code_hash:this.authParams.phoneCodeHash,phone_code:this.authParams.phoneCode,first_name:t,last_name:e}).then(t=>{this.onAuthResult(t)}).catch(t=>{this.passwordTextField.valid=!1,Jt.alert(this.getApiErrorDescription(t.error_code,t.error_message))}).finally(()=>{this.submitButton.disabled=!1})):this.firstNameTextField.valid=!1}onAuthResult(t){"auth.authorizationSignUpRequired"===t._?this.setStep(3,{terms_of_service:t.terms_of_service}):Jt.authDone(t)}getApiErrorDescription(t,e){switch(e){case"PHONE_NUMBER_INVALID":return"The phone number is invalid";case"PHONE_NUMBER_OCCUPIED":return"The phone number is already in use";case"PHONE_NUMBER_UNOCCUPIED":return"The phone number is not yet being used";case"PHONE_CODE_EXPIRED":return"The confirmation code has expired";case"PHONE_NUMBER_BANNED":return"The provided phone number is banned from telegram";case"PHONE_NUMBER_FLOOD":return"You asked for the code too many times";case"PHONE_PASSWORD_FLOOD":return"You have tried logging in too many times";case"PHONE_PASSWORD_PROTECTED":return"This phone is password protected"}if(420===t&&e.startsWith("FLOOD_WAIT_")){const t=+e.match(/\d+$/)[0];if(t<60)return m.getPlural("login_flood_pluralize_seconds",t);if(t<3600){const e=Math.floor(t/60);return m.getPlural("login_flood_pluralize_minutes",e)}{const e=Math.floor(t/60/60);return m.getPlural("login_flood_pluralize_hours",e)}}return"An error occurred"}buildInput(t,e="text"){const n=u(`\n      <div class="login_input mdc-text-field mdc-text-field--outlined">\n        <input type="${e}" class="mdc-text-field__input">\n        <div class="mdc-notched-outline">\n          <div class="mdc-notched-outline__leading"></div>\n          <div class="mdc-notched-outline__notch">\n            <label class="mdc-floating-label">${t}</label>\n          </div>\n          <div class="mdc-notched-outline__trailing"></div>\n        </div>\n      </div>\n    `);return n.querySelector("input").addEventListener("keyup",this.checkInput),n}buildButton(t,e=!0){const n=u(`\n      <button class="login_button mdc-button mdc-button--unelevated" type="submit" ${e?" hidden":""}><span class="mdc-button__ripple"></span>${t}</button>\n    `);return this.mdcComponents.push(new W(n)),n}destroy(){this.dom.container.remove(),this.dom=null;for(const t of this.mdcComponents)t.destroy();this.mdcComponents=[]}};function gt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}window.LoginController=mt;const ft=new class{getInputUser(t){const e=this.users.get(t);return e?e.pFlags.self?{_:"inputUserSelf"}:{_:"inputUser",user_id:t,access_hash:e.access_hash||0}:{_:"inputUserEmpty"}}constructor(){gt(this,"dialogs",[]),gt(this,"messages",new Map),gt(this,"chats",new Map),gt(this,"users",new Map),gt(this,"peerDialogs",new Map),gt(this,"chatMessages",new Map),gt(this,"emitter",new r),h.emitter.on("updates",t=>{this.handleUpdates(t.detail)})}async initUpdatesState(){this.updatesState=await h.callMethod("updates.getState")}checkUpdatesSeq(t,e){return!0}handleUpdates(t){switch(t._){case"updates":if(this.checkUpdatesSeq(t.seq,t.date)){this.updateChats(t.chats),this.updateUsers(t.users);for(const e of t.updates)this.handleUpdate(e)}break;case"updateShort":this.handleUpdate(t.update);break;case"updateShortMessage":this.handleUpdateShortMessage(t)}}handleUpdate(t){switch(t._){case"updateNewMessage":case"updateNewChannelMessage":{const e=t.message;this.updateMessages([e]);const n=this.getPeerId(e.to_id),i=this.peerDialogs.get(n);i&&(i.top_message=e.id),this.updateChatMessages(n,[e]),this.emitter.trigger("chatNewMessage",{chatId:n,message:e})}break;case"updateReadHistoryInbox":case"updateReadChannelInbox":{const e="updateReadChannelInbox"===t._?t.channel_id:this.getPeerId(t.peer),n=this.peerDialogs.get(e);n&&(n.unread_count=Math.max(0,n.unread_count-1),this.emitter.trigger("updateUnreadCount",{chatId:e,dialog:n}))}break;case"updateUserStatus":{const e=this.users.get(t.user_id);e&&(e.status=t.status)}}}handleUpdateShortMessage(t){const e={_:"message",id:t.id,date:t.date,message:t.message,to_id:{_:"peerUser",user_id:t.user_id},pFlags:{}};this.updateMessages([e]);const n=t.user_id,i=this.peerDialogs.get(n);i&&(i.top_message=e.id),this.updateChatMessages(n,[e]),this.emitter.trigger("chatNewMessage",{chatId:n,message:e})}async loadDialogs(t={},e=20){await h.connectionDefered.promise;const n=await h.callMethod("messages.getDialogs",{offset_date:t.date||0,offset_id:t.id||0,offset_peer:this.getInputPeer(t.peer),limit:e});if("messages.dialogsNotModified"===n._)return;"messages.dialogsSlice"===n._||n._;const{dialogs:i,messages:r,chats:s,users:o}=n;this.updateUsers(o),this.updateChats(s),this.updateMessages(r),this.updateDialogs(i)}async loadChatMessages(t,e,n){const i=this.getPeerId(t.peer);let r;if(this.chatMessages.has(i)){if(r=this.chatMessages.get(i),!e||e>r[r.length-1].id)return void this.emitter.trigger("chatMessagesUpdate",{chatId:i,messages:r})}else{r=[];const n=this.messages.get(t.top_message);n&&(r.push(n),e||(e=n.id)),this.chatMessages.set(i,r),this.emitter.trigger("chatMessagesUpdate",{chatId:i,messages:r})}const s=await h.callMethod("messages.getHistory",{peer:this.getInputPeer(t.peer),offset_id:e,limit:n,offset_date:0});this.updateMessages(s.messages),this.updateUsers(s.users),this.updateChats(s.chats),this.updateChatMessages(i,s.messages,!0)}updateDialogs(t){for(const e of t){const t=this.getPeerId(e.peer);this.peerDialogs.set(t,e)}this.dialogs=this.dialogs.concat(t),this.emitter.trigger("dialogsUpdate",this.dialogs),this.preloadDialogsMessages(t)}async preloadDialogsMessages(t){if(!this.dialogsPreloaded){this.dialogsPreloaded=!0;for(const e of t)this.chatMessages.has(this.getPeerId(e.peer))||await this.loadChatMessages(e,0,10)}}updateUsers(t){for(const e of t)this.users.set(e.id,e)}updateChats(t){for(const e of t)this.chats.set(e.id,e)}updateMessages(t){for(const e of t)this.messages.set(e.id,e)}updateChatMessages(t,e,n=!1){const i=this.chatMessages.get(t);i&&(n?i.push(...e):i.unshift(...e),this.emitter.trigger("chatMessagesUpdate",{chatId:t,messages:i}))}sendMessage(t,e){return h.callMethod("messages.sendMessage",{message:e,peer:this.getInputPeer(t),random_id:Math.floor(1e9*Math.random())}).then(t=>{this.handleUpdates(t)})}saveDraft(t,e){return h.callMethod("messages.saveDraft",{message:e,peer:this.getInputPeer(t)})}getDialog(t){return this.peerDialogs.get(t)}getPeerId(t){switch(t._){case"peerUser":return t.user_id;case"peerChat":return t.chat_id;case"peerChannel":return t.channel_id}}getPeerData(t){switch(t._){case"peerUser":return this.users.get(t.user_id);case"peerChat":return this.chats.get(t.chat_id);case"peerChannel":return this.chats.get(t.channel_id)}}getPeerName(t,e=!0){const n=this.getPeerData(t);return n?"peerUser"===t._?n.pFlags.deleted?"Deleted Account":e?[n.first_name,n.last_name].join(" ").trim():n.first_name||n.last_name||"":n.title||"":""}getPeerPhoto(t){const e=this.getPeerData(t);return!!e&&e.photo}getInputPeer(t){if(!t)return{_:"inputPeerEmpty"};const e=this.getPeerData(t);switch(t._){case"peerUser":return{_:"inputPeerUser",user_id:t.user_id,access_hash:e.access_hash||0};case"peerChat":return{_:"inputPeerChat",chat_id:t.chat_id,access_hash:e.access_hash||0};case"peerChannel":return{_:"inputPeerChannel",channel_id:t.channel_id,access_hash:e.access_hash||0}}}};function yt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}window.MessagesApiManager=ft;const bt=new class{constructor(){yt(this,"jpegHeader",vt("/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDACgcHiMeGSgjISMtKygwPGRBPDc3PHtYXUlkkYCZlo+AjIqgtObDoKrarYqMyP/L2u71////m8H////6/+b9//j/2wBDASstLTw1PHZBQXb4pYyl+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj/wAARCAAAAAADASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwA=")),yt(this,"jpegFooter",vt("/9k="))}choosePhotoSize(t,e="m"){const n=t.find(t=>t.type===e);return n||("i"!==e?t.find(t=>"i"!==t.type):void 0)}getPhotoStrippedSize(t){const e=this.choosePhotoSize(t,"i");if(e&&1===e.bytes[0]){const t=this.jpegHeader,n=this.jpegFooter;return"data:image/jpeg;base64,"+function(t){t instanceof ArrayBuffer&&(t=new Uint8Array(t));let e="";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return btoa(e)}(function(...t){let e=0;for(const n of t)e+=n.byteLength||n.length||0;const n=new Int8Array(e);let i=0;for(const e of t)n.set(e instanceof ArrayBuffer?new Int8Array(e):e,i),i+=e.byteLength||e.length;return n.buffer}(t.subarray(0,164),e.bytes.subarray(1,2),t.subarray(165,166),e.bytes.subarray(2,3),t.subarray(167),e.bytes.subarray(3),n))}}};function vt(t){const e=atob(t),n=new Uint8Array(e.length);for(let i=0;i<t.length;i++)n[i]=e.charCodeAt(i);return n}function Ct(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}window.MediaApiManager=bt;const At=new class{constructor(){Ct(this,"files",new Map),Ct(this,"queue",[]),Ct(this,"inProgress",0),Ct(this,"connections",new Map)}getBlobUrl(t){return URL.createObjectURL(t)}checkQueue(t){if(this.inProgress++<2)return Promise.resolve();const e=this.queue.findIndex(e=>e.priority<t),n=s();return this.queue.splice(e,0,{priority:t,deferred:n}),n.promise}queueDone(){this.inProgress--;const t=this.queue.shift();t&&t.deferred.resolve()}getConnection(t){let e;if(this.connections.has(t)){const n=this.connections.get(t);e=n.connection,n.processCount++}else e=new d({dcId:t,upload:!0}),this.connections.set(t,{connection:e,processCount:1});return e}connectionDone(t){const e=t.getDcId(),n=this.connections.get(e);n&&--n.processCount||(this.connections.delete(e),t.destroy())}async loadFile(t,e,{priority:n=1,cache:i=!1,mimeType:r="",size:s=0,onProgress:o,signal:a}={}){if(i)try{const e=await this.getFromCache(t);if(e)return At.getBlobUrl(e)}catch(t){console.warn(t)}const c=[],u=this.getConnection(e);let l=!1;a&&a.addEventListener("abort",()=>l=!0);try{await this.checkQueue(n);for(let e=0,n=0;;e+=524288){const i=await u.callMethod("upload.getFile",{location:t,offset:e,limit:524288});if(l)throw new Error("File download aborted");if(c.push(i.bytes),n+=i.bytes.byteLength,o&&o(n),r||(r=this.getMimeType(i.type)),s&&n>=s||!s&&i.bytes.byteLength<524288)break}}finally{this.queueDone(),this.connectionDone(u)}const d=new Blob(c,{type:r});if(i)try{this.saveToCache(t,d)}catch(t){console.warn(t)}return At.getBlobUrl(d)}getMimeType(t){switch(t._){case"storage.fileJpeg":return"image/jpeg";case"storage.fileGif":return"image/gif";case"storage.filePng":return"image/png";case"storage.filePdf":return"application/pdf";case"storage.fileMp3":return"audio/mpeg";case"storage.fileMov":return"video/quicktime";case"storage.fileMp4":return"video/mp4";case"storage.fileWebp":return"image/webp";default:return""}}async getFromCache(t){const e=(await this.openDb()).transaction(["files"],"readonly").objectStore("files").get(this.getDbFileName(t));return this.getDbRequestPromise(e)}async saveToCache(t,e){const n=(await this.openDb()).transaction(["files"],"readwrite").objectStore("files").put(e,this.getDbFileName(t));return this.getDbRequestPromise(n)}openDb(){return new Promise((t,e)=>{const n=indexedDB.open("telegram_cache",1);n.onerror=t=>{e()},n.onsuccess=e=>{const n=e.target.result;t(n)},n.onupgradeneeded=e=>{e.target.result.createObjectStore("files"),t(this.openDb())}})}getDbFileName(t){return t._+(t.id||t.volume_id+t.local_id)}getDbRequestPromise(t){return new Promise((e,n)=>{t.onerror=n,t.onsuccess=t=>{e(t.target.result)}})}loadPeerPhoto(t,e,n,i){const r={_:"inputPeerPhotoFileLocation",peer:ft.getInputPeer(t),volume_id:e.volume_id,local_id:e.local_id};return this.loadFile(r,n,i)}loadMessagePhoto(t,e,n={}){const i={_:"inputPhotoFileLocation",id:t.id,access_hash:t.access_hash,file_reference:t.file_reference,thumb_size:e};return this.loadFile(i,t.dc_id,n)}loadMessageDocumentThumb(t,e,n={}){const i={_:"inputDocumentFileLocation",id:t.id,access_hash:t.access_hash,file_reference:t.file_reference,thumb_size:e};return this.loadFile(i,t.dc_id,n)}loadMessageDocument(t,e={}){const n={_:"inputDocumentFileLocation",id:t.id,access_hash:t.access_hash,file_reference:t.file_reference};return Object.assign(e,{mimeType:t.mime_type,size:t.size}),this.loadFile(n,t.dc_id,e)}};function Et(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}window.FileApiManager=At;const Tt=new class{constructor(){Et(this,"close",()=>{this.state=null,this.dom.content.innerHTML="",this.container.hidden=!0}),Et(this,"download",()=>{if(this.url){const t=document.createElement("a");t.href=this.url,t.download=this.object._+this.object.id,t.click()}}),this.container=u('\n      <div class="media_view" hidden>\n        <div class="media_view_controls">\n          <button class="media_view_controls_item media_view_controls_item-delete" data-js-label="button_delete"></button>\n          <button class="media_view_controls_item media_view_controls_item-forward" data-js-label="button_forward"></button>\n          <button class="media_view_controls_item media_view_controls_item-download" data-js-label="button_download"></button>\n          <button class="media_view_controls_item media_view_controls_item-close" data-js-label="button_close"></button>\n        </div>\n        <div class="media_view_content" data-js-label="content"></div>\n      </div>\n    '),this.dom=c(this.container),this.dom.button_download.addEventListener("click",this.download),this.dom.button_close.addEventListener("click",this.close),document.body.appendChild(this.container)}showPhoto(t,e){const n=t.sizes[t.sizes.length-1];this.initLoading(document,e,n.size);const i=this.state.abortController,r=this.state.onProgress;At.loadMessagePhoto(t,n.type,{onProgress:r,signal:i.signal}).then(t=>{this.dom.content.innerHTML=`<img class="media_view_content_image" src="${t}">`,this.onLoaded(t)})}showGif(t,e){this.initLoading(t,e,t.size);const n=this.state.abortController,i=this.state.onProgress;At.loadMessageDocument(t,{onProgress:i,signal:n.signal}).then(t=>{this.dom.content.innerHTML=`<video class="media_view_content_gif" src="${t}" autoplay loop></video>`,this.onLoaded(t)})}showVideo(t,e){this.initLoading(t,e,t.size);const n=this.state.abortController,i=this.state.onProgress;At.loadMessageDocument(t,{onProgress:i,signal:n.signal}).then(t=>{this.dom.content.innerHTML=`<video class="media_view_content_video" src="${t}" autoplay controls></video>`,this.onLoaded(t)})}initLoading(t,e,n){this.abort(),this.state={},this.state.object=t,this.state.abortController=new AbortController;const i=u('\n      <div class="messages_item_media_progress">\n        <svg class="messages_item_media_progress_svg" viewBox="0 0 36 36" xmlns="http://www.w3.org/2000/svg">\n          <path class="messages_item_media_progress_path" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"/>\n        </svg>\n      </div>\n    '),r=o(".messages_item_media_progress_path",i);i.addEventListener("click",t=>{t.stopPropagation(),this.state.abortController.abort()}),e.appendChild(i),e.classList.add("messages_item_media_thumb-loading");const s=()=>{i.remove(),e.classList.remove("messages_item_media_thumb-loading")};this.state.onProgress=function(t){const e=Math.round(100*Math.max(0,Math.min(1,t/n)));100===e?s():r.style.strokeDasharray=e+", 100"},this.state.abortController.signal.addEventListener("abort",s)}onLoaded(t){this.container.hidden=!1,this.state.url=t}abort(){this.state&&this.state.abortController&&this.state.abortController.abort(),this.state=null}};window.MediaViewcontroller=Tt;const It=/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g;function wt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const Pt=new class{constructor(){wt(this,"dialog",null),wt(this,"chatId",null),wt(this,"messageElements",new Map),wt(this,"offsetMsgId",0),wt(this,"onChatMessagesUpdate",t=>{const{chatId:e,messages:n}=t.detail;e===this.chatId&&this.renderMessages(n)}),wt(this,"onNewMessage",t=>{const{chatId:e,message:n}=t.detail;this.chatId}),wt(this,"onScroll",()=>{const t=this.scrollContainer;this.scrolling=t.scrollTop<t.scrollWidth-t.offsetHeight,!this.loading&&!this.noMore&&t.scrollTop<150&&this.loadMore()}),wt(this,"onThumbClick",t=>{const e=t.currentTarget,n=+e.closest(".messages_item").dataset.id,i=ft.messages.get(n);if(i.media.photo)Tt.showPhoto(i.media.photo,e);else if(i.media.document){const t=i.media.document,n=this.getDocumentAttributes(t);"video"===n.type?Tt.showVideo(t,e):"gif"===n.type&&Tt.showGif(t,e)}}),wt(this,"onFileClick",t=>{const e=+t.currentTarget.closest(".messages_item").dataset.id,n=ft.messages.get(e);if(n){const t=n.media.document;FileApiManager.loadMessageDocument(t).then(t=>{console.log("downloaded",t)}),console.log(`started loading ${t.mime_type} file`)}console.log(e,n)})}init(){this.header=o(".messages_header"),this.footer=o(".messages_footer"),this.scrollContainer=o(".messages_scroll"),this.container=o(".messages_list"),this.loader=u('<div class="lds-ring"><div></div><div></div><div></div><div></div></div>'),this.scrollContainer.addEventListener("scroll",this.onScroll),this.initPlaceholder(),this.initNewMessageForm(),ft.initUpdatesState(),ft.emitter.on("chatMessagesUpdate",this.onChatMessagesUpdate),ft.emitter.on("chatNewMessage",this.onNewMessage)}setChat(t){t!==this.dialog?(this.dialog&&this.exitChat(),this.dialog=t,this.chatId=ft.getPeerId(t.peer),this.placeholder.remove(),this.showHeader(t),this.footer.hidden=!this.canSendMessage(t),this.container.append(this.loader),this.loadMore()):this.scrollToBottom()}exitChat(){this.header.hidden=!0,this.footer.hidden=!0,this.messageElements.clear(),this.dialog=null,this.chatId=null,this.lastMsgId=null,this.offsetMsgId=null,this.container.innerHTML="",this.loading=!1,this.noMore=!1,this.scrolling=!1}initPlaceholder(){this.placeholder=u('\n      <div class="messages_placeholder">\n        <div class="messages_placeholder_title">Open chat<br>or create a new one</div>\n        <div class="messages_placeholder_actions">\n          <button class="messages_placeholder_action messages_placeholder_action-private mdc-icon-button"><div class="messages_placeholder_action_label">Private</div></button>\n          <button class="messages_placeholder_action messages_placeholder_action-group mdc-icon-button"><div class="messages_placeholder_action_label">Group</div></button>\n          <button class="messages_placeholder_action messages_placeholder_action-channel mdc-icon-button"><div class="messages_placeholder_action_label">Channel</div></button>  \n        </div>\n      </div>\n    '),this.container.append(this.placeholder)}initNewMessageForm(){this.newMessageInput=o(".messages_new_message_input"),this.newMessageButton=o(".messages_new_message_button");const t=this.newMessageInput,e=this.newMessageButton,n=function(t,e,n){let i;return function(...r){const s=n&&!i;clearTimeout(i),i=setTimeout(()=>{i=null,n||t(...r)},e),s&&t(...r)}}((t,e)=>{ft.saveDraft(t,e)}),i=()=>{t.style.height="",t.style.height=t.scrollHeight+"px";const i=t.value.trim();e.classList.toggle("messages_new_message_button_send",!!i),n(this.dialog.peer,i)};t.addEventListener("input",i),t.addEventListener("change",i);const r=()=>{const e=t.value.trim();e&&(ft.sendMessage(this.dialog.peer,e),t.value="",i())};t.addEventListener("keydown",t=>{13!==t.keyCode||t.shiftKey||(r(),t.preventDefault())}),e.addEventListener("click",r)}showHeader(t){const e=ft.getPeerName(t.peer);let n="",i="";if("peerUser"===t.peer._){const e=ft.getPeerData(t.peer);e.pFlags.bot?n="bot":e.status&&(n=this.getUserStatus(e.status),"userStatusOnline"===e.status._&&(i="messages_header_peer_status-online"))}else{const e=ft.getPeerData(t.peer);n="peerChannel"===t.peer._?e.pFlags.megagroup?"supergroup":"channel":"group"}this.header.innerHTML=`\n      <div class="messages_header_peer">\n        <div class="messages_header_peer_photo"></div>\n        <div class="messages_header_peer_description">\n          <div class="messages_header_peer_name">${e}</div>\n          <div class="messages_header_peer_status ${i}">${n}</div>\n        </div>\n      </div>\n      <div class="messages_header_actions">\n        <button class="messages_header_action_search mdc-icon-button"></button>\n        <button class="messages_header_action_more mdc-icon-button"></button>\n      </div>\n    `,this.header.hidden=!1,o(".messages_header_peer").addEventListener("click",()=>{});const r=o(".messages_header_peer_photo",this.header),s=ft.getPeerPhoto(t.peer);s&&"chatPhotoEmpty"!==s._&&FileApiManager.loadPeerPhoto(t.peer,s.photo_small,s.dc_id,{priority:10,cache:!0}).then(t=>{r.style.backgroundImage=`url(${t})`}),Array.from(o(".messages_header_actions",this.header).children).forEach(t=>{new W(t).unbounded=!0})}loadMore(){this.loading=!0,ft.loadChatMessages(this.dialog,this.offsetMsgId,30).catch(t=>{const e="An error occurred"+(t.error_message?": "+t.error_message:"");App.alert(e)}).finally(()=>{this.loading=!1})}canSendMessage(t){const e=ft.getPeerData(t.peer);return!!e&&("user"===e._||"chat"===e._||"channel"===e._&&(e.pFlags.creator||e.pFlags.megagroup))}scrollToBottom(){this.scrollContainer.scrollTop=this.scrollContainer.scrollHeight}renderMessages(t){if(this.loader.remove(),this.offsetMsgId&&t[t.length-1].id===this.offsetMsgId&&t[0].id===this.lastMsgId)return void(this.noMore=!0);const e=this.scrollContainer.scrollHeight;if(this.lastMsgId){const e=document.createDocumentFragment();for(let n=0;t[n].id>this.lastMsgId;n++){const i=t[n],r=t[n-1],s=t[n+1],o=i.from_id&&r&&r.from_id===i.from_id,a=i.from_id&&s&&s.from_id===i.from_id,c=this.buildMessageEl(i,{stickToNext:o,stickToPrev:a});e.append(c)}this.container.prepend(e)}const n=document.createDocumentFragment();t.forEach((e,i)=>{if(this.offsetMsgId&&e.id>=this.offsetMsgId)return;const r=t[i-1],s=t[i+1],o=e.from_id&&r&&r.from_id===e.from_id,a=e.from_id&&s&&s.from_id===e.from_id,c=this.buildMessageEl(e,{stickToNext:o,stickToPrev:a});n.append(c)}),this.container.append(n),this.lastMsgId=t[0].id,this.offsetMsgId=t[t.length-1].id,this.scrolling?this.scrollContainer.scrollTop=this.scrollContainer.scrollHeight-e:this.scrollContainer.scrollHeight<=this.scrollContainer.offsetHeight?this.loadMore():this.scrollToBottom()}buildMessageEl(t,e){const n=document.createElement("div");return"message"===t._?(n.className=this.getClasses({messages_item:!0,"messages_item-out":t.pFlags.out,"messages_item-stick-to-next":e.stickToNext,"messages_item-stick-to-prev":e.stickToPrev}),this.renderMessageContent(n,t,e)):"messageService"===t._&&(n.className="messages_item-type-service",n.innerText=this.getServiceMessageText(t)),n.dataset.id=t.id,this.messageElements.set(t.id,n),n}getClasses(t){let e="";for(const[n,i]of Object.entries(t))i&&(e+=" "+n);return e}renderMessageContent(t,e,n){const i=n.stickToPrev?"":this.formatAuthorName(e),r=this.getMessageMediaThumb(e.media);t.innerHTML=`\n      <div class="messages_item_content">\n        ${i}\n        ${this.formatMessageContent(e,r)}\n        <div class="messages_item_date" title="${this.formatMessageDate(e.date)}">${this.formatMessageTime(e.date)}</div>\n      </div>\n    `,r&&this.loadMessageMediaThumb(t,r)}formatAuthorName(t){if(t.from_id&&"peerUser"!==this.dialog.peer._){const e=t.from_id;return`<a class="messages_item_author" href="#user/${e}">${ft.getPeerName({_:"peerUser",user_id:e})}</a>`}return""}getMessageMediaThumb(t){if(t)switch(t._){case"messageMediaPhoto":const e=t.photo;return{type:"photo",object:e,sizes:e.sizes};case"messageMediaDocument":{const e=t.document,n=this.getDocumentAttributes(e);if(["video","gif","sticker"].includes(n.type))return{type:n.type,object:e,sizes:e.thumbs}}break;case"messageMediaWebPage":if(t.webpage.photo){const e=t.webpage.photo;return{type:"photo",object:e,sizes:e.sizes}}if(t.webpage.document){const e=t.webpage.document,n=this.getDocumentAttributes(e);if(["video","gif","sticker"].includes(n.type))return{type:n.type,object:e,sizes:e.thumbs}}}}getThumbWidth(t){return Math.round(t.w/t.h*200)}async loadMessageMediaThumb(t,e){let n=o(".messages_item_media_thumb",t);n.addEventListener("click",this.onThumbClick);const i=e.sizes;if(bt.choosePhotoSize(i,"i")){const t=bt.getPhotoStrippedSize(i);n.innerHTML=`<img class="messages_item_media_thumb_image messages_item_media_thumb_image-blurred" src="${t}">`}try{const t=bt.choosePhotoSize(i,"m");let r;r="document"===e.object._?await FileApiManager.loadMessageDocumentThumb(e.object,t.type,{cache:!0}):await FileApiManager.loadMessagePhoto(e.object,t.type,{cache:!0}),n.innerHTML=`<img class="messages_item_media_thumb_image" src="${r}">`}catch(t){console.log("thumb load error",t)}}formatMessageContent(t,e){const n=t.media,i=this.formatText(t);if(!n)return i;switch(n._){case"messageMediaPhoto":return this.formatThumb(e,i);case"messageMediaDocument":return this.formatDocument(n,e,i);case"messageMediaWebPage":return i+this.formatWebPage(n,e,i);case"messageMediaPoll":return i+"Poll";case"messageMediaGeo":return i+"Geo";case"messageMediaGeoLive":return i+"Live Geo";case"messageMediaContact":return i+"Contact";case"messageMediaUnsupported":return"Message unsupported";default:return i+"["+n._+"]"}}formatDocument(t,e,n){if(e)return this.formatThumb(e,n);const i=this.getDocumentAttributes(t.document);switch(i.type){case"video":return"[video]";case"gif":return"[gif]";case"sticker":return"[sticker]"}return`\n      ${n}\n      <div class="document">\n        <div class="document_col">\n          <div class="document_icon"></div>\n        </div>\n        <div class="document_col">\n          <div class="document_filename">${i.file_name}</div>\n          <div class="document_size">${this.formatDocSize(t.document.size)}</div>        \n        </div>      \n      </div>\n    `}formatDocSize(t){if(t){if(t<1024)return"1 KB";if(t<1048576)return Math.floor(t/1024)+" KB";if(t<1073741824)return Math.floor(t/1048576)+" MB"}return""}formatWebPage(t,e){const n=t.webpage;return"webPage"===n._?`\n        \x3c!--a href="${n.url}" target="_blank">${n.display_url}</a--\x3e\n        <div class="webpage">${this.formatWebpageContent(n,e)}</div>\n      `:"webPagePending"===n._?"Content is loading...":"Content not available"}formatWebpageContent(t,e){const n=this.formatThumb(e);switch(t.type){case"telegram_message":case"article":return`\n          ${n}\n          <a class="wepbage_site_name" href="${t.url}" target="_blank">${t.site_name}</a>\n          <div class="wepbage_title">${t.title||""}</div>\n          <div class="webpage_description">${this.replaceLineBreaks(t.description)}</div>\n        `;case"photo":case"video":case"document":if(n)return n}return"["+t.type+"]"}replaceLineBreaks(t=""){return t.replace(/\n/g,"<br>")}safeText(t){return t.replace(/</g,"&lt;").replace(">","&gt;")}formatText(t){const e=t.message;let n="",i="";if(t.entities){let i=0;for(const r of t.entities){n+=this.safeText(e.substring(i,r.offset)),i=r.offset+r.length;const t=this.safeText(e.substr(r.offset,r.length));n+=this.processEntity(t,r)}n+=this.safeText(e.substring(i))}else n=e;if(n){if((n=this.replaceLineBreaks(n)).length<=12&&!t.media){const t=n.match(It);t&&t.length<=3&&t.join("").length===n.length&&(i+=" messages_item_text_emoji_big")}n=`<span class="messages_item_text ${i}">${n}</span>`}return n}processEntity(t,e){switch(e._){case"messageEntityUrl":return`<a href="${/^https?:\/\//.test(t)?t:"http://"+t}" target="_blank" rel="noopener" data-entity="url">${t}</a>`;case"messageEntityTextUrl":return`<a href="${e.url}" target="_blank" rel="noopener" data-entity="text_url">${t}</a>`;case"messageEntityBold":return`<b>${t}</b>`;case"messageEntityItalic":return`<i>${t}</i>`;case"messageEntityUnderline":return`<u>${t}</u>`;case"messageEntityStrike":return`<s>${t}</s>`;case"messageEntityCode":return`<code>${t}</code>`;case"messageEntityPre":return`<pre>${t}</pre>`;case"textEntityTypePreCode":return`<pre><code>${t}</code></pre>`;case"messageEntityMention":return`<a href="${t}" data-entity="mention">${t}</a>`;case"messageEntityMentionName":return`<a href="#user/${e.user_id}" data-entity="mention">${t}</a>`;case"messageEntityHashtag":return`<a href="${t}" data-entity="hashtag">${t}</a>`;case"messageEntityBotCommand":return`<a data-entity="bot_command">${t}</a>`;case"messageEntityEmail":return`<a href="mailto:${t}" data-entity="email_address">${t}</a>`;case"messageEntityPhone":return`<a href="tel:${t}" data-entity="phone_number">${t}</a>`;default:return t}}formatThumb(t,e){let n,i,r="";if(t){const s=bt.choosePhotoSize(t.sizes);n=this.getThumbWidth(s),e&&n<300&&(n=300),i=200,r+=`<div class="messages_item_media_thumb messages_item_media_thumb-${t.type}" style="width:${n}px;height:200px;"></div>`}if(e){r+=`<div class="messages_item_media_caption" style="${n?`width:${n}px;`:""}">${e}</div>`}return r}formatMessageTime(t){const e=new Date(1e3*t);return e.getHours()+":"+e.getMinutes().toString().padStart(2,"0")}formatMessageDate(t){return new Date(1e3*t).toLocaleString().replace(/\//g,".")}getDocumentAttributes(t){const e={},n=t.thumbs&&t.thumbs.length;for(const i of t.attributes)switch(i._){case"documentAttributeFilename":e.file_name=i.file_name;break;case"documentAttributeAudio":e.duration=i.duration,e.audioTitle=i.title,e.audioPerformer=i.performer,e.type=i.pFlags.voice?"voice":"audio";break;case"documentAttributeVideo":e.duration=i.duration,e.w=i.w,e.h=i.h,n&&i.pFlags.round_message?e.type="round":n&&(e.type="video");break;case"documentAttributeSticker":e.sticker=!0,void 0!==i.alt&&(e.stickerEmoji=i.alt),i.stickerset&&("inputStickerSetEmpty"===i.stickerset._?delete i.stickerset:"inputStickerSetID"===i.stickerset._&&(e.stickerSetInput=i.stickerset)),n&&"image/webp"===t.mime_type&&(e.type="sticker");break;case"documentAttributeImageSize":e.w=i.w,e.h=i.h,n&&"application/x-tgsticker"===t.mime_type&&(e.type="sticker");break;case"documentAttributeAnimated":"image/gif"!==t.mime_type&&"video/mp4"!==t.mime_type||!n||(e.type="gif"),e.animated=!0}if(!e.mime_type)switch(e.type){case"gif":e.mime_type="video/mp4";break;case"video":case"round":e.mime_type="video/mp4";break;case"sticker":e.mime_type="image/webp";break;case"audio":e.mime_type="audio/mpeg";break;case"voice":e.mime_type="audio/ogg";break;default:e.mime_type="application/octet-stream"}return e.file_name||(e.file_name=""),e}getServiceMessageText(t){switch(t.action._){case"messageActionChatCreate":return"Chat created";case"messageActionChatEditTitle":return"Chat name changed";case"messageActionChatEditPhoto":return"Chat photo changed";case"messageActionChatDeletePhoto":return"Chat photo deleted";case"messageActionChatAddUser":return"New member in the group";case"messageActionChatDeleteUser":return"User left the group.";case"messageActionChatJoinedByLink":return"A user joined the chat via an invite link";case"messageActionChannelCreate":return"The channel was created";case"messageActionChatMigrateTo":case"messageActionChannelMigrateFrom":return"Chat was upgraded to supergroup";case"messageActionPinMessage":return"A message was pinned";case"messageActionHistoryClear":return"Chat history was cleared";case"messageActionGameScore":return"Someone scored in a game";case"messageActionPaymentSent":return"A payment was sent";case"messageActionPhoneCall":return"A phone call";case"messageActionScreenshotTaken":return"A screenshot was taken";case"messageActionContactSignUp":return"A contact just signed up to telegram"}return""}getUserStatus(t){switch(t._){case"userStatusOnline":return"online";case"userStatusOffline":return"offline";case"userStatusRecently":return"last seen recently";case"userStatusLastWeek":return"last seen last week";case"userStatusLastMonth":return"last seen last month"}return"last seen long time ago"}};function St(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}window.MessagesController=Pt;const Mt=new class{constructor(){St(this,"chatElements",new Map),St(this,"onDialogsUpdate",t=>{const e=t.detail;this.renderChats(e)}),St(this,"onNewMessage",t=>{const{chatId:e,message:n}=t.detail,i=ft.peerDialogs.get(e);if(!i)return;const r=this.chatElements.get(e);this.renderChatPreviewContent(r,i)}),St(this,"onUpdateUnreadCount",t=>{const{chatId:e,dialog:n}=t.detail,i=this.chatElements.get(e);this.renderChatPreviewContent(i,n)}),St(this,"onScroll",t=>{const e=this.container;!this.loading&&e.scrollTop+e.offsetHeight>e.scrollHeight-150&&this.loadMore()}),St(this,"onChatClick",t=>{const e=t.currentTarget,n=+e.dataset.peerId,i=ft.getDialog(n);Pt.setChat(i);const r=this.container.querySelector(".chats_item-selected");r&&r.classList.remove("chats_item-selected"),e.classList.add("chats_item-selected")}),St(this,"onMainMenuClick",t=>{const e=o(".main_menu_button"),n=o(".main_menu_list");n.hidden=!n.hidden;const i=t=>{n.contains(t.target)||t.target===e||n.hidden||(n.hidden=!0,document.removeEventListener("click",i))};n.hidden?document.removeEventListener("click",i):document.addEventListener("click",i)})}init(){this.container=o(".chats_sidebar"),this.container.addEventListener("scroll",this.onScroll),this.menuButton=o(".main_menu_button"),this.menuButton.addEventListener("click",this.onMainMenuClick),ft.emitter.on("dialogsUpdate",this.onDialogsUpdate),ft.emitter.on("chatNewMessage",this.onNewMessage),ft.emitter.on("updateUnreadCount",this.onUpdateUnreadCount),this.loadMore()}loadMore(){this.loading=!0,ft.loadDialogs(this.offset,20).catch(t=>{const e="An error occurred"+(t.error_message?": "+t.error_message:"");App.alert(e)}).finally(()=>{this.loading=!1})}renderChats(t){const e=document.createDocumentFragment();for(const n of t){const t=ft.getPeerId(n.peer);if(this.chatElements.has(t))continue;const i=this.buildChatPreviewElement(n);e.append(i)}this.container.append(e);const n=t[t.length-1],i=ft.messages.get(n.top_message);this.offset={id:n.top_message,peer:n.peer,date:i.date}}buildChatPreviewElement(t){const e=ft.getPeerId(t.peer),n=document.createElement("div");return n.className="chats_item"+(t.pFlags.pinned?" chats_item_pinned":""),n.dataset.peerId=e,n.innerHTML='\n      <div class="chats_item_photo"></div>\n      <div class="chats_item_text"></div>\n      <span class="mdc-button__ripple"></span>\n    ',this.renderChatPreviewContent(n,t),this.loadChatPhoto(n,t),n.addEventListener("click",this.onChatClick),new W(n),this.chatElements.set(e,n),n}renderChatPreviewContent(t,e){const n=this.isPeerMe(e.peer)?"Saved Messages":ft.getPeerName(e.peer),i=this.getChatBadge(e),r=this.formatDate(e),s=ft.messages.get(e.top_message),a=s?this.getMessagePreview(s):"";o(".chats_item_text",t).innerHTML=`\n      <div class="chats_item_text_row">\n        <div class="chats_item_title">${n}</div>\n        <div class="chats_item_date">${r}</div>\n      </div>\n      <div class="chats_item_text_row">\n        <div class="chats_item_message">${a}</div>\n        ${i}\n      </div>\n    `}formatDate(t){const e=ft.messages.get(t.top_message);if(!e)return"";const n=new Date(1e3*e.date),i=Date.now();return n.getTime()>i-864e5?Pt.formatMessageTime(e.date):n.getTime()>i-5184e5?["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][n.getDay()]:n.getFullYear()===(new Date).getFullYear()?[n.getDate(),n.getMonth()+1].join("/"):[n.getDate(),n.getMonth()+1,n.getFullYear()].join("/")}getChatBadge(t){if(t.unread_count){let e,n="chats_item_badge chats_item_badge-unread";return t.notify_settings.mute_until&&(n+=" chats_item_badge-unread_muted"),`<span class="${n}">${e=t.unread_count>1e6?(t.unread_count/1e6).toFixed(1)+"M":t.unread_count>1e3?(t.unread_count/1e3).toFixed(1)+"K":t.unread_count}</span>`}return t.pFlags.pinned?'<span class="chats_item_badge chats_item_badge-pinned"></span>':""}getMessagePreview(t){let e=t.message;if(!e){e=`<span class="chats_item_message_content_label">${this.getMessageContentTypeLabel(t.media)}</span>`}if("peerChannel"===t.to_id._&&t.from_id){e=ft.users.get(t.from_id).first_name+": "+e}return e}getMessageContentTypeLabel(t){if(!t)return"";switch(t._){case"messageMediaPhoto":return"Photo";case"messageMediaDocument":return this.getMessageContentDocumentLabel(t.document);case"messageMediaWebPage":return"Link";case"messageMediaPoll":return"Poll";case"messageMediaGeo":return"Geo";case"messageMediaGeoLive":return"Live Geo";case"messageMediaContact":return"Contact";case"messageMediaUnsupported":return"Message unsupported"}return""}getMessageContentDocumentLabel(t){const e=Pt.getDocumentAttributes(t);switch(e.type){case"video":return"Video";case"gif":return"Gif";case"sticker":return"Sticker"+(e.stickerEmoji?" "+e.stickerEmoji:"");case"voice":return"Voice";case"audio":return"Audio"}return"File"}updateChatPreview(t){const e=this.chatsElements.get(t.id);e&&this.renderChatPreviewContent(e,t)}loadChatPhoto(t,e){const n=o(".chats_item_photo",t);if(this.isPeerMe(e.peer))return void n.classList.add("chats_item_photo_saved_messages");const i=ft.getPeerPhoto(e.peer);i&&"chatPhotoEmpty"!==i._?FileApiManager.loadPeerPhoto(e.peer,i.photo_small,i.dc_id,{priority:10,cache:!0}).then(t=>{n.innerHTML=`<img src="${t}" alt class="chats_item_photo_img">`}).catch(t=>{console.warn("chat photo load error",t),this.setChatPhotoPlaceholder(n,e)}):this.setChatPhotoPlaceholder(n,e)}setChatPhotoPlaceholder(t,e){const n=ft.getPeerId(e.peer),i=ft.getPeerName(e.peer),r=["#FFBF69","#247BA0","#EA526F","#2EC4B6","#F79256","#662C91","#049A8F","#06D6A0","#F25C54"];t.style.backgroundColor=r[n%r.length],t.innerHTML='<div class="chats_item_photo_placeholder">'+i.charAt(0)+"</div>"}isPeerMe(t){return"peerUser"===t._&&t.user_id===App.auth_user_id}};window.ChatsController=Mt;
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
var Ot={CLOSING:"mdc-snackbar--closing",OPEN:"mdc-snackbar--open",OPENING:"mdc-snackbar--opening"},Lt={ACTION_SELECTOR:".mdc-snackbar__action",ARIA_LIVE_LABEL_TEXT_ATTR:"data-mdc-snackbar-label-text",CLOSED_EVENT:"MDCSnackbar:closed",CLOSING_EVENT:"MDCSnackbar:closing",DISMISS_SELECTOR:".mdc-snackbar__dismiss",LABEL_SELECTOR:".mdc-snackbar__label",OPENED_EVENT:"MDCSnackbar:opened",OPENING_EVENT:"MDCSnackbar:opening",REASON_ACTION:"action",REASON_DISMISS:"dismiss",SURFACE_SELECTOR:".mdc-snackbar__surface"},Dt={DEFAULT_AUTO_DISMISS_TIMEOUT_MS:5e3,INDETERMINATE:-1,MAX_AUTO_DISMISS_TIMEOUT_MS:1e4,MIN_AUTO_DISMISS_TIMEOUT_MS:4e3,SNACKBAR_ANIMATION_CLOSE_TIME_MS:75,SNACKBAR_ANIMATION_OPEN_TIME_MS:150,ARIA_LIVE_DELAY_MS:1e3},Nt=Ot.OPENING,kt=Ot.OPEN,Rt=Ot.CLOSING,Ft=Lt.REASON_ACTION,xt=Lt.REASON_DISMISS,Ht=function(t){function e(n){var i=t.call(this,y({},e.defaultAdapter,n))||this;return i.isOpen_=!1,i.animationFrame_=0,i.animationTimer_=0,i.autoDismissTimer_=0,i.autoDismissTimeoutMs_=Dt.DEFAULT_AUTO_DISMISS_TIMEOUT_MS,i.closeOnEscape_=!0,i}return f(e,t),Object.defineProperty(e,"cssClasses",{get:function(){return Ot},enumerable:!0,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return Lt},enumerable:!0,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return Dt},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{addClass:function(){},announce:function(){},notifyClosed:function(){},notifyClosing:function(){},notifyOpened:function(){},notifyOpening:function(){},removeClass:function(){}}},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){this.clearAutoDismissTimer_(),cancelAnimationFrame(this.animationFrame_),this.animationFrame_=0,clearTimeout(this.animationTimer_),this.animationTimer_=0,this.adapter_.removeClass(Nt),this.adapter_.removeClass(kt),this.adapter_.removeClass(Rt)},e.prototype.open=function(){var t=this;this.clearAutoDismissTimer_(),this.isOpen_=!0,this.adapter_.notifyOpening(),this.adapter_.removeClass(Rt),this.adapter_.addClass(Nt),this.adapter_.announce(),this.runNextAnimationFrame_((function(){t.adapter_.addClass(kt),t.animationTimer_=setTimeout((function(){var e=t.getTimeoutMs();t.handleAnimationTimerEnd_(),t.adapter_.notifyOpened(),e!==Dt.INDETERMINATE&&(t.autoDismissTimer_=setTimeout((function(){t.close(xt)}),e))}),Dt.SNACKBAR_ANIMATION_OPEN_TIME_MS)}))},e.prototype.close=function(t){var e=this;void 0===t&&(t=""),this.isOpen_&&(cancelAnimationFrame(this.animationFrame_),this.animationFrame_=0,this.clearAutoDismissTimer_(),this.isOpen_=!1,this.adapter_.notifyClosing(t),this.adapter_.addClass(Ot.CLOSING),this.adapter_.removeClass(Ot.OPEN),this.adapter_.removeClass(Ot.OPENING),clearTimeout(this.animationTimer_),this.animationTimer_=setTimeout((function(){e.handleAnimationTimerEnd_(),e.adapter_.notifyClosed(t)}),Dt.SNACKBAR_ANIMATION_CLOSE_TIME_MS))},e.prototype.isOpen=function(){return this.isOpen_},e.prototype.getTimeoutMs=function(){return this.autoDismissTimeoutMs_},e.prototype.setTimeoutMs=function(t){var e=Dt.MIN_AUTO_DISMISS_TIMEOUT_MS,n=Dt.MAX_AUTO_DISMISS_TIMEOUT_MS,i=Dt.INDETERMINATE;if(!(t===Dt.INDETERMINATE||t<=n&&t>=e))throw new Error("\n        timeoutMs must be an integer in the range "+e+"–"+n+"\n        (or "+i+" to disable), but got '"+t+"'");this.autoDismissTimeoutMs_=t},e.prototype.getCloseOnEscape=function(){return this.closeOnEscape_},e.prototype.setCloseOnEscape=function(t){this.closeOnEscape_=t},e.prototype.handleKeyDown=function(t){("Escape"===t.key||27===t.keyCode)&&this.getCloseOnEscape()&&this.close(xt)},e.prototype.handleActionButtonClick=function(t){this.close(Ft)},e.prototype.handleActionIconClick=function(t){this.close(xt)},e.prototype.clearAutoDismissTimer_=function(){clearTimeout(this.autoDismissTimer_),this.autoDismissTimer_=0},e.prototype.handleAnimationTimerEnd_=function(){this.animationTimer_=0,this.adapter_.removeClass(Ot.OPENING),this.adapter_.removeClass(Ot.CLOSING)},e.prototype.runNextAnimationFrame_=function(t){var e=this;cancelAnimationFrame(this.animationFrame_),this.animationFrame_=requestAnimationFrame((function(){e.animationFrame_=0,clearTimeout(e.animationTimer_),e.animationTimer_=setTimeout(t,0)}))},e}(C),Bt=Dt.ARIA_LIVE_DELAY_MS,Ut=Lt.ARIA_LIVE_LABEL_TEXT_ATTR;function jt(t,e){void 0===e&&(e=t);var n=t.getAttribute("aria-live"),i=e.textContent.trim();i&&n&&(t.setAttribute("aria-live","off"),e.textContent="",e.innerHTML='<span style="display: inline-block; width: 0; height: 1px;">&nbsp;</span>',e.setAttribute(Ut,i),setTimeout((function(){t.setAttribute("aria-live",n),e.removeAttribute(Ut),e.textContent=i}),Bt))}
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Vt=Lt.SURFACE_SELECTOR,zt=Lt.LABEL_SELECTOR,Gt=Lt.ACTION_SELECTOR,Wt=Lt.DISMISS_SELECTOR,$t=Lt.OPENING_EVENT,qt=Lt.OPENED_EVENT,Kt=Lt.CLOSING_EVENT,Xt=Lt.CLOSED_EVENT,Qt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return f(e,t),e.attachTo=function(t){return new e(t)},e.prototype.initialize=function(t){void 0===t&&(t=function(){return jt}),this.announce_=t()},e.prototype.initialSyncWithDOM=function(){var t=this;this.surfaceEl_=this.root_.querySelector(Vt),this.labelEl_=this.root_.querySelector(zt),this.actionEl_=this.root_.querySelector(Gt),this.handleKeyDown_=function(e){return t.foundation_.handleKeyDown(e)},this.handleSurfaceClick_=function(e){var n=e.target;t.isActionButton_(n)?t.foundation_.handleActionButtonClick(e):t.isActionIcon_(n)&&t.foundation_.handleActionIconClick(e)},this.registerKeyDownHandler_(this.handleKeyDown_),this.registerSurfaceClickHandler_(this.handleSurfaceClick_)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.deregisterKeyDownHandler_(this.handleKeyDown_),this.deregisterSurfaceClickHandler_(this.handleSurfaceClick_)},e.prototype.open=function(){this.foundation_.open()},e.prototype.close=function(t){void 0===t&&(t=""),this.foundation_.close(t)},e.prototype.getDefaultFoundation=function(){var t=this;return new Ht({addClass:function(e){return t.root_.classList.add(e)},announce:function(){return t.announce_(t.labelEl_)},notifyClosed:function(e){return t.emit(Xt,e?{reason:e}:{})},notifyClosing:function(e){return t.emit(Kt,e?{reason:e}:{})},notifyOpened:function(){return t.emit(qt,{})},notifyOpening:function(){return t.emit($t,{})},removeClass:function(e){return t.root_.classList.remove(e)}})},Object.defineProperty(e.prototype,"timeoutMs",{get:function(){return this.foundation_.getTimeoutMs()},set:function(t){this.foundation_.setTimeoutMs(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"closeOnEscape",{get:function(){return this.foundation_.getCloseOnEscape()},set:function(t){this.foundation_.setCloseOnEscape(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isOpen",{get:function(){return this.foundation_.isOpen()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"labelText",{get:function(){return this.labelEl_.textContent},set:function(t){this.labelEl_.textContent=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"actionButtonText",{get:function(){return this.actionEl_.textContent},set:function(t){this.actionEl_.textContent=t},enumerable:!0,configurable:!0}),e.prototype.registerKeyDownHandler_=function(t){this.listen("keydown",t)},e.prototype.deregisterKeyDownHandler_=function(t){this.unlisten("keydown",t)},e.prototype.registerSurfaceClickHandler_=function(t){this.surfaceEl_.addEventListener("click",t)},e.prototype.deregisterSurfaceClickHandler_=function(t){this.surfaceEl_.removeEventListener("click",t)},e.prototype.isActionButton_=function(t){return Boolean(T(t,Gt))},e.prototype.isActionIcon_=function(t){return Boolean(T(t,Wt))},e}(A);function Yt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const Jt=new class{constructor(){Yt(this,"API_ID",884322),Yt(this,"API_HASH","77498db3367014eec55b317377f52779"),Yt(this,"APP_VERSION","0.0.1"),Yt(this,"chats",new Map),Yt(this,"users",new Map),this.auth_user_id=i.get("api_auth"),this.auth_user_id?this.initMainView():mt.init(),ApiClient.emitter.on("updateConnectionState",t=>{const e=o(".header");if(!e)return;const n=t.detail;"connecting"===n?e.innerText="Connecting...":"connected"===n&&(e.innerText="")}),window.FileApiManager=At}authDone(t){this.auth_user_id=t.user.id,i.set("api_auth",{user_id:t.user.id}),mt.destroy(),this.initMainView()}logOut(){i.remove("api_auth")}initMainView(){const t=a("main");document.body.append(t),Mt.init(),Pt.init()}alert(t){this.snackbar&&this.snackbar.destroy();const e=u(`\n      <div class="mdc-snackbar">\n        <div class="mdc-snackbar__surface">\n          <div class="mdc-snackbar__label">${t}</div>\n        </div>\n      </div>\n    `);document.body.append(e),this.snackbar=new Qt(e),this.snackbar.open()}};window.App=Jt}]);