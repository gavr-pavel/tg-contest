!function(e){function t(t){for(var n,s,a=t[0],o=t[1],r=0,d=[];r<a.length;r++)s=a[r],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&d.push(i[s][0]),i[s]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);for(c&&c(t);d.length;)d.shift()()}var n={},i={3:0};function s(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.e=function(e){var t=[],n=i[e];if(0!==n)if(n)t.push(n[2]);else{var a=new Promise((function(t,s){n=i[e]=[t,s]}));t.push(n[2]=a);var o,r=document.createElement("script");r.charset="utf-8",r.timeout=120,s.nc&&r.setAttribute("nonce",s.nc),r.src=function(e){return s.p+""+({}[e]||e)+".js"}(e);var c=new Error;o=function(t){r.onerror=r.onload=null,clearTimeout(d);var n=i[e];if(0!==n){if(n){var s=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+s+": "+a+")",c.name="ChunkLoadError",c.type=s,c.request=a,n[1](c)}i[e]=void 0}};var d=setTimeout((function(){o({type:"timeout",target:r})}),12e4);r.onerror=r.onload=o,document.head.appendChild(r)}return Promise.all(t)},s.m=e,s.c=n,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(n,i,function(t){return e[t]}.bind(null,i));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s.oe=function(e){throw console.error(e),e};var a=window.webpackJsonp=window.webpackJsonp||[],o=a.push.bind(a);a.push=t,a=a.slice();for(var r=0;r<a.length;r++)t(a[r]);var c=o;s(s.s=21)}([function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"e",(function(){return r})),n.d(t,"v",(function(){return d})),n.d(t,"m",(function(){return l})),n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return h})),n.d(t,"y",(function(){return p})),n.d(t,"i",(function(){return _})),n.d(t,"x",(function(){return m})),n.d(t,"E",(function(){return g})),n.d(t,"D",(function(){return f})),n.d(t,"p",(function(){return b})),n.d(t,"r",(function(){return v})),n.d(t,"q",(function(){return y})),n.d(t,"u",(function(){return E})),n.d(t,"s",(function(){return I})),n.d(t,"l",(function(){return C})),n.d(t,"o",(function(){return A})),n.d(t,"n",(function(){return T})),n.d(t,"t",(function(){return O})),n.d(t,"B",(function(){return S})),n.d(t,"j",(function(){return w})),n.d(t,"k",(function(){return L})),n.d(t,"h",(function(){return P})),n.d(t,"C",(function(){return D})),n.d(t,"w",(function(){return x})),n.d(t,"z",(function(){return N})),n.d(t,"f",(function(){return F})),n.d(t,"g",(function(){return R})),n.d(t,"A",(function(){return k}));var i=n(14),s=n(24);class a{static get(e){try{return JSON.parse(localStorage.getItem(e))}catch(e){return null}}static set(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(e){}}static remove(e){try{localStorage.removeItem(e)}catch(e){}}}class o{constructor(){var e,t,n;e=this,t="port",n=(new MessageChannel).port1,t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}on(e,t){this.port.addEventListener(e,t)}off(e,t){this.port.removeEventListener(e,t)}trigger(e,t){this.port.dispatchEvent(new CustomEvent(e,{detail:t}))}}class r{static html(e,...t){let n="";for(const i of e)n+=i+this.stringifyValue(t.shift());return new c(n)}static stringifyValue(e){return void 0===e?"":e instanceof c?e.toString():Array.isArray(e)?e.map(e=>this.stringifyValue(e)).join(""):this.sanitize(e)}static raw(...e){return new c(String.raw(...e))}static sanitize(e){const t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return String(e).replace(/[&<>"']/g,e=>t[e])}}class c{constructor(e){this.html=e}appendHtml(...e){const t=r.html(...e);return this.html+=t.html,this}prependHtml(...e){const t=r.html(...e);return this.html=t.html+this.html,this}replaceLineBreaks(){return this.html=this.html.replace(/\n/g,"<br>"),this}valueOf(){return this.html}toString(){return this.html}get length(){return this.html.length}buildFragment(){const e=document.createElement("template");return e.innerHTML=this.html,e.content}buildElement(){return this.buildFragment().firstElementChild}}function d(){const e={};return e.promise=new Promise((t,n)=>{e.resolve=(...n)=>(t(...n),e.promise),e.reject=(...t)=>(n(...t),e.promise)}),e}function l(e,t,n){let i;return function(...s){const a=n&&!i;clearTimeout(i),i=setTimeout(()=>{i=null,n||e(...s)},t),a&&e(...s)}}function u(e,t=document){return t.querySelector(e)}function h(e,t=document){return t.querySelectorAll(e)}function p(e){const t=u("#template_"+e);return document.importNode(t.content,!0)}function m(e){const t={};if(e.childElementCount)for(const n of e.children){n.dataset.jsLabel&&(t[n.dataset.jsLabel]=n),Object.assign(t,m(n))}return t}function _(e=null){const t=r.html`<div class="lds-ring"><div></div><div></div><div></div><div></div></div>`.buildElement();return e&&e.appendChild(t),t}function g(e){return new Promise(t=>setTimeout(t,e))}function f(){return crypto.getRandomValues(new Uint32Array(2))}function b(e,{withYear:t=!0,longMonth:n=!0}={}){return new Intl.DateTimeFormat("en-US",{day:"numeric",month:n?"long":"short",year:t?"numeric":void 0}).format(1e3*e)}function v(e){return new Intl.DateTimeFormat("en-US",{weekday:"short"}).format(1e3*e)}function y(e,t){if(t-e<3600){const n=Math.floor((t-e)/60);return n?n+" minutes ago":"just now"}const n=new Date(1e3*t);return n.setHours(0,0,0,0),e>n.getTime()/1e3?"today at "+E(e):(n.setDate(n.getDate()-1),e>n.getTime()/1e3?"yesterday at "+E(e):b(e))}function E(e,{withSeconds:t=!1}={}){return new Intl.DateTimeFormat("en-GB",{hour:"numeric",minute:"numeric",second:t?"numeric":void 0}).format(1e3*e)}function I(e){e=Math.round(e);const t=Math.floor(e/3600);return(t?`${t}:`:"")+`${String(Math.floor(e/60)%60).padStart(t?2:1,"0")}:${String(e%60).padStart(2,"0")}`}function C(e,t,n){return e&&e.length>t?e.substr(0,n)+"...":e}function A(e){return new Intl.NumberFormat("en-US",{notation:"compact",compactDisplay:"short"}).format(e)}function T(e){return new Intl.NumberFormat("en-US").format(e)}function O(e){const t=0===e?0:Math.floor(Math.log(e)/Math.log(1024));return`${(e/Math.pow(1024,t)).toFixed(1)} ${["B","KB","MB","GB","TB"][t]}`}function S(){return"ontouchstart"in window}const w=(()=>{const e=new Promise(e=>{const t=new Image;function n(n){e(!(!n||"load"!==n.type)&&1===t.width)}t.onerror=n,t.onload=n,t.src="data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoBAAEAAwA0JaQAA3AA/vuUAAA="},0);return()=>e})(),M=(()=>{let e,t;const n=(()=>{let e=0;return()=>++e})(),i={};return async(s,a)=>{e||(t=t||new Promise(t=>{new Worker("./webp_worker.js").addEventListener("message",n=>{if("ready"===n.data)e=n.target,t(e);else{const e=i[n.data.taskId];delete i[n.data.taskId],n.data.error?e.reject(n.data.error):e.resolve(n.data.result)}})}),await t);const o=n(),r=d();return i[o]=r,e.postMessage({taskId:o,task:s,params:a}),r.promise}})();async function L(e){const t=new Uint8Array(e);return function({output:e,width:t,height:n}){return new Promise(i=>{const s=new ImageData(new Uint8ClampedArray(e.buffer),t,n),a=document.createElement("canvas");a.width=t,a.height=n,a.getContext("2d").putImageData(s,0,0),a.toBlob(i,"image/png")})}(await M("decode",{data:t}))}function P(e){return e.arrayBuffer?e.arrayBuffer():new Promise((t,n)=>{const i=new FileReader;i.onload=e=>{t(e.target.result)},i.onerror=e=>{console.error(e),n()},i.readAsArrayBuffer(e)})}function D(e){return new Promise((t,n)=>{const i=document.createElement("script");i.onload=()=>t(),i.onerror=e=>(console.log(e),n(new Error("Could not load script"))),i.src=e,document.head.appendChild(i)})}function x(e){const{pageX:t,pageY:n}=e.touches?e.touches[0]:e;return{pageX:t,pageY:n}}function N(e){let t,n;function i(){cancelAnimationFrame(n)}function s(){e(...t),n=requestAnimationFrame(s)}return[function(...e){i(),t=e,s()},i]}function F(e,t){if(S()){let n;e.addEventListener("touchstart",()=>{const i=t=>{n?clearTimeout(n):t.preventDefault(),e.removeEventListener("touchend",i),e.removeEventListener("touchmove",i)};e.addEventListener("touchend",i),e.addEventListener("touchmove",i),n=setTimeout(()=>{n=null,t()},300)})}else e.addEventListener("contextmenu",e=>{e.preventDefault(),t()})}function R(...e){return e.map(e=>{const t=new i.a(e);return e.classList.contains("mdc-icon-button")&&(t.unbounded=!0),t})}function k(e){return R(...h(".mdc-list-item",e)),new s.a(e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(3),s=n(0),a=n(8);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const r=new class{constructor(){o(this,"dialogs",[]),o(this,"archivedDialogs",[]),o(this,"messages",new Map),o(this,"chats",new Map),o(this,"users",new Map),o(this,"peerDialogs",new Map),o(this,"chatMessages",new Map),o(this,"chatsFull",new Map),o(this,"usersFull",new Map),o(this,"emitter",new s.c),i.a.emitter.on("updates",e=>{this.onUpdates(e.detail)})}onUpdates(e){switch(e._){case"updates":case"updatesCombined":this.updateChats(e.chats),this.updateUsers(e.users);for(const t of e.updates)this.handleUpdate(t);break;case"updateShort":this.handleUpdate(e.update);break;case"updateShortMessage":case"updateShortChatMessage":this.handleUpdateShortMessage(e)}}handleUpdate(e){switch(e._){case"updateNewMessage":case"updateNewChannelMessage":{const t=e.message;this.updateMessages([t]);const n=this.getMessageDialogPeerId(t),i=this.peerDialogs.get(n);i?(i.top_message=t.id,!t.out&&t.id>i.read_inbox_max_id&&i.unread_count++,this.updateChatMessages(i,[t]),this.handleDialogOrder(i),this.emitter.trigger("chatNewMessage",{dialog:i,message:t})):this.handleNewDialog(t)}break;case"updateEditMessage":case"updateEditChannelMessage":{const t=e.message.id,n=this.messages.get(t);if(n){this.messages.set(t,e.message);const i=this.getPeerId(n.to_id);this.updateChatEditedMessage(i,n,e.message)}}break;case"updateDeleteMessages":case"updateDeleteChannelMessages":for(let t of e.messages){const e=this.messages.get(t);if(e){this.messages.delete(t);const n=this.getPeerId(e.to_id);this.updateChatDeletedMessage(n,e)}}break;case"updateReadHistoryInbox":case"updateReadChannelInbox":{const t=e.channel_id||this.getPeerId(e.peer),n=this.peerDialogs.get(t);n&&(n.unread_count=e.still_unread_count,n.read_inbox_max_id=e.max_id,console.log("chatUnreadCountUpdate",{dialog:n},n.read_inbox_max_id,n.unread_count),this.emitter.trigger("chatUnreadCountUpdate",{dialog:n}))}break;case"updateUserStatus":{const t=this.users.get(e.user_id);t&&(t.status=e.status,this.emitter.trigger("userStatusUpdate",{user:t}))}break;case"updatePinnedDialogs":e.order&&this.handlePinnedDialogsOrder(e.order);break;case"updateDialogPinned":{const t=this.getPeerId(e.peer),n=this.peerDialogs.get(t);n&&(n.pinned=e.pinned,this.handleDialogOrder(n))}break;case"updateDraftMessage":{const t=this.getPeerId(e.peer),n=this.peerDialogs.get(t);n&&(n.draft=e.draft)}break;default:console.log("Unhandled update",e._,e)}}handleUpdateShortMessage(e){const t=e.out,n=e.from_id||(t?a.a.getAuthUserId():e.user_id);let i;if(e.chat_id)i={_:"peerChat",chat_id:e.chat_id};else{i={_:"peerUser",user_id:t?e.user_id:a.a.getAuthUserId()}}const s={_:"message",from_id:n,to_id:i},o=["flags","out","mentioned","media_unread","silent","id","message","date","fwd_from","via_bot_id","reply_to_msg_id","entities"];for(const t of o)s[t]=e[t];this.handleUpdate({_:"updateNewMessage",message:s,pts:e.pts,pts_count:e.pts_count})}handleUpdateShortSentMessage(e,t,n,i){this.handleUpdate({_:"updateMessageID",random_id:i,id:e.id});const s=!!t.channel_id,o=s&&this.isMegagroup(t),r={_:"message",flags:e.flags,out:e.out,id:e.id,date:e.date,entities:e.entities,from_id:s&&!o?0:a.a.getAuthUserId(),to_id:t,message:n};e.media&&"messageMediaEmpty"!==e.media._&&(r.media=e.media),this.handleUpdate({_:s?"updateNewChannelMessage":"updateNewMessage",message:r,pts:e.pts,pts_count:e.pts_count})}async handleNewDialog(e){"peerChannel"===e.to_id._&&await this.reloadChannel(e.to_id.channel_id);const t=await this.loadPeerDialog(this.getMessageDialogPeer(e));t&&(this.handleDialogOrder(t),this.emitter.trigger("chatNewMessage",{dialog:t,message:e}))}async handlePinnedDialogsOrder(e){const t=[],n=[];for(const t of e){let e=this.peerDialogs.get(this.getPeerId(t.peer));e||(e=await this.loadPeerDialog(t.peer)),e.pinned=!0,n.push(e)}let i=0;for(const e of this.dialogs){if(!e.pinned)break;i++,-1===n.indexOf(e)&&(delete e.pinned,t.push(e))}this.dialogs.splice(0,i,...n),n.forEach((e,t)=>{this.emitter.trigger("dialogOrderUpdate",{dialog:e,index:t,folderId:0})}),t.forEach(e=>{this.handleDialogOrder(e)})}handleDialogOrder(e){if(e.pinned)return;const t=e.top_message&&this.messages.get(e.top_message);if(!t)return;const n=e.folder_id,i=n?this.archivedDialogs:this.dialogs,s=i.indexOf(e);s>-1&&i.splice(s,1);const a=i.findIndex(e=>{if(!e.pinned&&e.top_message){const n=this.messages.get(e.top_message);return n&&n.date<t.date}return!1});i.splice(a,0,e),this.emitter.trigger("dialogOrderUpdate",{dialog:e,index:a,folderId:n})}async loadDialogs(e={},t=20,n=0){const s=await i.a.callMethod("messages.getDialogs",{folder_id:n,exclude_pinned:!!n,offset_date:e.date||0,offset_id:e.id||0,offset_peer:this.getInputPeer(e.peer),limit:t}),{dialogs:a,messages:o,chats:r,users:c}=s;this.updateUsers(c),this.updateChats(r),this.updateMessages(o),this.updateDialogs(a);for(const e of a)1===e.folder_id?this.archivedDialogs.push(e):this.dialogs.push(e);const d=n?this.archivedDialogs:this.dialogs;return this.emitter.trigger("dialogsUpdate",{dialogs:d,folderId:n}),this.preloadDialogsMessages(a),a}loadArchivedDialogs(e={},t=20){return this.loadDialogs(e,t,1)}async loadChatHistory(e,t,n){const i=this.getPeerId(e.peer);let s;if(this.chatMessages.has(i)){if(s=this.chatMessages.get(i),!t||t>s[s.length-1].id)return this.emitter.trigger("chatMessagesUpdate",{dialog:e,messages:s}),s}else{s=[];const n=this.messages.get(e.top_message);n&&(s.push(n),t||(t=n.id)),this.chatMessages.set(i,s),this.emitter.trigger("chatMessagesUpdate",{dialog:e,messages:s})}const a=await this.loadMessages(e.peer,t,n);return this.updateChatMessages(e,a,!0),a}async loadMessages(e,t,n=20,s=0){const a=await i.a.callMethod("messages.getHistory",{peer:this.getInputPeer(e),offset_id:t,limit:n,add_offset:s});return this.updateMessages(a.messages),this.updateUsers(a.users),this.updateChats(a.chats),a.messages}async preloadDialogsMessages(e){if(!this.dialogsPreloaded){this.dialogsPreloaded=!0;for(const t of e)this.chatMessages.has(this.getPeerId(t.peer))||(await this.loadChatHistory(t,0,10),await Object(s.E)(500))}}async loadPeerDialog(e){const t=await i.a.callMethod("messages.getPeerDialogs",{peers:[{_:"inputDialogPeer",peer:this.getInputPeer(e)}]});return this.updateUsers(t.users),this.updateChats(t.chats),this.updateMessages(t.messages),this.updateDialogs(t.dialogs),t.dialogs[0]}updateDialogs(e){for(const t of e){const e=this.getPeerId(t.peer);this.peerDialogs.set(e,t)}}updateUsers(e){for(const t of e)this.users.set(t.id,t)}updateChats(e,t=!1){for(const n of e)!t&&"channel"===n._&&this.chats.has(n.id)||this.chats.set(n.id,n)}updateMessages(e){for(const t of e)this.messages.set(t.id,t)}updateChatMessages(e,t,n=!1){const i=this.getPeerId(e.peer),s=this.chatMessages.get(i);s&&(n?s.push(...t):s.unshift(...t),this.emitter.trigger("chatMessagesUpdate",{dialog:e,messages:s}))}updateChatEditedMessage(e,t,n){const i=this.peerDialogs.get(e);if(!i)return;const s=this.chatMessages.get(e);if(s){const e=s.indexOf(t);e>-1&&s.splice(e,1,n),this.emitter.trigger("chatEditMessage",{dialog:i,message:n})}i.top_message===t.id&&this.emitter.trigger("dialogTopMessageUpdate",{dialog:i})}updateChatDeletedMessage(e,t){const n=this.peerDialogs.get(e);if(!n)return;const i=this.chatMessages.get(e);if(i){const e=i.indexOf(t);e>-1&&i.splice(e,1),this.emitter.trigger("chatDeleteMessage",{dialog:n,message:t})}n.top_message===t.id&&(i&&i.length?n.top_message=i[0].id:delete n.top_message,this.emitter.trigger("dialogTopMessageUpdate",{dialog:n}))}async sendMessage(e,t){const n=Object(s.D)(),a=await i.a.callMethod("messages.sendMessage",{message:t,peer:this.getInputPeer(e),random_id:n});"updateShortSentMessage"===a._?this.handleUpdateShortSentMessage(a,e,t,n):this.onUpdates(a)}async sendMedia(e,t,n=""){const a=Object(s.D)(),o=await i.a.callMethod("messages.sendMedia",{message:n,media:t,peer:this.getInputPeer(e),random_id:a});"updateShortSentMessage"===o._?this.handleUpdateShortSentMessage(o,e,n,a):this.onUpdates(o)}async readHistory(e,t){e.peer.channel_id?await i.a.callMethod("channels.readHistory",{channel:this.getInputPeer(e.peer),max_id:t}):await i.a.callMethod("messages.readHistory",{peer:this.getInputPeer(e.peer),max_id:t})}saveDraft(e,t){return i.a.callMethod("messages.saveDraft",{message:t,peer:this.getInputPeer(e)})}getDialog(e){return this.peerDialogs.get(e)}getMessageAuthorPeer(e){return e.from_id?this.getPeerById(e.from_id):e.to_id}getMessageAuthorPeerId(e){return this.getPeerId(this.getMessageAuthorPeer(e))}getMessageDialogPeer(e){return"peerUser"===e.to_id._?e.out?e.to_id:{_:"peerUser",user_id:e.from_id}:e.to_id}getMessageDialogPeerId(e){return this.getPeerId(this.getMessageDialogPeer(e))}getPeerId(e){switch(e._){case"peerUser":return e.user_id;case"peerChat":return e.chat_id;case"peerChannel":return e.channel_id}}getPeerData(e){switch(e._){case"peerUser":return this.users.get(e.user_id);case"peerChat":return this.chats.get(e.chat_id);case"peerChannel":return this.chats.get(e.channel_id)}}getPeerName(e,t=!0){const n=this.getPeerData(e);return n?"peerUser"===e._?this.getUserName(n,t):this.getChatName(n):""}getUserName(e,t=!0){return e.deleted?"Deleted Account":t?[e.first_name,e.last_name].join(" ").trim():e.first_name||e.last_name||""}getChatName(e){return e.title||""}getPeerPhoto(e){const t=this.getPeerData(e);return!!t&&t.photo}getInputPeer(e){if(!e)return{_:"inputPeerEmpty"};const t=this.getPeerData(e);switch(e._){case"peerUser":return e.user_id===a.a.getAuthUserId()?{_:"inputPeerSelf"}:{_:"inputPeerUser",user_id:e.user_id,access_hash:t&&t.access_hash||0};case"peerChat":return{_:"inputPeerChat",chat_id:e.chat_id,access_hash:t&&t.access_hash||0};case"peerChannel":return{_:"inputPeerChannel",channel_id:e.channel_id,access_hash:t&&t.access_hash||0}}}getInputUser(e){return{_:"inputUser",user_id:e.id,access_hash:e.access_hash||0}}getInputPeerById(e){return this.getInputPeer(this.getPeerById(e))}getInputMessagesFilter(e){switch(e){case"media":return{_:"inputMessagesFilterPhotos"};case"docs":return{_:"inputMessagesFilterDocument"};case"links":return{_:"inputMessagesFilterUrl"};case"audio":return{_:"inputMessagesFilterMusic"}}}getUserPeer(e){return{_:"peerUser",user_id:e.id}}getChatPeer(e){return"channel"===e._?{_:"peerChannel",channel_id:e.id}:{_:"peerChat",chat_id:e.id}}getPeerById(e){return this.chats.has(e)?this.getChatPeer(this.chats.get(e)):{_:"peerUser",user_id:e}}isMegagroup(e){return!!this.chats.get(e.channel_id).megagroup}async reloadChannel(e){const t=await i.a.callMethod("channels.getChannels",{id:[this.getInputPeerById(e)]});this.updateChats(t.chats,!0)}async reloadUser(e){const t=await i.a.callMethod("users.getUsers",{id:[this.getInputPeerById(e)]});this.updateUsers(t)}async loadChatFull(e){const t=this.getPeerId(e);if(this.chatsFull.has(t))return this.chatsFull.get(t);const n=this.getInputPeerById(t);let s;s="inputPeerChannel"===n._?await i.a.callMethod("channels.getFullChannel",{channel:n}):await i.a.callMethod("messages.getFullChat",{chat_id:t}),this.updateUsers(s.users),this.updateChats(s.chats);const a=s.full_chat;return this.chatsFull.set(t,a),a}async loadUserFull(e){const t=this.getPeerId(e);if(this.usersFull.has(t))return this.usersFull.get(t);const n=this.getInputPeer(e),s=await i.a.callMethod("users.getFullUser",{id:n});return this.usersFull.set(t,s),s}async loadMessagesById(e,...t){let n;if(e&&e.channel_id){const s=this.chats.get(e.channel_id);n=await i.a.callMethod("channels.getMessages",{channel:{_:"inputChannel",channel_id:s.id,access_hash:s.access_hash},id:t.map(e=>({_:"inputMessageID",id:e}))})}else n=await i.a.callMethod("messages.getMessages",{id:t.map(e=>({_:"inputMessageID",id:e}))});return this.updateUsers(n.users),this.updateChats(n.chats),this.updateMessages(n.messages),n.messages}};window.MessagesApiManager=r},function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"c",(function(){return c}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function s(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var a=function(){return(a=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)};function o(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function r(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,s,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=a.next()).done;)o.push(i.value)}catch(e){s={error:e}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(s)throw s.error}}return o}function c(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));const i=new(n(18).a);window.ApiClient=i},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));
/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
var i=function(){function e(e){void 0===e&&(e={}),this.adapter_=e}return Object.defineProperty(e,"cssClasses",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{}},enumerable:!0,configurable:!0}),e.prototype.init=function(){},e.prototype.destroy=function(){},e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(2),s=n(4),a=function(){function e(e,t){for(var n=[],s=2;s<arguments.length;s++)n[s-2]=arguments[s];this.root_=e,this.initialize.apply(this,i.c(n)),this.foundation_=void 0===t?this.getDefaultFoundation():t,this.foundation_.init(),this.initialSyncWithDOM()}return e.attachTo=function(t){return new e(t,new s.a({}))},e.prototype.initialize=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e.prototype.getDefaultFoundation=function(){throw new Error("Subclasses must override getDefaultFoundation to return a properly configured foundation class")},e.prototype.initialSyncWithDOM=function(){},e.prototype.destroy=function(){this.foundation_.destroy()},e.prototype.listen=function(e,t,n){this.root_.addEventListener(e,t,n)},e.prototype.unlisten=function(e,t,n){this.root_.removeEventListener(e,t,n)},e.prototype.emit=function(e,t,n){var i;void 0===n&&(n=!1),"function"==typeof CustomEvent?i=new CustomEvent(e,{bubbles:n,detail:t}):(i=document.createEvent("CustomEvent")).initCustomEvent(e,n,!1,t),this.root_.dispatchEvent(i)},e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(0);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const a=new class{constructor(){s(this,"jpegHeader",o("/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDACgcHiMeGSgjISMtKygwPGRBPDc3PHtYXUlkkYCZlo+AjIqgtObDoKrarYqMyP/L2u71////m8H////6/+b9//j/2wBDASstLTw1PHZBQXb4pYyl+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj/wAARCAAAAAADASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwA=")),s(this,"jpegFooter",o("/9k="))}choosePhotoSize(e,t="m"){if(!e)return;const n=e.find(e=>e.type===t);return n||("i"!==t?e.find(e=>"i"!==e.type):void 0)}isCachedPhotoSize(e){return"photoCachedSize"===e._}async getCachedPhotoSize(e,t="image/jpeg"){let n;if("image/webp"===t){await Object(i.j)()||(n=await Object(i.k)(e.bytes))}return n||(n=new Blob([e.bytes],{type:t})),URL.createObjectURL(n)}getPhotoStrippedSize(e){const t=this.choosePhotoSize(e,"i");if(t&&1===t.bytes[0]){const e=this.jpegHeader,n=this.jpegFooter;return"data:image/jpeg;base64,"+function(e){e instanceof ArrayBuffer&&(e=new Uint8Array(e));let t="";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return btoa(t)}(function(...e){let t=0;for(const n of e)t+=n.byteLength||n.length||0;const n=new Int8Array(t);let i=0;for(const t of e)n.set(t instanceof ArrayBuffer?new Int8Array(t):t,i),i+=t.byteLength||t.length;return n.buffer}(e.subarray(0,164),t.bytes.subarray(1,2),e.subarray(165,166),t.bytes.subarray(2,3),e.subarray(167),t.bytes.subarray(3),n))}}getDocumentAttributes(e){const t={},n=e.thumbs&&e.thumbs.length;for(const i of e.attributes)switch(i._){case"documentAttributeFilename":t.file_name=i.file_name;break;case"documentAttributeAudio":t.duration=i.duration,t.audio_title=i.title,t.audio_performer=i.performer,t.waveform=i.waveform,t.type=i.voice?"voice":"audio";break;case"documentAttributeVideo":t.duration=i.duration,t.w=i.w,t.h=i.h,i.supports_streaming&&(t.supports_streaming=!0),n&&i.round_message?t.type="round":n&&(t.type="video");break;case"documentAttributeSticker":t.sticker=!0,void 0!==i.alt&&(t.stickerEmoji=i.alt),i.stickerset&&("inputStickerSetEmpty"===i.stickerset._?delete i.stickerset:"inputStickerSetID"===i.stickerset._&&(t.stickerSetInput=i.stickerset)),n&&(t.type="sticker","application/x-tgsticker"===e.mime_type&&(t.animated=!0));break;case"documentAttributeImageSize":t.w=i.w,t.h=i.h,n&&("application/x-tgsticker"===e.mime_type?(t.type="sticker",t.animated=!0):t.type="image");break;case"documentAttributeAnimated":"image/gif"!==e.mime_type&&"video/mp4"!==e.mime_type||!n||(t.type="gif"),t.animated=!0}if(t.mime_type=e.mime_type,!t.mime_type)switch(t.type){case"gif":t.mime_type="video/mp4";break;case"video":case"round":t.mime_type="video/mp4";break;case"sticker":t.mime_type="image/webp";break;case"audio":t.mime_type="audio/mpeg";break;case"voice":t.mime_type="audio/ogg";break;default:t.mime_type="application/octet-stream"}return t.file_name||(t.file_name=""),t}};function o(e){const t=atob(e),n=new Uint8Array(t.length);for(let i=0;i<e.length;i++)n[i]=t.charCodeAt(i);return n}window.MediaApiManager=a},function(e,t,n){"use strict";var i=n(0),s=n(1),a=n(6),o=n(13),r=n(15),c=n(20),d=n(10),l=n(11);function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const h=new class{constructor(){u(this,"close",()=>{this._open&&(this._open=!1,this.container.hidden=!0,this.peerId=null,document.removeEventListener("keyup",this.onKeyUp))}),u(this,"onKeyUp",e=>{27!==e.keyCode||o.a.isOpen()||this.close()}),u(this,"onInput",()=>{const e=this.input.value.trim();e?this.loadResults(e):this.listWrap.innerHTML=""})}show(e){if(this.container=Object(i.a)(".right_sidebar"),this.container.hidden=!1,e===this.peerId)return;this.peerId=e,this.container.innerHTML='\n      <div class="sidebar_header">\n        <button type="button" class="sidebar_close_button mdc-icon-button"></button>\n        <input class="sidebar_search_input messages_search_input" type="text" placeholder="Start typing...">\n      </div>\n      <div class="messages_search_results_list"></div>\n    ';const t=Object(i.a)(".sidebar_close_button",this.container);Object(i.g)(t),t.addEventListener("click",this.close),this.input=Object(i.a)(".messages_search_input",this.container),this.input.addEventListener("input",Object(i.m)(this.onInput,100)),this.container.addEventListener("transitionend",()=>{this.input.focus()},{once:!0}),this.listWrap=Object(i.a)(".messages_search_results_list",this.container),document.addEventListener("keyup",this.onKeyUp),this._open=!0}async loadResults(e){const t=await ApiClient.callMethod("messages.search",{peer:s.a.getInputPeerById(this.peerId),q:e,filter:{_:"inputMessagesFilterEmpty"},offset_id:0,limit:30});s.a.updateMessages(t.messages),s.a.updateChats(t.chats),s.a.updateUsers(t.users);const n=t.count||t.messages.length;this.listWrap.innerHTML="",this.renderResultsHeader(n),this.renderResults(t.messages)}renderResultsHeader(e){const t=l.a.getPlural("messages_search_n_results_found",e);this.listWrap.insertAdjacentHTML("afterbegin",`\n      <div class="messages_search_results_header">${t}</div>\n    `)}renderResults(e){const t=document.createDocumentFragment();for(const n of e){const e=s.a.getMessageAuthorPeer(n),a=s.a.getPeerName(e),o=d.a.formatMessageDate(n),r=d.a.getMessagePreview(n),c=i.e.html`
        <div class="messages_search_results_item">
          <div class="messages_search_results_item_content mdc-ripple-surface">
            <div class="messages_search_results_item_photo"></div>
            <div class="messages_search_results_item_text">
              <div class="messages_search_results_item_text_row">
                <div class="messages_search_results_item_title">${a}</div>
                <div class="messages_search_results_item_date">${o}</div>
              </div>
              <div class="messages_search_results_item_text_row">
                <div class="messages_search_results_item_message">${r}</div>
              </div>
            </div>      
          </div>
        </div>
      `.buildElement();this.loadMessagePeerPhoto(c,e),t.append(c)}Object(i.a)(".messages_search_results_list",this.container).append(t)}loadMessagePeerPhoto(e,t){const n=Object(i.a)(".messages_search_results_item_photo",e);d.a.loadPeerPhoto(n,t)}};window.MessagesSearchController=h;var p=n(3);function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return _}));const _=new class{constructor(){m(this,"messageElements",new Map),m(this,"loadMore",({down:e=!1}={})=>{if(this.loading||this.noMore||!this.chatId)return;this.loading=!0;const t=e?-20:0,n=e?this.maxMsgId:this.minMsgId;s.a.loadMessages(this.dialog.peer,n,20,t).then(t=>{t.length||(this.noMore=!0),e?this.appendHistory(t):this.prependHistory(t)}).catch(e=>{const t="An error occurred"+(e.error_message?": "+e.error_message:"");App.alert(t),console.log(e)}).finally(()=>{this.loading=!1})}),m(this,"onChatMessagesUpdate",e=>{const{dialog:t,messages:n}=e.detail;t===this.dialog&&this.prependHistory(n)}),m(this,"onNewMessage",e=>{const{dialog:t,message:n}=e.detail;t===this.dialog&&this.appendHistory([n])}),m(this,"onEditMessage",e=>{const{dialog:t,message:n}=e.detail;if(t===this.dialog){let e=this.messageElements.get(n.id);e&&this.renderMessageContent(e,n)}}),m(this,"onDeleteMessage",e=>{const{dialog:t,message:n}=e.detail;if(t===this.dialog){const e=this.messageElements.get(n.id);e&&(e.remove(),this.messageElements.delete(n.id))}}),m(this,"onUserStatusUpdate",e=>{const{user:t}=e.detail;if(this.chatId===t.id){const e=Object(i.a)(".messages_header_peer_status",this.header);e.innerText=this.getUserStatusText(t),e.classList.toggle("messages_header_peer_status-online","userStatusOnline"===t.status._)}}),m(this,"onGlobalClick",e=>{let t=e.target;if("A"===t.tagName||(t=t.closest("a"))){const n=t.dataset.refUserId||t.dataset.refChatId;n&&(this.setChatByPeerId(+n),e.preventDefault())}}),m(this,"onScroll",()=>{const e=this.scrollContainer,t=e.scrollTop,n=e.scrollHeight-(t+e.clientHeight),i=!!this.scrolling;this.scrolling=n>0,this.scrolling!==i&&this.scrollContainer.classList.toggle("messages_scroll-scrolling",this.scrolling&&!this.footer.hidden),this.loading||(t<500&&!this.noMore?this.loadMore():n<500&&this.maxMsgId<this.dialog.top_message&&(this.loadMore({down:!0}),this.scrolling=!0))}),m(this,"onReplyToClick",e=>{const t=+e.currentTarget.closest(".message").dataset.id,n=s.a.messages.get(t);this.jumpToMessage(n.reply_to_msg_id)}),m(this,"onThumbClick",e=>{const t=e.currentTarget,n=+t.dataset.messageId||+t.closest(".message").dataset.id,i=s.a.messages.get(n),a=this.getMessageMediaThumb(i);t.firstElementChild&&"tgs-player"===t.firstElementChild.tagName.toLowerCase()&&(t.firstElementChild.stop(),t.firstElementChild.play()),a&&("photo"===a.type?o.a.showPhoto(a.object,t,i):"video"===a.type?o.a.showVideo(a.object,t,i):"gif"===a.type&&o.a.showGif(a.object,t,i))}),m(this,"onRoundClick",e=>{const t=e.target;if(t.muted){t.pause(),t.currentTime=0,t.loop=!1,t.muted=!1,t.removeAttribute("muted"),t.play();const e=i.e.html`
        <svg class="message_media_thumb_round_progress_svg" viewBox="22 22 44 44" xmlns="http://www.w3.org/2000/svg">
          <circle class="message_media_thumb_round_progress_circle" cx="44" cy="44" r="21" transform="rotate(-90 44 44)"></circle>
        </svg>
      `.buildElement();t.parentNode.appendChild(e);const n=Object(i.a)(".message_media_duration",t.parentNode),[s,a]=Object(i.z)(()=>{const n=t.currentTime/t.duration;e.firstElementChild.style.strokeDasharray=`${135*n}, 135`}),o=()=>s(),r=()=>a(),c=()=>n.innerText=Object(i.s)(t.duration-t.currentTime);t.addEventListener("playing",o),t.addEventListener("pause",r),t.addEventListener("timeupdate",c),t.addEventListener("ended",()=>{a(),t.removeEventListener("playing",o),t.removeEventListener("pause",r),t.removeEventListener("timeupdate",c),e.remove(),n.innerText=Object(i.s)(t.duration),t.loop=!0,t.muted=!0,t.setAttribute("muted",""),t.play()},{once:!0})}else t.paused?t.play():t.pause()}),m(this,"onFileClick",e=>{const t=e.currentTarget;if(t.dataset.loading)return;t.dataset.loading=1;const n=+t.dataset.messageId||+t.closest(".message").dataset.id,o=s.a.messages.get(n);if(!o)return;const r=o.media.document,c=new AbortController,d=()=>{c.abort(),l()},l=(e=null)=>{if(delete t.dataset.loading,t.removeEventListener("click",d),t.classList.remove("document_icon-loading"),t.innerHTML="",!e)return;const n=a.a.getDocumentAttributes(r);if("voice"===n.type||"audio"===n.type)this.playAudio(t,e,r,n,o);else{const t=window.document.createElement("a");t.href=e,t.download=n.file_name,t.click()}};let u;t.classList.contains("document_icon")&&(t.classList.add("document_icon-loading"),t.innerHTML='\n        <svg class="document_icon_progress_svg" viewBox="0 0 36 36" xmlns="http://www.w3.org/2000/svg">\n          <path class="document_icon_progress_path" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"/>\n        </svg>\n      ',t.addEventListener("click",d),u=Object(i.a)(".document_icon_progress_path",t)),FileApiManager.loadDocument(r,{onProgress:e=>{const t=Math.round(e/r.size*100);u&&(u.style.strokeDasharray=`${t}, 100`)},signal:c.signal}).then(l).catch(e=>{console.error(e),l()})})}init(){this.header=Object(i.a)(".messages_header"),this.footer=Object(i.a)(".messages_footer"),this.scrollContainer=Object(i.a)(".messages_scroll"),this.container=Object(i.a)(".messages_list"),this.loader=Object(i.i)(),this.container.addEventListener("click",this.onGlobalClick),this.scrollContainer.addEventListener("scroll",this.onScroll),this.initPlaceholder(),this.initBackground(),this.loadAnimatedEmojiStickerSet(),c.a.init(),s.a.emitter.on("chatMessagesUpdate",this.onChatMessagesUpdate),s.a.emitter.on("chatNewMessage",this.onNewMessage),s.a.emitter.on("chatEditMessage",this.onEditMessage),s.a.emitter.on("chatDeleteMessage",this.onDeleteMessage),s.a.emitter.on("userStatusUpdate",this.onUserStatusUpdate)}setChat(e,t=0){if(e===this.dialog)return void(t?this.jumpToMessage(t):this.scrollToBottom());this.dialog&&this.exitChat(),this.dialog=e,this.chatId=s.a.getPeerId(e.peer),Object(i.a)(".main_container").dataset.chat=this.chatId,this.placeholder.remove(),this.showHeader(e),this.footer.hidden=!this.canSendMessage(e),this.footer.hidden||c.a.onShown(),this.container.append(this.loader),t?this.jumpToMessage(t):e.read_inbox_max_id<e.top_message?this.jumpToMessage(e.read_inbox_max_id,!0):this.loadHistory();const n=d.a.chatElements.get(this.chatId);n&&n.classList.add("chats_item-selected")}async setChatByPeerId(e,t=0){let n=s.a.getDialog(e);if(!n){const t=s.a.getPeerById(e);n=await s.a.loadPeerDialog(t)}_.setChat(n,t)}exitChat(){const e=d.a.chatElements.get(this.chatId);e&&e.classList.remove("chats_item-selected"),c.a.clear(),o.a.abort(),this.ChatInfoController&&this.ChatInfoController.close(),h.close(),this.header.hidden=!0,this.footer.hidden=!0,this.dialog=null,this.chatId=null,this.clearMessages(),delete Object(i.a)(".main_container").dataset.chat}clearMessages(){this.container.innerHTML="",this.messageElements.clear(),this.minMsgId=null,this.maxMsgId=null,this.loading=!1,this.noMore=!1,this.scrolling=!1}initPlaceholder(){this.placeholder=i.e.html`
      <div class="messages_placeholder">
        <div class="messages_placeholder_title">Open chat<br>or create a new one</div>
        <div class="messages_placeholder_actions">
          <button class="messages_placeholder_action messages_placeholder_action-private mdc-icon-button"><div class="messages_placeholder_action_label">Private</div></button>
          <button class="messages_placeholder_action messages_placeholder_action-group mdc-icon-button"><div class="messages_placeholder_action_label">Group</div></button>
          <button class="messages_placeholder_action messages_placeholder_action-channel mdc-icon-button"><div class="messages_placeholder_action_label">Channel</div></button>  
        </div>
      </div>
    `.buildElement(),this.container.append(this.placeholder)}showHeader(e){const t=e.peer,a=s.a.getPeerName(t);let o="",r="";if("peerUser"===t._){const e=s.a.getPeerData(t);o=this.getUserStatusText(e),e.status&&"userStatusOnline"===e.status._&&(r="messages_header_peer_status-online")}this.header.innerHTML=i.e.html`
      <button class="messages_header_back mdc-icon-button"></button>
      <div class="messages_header_peer mdc-ripple-surface">
        <div class="messages_header_peer_photo"></div>
        <div class="messages_header_peer_description">
          <div class="messages_header_peer_name">${a}</div>
          <div class="messages_header_peer_status ${r}">${o}</div>
        </div>
      </div>
      <div class="messages_header_audio_wrap"></div>
      <div class="messages_header_pinned_message_wrap"></div>
      <div class="messages_header_actions">
        <button class="messages_header_action_search mdc-icon-button"></button>
        <button class="messages_header_action_more mdc-icon-button"></button>
      </div>
    `,this.header.hidden=!1;const c=Object(i.a)(".messages_header_peer");c.addEventListener("click",()=>{h.close(),this.ChatInfoController&&this.ChatInfoController.isOpen()?this.ChatInfoController.close():n.e(5).then(n.bind(null,39)).then(({ChatInfoController:e})=>{this.ChatInfoController=e,e.show(this.chatId)})}),Object(i.g)(c);const l=Object(i.a)(".messages_header_peer_photo",this.header);d.a.loadPeerPhoto(l,e.peer),"peerChannel"!==t._&&"peerChat"!==t._||this.loadChatHeaderInfo(t),Object(i.g)(...Object(i.a)(".messages_header_actions",this.header).children),Object(i.a)(".messages_header_action_search",this.header).addEventListener("click",()=>{this.ChatInfoController&&this.ChatInfoController.close(),h.show(this.chatId)}),Object(i.a)(".messages_header_back",this.header).addEventListener("click",()=>{this.exitChat()})}async loadChatHeaderInfo(e){const t=await s.a.loadChatFull(e);t.pinned_msg_id&&s.a.loadMessagesById(e,t.pinned_msg_id).then(([e])=>{this.renderPinnedMessage(e)});const n=e.channel_id&&!s.a.isMegagroup(e);let a,o,r="";t.participants_count?(a=t.participants_count,o=t.online_count):t.participants.participants&&(a=t.participants.participants.length),a&&(r=l.a.getPlural(n?"chats_n_followers":"chats_n_members",a,{n:Object(i.n)(a)}),o&&(r+=`, ${o} online`)),Object(i.a)(".messages_header_peer_status",this.header).innerText=r}renderPinnedMessage(e){const t=Object(i.a)(".messages_header_pinned_message_wrap",this.header);t.innerHTML="";const n=i.e.html`
      <div class="messages_header_pinned_message mdc-ripple-surface" data-message-id="${e.id}">
        <div class="messages_header_pinned_message_content">
          <div class="messages_header_pinned_message_title">Pinned message</div>
          <div class="messages_header_pinned_message_text">${d.a.getMessagePreview(e)}</div>        
        </div>
      </div>
    `.buildElement();Object(i.g)(n),t.appendChild(n),n.addEventListener("click",e=>{const t=+e.currentTarget.dataset.messageId;this.jumpToMessage(t)})}loadHistory(){this.loading||this.noMore||(this.loading=!0,s.a.loadChatHistory(this.dialog,this.minMsgId,30).then(e=>{e.length||(this.noMore=!0),this.prependHistory(e)}).catch(e=>{const t="An error occurred"+(e.error_message?": "+e.error_message:"");App.alert(t),console.log(e)}).finally(()=>{this.loading=!1}))}jumpToMessage(e,t=!1){this.messageElements.has(e)?this.scrollToMessage(e,t):(this.clearMessages(),this.loading=!0,s.a.loadMessages(this.dialog.peer,e,20,-10).then(n=>{this.prependHistory(n),this.scrollToMessage(e,t)}).catch(e=>{const t="An error occurred"+(e.error_message?": "+e.error_message:"");App.alert(t)}).finally(()=>{this.loading=!1}))}scrollToMessage(e,t=!1){const n=this.messageElements.get(e);if(n)if(t){const e=Object(i.a)(".message-type-unread",this.container);e&&e.scrollIntoView({block:"center"})}else{const e=n.getBoundingClientRect(),t=this.scrollContainer.getBoundingClientRect();(e.top<t.top||e.bottom>t.bottom)&&n.scrollIntoView({block:"center"}),n.classList.add("message-highlighted"),requestAnimationFrame(()=>{n.classList.remove("message-highlighted")})}}canSendMessage(e){const t=s.a.getPeerData(e.peer);return!!t&&("user"===t._||"chat"===t._||"channel"===t._&&(t.creator||t.megagroup))}scrollToBottom(){this.scrollContainer.scrollTop=this.scrollContainer.scrollHeight}prependHistory(e){if(this.loader.remove(),this.minMsgId&&(e=e.filter(e=>e.id<this.minMsgId)),!e.length)return void(this.container.children.length||(this.emptyPlaceholder=i.e.html`<div class="messages_empty_placeholder">No messages here yet...</div>`.buildElement(),this.container.appendChild(this.emptyPlaceholder)));const t=this.scrollContainer.scrollTop,n=this.scrollContainer.scrollHeight,a=this.buildMessagesBatch(e);this.mergeDateGroups(this.container.firstElementChild,a.lastElementChild,!0),this.container.prepend(a),this.minMsgId=e[e.length-1].id,this.maxMsgId=this.maxMsgId||e[0].id,this.scrolling?(this.scrollContainer.style.overflow="hidden",this.scrollContainer.scrollTop=t+(this.scrollContainer.scrollHeight-n),this.scrollContainer.style.overflow=""):this.scrollContainer.scrollHeight<=this.scrollContainer.offsetHeight?setTimeout(this.loadMore,0):this.scrollToBottom(),this.dialog.unread_count&&s.a.readHistory(this.dialog,this.maxMsgId)}appendHistory(e){if(!this.maxMsgId)return;if(!(e=e.filter(e=>e.id>this.maxMsgId)).length)return;this.emptyPlaceholder&&(this.emptyPlaceholder.remove(),this.emptyPlaceholder=null);const t=this.scrolling,n=this.buildMessagesBatch(e);this.mergeDateGroups(n.firstElementChild,this.container.lastElementChild,!1),this.container.append(n),t||this.scrollToBottom(),this.maxMsgId=e[0].id}mergeDateGroups(e,t,n){if(e&&t&&e.dataset.date===t.dataset.date){const i=e.children[1],a=t.lastElementChild;i.dataset.authorId===a.dataset.authorId&&(("peerChannel"!==this.dialog.peer._||s.a.isMegagroup(this.dialog.peer))&&(i.firstElementChild.classList.add("message-stick-to-prev"),a.lastElementChild.classList.add("message-stick-to-next")),n?(i.prepend(...a.children),a.remove()):(a.append(...i.children),i.remove())),n?(e.firstElementChild.after(...Array.from(t.children).slice(1)),t.remove()):(t.append(...Array.from(e.children).slice(1)),e.remove())}}buildMessagesBatch(e){const t=this.dialog.peer,n=this.dialog.read_inbox_max_id,a="peerChat"===t._||"peerChannel"===t._&&s.a.isMegagroup(t),o=document.createDocumentFragment();let r=null,c=0,l=null;for(let t=0;t<e.length;t++){const u=e[t],h=e[t-1],p=e[t+1],m=s.a.getMessageAuthorPeerId(u);let _=u.from_id&&h&&h.from_id===u.from_id,g=u.from_id&&p&&p.from_id===u.from_id;const f=new Date(1e3*u.date).setHours(0,0,0,0)/1e3;if((!r||c!==f||h&&h.date>f+86400)&&(_=!1,r=this.buildMessagesDateGroupEl(f),c=f,l=null,o.prepend(r)),n&&u.id===n&&n!==this.dialog.top_message){const e=i.e.html`<div class="message-type-service message-type-unread">Unread messages</div>`.buildElement();1===r.children.length?o.prepend(e):(r.firstElementChild.after(e),l=null)}if(!l||"messageService"===u._||!h||h.from_id!==u.from_id){const e=a&&"message"===u._&&m!==App.getAuthUserId();if(l=this.buildMessagesAuthorGroupEl(m,e),e){const e=l.firstElementChild;d.a.loadPeerPhoto(e,s.a.getMessageAuthorPeer(u))}r.firstElementChild.after(l)}const b=this.buildMessageEl(u,{stickToNext:_,stickToPrev:g});l.prepend(b),"messageService"===u._&&(l=null)}return o}buildMessagesDateGroupEl(e){return i.e.html`
      <div class="messages_group-date" data-date="${e}">
        <div class="message-type-service message-type-date">${this.formatMessageDateFull(e)}</div>
      </div>
    `.buildElement()}buildMessagesAuthorGroupEl(e,t=!1){return i.e.html`
      <div class="messages_group-author ${t?"messages_group-author-with-photo":""}" data-author-id="${e}">
        ${t?i.e.html`<a class="messages_group_author_photo" data-ref-user-id="${e}" href="#${this.getUserHref(e)}"></a>`:""}
      </div>
    `.buildElement()}buildMessageEl(e,t){const n=document.createElement("div");return"message"===e._?(n.className=this.getClasses({message:!0,"message-out":this.isOutMessage(e),"message-stick-to-next":t.stickToNext,"message-stick-to-prev":t.stickToPrev}),this.renderMessageContent(n,e,t)):"messageService"===e._&&(n.className="message-type-service",n.innerText=this.getServiceMessageText(e)),n.dataset.id=e.id,this.messageElements.set(e.id,n),n}appendPendingMessage(e){const t=i.e.html`<div class="message message-out message-stick-to-next message-stick-to-prev"></div>`.buildElement();return t.append(e),Object(i.a)(".messages_pending_list").appendChild(t),this.scrollToBottom(),t}removePendingMessage(e){e.remove()}getClasses(e){let t="";for(const[n,i]of Object.entries(e))i&&(t+=" "+n);return t}renderMessageContent(e,t,s={}){const o=this.isEmojiMessage(t),r=this.getMessageMediaThumb(t,o),c=r&&"sticker"===r.type,d=r&&"round"===r.type,l=s.stickToPrev||c||o||t.out?"":this.formatAuthorName(t);let u=this.formatMessageContent(t,r);t.fwd_from&&(u=this.formatFwdMessageContent(t.fwd_from,u)),t.reply_to_msg_id&&(u=i.e.html`${this.formatReplyToMessageContent(t.reply_to_msg_id)}${u}`);const h=Object(i.p)(t.date)+" "+Object(i.u)(t.date,{withSeconds:!0}),p=this.formatMessageViews(t),m=Object(i.u)(t.date),_=this.formatMessageStatus(t,this.dialog);if(e.innerHTML=i.e.html`
      <div class="message_content">
        ${l}
        ${u}
        <div class="message_date" title="${h}">${p}${m}${_}</div>
      </div>
    `,c?e.classList.add("message-type-sticker"):d?e.classList.add("message-type-round"):o&&e.classList.add("message-type-emoji"),t.reply_to_msg_id){const t=Object(i.a)(".message_reply_to_wrap",e);t&&t.addEventListener("click",this.onReplyToClick)}if(r)e.classList.add("message-has-thumb"),this.loadMessageMediaThumb(e,r);else if(t.media&&t.media.document){const s=a.a.getDocumentAttributes(t.media.document);"voice"===s.type&&(this.drawVoiceWave(e,s.waveform,this.isOutMessage(t)),FileApiManager.loadDocument(t.media.document),n.e(2).then(n.bind(null,36)));const o=Object(i.a)(".document_icon",e);o&&o.addEventListener("click",this.onFileClick)}else t.media&&t.media.poll&&n.e(9).then(n.bind(null,37)).then(({PollController:t})=>{t.init(Object(i.a)(".poll",e))})}isOutMessage(e){return(e.out||s.a.getMessageDialogPeerId(e)===App.getAuthUserId())&&e.from_id===App.getAuthUserId()}isEmojiMessage(e){if(e.message.length<=12&&!e.media){const t=Object(r.c)(e.message);if(t&&t.length<=3&&t.join("").length===e.message.length)return!0}return!1}getAnimatedEmojiSticker(e){if(this.animatedEmojies)for(const t of this.animatedEmojies.packs)if(t.emoticon===e){const e=t.documents[0];for(const t of this.animatedEmojies.documents)if(t.id===e)return t}}formatAuthorName(e){if(e.from_id&&"peerUser"!==this.dialog.peer._){const t=e.from_id,n=s.a.getPeerName({_:"peerUser",user_id:t});return i.e.html`<a class="message_author" data-ref-user-id="${t}" href="#${this.getUserHref(t)}">${n}</a>`}return""}async playAudio(e,t,i,s,a){if(this.audioPlayer){if(this.audioPlayer.doc===i)return void this.audioPlayer.togglePlay();this.audioPlayer.destroy(),this.audioPlayer=null}const{AudioPlayer:o}=await n.e(2).then(n.bind(null,36));this.audioPlayer=new o(i,t),this.initMessageAudioPlayer(e,this.audioPlayer,i,s),this.initHeaderAudioPlayer(this.audioPlayer,i,s,a),this.audioPlayer.listen("ended",()=>{this.audioPlayer.destroy(),this.audioPlayer=null}),this.audioPlayer.play()}initMessageAudioPlayer(e,t,n,s){t.listen("play",t=>{e.classList.add("document_icon-playing"),d(t.target)}),t.listen("pause",()=>{e.classList.remove("document_icon-playing"),l()}),t.listen("timeupdate",e=>{const t=e.target,n=isFinite(t.duration)?t.duration:s.duration;c(t.currentTime,n)}),t.listen("ended",e=>{const t=e.target,n=isFinite(t.duration)?t.duration:s.duration;r(0),c(0,n)});const a=e.closest(".document"),o=Object(i.a)(".document_duration",a);let r,c;if("voice"===s.type){const e=Object(i.a)(".document_voice_wave-filled",a);r=t=>{e.style.width=100*t+"%"},c=(e,t)=>{o.innerText=Object(i.s)(t-e)}}else r=e=>{},c=(e,t)=>{o.innerText=`${Object(i.s)(e)} / ${Object(i.s)(t)}`};const[d,l]=Object(i.z)(e=>{const t=isFinite(e.duration)?e.duration:s.duration;r(e.currentTime/t)})}initHeaderAudioPlayer(e,t,n,a){const o=Object(i.a)(".messages_header_audio_wrap",this.header);let r,c;o.innerHTML="","voice"===n.type?(r=s.a.getPeerName(s.a.getMessageAuthorPeer(a),!1),c="Voice Message"):(r=n.audio_title||n.file_name||"Unknown Track",c=n.audio_performer);const d=i.e.html`
      <div class="messages_header_audio mdc-ripple-surface">
        <div class="messages_header_audio_title">${r}</div>
        <div class="messages_header_audio_performer">${c}</div>
      </div>
    `.buildElement();Object(i.g)(d),o.appendChild(d),e.listen("play",()=>{d.classList.add("messages_header_audio-playing")}),e.listen("pause",()=>{d.classList.remove("messages_header_audio-playing")}),e.listen("ended",()=>{d.remove()}),d.addEventListener("click",()=>{e.togglePlay()})}getMessageMediaThumb(e,t=!1){if(t){const t=this.getAnimatedEmojiSticker(e.message);if(t){const n=a.a.getDocumentAttributes(t);return{type:"sticker",object:t,sizes:t.thumbs,attributes:n,emoji:e.message}}}const n=e.media;if(n)switch(n._){case"messageMediaPhoto":const e=n.photo;return{type:"photo",object:e,sizes:e.sizes};case"messageMediaDocument":{const e=n.document,t=a.a.getDocumentAttributes(e);if(["video","gif","sticker","round"].includes(t.type))return{type:t.type,object:e,sizes:e.thumbs,video_sizes:e.video_thumbs,attributes:t}}break;case"messageMediaWebPage":if("photo"!==n.webpage.type&&n.webpage.document){const e=n.webpage.document;if("video"===n.webpage.type||"gif"===n.webpage.type)return{type:n.webpage.type,object:e,sizes:e.thumbs};{const t=a.a.getDocumentAttributes(e);if("video"===t.type||"gif"===t.type)return{type:t.type,object:e,sizes:e.thumbs,attributes:t}}}if(n.webpage.photo){const e=n.webpage.photo;return{type:"photo",object:e,sizes:e.sizes}}}}getThumbWidthHeight(e,t=400,n=200){let i=n,s=Math.round(i*(e.w/e.h));return s>t&&(s=t,i=Math.round(s/(e.w/e.h))),[s,i]}async loadMessageMediaThumb(e,t){let n=Object(i.a)(".message_media_thumb",e);if(!n)return;n.addEventListener("click",this.onThumbClick);const s=t.sizes;let o;{const e=a.a.choosePhotoSize(s,"m");if(e&&a.a.isCachedPhotoSize(e)){const n=t.object.mime_type,s=await a.a.getCachedPhotoSize(e,n);o=i.e.html`<img class="message_media_thumb_image" src="${s}">`.buildElement()}if(a.a.choosePhotoSize(s,"i")){const e=a.a.getPhotoStrippedSize(s);o=i.e.html`<img class="message_media_thumb_image message_media_thumb_image-blurred" src="${e}">`.buildElement()}o&&n.prepend(o)}if("sticker"===t.type){const e=await FileApiManager.loadDocument(t.object,{cache:!0});let s;s=t.attributes.animated?i.e.html`<tgs-player autoplay src="${e}" class="message_media_thumb_image"></tgs-player>`.buildElement():i.e.html`<img class="message_media_thumb_image" src="${e}">`.buildElement(),n.prepend(s)}else if("round"===t.type){const e=a.a.choosePhotoSize(s,"m"),[o,r]=await Promise.all([FileApiManager.loadDocument(t.object),FileApiManager.loadDocumentThumb(t.object,e.type)]),c=i.e.html`<video src="${o}" poster="${r}" playsinline muted autoplay loop class="message_media_thumb_round_video"></video>`.buildElement();n.prepend(c),n.addEventListener("click",this.onRoundClick)}else if(t.video_sizes){const e=t.video_sizes[0],s=await FileApiManager.loadDocumentThumb(t.object,e.type),a=i.e.html`<video class="message_media_thumb_image" src="${s}" muted autoplay loop></video>`.buildElement();n.prepend(a)}else{const e=a.a.choosePhotoSize(s,"x");let o;if(a.a.isCachedPhotoSize(e)){const n=t.object.mime_type;o=await a.a.getCachedPhotoSize(e,n)}else o="document"===t.object._?await FileApiManager.loadDocumentThumb(t.object,e.type):await FileApiManager.loadPhoto(t.object,e.type);const r=i.e.html`<img class="message_media_thumb_image" src="${o}">`.buildElement();n.prepend(r)}o&&o.remove()}formatFwdMessageContent(e,t){let n=e.from_name;if(!n)if(e.from_id){const t=s.a.users.get(e.from_id);n=s.a.getUserName(t)}else if(e.channel_id){const t=s.a.chats.get(e.channel_id);n=s.a.getChatName(t)}const a=e.from_id?"data-ref-user-id":"data-ref-chat-id",o=e.from_id||e.channel_id;return i.e.html`
      <div class="message_forwarded_header">Forwarded message</div>
      <div class="message_forwarded_content">
        <div class="message_forwarded_author">
          <a ${a}="${o}">${n}</a>
        </div>
        ${t}
      </div>
    `}formatReplyToMessageContent(e){const t=s.a.messages.get(e);if(t){const e=s.a.getMessageAuthorPeer(t),n=s.a.getPeerName(e),a=t.message?Object(i.l)(t.message,110,100):this.getMessageContentTypeLabel(t.media);return i.e.html`
        <div class="message_reply_to_wrap">
          <div class="message_reply_to_content">
            <div class="message_reply_to_author">${n}</div>
            <div class="message_reply_to_text">${a}</div>
          </div>
        </div>
      `}return""}formatMessageViews(e){return e.views?i.e.html`
        <div class="message_views">${Object(i.o)(e.views)}</div>
      `:""}formatMessageStatus(e,t){if(e.out&&e.from_id){const n=t.read_outbox_max_id,s=!n||e.id<=n?"read":"sent";return i.e.html`<div class="message_status message_status-${s}"></div>`}return""}formatMessageContent(e,t){const n=e.media,s=this.formatText(e),a=e.message;if(!n)return t?this.formatThumb(t,a):s;switch(n._){case"messageMediaPhoto":return this.formatThumb(t,a);case"messageMediaDocument":return this.formatDocument(n,t,s,a);case"messageMediaWebPage":return i.e.html`${s}${this.formatWebPage(n,t)}`;case"messageMediaPoll":return i.e.html`${s}${this.formatPoll(n)}`;case"messageMediaGeo":return i.e.html`${s}Geo`;case"messageMediaGeoLive":return i.e.html`${s}Live Geo`;case"messageMediaContact":return i.e.html`${s}Contact`;case"messageMediaUnsupported":return"Message unsupported";default:return i.e.html`${s} [${n._}]`}}formatDocument(e,t,n,s){if(t)return this.formatThumb(t,s);const o=a.a.getDocumentAttributes(e.document);switch(o.type){case"video":return"[video]";case"gif":return"[gif]";case"sticker":return"[sticker]";case"voice":return this.formatVoice(e.document,o);case"audio":return this.formatAudio(e.document,o)}return i.e.html`
      ${n}
      <div class="document">
        <div class="document_col">
          <button class="document_icon"></button>
        </div>
        <div class="document_col">
          <div class="document_filename">${o.file_name}</div>
          <div class="document_size">${this.formatDocSize(e.document.size)}</div>        
        </div>      
      </div>
    `}formatDocSize(e){if(e){if(e<1024)return"1 KB";if(e<1048576)return Math.floor(e/1024)+" KB";if(e<1073741824)return Math.floor(e/1048576)+" MB"}return""}formatVoice(e,t){return i.e.html`
      <div class="document">
        <div class="document_col">
          <button class="document_icon document_icon-voice"></button>
        </div>
        <div class="document_col">
          <div class="document_filename">Voice message</div>
          <div class="document_duration">${Object(i.s)(t.duration)}</div>        
        </div>      
      </div>
    `}drawVoiceWave(e,t,n=!1){const s=Object(i.a)(".document_filename",e);s.innerHTML="";const a=document.createElement("canvas"),o=Math.ceil(t.length/2),r=window.devicePixelRatio||1,c=2*r,d=2*r,l=c*o+d*(o-1),u=16*r,h=l/r,p=u/r;s.style.width=h+"px",s.style.height=p+"px",a.width=l,a.height=u;const m=a.getContext("2d");m.lineWidth=c,m.lineCap="round";for(const e of["background","filled"]){m.strokeStyle="background"===e?n?"#B7DDA9":"#CBCBCB":n?"#65AB5A":"#5FA1E3";for(let e=0,n=c/2;e<t.length;e+=2){const i=e+1<t.length?(t[e]+t[e+1])/2/255:t[e],s=Math.max(c,i*(u-c));m.beginPath(),m.moveTo(n,u-c/2),m.lineTo(n,u-s),m.stroke(),n+=c+d}a.toBlob(t=>{const n=URL.createObjectURL(t);s.appendChild(i.e.html`<img src="${n}" class="document_voice_wave document_voice_wave-${e}">`.buildElement())},"image/png")}}formatAudio(e,t){return i.e.html`
      <div class="document">
        <div class="document_col">
          <button class="document_icon document_icon-audio"></button>
        </div>
        <div class="document_col">
          <div class="document_filename">${t.audio_title||t.file_name||"Unknown Track"}</div>
          <div class="document_performer">${t.audio_performer}</div>
          <div class="document_duration">${Object(i.s)(t.duration)}</div>        
        </div>      
      </div>
    `}formatWebPage(e,t){const n=e.webpage;if("webPage"===n._){const e=this.formatThumb(t);if(n.site_name&&e.appendHtml`<a class="wepbage_site_name" href="${encodeURI(n.url)}" target="_blank">${n.site_name}</a>`,n.title&&e.appendHtml`<div class="wepbage_title">${n.title}</div>`,n.description){const t=Object(i.l)(n.description,300,255);e.appendHtml`<div class="webpage_description">${i.e.raw`${t}`.replaceLineBreaks()}</div>`}return i.e.html`<div class="webpage_content">${e}</div>`}return""}formatPoll(e){const t=e.poll,n=e.results;console.log("poll",e);const s=(t.public_voters?"":"Anonymous ")+(t.quiz?"Quiz":"Poll");let a=!1;const o=i.e.html``;for(let e=0;e<t.answers.length;e++){const i=t.answers[e],s=n.results?n.results[e]:{voters:0},r=n.total_voters?Math.round(s.voters/n.total_voters*100):0,c=s.chosen?"poll_option-chosen":"",d=t.quiz?s.correct?"poll_option-correct":"poll_option-wrong":"";o.appendHtml`
        <div class="poll_option ${c} ${d}" data-index="${e}">
          <div class="poll_option_text">${i.text}</div>
          <div class="poll_option_percent">${r}%</div>
          <div class="poll_option_scale" style="width: ${r}%"></div>
        </div>
      `,s.chosen&&(a=!0)}let r;if(!a&&t.multiple_choice)r=i.e.html`<button class="poll_vote_button" disabled>Vote</button>`;else if(t.public_voters)r=i.e.html`<button class="poll_results_button">View Results</button>`;else{const e=n.total_voters,s=t.quiz?e?`${e} answered`:"Nobody answered yet":e?`${e} voted`:"No votes";r=i.e.html`<div class="poll_voters">${s}</div>`}return i.e.html`
      <div class="poll ${a?"poll-voted":""}">
        <div class="poll_question">${t.question}</div>
        <div class="poll_type">${s}</div>
        <div class="poll_options">
          ${o}
        </div>
        ${r}
      </div>
    `}formatText(e){const t=e.message;let n=i.e.html``;if(e.entities){let i=0;for(const s of e.entities){n.appendHtml`${t.substring(i,s.offset)}`,i=s.offset+s.length;const e=t.substr(s.offset,s.length);n.appendHtml`${this.processEntity(e,s)}`}n.appendHtml`${t.substring(i)}`}else n.appendHtml`${t}`;return n.length?(n.replaceLineBreaks(),i.e.html`<span class="message_text">${n}</span>`):n}processEntity(e,t){switch(t._){case"messageEntityUrl":const n=/^https?:\/\//.test(e)?e:"http://"+e;return i.e.html`<a href="${n}" target="_blank" rel="noopener" data-entity="url">${Object(i.l)(e,60,50)}</a>`;case"messageEntityTextUrl":return i.e.html`<a href="${t.url}" target="_blank" rel="noopener" data-entity="text_url">${e}</a>`;case"messageEntityBold":return i.e.html`<b>${e}</b>`;case"messageEntityItalic":return i.e.html`<i>${e}</i>`;case"messageEntityUnderline":return i.e.html`<u>${e}</u>`;case"messageEntityStrike":return i.e.html`<s>${e}</s>`;case"messageEntityCode":return i.e.html`<code>${e}</code>`;case"messageEntityPre":return i.e.html`<pre>${e}</pre>`;case"textEntityTypePreCode":return i.e.html`<pre><code>${e}</code></pre>`;case"messageEntityMention":return i.e.html`<a href="#${e}" data-entity="mention">${e}</a>`;case"messageEntityMentionName":return i.e.html`<a href="#${this.getUserHref(t.user_id)}" data-entity="mention">${e}</a>`;case"messageEntityHashtag":return i.e.html`<a data-entity="hashtag">${e}</a>`;case"messageEntityBotCommand":return i.e.html`<a data-entity="bot_command">${e}</a>`;case"messageEntityEmail":return i.e.html`<a href="mailto:${e}" data-entity="email_address">${e}</a>`;case"messageEntityPhone":return i.e.html`<a href="tel:${e}" data-entity="phone_number">${e}</a>`;default:return e}}formatThumb(e,t){const n=i.e.html``;let s,o;if(e){let r=300,c=200;"sticker"===e.type&&(r=e.emoji?100:150,c=e.emoji?100:150);const d=a.a.choosePhotoSize(e.sizes),l=e.video_sizes&&e.video_sizes[0];if(d||l){[s,o]=this.getThumbWidthHeight(d||l,r,c),t&&t.length>100&&s<300&&(s=300);let a="";"video"!==e.type&&"round"!==e.type&&"gif"!==e.type||(a="gif"===e.type?"GIF":Object(i.s)(e.attributes.duration)),n.appendHtml`
        <div class="message_media_thumb message_media_thumb-${e.type}" style="width:${s}px;height:${o}px;">
          ${a?i.e.html`<div class="message_media_duration">${a}</div>`:""}
          ${["video","gif"].includes(e.type)?i.e.html`<div class="message_media_thumb_play"></div>`:""}
        </div>
      `}}if(t&&"sticker"!==e.type){const e=s?`width:${s}px;`:"";n.appendHtml`<div class="message_media_caption" style="${e}">${t}</div>`}return n}formatMessageDateFull(e){let t;return t=e>(new Date).setHours(0,0,0,0)/1e3?"Today":Object(i.p)(e,{longMonth:!0,withYear:new Date(1e3*e).getFullYear()!==(new Date).getFullYear()})}formatMessageDateTime(e){return`${this.formatMessageDateFull(e)} at ${Object(i.u)(e)}`}getMessageContentTypeLabel(e){if(!e)return"";switch(e._){case"messageMediaPhoto":return"Photo";case"messageMediaDocument":return this.getMessageContentDocumentLabel(e.document);case"messageMediaWebPage":return"Link";case"messageMediaPoll":return"Poll";case"messageMediaGeo":return"Geo";case"messageMediaGeoLive":return"Live Geo";case"messageMediaContact":return"Contact";case"messageMediaUnsupported":return"Message unsupported"}return""}getMessageContentDocumentLabel(e){const t=a.a.getDocumentAttributes(e);switch(t.type){case"video":return"Video";case"gif":return"Gif";case"sticker":return"Sticker"+(t.stickerEmoji?" "+t.stickerEmoji:"");case"voice":return"Voice";case"audio":return"Audio"}return"File"}getServiceMessageText(e){switch(e.action._){case"messageActionChatCreate":{const t=s.a.users.get(e.from_id);return`${s.a.getUserName(t)} created the group "${e.action.title}"`}case"messageActionChatEditTitle":return"Chat name changed";case"messageActionChatEditPhoto":return"Chat photo changed";case"messageActionChatDeletePhoto":return"Chat photo deleted";case"messageActionChatAddUser":{const t=s.a.users.get(e.from_id),n=s.a.getUserName(t),i=e.action.users.map(e=>s.a.getUserName(s.a.users.get(e)));if(i.length>1){return`${n} invited ${i.slice(0,-1).join(", ")+" and "+i.slice(-1)}`}return e.from_id===e.action.users[0]?n+" joined the group":n+" invited "+i[0]}case"messageActionChatDeleteUser":const t=s.a.users.get(e.from_id);return`${s.a.getUserName(t)} left the group`;case"messageActionChatJoinedByLink":{const t=s.a.users.get(e.from_id);return`${s.a.getUserName(t)} joined the group via invite link`}case"messageActionChannelCreate":return"Channel created";case"messageActionChatMigrateTo":case"messageActionChannelMigrateFrom":return"Chat was upgraded to supergroup";case"messageActionPinMessage":{let t="";if(e.from_id){const n=s.a.users.get(e.from_id);t=s.a.getUserName(n)}else t=s.a.getPeerName(e.to_id);const n=s.a.messages.get(e.reply_to_msg_id);return`${t} pinned ${n&&n.message?`"${Object(i.l)(n.message,30,20)}"`:"message"}`}case"messageActionHistoryClear":return"Chat history was cleared";case"messageActionGameScore":return"Someone scored in a game";case"messageActionPaymentSent":return"Payment was sent";case"messageActionPhoneCall":return"Phone call";case"messageActionScreenshotTaken":return"Screenshot was taken";case"messageActionContactSignUp":{const t=s.a.users.get(e.from_id);return`${s.a.getUserName(t)} joined Telegram`}}return""}getUserStatusText(e){if(e.bot)return"bot";if(e.status)switch(e.status._){case"userStatusOnline":return"online";case"userStatusOffline":return e.status.was_online?"last seen "+Object(i.q)(e.status.was_online,p.a.getServerTimeNow()):"offline";case"userStatusRecently":return"last seen recently";case"userStatusLastWeek":return"last seen last week";case"userStatusLastMonth":return"last seen last month"}return"last seen a long time ago"}getUserHref(e){const t=s.a.users.get(e);return t&&t.username?"@"+t.username:"@"+e}async initBackground(){const e=Object(i.a)(".messages_container");if(!window.caches)return void e.prepend(i.e.html`<div class="messages_bg_image"></div>`.buildElement());const t=await caches.open("v1"),n=await t.match("bg.jpg?blurred");let s;if(n)s=await n.blob();else if(window.OffscreenCanvas){const e=await fetch("bg.jpg"),n=await createImageBitmap(await e.blob()),i=n.width/n.height,a=new OffscreenCanvas(...function(e){return screen.width>screen.height?[screen.width,screen.width/e]:[screen.height*e,screen.height]}(i)),o=a.getContext("2d");o.fillStyle="#91b087",o.fillRect(0,0,a.width,a.height),o.filter="blur(10px)",o.drawImage(n,-10,-10,a.width+20,a.height+20),s=await a.convertToBlob({type:"image/jpeg",quality:.95}),t.put("bg.jpg?blurred",new Response(s))}const a=s?URL.createObjectURL(s):"bg.jpg";e.style.backgroundImage=`url(${a})`}async loadAnimatedEmojiStickerSet(){this.animatedEmojies||(this.animatedEmojies=await p.a.callMethod("messages.getStickerSet",{stickerset:{_:"inputStickerSetAnimatedEmoji"}}))}};window.MessagesController=_},function(e,t,n){"use strict";var i=n(0),s=n(3),a=n(11),o=n(2),r=n(5),c=n(12),d=n(9),l=n(4),u={LABEL_FLOAT_ABOVE:"mdc-floating-label--float-above",LABEL_SHAKE:"mdc-floating-label--shake",ROOT:"mdc-floating-label"},h=function(e){function t(n){var i=e.call(this,o.a({},t.defaultAdapter,n))||this;return i.shakeAnimationEndHandler_=function(){return i.handleShakeAnimationEnd_()},i}return o.b(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return u},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},getWidth:function(){return 0},registerInteractionHandler:function(){},deregisterInteractionHandler:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.adapter_.registerInteractionHandler("animationend",this.shakeAnimationEndHandler_)},t.prototype.destroy=function(){this.adapter_.deregisterInteractionHandler("animationend",this.shakeAnimationEndHandler_)},t.prototype.getWidth=function(){return this.adapter_.getWidth()},t.prototype.shake=function(e){var n=t.cssClasses.LABEL_SHAKE;e?this.adapter_.addClass(n):this.adapter_.removeClass(n)},t.prototype.float=function(e){var n=t.cssClasses,i=n.LABEL_FLOAT_ABOVE,s=n.LABEL_SHAKE;e?this.adapter_.addClass(i):(this.adapter_.removeClass(i),this.adapter_.removeClass(s))},t.prototype.handleShakeAnimationEnd_=function(){var e=t.cssClasses.LABEL_SHAKE;this.adapter_.removeClass(e)},t}(l.a),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.b(t,e),t.attachTo=function(e){return new t(e)},t.prototype.shake=function(e){this.foundation_.shake(e)},t.prototype.float=function(e){this.foundation_.float(e)},t.prototype.getWidth=function(){return this.foundation_.getWidth()},t.prototype.getDefaultFoundation=function(){var e=this;return new h({addClass:function(t){return e.root_.classList.add(t)},removeClass:function(t){return e.root_.classList.remove(t)},getWidth:function(){return e.root_.scrollWidth},registerInteractionHandler:function(t,n){return e.listen(t,n)},deregisterInteractionHandler:function(t,n){return e.unlisten(t,n)}})},t}(r.a),m={LINE_RIPPLE_ACTIVE:"mdc-line-ripple--active",LINE_RIPPLE_DEACTIVATING:"mdc-line-ripple--deactivating"},_=function(e){function t(n){var i=e.call(this,o.a({},t.defaultAdapter,n))||this;return i.transitionEndHandler_=function(e){return i.handleTransitionEnd(e)},i}return o.b(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return m},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},setStyle:function(){},registerEventHandler:function(){},deregisterEventHandler:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.adapter_.registerEventHandler("transitionend",this.transitionEndHandler_)},t.prototype.destroy=function(){this.adapter_.deregisterEventHandler("transitionend",this.transitionEndHandler_)},t.prototype.activate=function(){this.adapter_.removeClass(m.LINE_RIPPLE_DEACTIVATING),this.adapter_.addClass(m.LINE_RIPPLE_ACTIVE)},t.prototype.setRippleCenter=function(e){this.adapter_.setStyle("transform-origin",e+"px center")},t.prototype.deactivate=function(){this.adapter_.addClass(m.LINE_RIPPLE_DEACTIVATING)},t.prototype.handleTransitionEnd=function(e){var t=this.adapter_.hasClass(m.LINE_RIPPLE_DEACTIVATING);"opacity"===e.propertyName&&t&&(this.adapter_.removeClass(m.LINE_RIPPLE_ACTIVE),this.adapter_.removeClass(m.LINE_RIPPLE_DEACTIVATING))},t}(l.a),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.b(t,e),t.attachTo=function(e){return new t(e)},t.prototype.activate=function(){this.foundation_.activate()},t.prototype.deactivate=function(){this.foundation_.deactivate()},t.prototype.setRippleCenter=function(e){this.foundation_.setRippleCenter(e)},t.prototype.getDefaultFoundation=function(){var e=this;return new _({addClass:function(t){return e.root_.classList.add(t)},removeClass:function(t){return e.root_.classList.remove(t)},hasClass:function(t){return e.root_.classList.contains(t)},setStyle:function(t,n){return e.root_.style.setProperty(t,n)},registerEventHandler:function(t,n){return e.listen(t,n)},deregisterEventHandler:function(t,n){return e.unlisten(t,n)}})},t}(r.a),f={NOTCH_ELEMENT_SELECTOR:".mdc-notched-outline__notch"},b={NOTCH_ELEMENT_PADDING:8},v={NO_LABEL:"mdc-notched-outline--no-label",OUTLINE_NOTCHED:"mdc-notched-outline--notched",OUTLINE_UPGRADED:"mdc-notched-outline--upgraded"},y=function(e){function t(n){return e.call(this,o.a({},t.defaultAdapter,n))||this}return o.b(t,e),Object.defineProperty(t,"strings",{get:function(){return f},enumerable:!0,configurable:!0}),Object.defineProperty(t,"cssClasses",{get:function(){return v},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return b},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},setNotchWidthProperty:function(){},removeNotchWidthProperty:function(){}}},enumerable:!0,configurable:!0}),t.prototype.notch=function(e){var n=t.cssClasses.OUTLINE_NOTCHED;e>0&&(e+=b.NOTCH_ELEMENT_PADDING),this.adapter_.setNotchWidthProperty(e),this.adapter_.addClass(n)},t.prototype.closeNotch=function(){var e=t.cssClasses.OUTLINE_NOTCHED;this.adapter_.removeClass(e),this.adapter_.removeNotchWidthProperty()},t}(l.a),E=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.b(t,e),t.attachTo=function(e){return new t(e)},t.prototype.initialSyncWithDOM=function(){this.notchElement_=this.root_.querySelector(f.NOTCH_ELEMENT_SELECTOR);var e=this.root_.querySelector("."+h.cssClasses.ROOT);e?(e.style.transitionDuration="0s",this.root_.classList.add(v.OUTLINE_UPGRADED),requestAnimationFrame((function(){e.style.transitionDuration=""}))):this.root_.classList.add(v.NO_LABEL)},t.prototype.notch=function(e){this.foundation_.notch(e)},t.prototype.closeNotch=function(){this.foundation_.closeNotch()},t.prototype.getDefaultFoundation=function(){var e=this;return new y({addClass:function(t){return e.root_.classList.add(t)},removeClass:function(t){return e.root_.classList.remove(t)},setNotchWidthProperty:function(t){return e.notchElement_.style.setProperty("width",t+"px")},removeNotchWidthProperty:function(){return e.notchElement_.style.removeProperty("width")}})},t}(r.a),I=n(14),C=n(16),A={ROOT:"mdc-text-field-character-counter"},T={ROOT_SELECTOR:"."+A.ROOT},O=function(e){function t(n){return e.call(this,o.a({},t.defaultAdapter,n))||this}return o.b(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return A},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return T},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{setContent:function(){}}},enumerable:!0,configurable:!0}),t.prototype.setCounterValue=function(e,t){e=Math.min(e,t),this.adapter_.setContent(e+" / "+t)},t}(l.a),S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.b(t,e),t.attachTo=function(e){return new t(e)},Object.defineProperty(t.prototype,"foundation",{get:function(){return this.foundation_},enumerable:!0,configurable:!0}),t.prototype.getDefaultFoundation=function(){var e=this;return new O({setContent:function(t){e.root_.textContent=t}})},t}(r.a),w={ARIA_CONTROLS:"aria-controls",ICON_SELECTOR:".mdc-text-field__icon",INPUT_SELECTOR:".mdc-text-field__input",LABEL_SELECTOR:".mdc-floating-label",LINE_RIPPLE_SELECTOR:".mdc-line-ripple",OUTLINE_SELECTOR:".mdc-notched-outline"},M={DENSE:"mdc-text-field--dense",DISABLED:"mdc-text-field--disabled",FOCUSED:"mdc-text-field--focused",FULLWIDTH:"mdc-text-field--fullwidth",HELPER_LINE:"mdc-text-field-helper-line",INVALID:"mdc-text-field--invalid",NO_LABEL:"mdc-text-field--no-label",OUTLINED:"mdc-text-field--outlined",ROOT:"mdc-text-field",TEXTAREA:"mdc-text-field--textarea",WITH_LEADING_ICON:"mdc-text-field--with-leading-icon",WITH_TRAILING_ICON:"mdc-text-field--with-trailing-icon"},L={DENSE_LABEL_SCALE:.923,LABEL_SCALE:.75},P=["pattern","min","max","required","step","minlength","maxlength"],D=["color","date","datetime-local","month","range","time","week"],x=["mousedown","touchstart"],N=["click","keydown"],F=function(e){function t(n,i){void 0===i&&(i={});var s=e.call(this,o.a({},t.defaultAdapter,n))||this;return s.isFocused_=!1,s.receivedUserInput_=!1,s.isValid_=!0,s.useNativeValidation_=!0,s.helperText_=i.helperText,s.characterCounter_=i.characterCounter,s.leadingIcon_=i.leadingIcon,s.trailingIcon_=i.trailingIcon,s.inputFocusHandler_=function(){return s.activateFocus()},s.inputBlurHandler_=function(){return s.deactivateFocus()},s.inputInputHandler_=function(){return s.handleInput()},s.setPointerXOffset_=function(e){return s.setTransformOrigin(e)},s.textFieldInteractionHandler_=function(){return s.handleTextFieldInteraction()},s.validationAttributeChangeHandler_=function(e){return s.handleValidationAttributeChange(e)},s}return o.b(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return M},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return w},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return L},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shouldAlwaysFloat_",{get:function(){var e=this.getNativeInput_().type;return D.indexOf(e)>=0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shouldFloat",{get:function(){return this.shouldAlwaysFloat_||this.isFocused_||!!this.getValue()||this.isBadInput_()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shouldShake",{get:function(){return!this.isFocused_&&!this.isValid()&&!!this.getValue()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!0},registerTextFieldInteractionHandler:function(){},deregisterTextFieldInteractionHandler:function(){},registerInputInteractionHandler:function(){},deregisterInputInteractionHandler:function(){},registerValidationAttributeChangeHandler:function(){return new MutationObserver((function(){}))},deregisterValidationAttributeChangeHandler:function(){},getNativeInput:function(){return null},isFocused:function(){return!1},activateLineRipple:function(){},deactivateLineRipple:function(){},setLineRippleTransformOrigin:function(){},shakeLabel:function(){},floatLabel:function(){},hasLabel:function(){return!1},getLabelWidth:function(){return 0},hasOutline:function(){return!1},notchOutline:function(){},closeOutline:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){var e=this;this.adapter_.isFocused()?this.inputFocusHandler_():this.adapter_.hasLabel()&&this.shouldFloat&&(this.notchOutline(!0),this.adapter_.floatLabel(!0)),this.adapter_.registerInputInteractionHandler("focus",this.inputFocusHandler_),this.adapter_.registerInputInteractionHandler("blur",this.inputBlurHandler_),this.adapter_.registerInputInteractionHandler("input",this.inputInputHandler_),x.forEach((function(t){e.adapter_.registerInputInteractionHandler(t,e.setPointerXOffset_)})),N.forEach((function(t){e.adapter_.registerTextFieldInteractionHandler(t,e.textFieldInteractionHandler_)})),this.validationObserver_=this.adapter_.registerValidationAttributeChangeHandler(this.validationAttributeChangeHandler_),this.setCharacterCounter_(this.getValue().length)},t.prototype.destroy=function(){var e=this;this.adapter_.deregisterInputInteractionHandler("focus",this.inputFocusHandler_),this.adapter_.deregisterInputInteractionHandler("blur",this.inputBlurHandler_),this.adapter_.deregisterInputInteractionHandler("input",this.inputInputHandler_),x.forEach((function(t){e.adapter_.deregisterInputInteractionHandler(t,e.setPointerXOffset_)})),N.forEach((function(t){e.adapter_.deregisterTextFieldInteractionHandler(t,e.textFieldInteractionHandler_)})),this.adapter_.deregisterValidationAttributeChangeHandler(this.validationObserver_)},t.prototype.handleTextFieldInteraction=function(){var e=this.adapter_.getNativeInput();e&&e.disabled||(this.receivedUserInput_=!0)},t.prototype.handleValidationAttributeChange=function(e){var t=this;e.some((function(e){return P.indexOf(e)>-1&&(t.styleValidity_(!0),!0)})),e.indexOf("maxlength")>-1&&this.setCharacterCounter_(this.getValue().length)},t.prototype.notchOutline=function(e){if(this.adapter_.hasOutline())if(e){var t=this.adapter_.hasClass(M.DENSE)?L.DENSE_LABEL_SCALE:L.LABEL_SCALE,n=this.adapter_.getLabelWidth()*t;this.adapter_.notchOutline(n)}else this.adapter_.closeOutline()},t.prototype.activateFocus=function(){this.isFocused_=!0,this.styleFocused_(this.isFocused_),this.adapter_.activateLineRipple(),this.adapter_.hasLabel()&&(this.notchOutline(this.shouldFloat),this.adapter_.floatLabel(this.shouldFloat),this.adapter_.shakeLabel(this.shouldShake)),this.helperText_&&this.helperText_.showToScreenReader()},t.prototype.setTransformOrigin=function(e){var t=e.touches,n=t?t[0]:e,i=n.target.getBoundingClientRect(),s=n.clientX-i.left;this.adapter_.setLineRippleTransformOrigin(s)},t.prototype.handleInput=function(){this.autoCompleteFocus(),this.setCharacterCounter_(this.getValue().length)},t.prototype.autoCompleteFocus=function(){this.receivedUserInput_||this.activateFocus()},t.prototype.deactivateFocus=function(){this.isFocused_=!1,this.adapter_.deactivateLineRipple();var e=this.isValid();this.styleValidity_(e),this.styleFocused_(this.isFocused_),this.adapter_.hasLabel()&&(this.notchOutline(this.shouldFloat),this.adapter_.floatLabel(this.shouldFloat),this.adapter_.shakeLabel(this.shouldShake)),this.shouldFloat||(this.receivedUserInput_=!1)},t.prototype.getValue=function(){return this.getNativeInput_().value},t.prototype.setValue=function(e){this.getValue()!==e&&(this.getNativeInput_().value=e),this.setCharacterCounter_(e.length);var t=this.isValid();this.styleValidity_(t),this.adapter_.hasLabel()&&(this.notchOutline(this.shouldFloat),this.adapter_.floatLabel(this.shouldFloat),this.adapter_.shakeLabel(this.shouldShake))},t.prototype.isValid=function(){return this.useNativeValidation_?this.isNativeInputValid_():this.isValid_},t.prototype.setValid=function(e){this.isValid_=e,this.styleValidity_(e);var t=!e&&!this.isFocused_&&!!this.getValue();this.adapter_.hasLabel()&&this.adapter_.shakeLabel(t)},t.prototype.setUseNativeValidation=function(e){this.useNativeValidation_=e},t.prototype.isDisabled=function(){return this.getNativeInput_().disabled},t.prototype.setDisabled=function(e){this.getNativeInput_().disabled=e,this.styleDisabled_(e)},t.prototype.setHelperTextContent=function(e){this.helperText_&&this.helperText_.setContent(e)},t.prototype.setLeadingIconAriaLabel=function(e){this.leadingIcon_&&this.leadingIcon_.setAriaLabel(e)},t.prototype.setLeadingIconContent=function(e){this.leadingIcon_&&this.leadingIcon_.setContent(e)},t.prototype.setTrailingIconAriaLabel=function(e){this.trailingIcon_&&this.trailingIcon_.setAriaLabel(e)},t.prototype.setTrailingIconContent=function(e){this.trailingIcon_&&this.trailingIcon_.setContent(e)},t.prototype.setCharacterCounter_=function(e){if(this.characterCounter_){var t=this.getNativeInput_().maxLength;if(-1===t)throw new Error("MDCTextFieldFoundation: Expected maxlength html property on text input or textarea.");this.characterCounter_.setCounterValue(e,t)}},t.prototype.isBadInput_=function(){return this.getNativeInput_().validity.badInput||!1},t.prototype.isNativeInputValid_=function(){return this.getNativeInput_().validity.valid},t.prototype.styleValidity_=function(e){var n=t.cssClasses.INVALID;e?this.adapter_.removeClass(n):this.adapter_.addClass(n),this.helperText_&&this.helperText_.setValidity(e)},t.prototype.styleFocused_=function(e){var n=t.cssClasses.FOCUSED;e?this.adapter_.addClass(n):this.adapter_.removeClass(n)},t.prototype.styleDisabled_=function(e){var n=t.cssClasses,i=n.DISABLED,s=n.INVALID;e?(this.adapter_.addClass(i),this.adapter_.removeClass(s)):this.adapter_.removeClass(i),this.leadingIcon_&&this.leadingIcon_.setDisabled(e),this.trailingIcon_&&this.trailingIcon_.setDisabled(e)},t.prototype.getNativeInput_=function(){return(this.adapter_?this.adapter_.getNativeInput():null)||{disabled:!1,maxLength:-1,type:"input",validity:{badInput:!1,valid:!0},value:""}},t}(l.a),R={HELPER_TEXT_PERSISTENT:"mdc-text-field-helper-text--persistent",HELPER_TEXT_VALIDATION_MSG:"mdc-text-field-helper-text--validation-msg",ROOT:"mdc-text-field-helper-text"},k={ARIA_HIDDEN:"aria-hidden",ROLE:"role",ROOT_SELECTOR:"."+R.ROOT},j=function(e){function t(n){return e.call(this,o.a({},t.defaultAdapter,n))||this}return o.b(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return R},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return k},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},setAttr:function(){},removeAttr:function(){},setContent:function(){}}},enumerable:!0,configurable:!0}),t.prototype.setContent=function(e){this.adapter_.setContent(e)},t.prototype.setPersistent=function(e){e?this.adapter_.addClass(R.HELPER_TEXT_PERSISTENT):this.adapter_.removeClass(R.HELPER_TEXT_PERSISTENT)},t.prototype.setValidation=function(e){e?this.adapter_.addClass(R.HELPER_TEXT_VALIDATION_MSG):this.adapter_.removeClass(R.HELPER_TEXT_VALIDATION_MSG)},t.prototype.showToScreenReader=function(){this.adapter_.removeAttr(k.ARIA_HIDDEN)},t.prototype.setValidity=function(e){var t=this.adapter_.hasClass(R.HELPER_TEXT_PERSISTENT),n=this.adapter_.hasClass(R.HELPER_TEXT_VALIDATION_MSG)&&!e;n?this.adapter_.setAttr(k.ROLE,"alert"):this.adapter_.removeAttr(k.ROLE),t||n||this.hide_()},t.prototype.hide_=function(){this.adapter_.setAttr(k.ARIA_HIDDEN,"true")},t}(l.a),H=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.b(t,e),t.attachTo=function(e){return new t(e)},Object.defineProperty(t.prototype,"foundation",{get:function(){return this.foundation_},enumerable:!0,configurable:!0}),t.prototype.getDefaultFoundation=function(){var e=this;return new j({addClass:function(t){return e.root_.classList.add(t)},removeClass:function(t){return e.root_.classList.remove(t)},hasClass:function(t){return e.root_.classList.contains(t)},setAttr:function(t,n){return e.root_.setAttribute(t,n)},removeAttr:function(t){return e.root_.removeAttribute(t)},setContent:function(t){e.root_.textContent=t}})},t}(r.a),B={ICON_EVENT:"MDCTextField:icon",ICON_ROLE:"button"},U={ROOT:"mdc-text-field__icon"},V=["click","keydown"],$=function(e){function t(n){var i=e.call(this,o.a({},t.defaultAdapter,n))||this;return i.savedTabIndex_=null,i.interactionHandler_=function(e){return i.handleInteraction(e)},i}return o.b(t,e),Object.defineProperty(t,"strings",{get:function(){return B},enumerable:!0,configurable:!0}),Object.defineProperty(t,"cssClasses",{get:function(){return U},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{getAttr:function(){return null},setAttr:function(){},removeAttr:function(){},setContent:function(){},registerInteractionHandler:function(){},deregisterInteractionHandler:function(){},notifyIconAction:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){var e=this;this.savedTabIndex_=this.adapter_.getAttr("tabindex"),V.forEach((function(t){e.adapter_.registerInteractionHandler(t,e.interactionHandler_)}))},t.prototype.destroy=function(){var e=this;V.forEach((function(t){e.adapter_.deregisterInteractionHandler(t,e.interactionHandler_)}))},t.prototype.setDisabled=function(e){this.savedTabIndex_&&(e?(this.adapter_.setAttr("tabindex","-1"),this.adapter_.removeAttr("role")):(this.adapter_.setAttr("tabindex",this.savedTabIndex_),this.adapter_.setAttr("role",B.ICON_ROLE)))},t.prototype.setAriaLabel=function(e){this.adapter_.setAttr("aria-label",e)},t.prototype.setContent=function(e){this.adapter_.setContent(e)},t.prototype.handleInteraction=function(e){var t="Enter"===e.key||13===e.keyCode;("click"===e.type||t)&&this.adapter_.notifyIconAction()},t}(l.a),G=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.b(t,e),t.attachTo=function(e){return new t(e)},Object.defineProperty(t.prototype,"foundation",{get:function(){return this.foundation_},enumerable:!0,configurable:!0}),t.prototype.getDefaultFoundation=function(){var e=this;return new $({getAttr:function(t){return e.root_.getAttribute(t)},setAttr:function(t,n){return e.root_.setAttribute(t,n)},removeAttr:function(t){return e.root_.removeAttribute(t)},setContent:function(t){e.root_.textContent=t},registerInteractionHandler:function(t,n){return e.listen(t,n)},deregisterInteractionHandler:function(t,n){return e.unlisten(t,n)},notifyIconAction:function(){return e.emit($.strings.ICON_EVENT,{},!0)}})},t}(r.a),z=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.b(t,e),t.attachTo=function(e){return new t(e)},t.prototype.initialize=function(e,t,n,i,s,a,o){void 0===e&&(e=function(e,t){return new I.a(e,t)}),void 0===t&&(t=function(e){return new g(e)}),void 0===n&&(n=function(e){return new H(e)}),void 0===i&&(i=function(e){return new S(e)}),void 0===s&&(s=function(e){return new G(e)}),void 0===a&&(a=function(e){return new p(e)}),void 0===o&&(o=function(e){return new E(e)}),this.input_=this.root_.querySelector(w.INPUT_SELECTOR);var r=this.root_.querySelector(w.LABEL_SELECTOR);this.label_=r?a(r):null;var c=this.root_.querySelector(w.LINE_RIPPLE_SELECTOR);this.lineRipple_=c?t(c):null;var d=this.root_.querySelector(w.OUTLINE_SELECTOR);this.outline_=d?o(d):null;var l=j.strings,u=this.root_.nextElementSibling,h=u&&u.classList.contains(M.HELPER_LINE),m=h&&u&&u.querySelector(l.ROOT_SELECTOR);this.helperText_=m?n(m):null;var _=O.strings,f=this.root_.querySelector(_.ROOT_SELECTOR);!f&&h&&u&&(f=u.querySelector(_.ROOT_SELECTOR)),this.characterCounter_=f?i(f):null,this.leadingIcon_=null,this.trailingIcon_=null;var b=this.root_.querySelectorAll(w.ICON_SELECTOR);b.length>0&&(b.length>1?(this.leadingIcon_=s(b[0]),this.trailingIcon_=s(b[1])):this.root_.classList.contains(M.WITH_LEADING_ICON)?this.leadingIcon_=s(b[0]):this.trailingIcon_=s(b[0])),this.ripple=this.createRipple_(e)},t.prototype.destroy=function(){this.ripple&&this.ripple.destroy(),this.lineRipple_&&this.lineRipple_.destroy(),this.helperText_&&this.helperText_.destroy(),this.characterCounter_&&this.characterCounter_.destroy(),this.leadingIcon_&&this.leadingIcon_.destroy(),this.trailingIcon_&&this.trailingIcon_.destroy(),this.label_&&this.label_.destroy(),this.outline_&&this.outline_.destroy(),e.prototype.destroy.call(this)},t.prototype.initialSyncWithDOM=function(){this.disabled=this.input_.disabled},Object.defineProperty(t.prototype,"value",{get:function(){return this.foundation_.getValue()},set:function(e){this.foundation_.setValue(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return this.foundation_.isDisabled()},set:function(e){this.foundation_.setDisabled(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"valid",{get:function(){return this.foundation_.isValid()},set:function(e){this.foundation_.setValid(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"required",{get:function(){return this.input_.required},set:function(e){this.input_.required=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pattern",{get:function(){return this.input_.pattern},set:function(e){this.input_.pattern=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minLength",{get:function(){return this.input_.minLength},set:function(e){this.input_.minLength=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxLength",{get:function(){return this.input_.maxLength},set:function(e){e<0?this.input_.removeAttribute("maxLength"):this.input_.maxLength=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"min",{get:function(){return this.input_.min},set:function(e){this.input_.min=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"max",{get:function(){return this.input_.max},set:function(e){this.input_.max=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"step",{get:function(){return this.input_.step},set:function(e){this.input_.step=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"helperTextContent",{set:function(e){this.foundation_.setHelperTextContent(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leadingIconAriaLabel",{set:function(e){this.foundation_.setLeadingIconAriaLabel(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leadingIconContent",{set:function(e){this.foundation_.setLeadingIconContent(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"trailingIconAriaLabel",{set:function(e){this.foundation_.setTrailingIconAriaLabel(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"trailingIconContent",{set:function(e){this.foundation_.setTrailingIconContent(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"useNativeValidation",{set:function(e){this.foundation_.setUseNativeValidation(e)},enumerable:!0,configurable:!0}),t.prototype.focus=function(){this.input_.focus()},t.prototype.layout=function(){var e=this.foundation_.shouldFloat;this.foundation_.notchOutline(e)},t.prototype.getDefaultFoundation=function(){var e=o.a({},this.getRootAdapterMethods_(),this.getInputAdapterMethods_(),this.getLabelAdapterMethods_(),this.getLineRippleAdapterMethods_(),this.getOutlineAdapterMethods_());return new F(e,this.getFoundationMap_())},t.prototype.getRootAdapterMethods_=function(){var e=this;return{addClass:function(t){return e.root_.classList.add(t)},removeClass:function(t){return e.root_.classList.remove(t)},hasClass:function(t){return e.root_.classList.contains(t)},registerTextFieldInteractionHandler:function(t,n){return e.listen(t,n)},deregisterTextFieldInteractionHandler:function(t,n){return e.unlisten(t,n)},registerValidationAttributeChangeHandler:function(t){var n=new MutationObserver((function(e){return t(function(e){return e.map((function(e){return e.attributeName})).filter((function(e){return e}))}(e))}));return n.observe(e.input_,{attributes:!0}),n},deregisterValidationAttributeChangeHandler:function(e){return e.disconnect()}}},t.prototype.getInputAdapterMethods_=function(){var e=this;return{getNativeInput:function(){return e.input_},isFocused:function(){return document.activeElement===e.input_},registerInputInteractionHandler:function(t,n){return e.input_.addEventListener(t,n,Object(c.a)())},deregisterInputInteractionHandler:function(t,n){return e.input_.removeEventListener(t,n,Object(c.a)())}}},t.prototype.getLabelAdapterMethods_=function(){var e=this;return{floatLabel:function(t){return e.label_&&e.label_.float(t)},getLabelWidth:function(){return e.label_?e.label_.getWidth():0},hasLabel:function(){return Boolean(e.label_)},shakeLabel:function(t){return e.label_&&e.label_.shake(t)}}},t.prototype.getLineRippleAdapterMethods_=function(){var e=this;return{activateLineRipple:function(){e.lineRipple_&&e.lineRipple_.activate()},deactivateLineRipple:function(){e.lineRipple_&&e.lineRipple_.deactivate()},setLineRippleTransformOrigin:function(t){e.lineRipple_&&e.lineRipple_.setRippleCenter(t)}}},t.prototype.getOutlineAdapterMethods_=function(){var e=this;return{closeOutline:function(){return e.outline_&&e.outline_.closeNotch()},hasOutline:function(){return Boolean(e.outline_)},notchOutline:function(t){return e.outline_&&e.outline_.notch(t)}}},t.prototype.getFoundationMap_=function(){return{characterCounter:this.characterCounter_?this.characterCounter_.foundation:void 0,helperText:this.helperText_?this.helperText_.foundation:void 0,leadingIcon:this.leadingIcon_?this.leadingIcon_.foundation:void 0,trailingIcon:this.trailingIcon_?this.trailingIcon_.foundation:void 0}},t.prototype.createRipple_=function(e){var t=this,n=this.root_.classList.contains(M.TEXTAREA),i=this.root_.classList.contains(M.OUTLINED);if(n||i)return null;var s=o.a({},I.a.createAdapter(this),{isSurfaceActive:function(){return d.b(t.input_,":active")},registerInteractionHandler:function(e,n){return t.input_.addEventListener(e,n,Object(c.a)())},deregisterInteractionHandler:function(e,n){return t.input_.removeEventListener(e,n,Object(c.a)())}});return e(this.root_,new C.a(s))},t}(r.a);const K=[["AF","Afghanistan","+93"],["AX","Åland Islands","+358 18"],["AL","Albania","+355"],["DZ","Algeria","+213"],["AS","American Samoa","+1 684"],["AD","Andorra","+376"],["AO","Angola","+244"],["AI","Anguilla","+1 264"],["AG","Antigua & Barbuda","+1 268"],["AR","Argentina","+54"],["AM","Armenia","+374"],["AW","Aruba","+297"],["SH","Ascension","+247"],["AU","Australia","+61"],["AU","Australian External Territories","+672"],["AT","Austria","+43"],["AZ","Azerbaijan","+994"],["BS","Bahamas","+1 242"],["BH","Bahrain","+973"],["BD","Bangladesh","+880"],["BB","Barbados","+1 246"],["AG","Barbuda","+1 268"],["BY","Belarus","+375"],["BE","Belgium","+32"],["BZ","Belize","+501"],["BJ","Benin","+229"],["BM","Bermuda","+1 441"],["BT","Bhutan","+975"],["BO","Bolivia","+591"],["BQ","Caribbean Netherlands","+599 7"],["BA","Bosnia & Herzegovina","+387"],["BW","Botswana","+267"],["BR","Brazil","+55"],["IO","British Indian Ocean Territory","+246"],["VG","British Virgin Islands","+1 284"],["BN","Brunei","+673"],["BG","Bulgaria","+359"],["BF","Burkina Faso","+226"],["MY","Myanmar (Burma)","+95"],["BI","Burundi","+257"],["KH","Cambodia","+855"],["CM","Cameroon","+237"],["CA","Canada","+1"],["CV","Cape Verde","+238"],["KY","Cayman Islands","+1 345"],["CF","Central African Republic","+236"],["TD","Chad","+235"],["CL","Chile","+56"],["CN","China","+86"],["CX","Christmas Island","+61"],["CC","Cocos (Keeling) Islands","+61"],["CO","Colombia","+57"],["KM","Comoros","+269"],["CG","Congo - Brazzaville","+242"],["CD","Congo - Kinshasa","+243"],["CK","Cook Islands","+682"],["CR","Costa Rica","+506"],["CI","Côte d’Ivoire","+225"],["HR","Croatia","+385"],["CU","Cuba","+53"],["CW","Curaçao","+599 9"],["CY","Cyprus","+357"],["CZ","Czech Republic","+420"],["DK","Denmark","+45"],["DG","Diego Garcia","+246"],["DJ","Djibouti","+253"],["DM","Dominica","+1 767"],["DO","Dominican Republic","+1 809","+1 829","+1 849"],["TL","Timor-Leste","+670"],["EC","Ecuador","+593"],["EG","Egypt","+20"],["SV","El Salvador","+503"],["GQ","Equatorial Guinea","+240"],["ER","Eritrea","+291"],["EE","Estonia","+372"],["ET","Ethiopia","+251"],["FK","Falkland Islands","+500"],["FO","Faroe Islands","+298"],["FJ","Fiji","+679"],["FI","Finland","+358"],["FR","France","+33"],["GF","French Guiana","+594"],["PF","French Polynesia","+689"],["GA","Gabon","+241"],["GM","Gambia","+220"],["GE","Georgia","+995"],["DE","Germany","+49"],["GH","Ghana","+233"],["GI","Gibraltar","+350"],["GR","Greece","+30"],["GL","Greenland","+299"],["GD","Grenada","+1 473"],["GP","Guadeloupe","+590"],["GU","Guam","+1 671"],["GT","Guatemala","+502"],["GG","Guernsey","+44"],["GN","Guinea","+224"],["GW","Guinea-Bissau","+245"],["GY","Guyana","+592"],["HT","Haiti","+509"],["HN","Honduras","+504"],["HK","Hong Kong SAR China","+852"],["HU","Hungary","+36"],["IS","Iceland","+354"],["IN","India","+91"],["ID","Indonesia","+62"],["IR","Iran","+98"],["IQ","Iraq","+964"],["IE","Ireland","+353"],["IL","Israel","+972"],["IT","Italy","+39"],["JM","Jamaica","+1 876"],["SJ","Svalbard & Jan Mayen","+47 79"],["JP","Japan","+81"],["JE","Jersey","+44"],["JO","Jordan","+962"],["KZ","Kazakhstan","+7 7"],["KE","Kenya","+254"],["KI","Kiribati","+686"],["KP","North Korea","+850"],["KR","South Korea","+82"],["KW","Kuwait","+965"],["KG","Kyrgyzstan","+996"],["LA","Laos","+856"],["LV","Latvia","+371"],["LB","Lebanon","+961"],["LS","Lesotho","+266"],["LR","Liberia","+231"],["LY","Libya","+218"],["LI","Liechtenstein","+423"],["LT","Lithuania","+370"],["LU","Luxembourg","+352"],["MO","Macau SAR China","+853"],["MK","Macedonia","+389"],["MG","Madagascar","+261"],["MW","Malawi","+265"],["MY","Malaysia","+60"],["MV","Maldives","+960"],["ML","Mali","+223"],["MT","Malta","+356"],["MH","Marshall Islands","+692"],["MQ","Martinique","+596"],["MR","Mauritania","+222"],["MU","Mauritius","+230"],["YT","Mayotte","+262"],["MX","Mexico","+52"],["FM","Micronesia","+691"],["MD","Moldova","+373"],["MC","Monaco","+377"],["MN","Mongolia","+976"],["ME","Montenegro","+382"],["MS","Montserrat","+1 664"],["MA","Morocco","+212"],["MZ","Mozambique","+258"],["NA","Namibia","+264"],["NR","Nauru","+674"],["NP","Nepal","+977"],["NL","Netherlands","+31"],["NC","New Caledonia","+687"],["NZ","New Zealand","+64"],["NI","Nicaragua","+505"],["NE","Niger","+227"],["NG","Nigeria","+234"],["NU","Niue","+683"],["NF","Norfolk Island","+672"],["MP","Northern Mariana Islands","+1 670"],["NO","Norway","+47"],["OM","Oman","+968"],["PK","Pakistan","+92"],["PW","Palau","+680"],["PS","Palestinian Territories","+970"],["PA","Panama","+507"],["PG","Papua New Guinea","+675"],["PY","Paraguay","+595"],["PE","Peru","+51"],["PH","Philippines","+63"],["PN","Pitcairn Islands","+64"],["PL","Poland","+48"],["PT","Portugal","+351"],["PR","Puerto Rico","+1 787","+1 939"],["QA","Qatar","+974"],["RE","Réunion","+262"],["RO","Romania","+40"],["RU","Russia","+7"],["RW","Rwanda","+250"],["BL","St. Barthélemy","+590"],["SH","St. Helena","+290"],["KN","St. Kitts & Nevis","+1 869"],["LC","St. Lucia","+1 758"],["MF","St. Martin (France)","+590"],["PM","St. Pierre and Miquelon","+508"],["VC","St. Vincent and the Grenadines","+1 784"],["WS","Samoa","+685"],["SM","San Marino","+378"],["ST","São Tomé & Príncipe","+239"],["SA","Saudi Arabia","+966"],["SN","Senegal","+221"],["RS","Serbia","+381"],["SC","Seychelles","+248"],["SL","Sierra Leone","+232"],["SG","Singapore","+65"],["BQ","Sint Eustatius","+599 3"],["SX","Sint Maarten","+1 721"],["SK","Slovakia","+421"],["SI","Slovenia","+386"],["SB","Solomon Islands","+677"],["SO","Somalia","+252"],["ZA","South Africa","+27"],["GS","South Georgia & South Sandwich Islands","+500"],["SS","South Sudan","+211"],["ES","Spain","+34"],["LK","Sri Lanka","+94"],["SD","Sudan","+249"],["SR","Suriname","+597"],["SJ","Svalbard","+47 79"],["SZ","Swaziland","+268"],["SE","Sweden","+46"],["CH","Switzerland","+41"],["SY","Syria","+963"],["TW","Taiwan","+886"],["TJ","Tajikistan","+992"],["TZ","Tanzania","+255"],["TH","Thailand","+66"],["TG","Togo","+228"],["TK","Tokelau","+690"],["TO","Tonga","+676"],["TT","Trinidad & Tobago","+1 868"],["TN","Tunisia","+216"],["TR","Turkey","+90"],["TM","Turkmenistan","+993"],["TC","Turks & Caicos Islands","+1 649"],["TV","Tuvalu","+688"],["UG","Uganda","+256"],["UA","Ukraine","+380"],["AE","United Arab Emirates","+971"],["UK","United Kingdom","+44"],["US","United States","+1"],["UY","Uruguay","+598"],["VI","U.S. Virgin Islands","+1 340"],["UZ","Uzbekistan","+998"],["VU","Vanuatu","+678"],["VE","Venezuela","+58"],["VA","Vatican City","+39 06 698","+379"],["VN","Vietnam","+84"],["WF","Wallis & Futuna","+681"],["YE","Yemen","+967"],["ZM","Zambia","+260"],["ZW","Zimbabwe","+263"]];var q=n(15);function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const X=new class{constructor(){W(this,"dom",{}),W(this,"mdcComponents",[]),W(this,"authParams",{}),W(this,"checkInput",()=>{switch(this.step){case 0:this.phoneTextField.value.replace(/\D/g,"").length>=8&&(this.submitButton.hidden=!1);break;case 1:this.codeTextField.value.length>=this.authParams.codeLength&&(this.submitButton.hidden=!1);break;case 2:this.passwordTextField.value&&(this.submitButton.hidden=!1);break;case 3:this.firstNameTextField.value.trim()&&(this.submitButton.hidden=!1)}}),W(this,"onFormSubmit",e=>{switch(e.preventDefault(),this.step){case 0:this.submitPhoneNumber();break;case 1:this.submitConfirmationCode();break;case 2:this.submitPassword();break;case 3:this.submitSignUp()}}),W(this,"chooseProfilePhoto",()=>{const e=document.createElement("input");e.type="file",e.accept="image/*",e.click(),e.addEventListener("change",()=>{this.profilePhotoFile=e.files[0]})})}init(){const e=Object(i.y)("login"),t=Object(i.a)(".login_container",e);this.dom=Object(i.x)(t),this.dom.container=t,this.dom.form.addEventListener("submit",this.onFormSubmit),this.preloadAnimations(),this.setStep(0),document.body.append(t)}setDomContent(e,t){"string"==typeof t?this.dom[e].innerHTML=t:(this.dom[e].innerHTML="",this.dom[e].append(t))}setDomText(e,t){this.dom[e].textContent=t}setAnimatedImage(e,t=null){this.setDomContent("image",e);try{t?e.getLottie().playSegments(t,!0):e.play()}catch(t){console.log("Can not play animation",e)}}setStep(e,t={}){switch(this.step=e,e){case 0:{this.setDomContent("image",'<div class="login_telegram_logo login_image_content"></div>'),this.setDomContent("header","Sign in to Telegram"),this.setDomContent("subheader","Please enter your phone number",!1),this.dom.form.innerHTML="";const e=this.buildInput("Country"),t=this.buildInput("Phone Number","tel"),n=this.buildCountryMenu(e,t);this.submitButton=this.buildButton("Next"),this.countryTextField=new z(e),this.phoneTextField=new z(t),this.dom.form.append(e,n,t,this.submitButton),this.mdcComponents.push(this.phoneTextField),this.authParams.phoneNumber&&(this.phoneTextField.value=this.authParams.phoneNumber),this.phoneTextField.focus()}break;case 1:{this.setAnimatedImage(this.animations.idle),this.setDomText("header","+"+this.authParams.phoneNumber),this.setDomContent("subheader","We have sent you an SMS<br>with the code."),this.dom.header.append(this.buildEditPhoneButton()),this.dom.form.innerHTML="";const e=this.buildCodeInput();this.submitButton=this.buildButton("Next"),this.codeTextField=new z(e),this.dom.form.append(e,this.submitButton),this.mdcComponents.push(this.codeTextField)}break;case 2:{this.setAnimatedImage(this.animations.close,[0,50]),this.setDomContent("header","Enter a password"),this.setDomContent("subheader","Your account is protected with<br>an additional password",!1),this.dom.form.innerHTML="";const e=this.buildPasswordInput();this.submitButton=this.buildButton("Next"),this.passwordTextField=new z(e),this.dom.form.append(e,this.submitButton),this.mdcComponents.push(this.passwordTextField),Promise.all([n.e(0),n.e(1)]).then(n.bind(null,32))}break;case 3:{const e=i.e.html`<div class="login_upload_photo login_image_content">`.buildElement();e.addEventListener("click",this.chooseProfilePhoto),this.setDomContent("image",e),this.setDomContent("header","Your Name"),this.setDomContent("subheader","Enter your name and add<br>a profile picture",!1),this.dom.form.innerHTML="";const t=this.buildInput("Name"),n=this.buildInput("Last Name (optional)");this.submitButton=this.buildButton("Start messaging"),this.firstNameTextField=new z(t),this.lastNameTextField=new z(n),this.dom.form.append(t,n,this.submitButton),this.mdcComponents.push(this.firstNameTextField,this.lastNameTextField)}}}submitPhoneNumber(){const e=this.phoneTextField.value.replace(/\D/g,"");e.length<8?this.phoneTextField.valid=!1:(this.submitButton.disabled=!0,s.a.callMethod("auth.sendCode",{phone_number:e,api_id:ye.API_ID,api_hash:ye.API_HASH,settings:{_:"codeSettings"}}).then(t=>{console.log(t),this.authParams.phoneNumber=e,this.authParams.phoneCodeHash=t.phone_code_hash,this.authParams.codeType=t.type._,this.authParams.codeLength=t.type.length,this.setStep(1)}).catch(e=>{"AUTH_RESTART"===e.error_message?this.submitPhoneNumber():(this.phoneTextField.valid=!1,ye.alert(this.getApiErrorDescription(e.error_code,e.error_message)))}).finally(()=>{this.submitButton.disabled=!1}))}submitConfirmationCode(){const e=this.codeTextField.value;e.length===this.authParams.codeLength?(this.submitButton.disabled=!0,s.a.callMethod("auth.signIn",{phone_number:this.authParams.phoneNumber,phone_code_hash:this.authParams.phoneCodeHash,phone_code:e}).then(e=>{this.onAuthResult(e)}).catch(t=>{"PHONE_CODE_INVALID"===t.error_message?this.codeTextField.valid=!1:"SESSION_PASSWORD_NEEDED"===t.error_message?this.setStep(2):"PHONE_NUMBER_UNOCCUPIED"===t.error_message?(this.authParams.phoneCode=e,this.setStep(3)):(this.codeTextField.valid=!1,ye.alert(this.getApiErrorDescription(t.error_code,t.error_message)))}).finally(()=>{this.submitButton.disabled=!1})):this.codeTextField.valid=!1}async submitPassword(){const e=this.passwordTextField.value;if(!e.length)return void(this.passwordTextField.valid=!1);this.submitButton.disabled=!0;const t=await s.a.callMethod("account.getPassword"),{getInputPasswordSRP:i}=await Promise.all([n.e(0),n.e(1)]).then(n.bind(null,32)),a=await i(e,t);s.a.callMethod("auth.checkPassword",{password:Object.assign({_:"inputCheckPasswordSRP"},a)}).then(e=>{this.onAuthResult(e)}).catch(e=>{this.passwordTextField.valid=!1,ye.alert(this.getApiErrorDescription(e.error_code,e.error_message))}).finally(()=>{this.submitButton.disabled=!1})}submitSignUp(){const e=this.firstNameTextField.value,t=this.lastNameTextField.value;e?(this.submitButton.disabled=!0,s.a.callMethod("auth.signUp",{phone_number:this.authParams.phoneNumber,phone_code_hash:this.authParams.phoneCodeHash,phone_code:this.authParams.phoneCode,first_name:e,last_name:t}).then(e=>{this.onAuthResult(e),this.uploadProfilePhoto()}).catch(e=>{this.passwordTextField.valid=!1,ye.alert(this.getApiErrorDescription(e.error_code,e.error_message))}).finally(()=>{this.submitButton.disabled=!1})):this.firstNameTextField.valid=!1}onAuthResult(e){"auth.authorizationSignUpRequired"===e._?this.setStep(3,{terms_of_service:e.terms_of_service}):ye.authDone(e)}getApiErrorDescription(e,t){switch(t){case"PHONE_NUMBER_INVALID":return"The phone number is invalid";case"PHONE_NUMBER_OCCUPIED":return"The phone number is already in use";case"PHONE_NUMBER_UNOCCUPIED":return"The phone number is not yet being used";case"PHONE_CODE_EXPIRED":return"The confirmation code has expired";case"PHONE_NUMBER_BANNED":return"The provided phone number is banned from telegram";case"PHONE_NUMBER_FLOOD":return"You asked for the code too many times";case"PHONE_PASSWORD_FLOOD":return"You have tried logging in too many times";case"PHONE_PASSWORD_PROTECTED":return"This phone is password protected"}if(420===e&&t.startsWith("FLOOD_WAIT_")){const e=+t.match(/\d+$/)[0];if(e<60)return a.a.getPlural("login_flood_pluralize_seconds",e);if(e<3600){const t=Math.floor(e/60);return a.a.getPlural("login_flood_pluralize_minutes",t)}{const t=Math.floor(e/60/60);return a.a.getPlural("login_flood_pluralize_hours",t)}}return"An error occurred"}buildInput(e,t="text"){const n=i.e.html`
      <div class="login_input mdc-text-field mdc-text-field--outlined">
        <input type="${t}" class="mdc-text-field__input">
        <div class="mdc-notched-outline">
          <div class="mdc-notched-outline__leading"></div>
          <div class="mdc-notched-outline__notch">
            <label class="mdc-floating-label">${e}</label>
          </div>
          <div class="mdc-notched-outline__trailing"></div>
        </div>
      </div>
    `.buildElement();return n.querySelector("input").addEventListener("keyup",this.checkInput),n}buildCodeInput(){const e=this.buildInput("Code"),t=e.querySelector("input");let n;t.addEventListener("input",()=>{t.value=t.value.replace(/\D/g,""),s()});let i=!1;const s=()=>{i||(i=!0,n?(n.stop(),n.play()):(n=this.animations.tracking,this.setAnimatedImage(n),n.addEventListener("complete",()=>{i=!1})))};return e}buildPasswordInput(){const e=this.buildInput("Password","password"),t=Object(i.a)("input",e),n=i.e.html`<span class="login_password_visibility_button"></span>`.buildElement();return e.append(n),n.addEventListener("click",()=>{const e="password"===t.type;t.type=e?"text":"password",n.classList.toggle("login_password_visibility_button-visible",e),e?this.setAnimatedImage(this.animations.peek,[0,21]):this.setAnimatedImage(this.animations.peek,[21,33])}),e}buildButton(e,t=!0){const n=i.e.html`
      <button class="login_button mdc-button mdc-button--unelevated" type="submit" ${t?" hidden":""}><span class="mdc-button__ripple"></span>${e}</button>
    `.buildElement();return this.mdcComponents.push(...Object(i.g)(n)),n}buildCountryMenu(e,t){const n=i.e.html`<div class="login_input_arrow"></div>`.buildElement();e.appendChild(n);const s=[],a=[];for(const e of K){const[t,n,o]=e;s.push([o.replace(/\s+/g,""),e]);const r=Object(q.b)(t),c=i.e.html`
        <li class="mdc-list-item login_countries_item" role="menuitem" data-code="${t}" data-name="${n.toLowerCase()}">
          <div class="login_countries_item_emoji">${r}</div>
          <div class="login_countries_item_country">${n}</div>
          <div class="login_countries_item_prefix">${o}</div>
        </li>
      `.buildElement();c.addEventListener("mousedown",d),a.push(c)}const o=i.e.html`
      <div class="mdc-menu mdc-menu-surface login_countries_menu" hidden>
        <ul class="mdc-list login_countries_list" role="menu" aria-hidden="true" aria-orientation="vertical" tabindex="-1"></ul>
      </div>
    `.buildElement();Object(i.a)(".login_countries_list",o).append(...a);let r=a.length;const c=e.querySelector("input");function d(e){e.preventDefault();const t=e.currentTarget,n=Object(i.a)(".login_countries_item_country",t).innerText,s=Object(i.a)(".login_countries_item_prefix",t).innerText.replace(/\s+/g,"");X.countryTextField.value=n,X.phoneTextField.value=s,X.phoneTextField.focus()}function l(e){o.hidden=!e,n.classList.toggle("login_input_arrow_open",e)}c.addEventListener("focus",()=>{r&&l(!0)}),c.addEventListener("blur",()=>{l(!1)}),c.addEventListener("input",()=>{const e=c.value.trim().toLowerCase();r=0;for(const t of a)t.dataset.name.indexOf(e)>-1?(t.style.display="",r++):t.style.display="none";l(!!r)});const u=t.querySelector("input");return u.addEventListener("input",()=>{let e=u.value;e&&"+"!==e&&(e=e.replace(/^0+|\D/g,""))&&(e="+"+e);const t=[],n=[];for(const i of s){const[s]=i;e.startsWith(s)?t.push(i):s.startsWith(e)&&n.push(i)}let i;if(t.length&&!n.length&&(1===t.length||t[0][0]!==t[1][0])){const n=t.sort((e,t)=>t[0].length-e[0].length)[0];e!==n[0]&&(e=e.replace(n[0],n[0]+" ")),i=n[1]}u.value=e,X.countryTextField.value=i?i[1]:""}),o}buildEditPhoneButton(){const e=i.e.html`
      <span class="login_edit_phone_button"></span>
    `.buildElement();return e.addEventListener("click",()=>{this.setStep(0)}),e}preloadAnimations(){this.animations={idle:i.e.html`<tgs-player mode="normal" src="tgs/TwoFactorSetupMonkeyIdle.tgs" class="login_image_content"></tgs-player>`.buildElement(),tracking:i.e.html`<tgs-player mode="normal" src="tgs/TwoFactorSetupMonkeyTracking.tgs" class="login_image_content"></tgs-player>`.buildElement(),close:i.e.html`<tgs-player mode="normal" src="tgs/TwoFactorSetupMonkeyClose.tgs" class="login_image_content"></tgs-player>`.buildElement(),peek:i.e.html`<tgs-player mode="normal" src="tgs/TwoFactorSetupMonkeyPeek.tgs" class="login_image_content"></tgs-player>`.buildElement()};const e=document.createElement("div");e.hidden=!0,e.append(...Object.values(this.animations)),this.dom.container.appendChild(e)}async uploadProfilePhoto(){if(!this.profilePhotoFile)return;const e=await FileApiManager.uploadFile(this.profilePhotoFile);await s.a.callMethod("photos.uploadProfilePhoto",{file:e}),MessagesApiManager.reloadUser(ye.getAuthUserId())}destroy(){this.dom.container.remove(),this.dom=null;for(const e of this.mdcComponents)e.destroy();this.mdcComponents=[]}};window.LoginController=X;var Y=n(10),Q=n(7),J={CLOSING:"mdc-snackbar--closing",OPEN:"mdc-snackbar--open",OPENING:"mdc-snackbar--opening"},Z={ACTION_SELECTOR:".mdc-snackbar__action",ARIA_LIVE_LABEL_TEXT_ATTR:"data-mdc-snackbar-label-text",CLOSED_EVENT:"MDCSnackbar:closed",CLOSING_EVENT:"MDCSnackbar:closing",DISMISS_SELECTOR:".mdc-snackbar__dismiss",LABEL_SELECTOR:".mdc-snackbar__label",OPENED_EVENT:"MDCSnackbar:opened",OPENING_EVENT:"MDCSnackbar:opening",REASON_ACTION:"action",REASON_DISMISS:"dismiss",SURFACE_SELECTOR:".mdc-snackbar__surface"},ee={DEFAULT_AUTO_DISMISS_TIMEOUT_MS:5e3,INDETERMINATE:-1,MAX_AUTO_DISMISS_TIMEOUT_MS:1e4,MIN_AUTO_DISMISS_TIMEOUT_MS:4e3,SNACKBAR_ANIMATION_CLOSE_TIME_MS:75,SNACKBAR_ANIMATION_OPEN_TIME_MS:150,ARIA_LIVE_DELAY_MS:1e3},te=J.OPENING,ne=J.OPEN,ie=J.CLOSING,se=Z.REASON_ACTION,ae=Z.REASON_DISMISS,oe=function(e){function t(n){var i=e.call(this,o.a({},t.defaultAdapter,n))||this;return i.isOpen_=!1,i.animationFrame_=0,i.animationTimer_=0,i.autoDismissTimer_=0,i.autoDismissTimeoutMs_=ee.DEFAULT_AUTO_DISMISS_TIMEOUT_MS,i.closeOnEscape_=!0,i}return o.b(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return J},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return Z},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return ee},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},announce:function(){},notifyClosed:function(){},notifyClosing:function(){},notifyOpened:function(){},notifyOpening:function(){},removeClass:function(){}}},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){this.clearAutoDismissTimer_(),cancelAnimationFrame(this.animationFrame_),this.animationFrame_=0,clearTimeout(this.animationTimer_),this.animationTimer_=0,this.adapter_.removeClass(te),this.adapter_.removeClass(ne),this.adapter_.removeClass(ie)},t.prototype.open=function(){var e=this;this.clearAutoDismissTimer_(),this.isOpen_=!0,this.adapter_.notifyOpening(),this.adapter_.removeClass(ie),this.adapter_.addClass(te),this.adapter_.announce(),this.runNextAnimationFrame_((function(){e.adapter_.addClass(ne),e.animationTimer_=setTimeout((function(){var t=e.getTimeoutMs();e.handleAnimationTimerEnd_(),e.adapter_.notifyOpened(),t!==ee.INDETERMINATE&&(e.autoDismissTimer_=setTimeout((function(){e.close(ae)}),t))}),ee.SNACKBAR_ANIMATION_OPEN_TIME_MS)}))},t.prototype.close=function(e){var t=this;void 0===e&&(e=""),this.isOpen_&&(cancelAnimationFrame(this.animationFrame_),this.animationFrame_=0,this.clearAutoDismissTimer_(),this.isOpen_=!1,this.adapter_.notifyClosing(e),this.adapter_.addClass(J.CLOSING),this.adapter_.removeClass(J.OPEN),this.adapter_.removeClass(J.OPENING),clearTimeout(this.animationTimer_),this.animationTimer_=setTimeout((function(){t.handleAnimationTimerEnd_(),t.adapter_.notifyClosed(e)}),ee.SNACKBAR_ANIMATION_CLOSE_TIME_MS))},t.prototype.isOpen=function(){return this.isOpen_},t.prototype.getTimeoutMs=function(){return this.autoDismissTimeoutMs_},t.prototype.setTimeoutMs=function(e){var t=ee.MIN_AUTO_DISMISS_TIMEOUT_MS,n=ee.MAX_AUTO_DISMISS_TIMEOUT_MS,i=ee.INDETERMINATE;if(!(e===ee.INDETERMINATE||e<=n&&e>=t))throw new Error("\n        timeoutMs must be an integer in the range "+t+"–"+n+"\n        (or "+i+" to disable), but got '"+e+"'");this.autoDismissTimeoutMs_=e},t.prototype.getCloseOnEscape=function(){return this.closeOnEscape_},t.prototype.setCloseOnEscape=function(e){this.closeOnEscape_=e},t.prototype.handleKeyDown=function(e){("Escape"===e.key||27===e.keyCode)&&this.getCloseOnEscape()&&this.close(ae)},t.prototype.handleActionButtonClick=function(e){this.close(se)},t.prototype.handleActionIconClick=function(e){this.close(ae)},t.prototype.clearAutoDismissTimer_=function(){clearTimeout(this.autoDismissTimer_),this.autoDismissTimer_=0},t.prototype.handleAnimationTimerEnd_=function(){this.animationTimer_=0,this.adapter_.removeClass(J.OPENING),this.adapter_.removeClass(J.CLOSING)},t.prototype.runNextAnimationFrame_=function(e){var t=this;cancelAnimationFrame(this.animationFrame_),this.animationFrame_=requestAnimationFrame((function(){t.animationFrame_=0,clearTimeout(t.animationTimer_),t.animationTimer_=setTimeout(e,0)}))},t}(l.a),re=ee.ARIA_LIVE_DELAY_MS,ce=Z.ARIA_LIVE_LABEL_TEXT_ATTR;function de(e,t){void 0===t&&(t=e);var n=e.getAttribute("aria-live"),i=t.textContent.trim();i&&n&&(e.setAttribute("aria-live","off"),t.textContent="",t.innerHTML='<span style="display: inline-block; width: 0; height: 1px;">&nbsp;</span>',t.setAttribute(ce,i),setTimeout((function(){e.setAttribute("aria-live",n),t.removeAttribute(ce),t.textContent=i}),re))}
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var le=Z.SURFACE_SELECTOR,ue=Z.LABEL_SELECTOR,he=Z.ACTION_SELECTOR,pe=Z.DISMISS_SELECTOR,me=Z.OPENING_EVENT,_e=Z.OPENED_EVENT,ge=Z.CLOSING_EVENT,fe=Z.CLOSED_EVENT,be=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.b(t,e),t.attachTo=function(e){return new t(e)},t.prototype.initialize=function(e){void 0===e&&(e=function(){return de}),this.announce_=e()},t.prototype.initialSyncWithDOM=function(){var e=this;this.surfaceEl_=this.root_.querySelector(le),this.labelEl_=this.root_.querySelector(ue),this.actionEl_=this.root_.querySelector(he),this.handleKeyDown_=function(t){return e.foundation_.handleKeyDown(t)},this.handleSurfaceClick_=function(t){var n=t.target;e.isActionButton_(n)?e.foundation_.handleActionButtonClick(t):e.isActionIcon_(n)&&e.foundation_.handleActionIconClick(t)},this.registerKeyDownHandler_(this.handleKeyDown_),this.registerSurfaceClickHandler_(this.handleSurfaceClick_)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.deregisterKeyDownHandler_(this.handleKeyDown_),this.deregisterSurfaceClickHandler_(this.handleSurfaceClick_)},t.prototype.open=function(){this.foundation_.open()},t.prototype.close=function(e){void 0===e&&(e=""),this.foundation_.close(e)},t.prototype.getDefaultFoundation=function(){var e=this;return new oe({addClass:function(t){return e.root_.classList.add(t)},announce:function(){return e.announce_(e.labelEl_)},notifyClosed:function(t){return e.emit(fe,t?{reason:t}:{})},notifyClosing:function(t){return e.emit(ge,t?{reason:t}:{})},notifyOpened:function(){return e.emit(_e,{})},notifyOpening:function(){return e.emit(me,{})},removeClass:function(t){return e.root_.classList.remove(t)}})},Object.defineProperty(t.prototype,"timeoutMs",{get:function(){return this.foundation_.getTimeoutMs()},set:function(e){this.foundation_.setTimeoutMs(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"closeOnEscape",{get:function(){return this.foundation_.getCloseOnEscape()},set:function(e){this.foundation_.setCloseOnEscape(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isOpen",{get:function(){return this.foundation_.isOpen()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"labelText",{get:function(){return this.labelEl_.textContent},set:function(e){this.labelEl_.textContent=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"actionButtonText",{get:function(){return this.actionEl_.textContent},set:function(e){this.actionEl_.textContent=e},enumerable:!0,configurable:!0}),t.prototype.registerKeyDownHandler_=function(e){this.listen("keydown",e)},t.prototype.deregisterKeyDownHandler_=function(e){this.unlisten("keydown",e)},t.prototype.registerSurfaceClickHandler_=function(e){this.surfaceEl_.addEventListener("click",e)},t.prototype.deregisterSurfaceClickHandler_=function(e){this.surfaceEl_.removeEventListener("click",e)},t.prototype.isActionButton_=function(e){return Boolean(Object(d.a)(e,he))},t.prototype.isActionIcon_=function(e){return Boolean(Object(d.a)(e,pe))},t}(r.a);function ve(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return ye}));const ye=new class{constructor(){ve(this,"API_ID",884322),ve(this,"API_HASH","77498db3367014eec55b317377f52779"),ve(this,"APP_VERSION","0.3.0"),ve(this,"auth_user_id",0),ve(this,"onDocumentVisibilityChange",()=>{this.getAuthUserId()&&("visible"!==document.visibilityState?(this.stopOnlineInterval(),this._offlineTimeout=setTimeout(()=>{ApiClient.callMethod("account.updateStatus",{offline:!0})},5e3)):(this.startOnlineInterval(),this._offlineTimeout&&(clearTimeout(this._offlineTimeout),this._offlineTimeout=null)))}),ve(this,"onResize",()=>{document.body.classList.toggle("mobile_view",window.innerWidth<1160)});const e=i.d.get("api_auth");e?(this.auth_user_id=e.user_id,this.initMainView()):X.init(),window.addEventListener("resize",this.onResize),this.onResize(),document.addEventListener("visibilitychange",this.onDocumentVisibilityChange)}authDone(e){this.auth_user_id=e.user.id,i.d.set("api_auth",{user_id:e.user.id}),X.destroy(),this.initMainView()}getAuthUserId(){return this.auth_user_id}logOut(){ApiClient.callMethod("auth.logOut",{}).then(e=>{"boolTrue"===e._?this.logOutDone():this.alert("logout error")})}logOutDone(){localStorage.clear(),location.reload()}initMainView(){const e=i.y("main");document.body.append(e),Y.a.init(),Q.a.init(),this.startOnlineInterval()}startOnlineInterval(){if(!this._onlineInterval){const e=()=>{ApiClient.callMethod("account.updateStatus",{offline:!1})};this._onlineInterval=setInterval(e,3e5),e()}}stopOnlineInterval(){this._onlineInterval&&(clearInterval(this._onlineInterval),this._onlineInterval=null)}alert(e){this.snackbar&&this.snackbar.destroy();const t=i.e.html`
      <div class="mdc-snackbar">
        <div class="mdc-snackbar__surface">
          <div class="mdc-snackbar__label">${e}</div>
        </div>
      </div>
    `.buildElement();document.body.append(t),this.snackbar=new be(t),this.snackbar.open()}}},function(e,t,n){"use strict";
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
function i(e,t){if(e.closest)return e.closest(t);for(var n=e;n;){if(s(n,t))return n;n=n.parentElement}return null}function s(e,t){return(e.matches||e.webkitMatchesSelector||e.msMatchesSelector).call(e,t)}n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return s}))},function(e,t,n){"use strict";var i=n(0),s=n(8),a=n(1),o=n(7),r=n(11);function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const d=new class{constructor(){c(this,"users",new Map),c(this,"chats",new Map),c(this,"onBack",()=>{this.input.removeEventListener("input",this.onInput),this.input.value="",this.users.clear(),this.chats.clear(),this.container.hidden=!0,this.container.innerHTML="",u.container.hidden=!1;const e=Object(i.a)(".chats_header_back_button");e.hidden=!0,e.removeEventListener("click",this.onBack),Object(i.a)(".chats_header_menu_button").hidden=!1}),c(this,"onInput",Object(i.m)(()=>{const e=this.input.value.trim();e!==this.lastQuery&&(this.lastQuery=e,this.nextRate=null,this.noMore=!1,this.loadMoreAbortController&&(this.loadMoreAbortController.abort(),this.loadMoreAbortController=null),e?(this.container.innerHTML="",this.container.append(this.loader),this.loadResults(e)):this.onBack())},100)),c(this,"onScroll",()=>{const e=this.container;!this.loading&&!this.noMore&&e.scrollTop+e.offsetHeight>e.scrollHeight-500&&this.loadMore()}),c(this,"onPeerClick",e=>{const t=e.currentTarget,n=+t.dataset.peerId,i=+(t.dataset.messageId||0);o.a.setChatByPeerId(n,i)})}show(e){this.input=e,this.input.addEventListener("input",this.onInput),u.container.hidden=!0,this.container=Object(i.a)(".global_search_sidebar"),this.container.hidden=!1,this.container.onscroll=this.onScroll,this.loader=Object(i.i)();const t=Object(i.a)(".chats_header_back_button");t.addEventListener("click",this.onBack),t.hidden=!1,Object(i.a)(".chats_header_menu_button").hidden=!0,this.onInput()}loadMore(){this.loadMoreAbortController=new AbortController;const e=this.loadMoreAbortController.signal,t=this.lastQuery;this.loading=!0,ApiClient.callMethod("messages.searchGlobal",{q:t,limit:20,offset_rate:this.nextRate,offset_peer:{_:"inputPeerEmpty"}}).then(n=>{if(!e.aborted)if(n.messages.length){a.a.updateUsers(n.users),a.a.updateChats(n.chats),this.nextRate=n.next_rate;const e=Object(i.a)(".global_search_sublist-messages",this.container);this.appendMessages(e,n.messages,t)}else this.noMore=!0}).catch(e=>{console.log(e);const t="An error occurred"+(e.error_message?": "+e.error_message:"");s.a.alert(t)}).finally(()=>{this.loading=!1})}async loadResults(e,t=20,n=20){const[i,s]=await Promise.all([ApiClient.callMethod("contacts.search",{q:e,limit:t}),ApiClient.callMethod("messages.searchGlobal",{q:e,limit:n,offset_peer:{_:"inputPeerEmpty"}})]);a.a.updateUsers(i.users),a.a.updateUsers(s.users),a.a.updateChats(i.chats),a.a.updateChats(s.chats),this.nextRate=s.next_rate,this.renderResults(e,i.my_results,i.results,s.messages)}renderResults(e,t,n,i){const s=document.createDocumentFragment();s.append(this.buildContactsSublist("Contacts and Chats",t,e,!1),this.buildContactsSublist("Global Search",n,e,!0),this.buildMessagesSublist("Messages",i,e)),this.container.innerHTML="",this.container.append(s)}buildContactsSublist(e,t,n,s){if(!t.length)return"";const c=i.e.html`
      <div class="global_search_sublist global_search_sublist-contacts">
        <div class="global_search_sublist_header">${e}</div>
      </div>
    `.buildElement();for(const e of t){const t=a.a.getPeerId(e),n=a.a.getPeerData(e),d=a.a.getPeerName(e);let l="";if(s||"peerUser"!==e._){if(n.username&&(l="@"+n.username),n.participants_count){const e="channel"===n._&&!n.megagroup;l+=(l?", ":"")+r.a.getPlural(e?"chats_n_followers":"chats_n_members",n.participants_count,{n:Object(i.n)(n.participants_count)})}}else{const t=a.a.getPeerData(e);l=o.a.getUserStatusText(t)}const h=i.e.html`
        <div class="contacts_item" data-peer-id="${t}">
          <div class="contacts_item_content mdc-ripple-surface">
            <div class="contacts_item_photo"></div>
            <div class="contacts_item_text">
              <div class="contacts_item_text_row">
                <div class="contacts_item_title">${d}</div>
              </div>
              <div class="contacts_item_text_row">
                <div class="contacts_item_status">${l}</div>
              </div>
            </div>
          </div>
        </div>
      `.buildElement();u.loadPeerPhoto(Object(i.a)(".contacts_item_photo",h),e),h.addEventListener("click",this.onPeerClick),Object(i.g)(h.firstElementChild),c.append(h)}return c}buildMessagesSublist(e,t,n){if(!t.length)return"";const s=i.e.html`
      <div class="global_search_sublist global_search_sublist-messages">
        <div class="global_search_sublist_header">${e}</div>
      </div>
    `.buildElement();return this.appendMessages(s,t,n),s}appendMessages(e,t,n){const s=document.createDocumentFragment();for(const e of t){const t=a.a.getMessageDialogPeer(e),o=a.a.getPeerId(t),r=a.a.getPeerName(t),c=u.formatMessageDate(e),d=u.getMessagePreview(e,n),l=i.e.html`
        <div class="messages_search_results_item" data-peer-id="${o}" data-message-id="${e.id}">
          <div class="messages_search_results_item_content mdc-ripple-surface">
            <div class="messages_search_results_item_photo"></div>
            <div class="messages_search_results_item_text">
              <div class="messages_search_results_item_text_row">
                <div class="messages_search_results_item_title">${r}</div>
                <div class="messages_search_results_item_date">${c}</div>
              </div>
              <div class="messages_search_results_item_text_row">
                <div class="messages_search_results_item_message">${d}</div>
              </div>
            </div>      
          </div>
        </div>
      `.buildElement();u.loadPeerPhoto(Object(i.a)(".messages_search_results_item_photo",l),t),l.addEventListener("click",this.onPeerClick),s.appendChild(l)}e.appendChild(s)}saveTmpPeers(e,...t){for(const n of t)for(const t of n)e.set(t.id,t)}};function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}window.GlobalSearchController=d,n.d(t,"a",(function(){return u}));const u=new class{constructor(){l(this,"chatElements",new Map),l(this,"onDialogsUpdate",e=>{const{dialogs:t,folderId:n}=e.detail;n||this.renderChats(t)}),l(this,"onDialogNewMessage",e=>{const{dialog:t,message:n}=e.detail;if("messageService"===n._)return;const i=a.a.getPeerId(t.peer);let s=this.chatElements.get(i);s?this.renderChatPreviewContent(s,t):this.buildChatPreviewElement(t)}),l(this,"onDialogOrderUpdate",e=>{const{dialog:t,index:n,folderId:i}=e.detail;if(i)return;const s=a.a.getPeerId(t.peer);let o=this.chatElements.get(s);o||(o=this.buildChatPreviewElement(t)),this.container.insertBefore(o,this.container.children[n])}),l(this,"onDialogTopMessageUpdate",e=>{const{dialog:t}=e.detail,n=a.a.getPeerId(t.peer),i=this.chatElements.get(n);i&&this.renderChatPreviewContent(i,t)}),l(this,"onDialogUnreadCountUpdate",e=>{const{dialog:t}=e.detail,n=a.a.getPeerId(t.peer),i=this.chatElements.get(n);this.renderChatPreviewContent(i,t)}),l(this,"onUserStatusUpdate",e=>{const{user:t}=e.detail,n=this.chatElements.get(t.id);n&&this.updateChatStatus(n,t.status)}),l(this,"onScroll",()=>{const e=this.container;!this.loading&&!this.noMore&&e.scrollTop+e.offsetHeight>e.scrollHeight-500&&this.loadMore()}),l(this,"onChatClick",e=>{e.preventDefault();const t=+e.currentTarget.dataset.peerId,n=a.a.getDialog(t);o.a.setChat(n)})}init(){this.container=Object(i.a)(".chats_sidebar"),this.container.addEventListener("scroll",this.onScroll),this.initHeader(),this.loader=Object(i.i)(this.container),a.a.emitter.on("dialogsUpdate",this.onDialogsUpdate),a.a.emitter.on("dialogOrderUpdate",this.onDialogOrderUpdate),a.a.emitter.on("dialogTopMessageUpdate",this.onDialogTopMessageUpdate),a.a.emitter.on("chatNewMessage",this.onDialogNewMessage),a.a.emitter.on("chatUnreadCountUpdate",this.onDialogUnreadCountUpdate),a.a.emitter.on("userStatusUpdate",this.onUserStatusUpdate),this.loadMore()}initHeader(){this.header=Object(i.a)(".chats_header"),this.header.innerHTML='\n      <button type="button" class="chats_header_menu_button mdc-icon-button"></button>\n      <button type="button" class="mdc-icon-button sidebar_back_button chats_header_back_button" hidden></button>\n      <div class="chats_header_menu mdc-menu mdc-menu-surface">\n        <ul class="mdc-list" role="menu" aria-hidden="true" aria-orientation="vertical" tabindex="-1">\n          <li class="mdc-list-item chats_header_menu_item chats_header_menu_item-new_group" role="menuitem">\n            <span class="mdc-list-item__text">New Group</span>\n          </li>\n          <li class="mdc-list-item chats_header_menu_item chats_header_menu_item-contacts" role="menuitem">\n            <span class="mdc-list-item__text">Contacts</span>\n          </li>\n          <li class="mdc-list-item chats_header_menu_item chats_header_menu_item-archived" role="menuitem">\n            <span class="mdc-list-item__text">Archived</span>\n          </li>\n          <li class="mdc-list-item chats_header_menu_item chats_header_menu_item-saved" role="menuitem">\n            <span class="mdc-list-item__text">Saved</span>\n          </li>\n          <li class="mdc-list-item chats_header_menu_item chats_header_menu_item-settings" role="menuitem">\n            <span class="mdc-list-item__text">Settings</span>\n          </li>\n          <li class="mdc-list-item chats_header_menu_item chats_header_menu_item-help" role="menuitem">\n            <span class="mdc-list-item__text">Help</span>\n          </li>\n        </ul>\n      </div>\n      <input type="text" placeholder="Telegram Search" class="sidebar_search_input chats_header_search_input">\n    ',this.initHeaderMenu(),this.initHeaderSearch()}initHeaderMenu(){const e=Object(i.a)(".chats_header_menu",this.header),t=Object(i.A)(e),r=Object(i.a)(".chats_header_menu_button",this.header);Object(i.g)(r),r.addEventListener("click",()=>{t.open||(t.open=!0,t.setAbsolutePosition(14,60))}),Object(i.a)(".chats_header_menu_item-contacts",e).addEventListener("click",()=>{n.e(6).then(n.bind(null,33)).then(({ContactsController:e})=>{e.show()})}),Object(i.a)(".chats_header_menu_item-saved",e).addEventListener("click",()=>{const e=a.a.getDialog(s.a.getAuthUserId());o.a.setChat(e)}),Object(i.a)(".chats_header_menu_item-archived",e).addEventListener("click",()=>{n.e(4).then(n.bind(null,34)).then(({ArchivedChatsController:e})=>{e.show()})}),Object(i.a)(".chats_header_menu_item-settings",e).addEventListener("click",()=>{n.e(10).then(n.bind(null,35)).then(({SettingsController:e})=>{e.show()})})}initHeaderSearch(){const e=Object(i.a)(".chats_header_search_input");e.addEventListener("input",()=>{d.show(e)})}loadMore(){this.loading=!0,a.a.loadDialogs(this.offset,20).then(e=>{e.length||(this.noMore=!0)}).catch(e=>{const t="An error occurred"+(e.error_message?": "+e.error_message:"");s.a.alert(t)}).finally(()=>{this.loading=!1})}renderChats(e){this.loader.remove();const t=document.createDocumentFragment();for(const n of e){const e=a.a.getPeerId(n.peer);if(this.chatElements.has(e))continue;const i=this.buildChatPreviewElement(n);t.append(i)}this.container.append(t);const n=e[e.length-1];if(n){const e=a.a.messages.get(n.top_message);this.offset={id:n.top_message,peer:n.peer,date:e.date}}else this.offset={id:0,peer:0,date:0}}buildChatPreviewElement(e){const t=a.a.getPeerId(e.peer),n=i.e.html`
      <div class="chats_item ${e.pinned?" chats_item_pinned":""}" data-peer-id="${t}">
        <div class="chats_item_content mdc-ripple-surface">
          <div class="chats_item_photo"></div>
          <div class="chats_item_text"></div>        
        </div>
      </div>
    `.buildElement();if(this.renderChatPreviewContent(n,e),this.loadChatPhoto(n,e),"peerUser"===e.peer._){const t=a.a.getPeerData(e.peer);this.updateChatStatus(n,t.status)}return n.addEventListener("click",this.onChatClick),Object(i.B)()||Object(i.g)(n.firstElementChild),Object(i.f)(n,(...e)=>alert(e)),this.chatElements.set(t,n),n}renderChatPreviewContent(e,t){const n=this.isPeerSelf(t.peer)?"Saved Messages":a.a.getPeerName(t.peer),s=this.getChatBadge(t),o=this.formatDate(t),r=a.a.messages.get(t.top_message),c=r?this.getMessagePreview(r):"";Object(i.a)(".chats_item_text",e).innerHTML=i.e.html`
      <div class="chats_item_text_row">
        <div class="chats_item_title">${n}</div>
        <div class="chats_item_date">${o}</div>
      </div>
      <div class="chats_item_text_row">
        <div class="chats_item_message">${c}</div>
        ${s}
      </div>
    `}formatDate(e){const t=a.a.messages.get(e.top_message);return t?this.formatMessageDate(t):""}formatMessageDate(e){const t=new Date(1e3*e.date),n=Date.now();return t.getTime()>n-864e5?Object(i.u)(e.date):t.getTime()>n-5184e5?Object(i.r)(e.date):Object(i.p)(e.date,{longMonth:!1,withYear:t.getFullYear()!==(new Date).getFullYear()})}getChatBadge(e){if(e.unread_count){let t="chats_item_badge chats_item_badge-unread";return e.notify_settings.mute_until&&(t+=" chats_item_badge-unread_muted"),i.e.html`<span class="${t}">${Object(i.o)(e.unread_count)}</span>`}return e.pinned?i.e.html`<span class="chats_item_badge chats_item_badge-pinned"></span>`:""}getMessagePreview(e,t=null){if("messageService"===e._)return o.a.getServiceMessageText(e);let n="";if(e.message){let s=i.e.sanitize(e.message);t&&(t=i.e.sanitize(t),s=s.replace(RegExp(t,"i"),'<span class="chats_item_message_highlight">$&</span>')),n=i.e.raw`${s}`}else{const t=o.a.getMessageContentTypeLabel(e.media);n=i.e.html`<span class="chats_item_message_content_label">${t}</span>`}if("peerChannel"===e.to_id._&&e.from_id){const t=a.a.users.get(e.from_id),i=a.a.getUserName(t,!1);n.prependHtml`<span class="chats_item_message_author_label">${i}:</span> `}else e.out&&n.prependHtml`<span class="chats_item_message_author_label">You:</span> `;return n}updateChatStatus(e,t){const n=!!t&&"userStatusOnline"===t._;Object(i.a)(".chats_item_photo",e).classList.toggle("chats_item_photo-online",n)}loadChatPhoto(e,t){const n=Object(i.a)(".chats_item_photo",e);this.isPeerSelf(t.peer)?n.classList.add("chats_item_photo_saved_messages"):this.loadPeerPhoto(n,t.peer)}loadPeerPhoto(e,t,n=!1){const i=a.a.getPeerId(t),s=a.a.getPeerData(t),o=s.photo;s.deleted?this.setChatPhotoDeletedPlaceholder(e,i):o&&"chatPhotoEmpty"!==o._?FileApiManager.loadPeerPhoto(t,o,n,o.dc_id,{priority:10,cache:!0}).then(t=>{e.innerHTML=`<img src="${t}" alt class="peer_photo_img">`}).catch(t=>{console.warn("chat photo load error",t),this.setChatPhotoPlaceholder(e,i)}):this.setChatPhotoPlaceholder(e,i)}setChatPhotoDeletedPlaceholder(e){e.style.backgroundColor="#ACB2B6",e.innerHTML='<div class="peer_photo_deleted_placeholder"></div>'}setChatPhotoPlaceholder(e,t){const n=a.a.getPeerById(t),i=a.a.getPeerName(n);e.style.backgroundColor=this.getPlaceholderColor(t),e.innerHTML='<div class="peer_photo_placeholder">'+i.charAt(0)+"</div>"}getPlaceholderColor(e){const t=["#FFBF69","#247BA0","#EA526F","#2EC4B6","#F79256","#662C91","#049A8F","#06D6A0","#F25C54"];return t[e%t.length]}isPeerSelf(e){return"peerUser"===e._&&e.user_id===s.a.getAuthUserId()}};window.ChatsController=u},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));const i={login_flood_pluralize_seconds:["","Try again in {} second","Try again in {} seconds"],login_flood_pluralize_minutes:["","Try again in {} minute","Try again in {} minutes"],login_flood_pluralize_hours:["","Try again in {} hour","Try again in {} hours"],messages_search_n_results_found:["No messages found","{} message found","{} messages found"],messages_send_n_files:["","Send {} File","Send {} files"],chats_n_members:["","{n} member","{n} members"],chats_n_followers:["","{n} follower","{n} followers"]},s=new class{get(e,t=!1){const n=i[e]||"";return this.replaceTokens(n,t)}replaceTokens(e,t){if(!t)return e;for(const[n,i]of Object.entries(t))e=e.replace(`{${n}}`,i);return e}getPlural(e,t,n){const s=i[e];let a;return a=(a=!t&&s[0]?s[0]:1===t?s[1]:s[2]).replace("{}",t),this.replaceTokens(a,n)}}},function(e,t,n){"use strict";
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
var i;function s(e,t){if(void 0===e&&(e=window),void 0===t&&(t=!1),void 0===i||t){var n=!1;try{e.document.addEventListener("test",(function(){}),{get passive(){return n=!0}})}catch(e){}i=n}return!!i&&{passive:!0}}n.d(t,"a",(function(){return s}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(19),s=n(0),a=n(6);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const r=new class{constructor(){o(this,"close",()=>{this.state.streamingProcess&&this.state.streamingProcess.stop(),this.state=null,this.dom.author.innerHTML="",this.dom.content.innerHTML="",this.container.hidden=!0,document.removeEventListener("keyup",this.onKeyUp)}),o(this,"onKeyUp",e=>{27===e.keyCode&&this.close()}),o(this,"download",()=>{if(this.state.url){const e=document.createElement("a");e.href=this.state.url,e.download=this.getDownloadFilename(this.state.object),e.click()}}),o(this,"onContentClick",e=>{e.target===e.currentTarget&&this.close()}),o(this,"onContentTouchStart",e=>{let{pageY:t}=Object(s.w)(e),n=0;const i=e=>{const{pageY:i}=Object(s.w)(e),a=i-t;n=Math.min(1,Math.pow(Math.abs(a),2)/1e4),this.dom.content.style.transform=`translateY(${a}px)`,this.container.style.backgroundColor=`rgba(0, 0, 0, ${.9-.9*n})`,this.dom.author.style.opacity=.5-.5*n,this.dom.actions.style.opacity=1-n},a=()=>{1===n&&this.close(),this.dom.content.removeEventListener("touchmove",i),this.dom.content.removeEventListener("touchend",a),this.dom.content.style.transform="",this.dom.content.style.transition="",this.container.style.backgroundColor="",this.dom.author.style.opacity="",this.dom.actions.style.opacity=""};this.dom.content.addEventListener("touchmove",i),this.dom.content.addEventListener("touchend",a),this.dom.content.style.transition="none"}),this.container=s.e.html`
      <div class="media_view" hidden>
        <div class="media_view_author" data-js-label="author"></div>
        <div class="media_view_actions"  data-js-label="controls">
          <button class="media_view_actions_item media_view_actions_item-delete" data-js-label="button_delete"></button>
          <button class="media_view_actions_item media_view_actions_item-forward" data-js-label="button_forward"></button>
          <button class="media_view_actions_item media_view_actions_item-download" data-js-label="button_download"></button>
          <button class="media_view_actions_item media_view_actions_item-close" data-js-label="button_close"></button>
        </div>
        <div class="media_view_content" data-js-label="content"></div>
        <div class="media_view_caption" data-js-label="caption"></div>
      </div>
    `.buildElement(),this.dom=Object(s.x)(this.container),this.dom.button_download.addEventListener("click",this.download),this.dom.button_close.addEventListener("click",this.close),this.dom.content.addEventListener("click",this.onContentClick),this.dom.content.addEventListener("touchstart",this.onContentTouchStart),document.body.appendChild(this.container)}showPhoto(e,t,n){const s=e.sizes[e.sizes.length-1],a=this.initLoading(e,t,n,s.size),o=this.state.abortController,r=this.state.onProgress;i.a.loadPhoto(e,s.type,{onProgress:r,signal:o.signal}).then(e=>{const t=`<img class="media_view_content_image" src="${e}">`;this.onLoaded(e,t,a)}).catch(e=>{console.log(e)})}showGif(e,t,n){const s=this.initLoading(e,t,n,e.size),a=this.state.abortController,o=this.state.onProgress;i.a.loadDocument(e,{onProgress:o,signal:a.signal}).then(e=>{const t=`<video class="media_view_content_gif" src="${e}" playsinline autoplay loop></video>`;this.onLoaded(e,t,s)}).catch(e=>{console.log(e)})}showVideo(e,t,s){const o=this.initLoading(e,t,s,e.size),r=this.state.abortController,c=this.state.onProgress,d=a.a.getDocumentAttributes(e),l=d.duration<30;d.supports_streaming&&window.MediaSource&&e.size>524288?n.e(8).then(n.bind(null,28)).then(({MediaStreamingProcess:t})=>{const n=new t(e,c);return this.state.streamingProcess=n,n.load()}).then(e=>{o===this.state&&(e.classList.add("media_view_content_video"),e.playsinline=!0,e.autoplay=!0,e.controls=!0,e.loop=l,e.play(),this.onLoaded(e.src,e,o))}):i.a.loadDocument(e,{onProgress:c,signal:r.signal}).then(e=>{const t=`<video class="media_view_content_video" src="${e}" playsinline autoplay controls ${l?"loop":""}></video>`;this.onLoaded(e,t,o)}).catch(e=>{console.log(e)})}initLoading(e,t,n,i){this.abort();const a={object:e,message:n,abortController:new AbortController},o=s.e.html`
      <div class="message_media_progress">
        <svg class="message_media_progress_svg" viewBox="0 0 36 36" xmlns="http://www.w3.org/2000/svg">
          <path class="message_media_progress_path" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"/>
        </svg>
      </div>
    `.buildElement(),r=Object(s.a)(".message_media_progress_path",o);return o.addEventListener("click",e=>{e.stopPropagation(),a.aborted=!0,a.abortController.abort()}),t.appendChild(o),t.classList.add("message_media_thumb-loading"),a.onDone=()=>{o.remove(),t.classList.remove("message_media_thumb-loading"),a.aborted&&(this.state=null)},a.onProgress=e=>{const t=Math.round(100*Math.max(0,Math.min(1,e/i)));100===t?a.onDone():r.style.strokeDasharray=`${t}, 100`},a.abortController.signal.addEventListener("abort",a.onDone),this.state=a,a}onLoaded(e,t,n){n===this.state&&("string"==typeof t?this.dom.content.innerHTML=t:this.dom.content.appendChild(t),this.dom.caption.innerHTML=s.e.html`<div class="media_view_caption_text">${n.message.message||""}</div>`,this.renderAuthor(),this.state.url=e,this.state.onDone(),this.container.hidden=!1,document.addEventListener("keyup",this.onKeyUp))}renderAuthor(){const e=this.state.message;let t,n;if(e.fwd_from){const i=e.fwd_from;t=MessagesApiManager.getPeerById(i.from_id||i.channel_id),n=i.date}else t=MessagesApiManager.getMessageAuthorPeer(e),n=e.date;this.dom.author.innerHTML=s.e.html`
      <div class="media_view_author_photo"></div>
      <div class="media_view_author_description">
        <div class="media_view_author_name">${MessagesApiManager.getPeerName(t)}</div>
        <div class="media_view_author_date">${MessagesController.formatMessageDateTime(n)}</div>
      </div>
    `;const i=Object(s.a)(".media_view_author_photo",this.dom.author);ChatsController.loadPeerPhoto(i,t)}abort(){this.state&&this.state.abortController&&this.state.abortController.abort(),this.state=null}isOpen(){return!this.container.hidden}getDownloadFilename(e){if("document"===e._){const t=a.a.getDocumentAttributes(e);if(t.file_name)return t.file_name}return e._+e.id}};window.MediaViewController=r},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n(2),s=n(5),a=n(12),o=n(9),r=n(16),c=n(17),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.disabled=!1,t}return i.b(t,e),t.attachTo=function(e,n){void 0===n&&(n={isUnbounded:void 0});var i=new t(e);return void 0!==n.isUnbounded&&(i.unbounded=n.isUnbounded),i},t.createAdapter=function(e){return{addClass:function(t){return e.root_.classList.add(t)},browserSupportsCssVars:function(){return c.b(window)},computeBoundingRect:function(){return e.root_.getBoundingClientRect()},containsEventTarget:function(t){return e.root_.contains(t)},deregisterDocumentInteractionHandler:function(e,t){return document.documentElement.removeEventListener(e,t,Object(a.a)())},deregisterInteractionHandler:function(t,n){return e.root_.removeEventListener(t,n,Object(a.a)())},deregisterResizeHandler:function(e){return window.removeEventListener("resize",e)},getWindowPageOffset:function(){return{x:window.pageXOffset,y:window.pageYOffset}},isSurfaceActive:function(){return Object(o.b)(e.root_,":active")},isSurfaceDisabled:function(){return Boolean(e.disabled)},isUnbounded:function(){return Boolean(e.unbounded)},registerDocumentInteractionHandler:function(e,t){return document.documentElement.addEventListener(e,t,Object(a.a)())},registerInteractionHandler:function(t,n){return e.root_.addEventListener(t,n,Object(a.a)())},registerResizeHandler:function(e){return window.addEventListener("resize",e)},removeClass:function(t){return e.root_.classList.remove(t)},updateCssVariable:function(t,n){return e.root_.style.setProperty(t,n)}}},Object.defineProperty(t.prototype,"unbounded",{get:function(){return Boolean(this.unbounded_)},set:function(e){this.unbounded_=Boolean(e),this.setUnbounded_()},enumerable:!0,configurable:!0}),t.prototype.activate=function(){this.foundation_.activate()},t.prototype.deactivate=function(){this.foundation_.deactivate()},t.prototype.layout=function(){this.foundation_.layout()},t.prototype.getDefaultFoundation=function(){return new r.a(t.createAdapter(this))},t.prototype.initialSyncWithDOM=function(){var e=this.root_;this.unbounded="mdcRippleIsUnbounded"in e.dataset},t.prototype.setUnbounded_=function(){this.foundation_.setUnbounded(Boolean(this.unbounded_))},t}(s.a)},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return o}));const i={smileys:["😀","😁","😂","🤣","😃","😄","😅","😆","😉","😊","😋","😎","😍","😘","🥰","😗","😙","😚","☺️","🙂","🤗","🤩","🤔","🤨","😐","😑","😶","🙄","😏","😣","😥","😮","🤐","😯","😪","😫","😴","😌","😛","😜","😝","🤤","😒","😓","😔","😕","🙃","🤑","😲","☹️","🙁","😖","😞","😟","😤","😢","😭","😦","😧","😨","😩","🤯","😬","😰","😱","🥵","🥶","😳","🤪","😵","😡","😠","🤬","😷","🤒","🤕","🤢","🤮","🤧","😇","🤠","🤡","🥳","🥴","🥺","🤥","🤫","🤭","🧐","🤓","😈","👿","👹","👺","💀","👻","👽","🤖","💩","😺","😸","😹","😻","😼","😽","🙀","😿","😾","👶","👧","🧒","👦","👩","🧑","👨","👵","🧓","👴","👲","👳‍♀️","👳‍♂️","🧕","🧔","👱‍♂️","👱‍♀️","👨‍🦰","👩‍🦰","👨‍🦱","👩‍🦱","👨‍🦲","👩‍🦲","👨‍🦳","👩‍🦳","🦸‍♀️","🦸‍♂️","🦹‍♀️","🦹‍♂️","👮‍♀️","👮‍♂️","👷‍♀️","👷‍♂️","💂‍♀️","💂‍♂️","🕵️‍♀️","🕵️‍♂️","👩‍⚕️","👨‍⚕️","👩‍🌾","👨‍🌾","👩‍🍳","👨‍🍳","👩‍🎓","👨‍🎓","👩‍🎤","👨‍🎤","👩‍🏫","👨‍🏫","👩‍🏭","👨‍🏭","👩‍💻","👨‍💻","👩‍💼","👨‍💼","👩‍🔧","👨‍🔧","👩‍🔬","👨‍🔬","👩‍🎨","👨‍🎨","👩‍🚒","👨‍🚒","👩‍✈️","👨‍✈️","👩‍🚀","👨‍🚀","👩‍⚖️","👨‍⚖️","👰","🤵","👸","🤴","🤶","🎅","🧙‍♀️","🧙‍♂️","🧝‍♀️","🧝‍♂️","🧛‍♀️","🧛‍♂️","🧟‍♀️","🧟‍♂️","🧞‍♀️","🧞‍♂️","🧜‍♀️","🧜‍♂️","🧚‍♀️","🧚‍♂️","👼","🤰","🤱","🙇‍♀️","🙇‍♂️","💁‍♀️","💁‍♂️","🙅‍♀️","🙅‍♂️","🙆‍♀️","🙆‍♂️","🙋‍♀️","🙋‍♂️","🤦‍♀️","🤦‍♂️","🤷‍♀️","🤷‍♂️","🙎‍♀️","🙎‍♂️","🙍‍♀️","🙍‍♂️","💇‍♀️","💇‍♂️","💆‍♀️","💆‍♂️","🧖‍♀️","🧖‍♂️","💅","🤳","💃","🕺","👯‍♀️","👯‍♂️","🕴","🚶‍♀️","🚶‍♂️","🏃‍♀️","🏃‍♂️","👫","👭","👬","💑","👩‍❤️‍👩","👨‍❤️‍👨","💏","👩‍❤️‍💋‍👩","👨‍❤️‍💋‍👨","👪","👨‍👩‍👧","👨‍👩‍👧‍👦","👨‍👩‍👦‍👦","👨‍👩‍👧‍👧","👩‍👩‍👦","👩‍👩‍👧","👩‍👩‍👧‍👦","👩‍👩‍👦‍👦","👩‍👩‍👧‍👧","👨‍👨‍👦","👨‍👨‍👧","👨‍👨‍👧‍👦","👨‍👨‍👦‍👦","👨‍👨‍👧‍👧","👩‍👦","👩‍👧","👩‍👧‍👦","👩‍👦‍👦","👩‍👧‍👧","👨‍👦","👨‍👧","👨‍👧‍👦","👨‍👦‍👦","👨‍👧‍👧","🤲","👐","🙌","👏","🤝","👍","👎","👊","✊","🤛","🤜","🤞","✌️","🤟","🤘","👌","👈","👉","👆","👇","☝️","✋","🤚","🖐","🖖","👋","🤙","💪","🦵","🦶","🖕","✍️","🙏","💍","💄","💋","👄","👅","👂","👃","👣","👁","👀","🧠","🦴","🦷","🗣","👤","👥"],animals:["🐶","🐱","🐭","🐹","🐰","🦊","🦝","🐻","🐼","🦘","🦡","🐨","🐯","🦁","🐮","🐷","🐽","🐸","🐵","🙈","🙉","🙊","🐒","🐔","🐧","🐦","🐤","🐣","🐥","🦆","🦢","🦅","🦉","🦚","🦜","🦇","🐺","🐗","🐴","🦄","🐝","🐛","🦋","🐌","🐚","🐞","🐜","🦗","🕷","🕸","🦂","🦟","🦠","🐢","🐍","🦎","🦖","🦕","🐙","🦑","🦐","🦀","🐡","🐠","🐟","🐬","🐳","🐋","🦈","🐊","🐅","🐆","🦓","🦍","🐘","🦏","🦛","🐪","🐫","🦙","🦒","🐃","🐂","🐄","🐎","🐖","🐏","🐑","🐐","🦌","🐕","🐩","🐈","🐓","🦃","🕊","🐇","🐁","🐀","🐿","🦔","🐾","🐉","🐲","🌵","🎄","🌲","🌳","🌴","🌱","🌿","☘️","🍀","🎍","🎋","🍃","🍂","🍁","🍄","🌾","💐","🌷","🌹","🥀","🌺","🌸","🌼","🌻","🌞","🌝","🌛","🌜","🌚","🌕","🌖","🌗","🌘","🌑","🌒","🌓","🌔","🌙","🌎","🌍","🌏","💫","⭐️","🌟","✨","⚡️","☄️","💥","🔥","🌪","🌈","☀️","🌤","⛅️","🌥","☁️","🌦","🌧","⛈","🌩","🌨","❄️","☃️","⛄️","🌬","💨","💧","💦","☔️","☂️","🌊","🌫"],food:["🍏","🍎","🍐","🍊","🍋","🍌","🍉","🍇","🍓","🍈","🍒","🍑","🍍","🥭","🥥","🥝","🍅","🍆","🥑","🥦","🥒","🥬","🌶","🌽","🥕","🥔","🍠","🥐","🍞","🥖","🥨","🥯","🧀","🥚","🍳","🥞","🥓","🥩","🍗","🍖","🌭","🍔","🍟","🍕","🥪","🥙","🌮","🌯","🥗","🥘","🥫","🍝","🍜","🍲","🍛","🍣","🍱","🥟","🍤","🍙","🍚","🍘","🍥","🥮","🥠","🍢","🍡","🍧","🍨","🍦","🥧","🍰","🎂","🍮","🍭","🍬","🍫","🍿","🧂","🍩","🍪","🌰","🥜","🍯","🥛","🍼","☕️","🍵","🥤","🍶","🍺","🍻","🥂","🍷","🥃","🍸","🍹","🍾","🥄","🍴","🍽","🥣","🥡","🥢"],sports:["⚽️","🏀","🏈","⚾️","🥎","🏐","🏉","🎾","🥏","🎱","🏓","🏸","🥅","🏒","🏑","🥍","🏏","⛳️","🏹","🎣","🥊","🥋","🎽","⛸","🥌","🛷","🛹","🎿","⛷","🏂","🏋️‍♀️","🏋️‍♂️","🤼‍♀️","🤼‍♂️","🤸‍♀️","🤸‍♂️","⛹️‍♀️","⛹️‍♂️","🤺","🤾‍♀️","🤾‍♂️","🏌️‍♀️","🏌️‍♂️","🏇","🧘‍♀️","🧘‍♂️","🏄‍♀️","🏄‍♂️","🏊‍♀️","🏊‍♂️","🤽‍♀️","🤽‍♂️","🚣‍♀️","🚣‍♂️","🧗‍♀️","🧗‍♂️","🚵‍♀️","🚵‍♂️","🚴‍♀️","🚴‍♂️","🏆","🥇","🥈","🥉","🏅","🎖","🏵","🎗","🎫","🎟","🎪","🤹‍♀️","🤹‍♂️","🎭","🎨","🎬","🎤","🎧","🎼","🎹","🥁","🎷","🎺","🎸","🎻","🎲","🧩","♟","🎯","🎳","🎮","🎰"],travel:["🚗","🚕","🚙","🚌","🚎","🏎","🚓","🚑","🚒","🚐","🚚","🚛","🚜","🛴","🚲","🛵","🏍","🚨","🚔","🚍","🚘","🚖","🚡","🚠","🚟","🚃","🚋","🚞","🚝","🚄","🚅","🚈","🚂","🚆","🚇","🚊","🚉","✈️","🛫","🛬","🛩","💺","🛰","🚀","🛸","🚁","🛶","⛵️","🚤","🛥","🛳","⛴","🚢","⚓️","⛽️","🚧","🚦","🚥","🚏","🗺","🗿","🗽","🗼","🏰","🏯","🏟","🎡","🎢","🎠","⛲️","⛱","🏖","🏝","🏜","🌋","⛰","🏔","🗻","🏕","⛺️","🏠","🏡","🏘","🏚","🏗","🏭","🏢","🏬","🏣","🏤","🏥","🏦","🏨","🏪","🏫","🏩","💒","🏛","⛪️","🕌","🕍","🕋","⛩","🛤","🛣","🗾","🎑","🏞","🌅","🌄","🌠","🎇","🎆","🌇","🌆","🏙","🌃","🌌","🌉","🌁"],objects:["⌚️","📱","📲","💻","⌨️","🖥","🖨","🖱","🖲","🕹","🗜","💽","💾","💿","📀","📼","📷","📸","📹","🎥","📽","🎞","📞","☎️","📟","📠","📺","📻","🎙","🎚","🎛","⏱","⏲","⏰","🕰","⌛️","⏳","📡","🔋","🔌","💡","🔦","🕯","🗑","🛢","💸","💵","💴","💶","💷","💰","💳","🧾","💎","⚖️","🔧","🔨","⚒","🛠","⛏","🔩","⚙️","⛓","🔫","💣","🔪","🗡","⚔️","🛡","🚬","⚰️","⚱️","🏺","🧭","🧱","🔮","🧿","🧸","📿","💈","⚗️","🔭","🧰","🧲","🧪","🧫","🧬","🧯","🔬","🕳","💊","💉","🌡","🚽","🚰","🚿","🛁","🛀","🛀🏻","🛀🏼","🛀🏽","🛀🏾","🛀🏿","🧴","🧵","🧶","🧷","🧹","🧺","🧻","🧼","🧽","🛎","🔑","🗝","🚪","🛋","🛏","🛌","🖼","🛍","🧳","🛒","🎁","🎈","🎏","🎀","🎊","🎉","🧨","🎎","🏮","🎐","🧧","✉️","📩","📨","📧","💌","📥","📤","📦","🏷","📪","📫","📬","📭","📮","📯","📜","📃","📄","📑","📊","📈","📉","🗒","🗓","📆","📅","📇","🗃","🗳","🗄","📋","📁","📂","🗂","🗞","📰","📓","📔","📒","📕","📗","📘","📙","📚","📖","🔖","🔗","📎","🖇","📐","📏","📌","📍","✂️","🖊","🖋","✒️","🖌","🖍","📝","✏️","🔍","🔎","🔏","🔐","🔒","🔓","❤️","🧡","💛","💚","💙","💜","🖤","💔","❣️","💕","💞","💓","💗","💖","💘","💝","💟","☮️","✝️","☪️","🕉","☸️","✡️","🔯","🕎","☯️","☦️","🛐","⛎","♈️","♉️","♊️","♋️","♌️","♍️","♎️","♏️","♐️","♑️","♒️","♓️","🆔","⚛️","🉑","☢️","☣️","📴","📳","🈶","🈚️","🈸","🈺","🈷️","✴️","🆚","💮","🉐","㊙️","㊗️","🈴","🈵","🈹","🈲","🅰️","🅱️","🆎","🆑","🅾️","🆘","❌","⭕️","🛑","⛔️","📛","🚫","💯","💢","♨️","🚷","🚯","🚳","🚱","🔞","📵","🚭","❗️","❕","❓","❔","‼️","⁉️","🔅","🔆","〽️","⚠️","🚸","🔱","⚜️","🔰","♻️","✅","🈯️","💹","❇️","✳️","❎","🌐","💠","Ⓜ️","🌀","💤","🏧","🚾","♿️","🅿️","🈳","🈂️","🛂","🛃","🛄","🛅","🚹","🚺","🚼","🚻","🚮","🎦","📶","🈁","🔣","ℹ️","🔤","🔡","🔠","🆖","🆗","🆙","🆒","🆕","🆓","0️⃣","1️⃣","2️⃣","3️⃣","4️⃣","5️⃣","6️⃣","7️⃣","8️⃣","9️⃣","🔟","🔢","#️⃣","*️⃣","⏏️","▶️","⏸","⏯","⏹","⏺","⏭","⏮","⏩","⏪","⏫","⏬","◀️","🔼","🔽","➡️","⬅️","⬆️","⬇️","↗️","↘️","↙️","↖️","↕️","↔️","↪️","↩️","⤴️","⤵️","🔀","🔁","🔂","🔄","🔃","🎵","🎶","➕","➖","➗","✖️","♾","💲","💱","™️","©️","®️","〰️","➰","➿","🔚","🔙","🔛","🔝","🔜","✔️","☑️","🔘","⚪️","⚫️","🔴","🔵","🔺","🔻","🔸","🔹","🔶","🔷","🔳","🔲","▪️","▫️","◾️","◽️","◼️","◻️","⬛️","⬜️","🔈","🔇","🔉","🔊","🔔","🔕","📣","📢","👁‍🗨","💬","💭","🗯","♠️","♣️","♥️","♦️","🃏","🎴","🀄️","🕐","🕑","🕒","🕓","🕔","🕕","🕖","🕗","🕘","🕙","🕚","🕛","🕜","🕝","🕞","🕟","🕠","🕡","🕢","🕣","🕤","🕥","🕦","🕧"],flags:["🏳️","🏴","🏁","🚩","🏳️‍🌈","🏴‍☠️","🇦🇫","🇦🇽","🇦🇱","🇩🇿","🇦🇸","🇦🇩","🇦🇴","🇦🇮","🇦🇶","🇦🇬","🇦🇷","🇦🇲","🇦🇼","🇦🇺","🇦🇹","🇦🇿","🇧🇸","🇧🇭","🇧🇩","🇧🇧","🇧🇾","🇧🇪","🇧🇿","🇧🇯","🇧🇲","🇧🇹","🇧🇴","🇧🇦","🇧🇼","🇧🇷","🇮🇴","🇻🇬","🇧🇳","🇧🇬","🇧🇫","🇧🇮","🇰🇭","🇨🇲","🇨🇦","🇮🇨","🇨🇻","🇧🇶","🇰🇾","🇨🇫","🇹🇩","🇨🇱","🇨🇳","🇨🇽","🇨🇨","🇨🇴","🇰🇲","🇨🇬","🇨🇩","🇨🇰","🇨🇷","🇨🇮","🇭🇷","🇨🇺","🇨🇼","🇨🇾","🇨🇿","🇩🇰","🇩🇯","🇩🇲","🇩🇴","🇪🇨","🇪🇬","🇸🇻","🇬🇶","🇪🇷","🇪🇪","🇪🇹","🇪🇺","🇫🇰","🇫🇴","🇫🇯","🇫🇮","🇫🇷","🇬🇫","🇵🇫","🇹🇫","🇬🇦","🇬🇲","🇬🇪","🇩🇪","🇬🇭","🇬🇮","🇬🇷","🇬🇱","🇬🇩","🇬🇵","🇬🇺","🇬🇹","🇬🇬","🇬🇳","🇬🇼","🇬🇾","🇭🇹","🇭🇳","🇭🇰","🇭🇺","🇮🇸","🇮🇳","🇮🇩","🇮🇷","🇮🇶","🇮🇪","🇮🇲","🇮🇱","🇮🇹","🇯🇲","🇯🇵","🎌","🇯🇪","🇯🇴","🇰🇿","🇰🇪","🇰🇮","🇽🇰","🇰🇼","🇰🇬","🇱🇦","🇱🇻","🇱🇧","🇱🇸","🇱🇷","🇱🇾","🇱🇮","🇱🇹","🇱🇺","🇲🇴","🇲🇰","🇲🇬","🇲🇼","🇲🇾","🇲🇻","🇲🇱","🇲🇹","🇲🇭","🇲🇶","🇲🇷","🇲🇺","🇾🇹","🇲🇽","🇫🇲","🇲🇩","🇲🇨","🇲🇳","🇲🇪","🇲🇸","🇲🇦","🇲🇿","🇲🇲","🇳🇦","🇳🇷","🇳🇵","🇳🇱","🇳🇨","🇳🇿","🇳🇮","🇳🇪","🇳🇬","🇳🇺","🇳🇫","🇰🇵","🇲🇵","🇳🇴","🇴🇲","🇵🇰","🇵🇼","🇵🇸","🇵🇦","🇵🇬","🇵🇾","🇵🇪","🇵🇭","🇵🇳","🇵🇱","🇵🇹","🇵🇷","🇶🇦","🇷🇪","🇷🇴","🇷🇺","🇷🇼","🇼🇸","🇸🇲","🇸🇦","🇸🇳","🇷🇸","🇸🇨","🇸🇱","🇸🇬","🇸🇽","🇸🇰","🇸🇮","🇬🇸","🇸🇧","🇸🇴","🇿🇦","🇰🇷","🇸🇸","🇪🇸","🇱🇰","🇧🇱","🇸🇭","🇰🇳","🇱🇨","🇵🇲","🇻🇨","🇸🇩","🇸🇷","🇸🇿","🇸🇪","🇨🇭","🇸🇾","🇹🇼","🇹🇯","🇹🇿","🇹🇭","🇹🇱","🇹🇬","🇹🇰","🇹🇴","🇹🇹","🇹🇳","🇹🇷","🇹🇲","🇹🇨","🇹🇻","🇻🇮","🇺🇬","🇺🇦","🇦🇪","🇬🇧","🏴󠁧󠁢󠁥󠁮󠁧󠁿","🏴󠁧󠁢󠁳󠁣󠁴󠁿","🏴󠁧󠁢󠁷󠁬󠁳󠁿","🇺🇳","🇺🇸","🇺🇾","🇺🇿","🇻🇺","🇻🇦","🇻🇪","🇻🇳","🇼🇫","🇪🇭","🇾🇪","🇿🇲","🇿🇼"]},s=/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g;function a(e){return e.match(s)}function o(e){"UK"===e&&(e="GB");const t=e.codePointAt(0)-65+127462,n=e.codePointAt(1)-65+127462;return String.fromCodePoint(t,n)}},function(e,t,n){"use strict";var i=n(2),s=n(4),a={BG_FOCUSED:"mdc-ripple-upgraded--background-focused",FG_ACTIVATION:"mdc-ripple-upgraded--foreground-activation",FG_DEACTIVATION:"mdc-ripple-upgraded--foreground-deactivation",ROOT:"mdc-ripple-upgraded",UNBOUNDED:"mdc-ripple-upgraded--unbounded"},o={VAR_FG_SCALE:"--mdc-ripple-fg-scale",VAR_FG_SIZE:"--mdc-ripple-fg-size",VAR_FG_TRANSLATE_END:"--mdc-ripple-fg-translate-end",VAR_FG_TRANSLATE_START:"--mdc-ripple-fg-translate-start",VAR_LEFT:"--mdc-ripple-left",VAR_TOP:"--mdc-ripple-top"},r={DEACTIVATION_TIMEOUT_MS:225,FG_DEACTIVATION_MS:150,INITIAL_ORIGIN_SCALE:.6,PADDING:10,TAP_DELAY_MS:300},c=n(17);n.d(t,"a",(function(){return h}));
/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
var d=["touchstart","pointerdown","mousedown","keydown"],l=["touchend","pointerup","mouseup","contextmenu"],u=[],h=function(e){function t(n){var s=e.call(this,i.a({},t.defaultAdapter,n))||this;return s.activationAnimationHasEnded_=!1,s.activationTimer_=0,s.fgDeactivationRemovalTimer_=0,s.fgScale_="0",s.frame_={width:0,height:0},s.initialSize_=0,s.layoutFrame_=0,s.maxRadius_=0,s.unboundedCoords_={left:0,top:0},s.activationState_=s.defaultActivationState_(),s.activationTimerCallback_=function(){s.activationAnimationHasEnded_=!0,s.runDeactivationUXLogicIfReady_()},s.activateHandler_=function(e){return s.activate_(e)},s.deactivateHandler_=function(){return s.deactivate_()},s.focusHandler_=function(){return s.handleFocus()},s.blurHandler_=function(){return s.handleBlur()},s.resizeHandler_=function(){return s.layout()},s}return i.b(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return a},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return o},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return r},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},browserSupportsCssVars:function(){return!0},computeBoundingRect:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},containsEventTarget:function(){return!0},deregisterDocumentInteractionHandler:function(){},deregisterInteractionHandler:function(){},deregisterResizeHandler:function(){},getWindowPageOffset:function(){return{x:0,y:0}},isSurfaceActive:function(){return!0},isSurfaceDisabled:function(){return!0},isUnbounded:function(){return!0},registerDocumentInteractionHandler:function(){},registerInteractionHandler:function(){},registerResizeHandler:function(){},removeClass:function(){},updateCssVariable:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){var e=this,n=this.supportsPressRipple_();if(this.registerRootHandlers_(n),n){var i=t.cssClasses,s=i.ROOT,a=i.UNBOUNDED;requestAnimationFrame((function(){e.adapter_.addClass(s),e.adapter_.isUnbounded()&&(e.adapter_.addClass(a),e.layoutInternal_())}))}},t.prototype.destroy=function(){var e=this;if(this.supportsPressRipple_()){this.activationTimer_&&(clearTimeout(this.activationTimer_),this.activationTimer_=0,this.adapter_.removeClass(t.cssClasses.FG_ACTIVATION)),this.fgDeactivationRemovalTimer_&&(clearTimeout(this.fgDeactivationRemovalTimer_),this.fgDeactivationRemovalTimer_=0,this.adapter_.removeClass(t.cssClasses.FG_DEACTIVATION));var n=t.cssClasses,i=n.ROOT,s=n.UNBOUNDED;requestAnimationFrame((function(){e.adapter_.removeClass(i),e.adapter_.removeClass(s),e.removeCssVars_()}))}this.deregisterRootHandlers_(),this.deregisterDeactivationHandlers_()},t.prototype.activate=function(e){this.activate_(e)},t.prototype.deactivate=function(){this.deactivate_()},t.prototype.layout=function(){var e=this;this.layoutFrame_&&cancelAnimationFrame(this.layoutFrame_),this.layoutFrame_=requestAnimationFrame((function(){e.layoutInternal_(),e.layoutFrame_=0}))},t.prototype.setUnbounded=function(e){var n=t.cssClasses.UNBOUNDED;e?this.adapter_.addClass(n):this.adapter_.removeClass(n)},t.prototype.handleFocus=function(){var e=this;requestAnimationFrame((function(){return e.adapter_.addClass(t.cssClasses.BG_FOCUSED)}))},t.prototype.handleBlur=function(){var e=this;requestAnimationFrame((function(){return e.adapter_.removeClass(t.cssClasses.BG_FOCUSED)}))},t.prototype.supportsPressRipple_=function(){return this.adapter_.browserSupportsCssVars()},t.prototype.defaultActivationState_=function(){return{activationEvent:void 0,hasDeactivationUXRun:!1,isActivated:!1,isProgrammatic:!1,wasActivatedByPointer:!1,wasElementMadeActive:!1}},t.prototype.registerRootHandlers_=function(e){var t=this;e&&(d.forEach((function(e){t.adapter_.registerInteractionHandler(e,t.activateHandler_)})),this.adapter_.isUnbounded()&&this.adapter_.registerResizeHandler(this.resizeHandler_)),this.adapter_.registerInteractionHandler("focus",this.focusHandler_),this.adapter_.registerInteractionHandler("blur",this.blurHandler_)},t.prototype.registerDeactivationHandlers_=function(e){var t=this;"keydown"===e.type?this.adapter_.registerInteractionHandler("keyup",this.deactivateHandler_):l.forEach((function(e){t.adapter_.registerDocumentInteractionHandler(e,t.deactivateHandler_)}))},t.prototype.deregisterRootHandlers_=function(){var e=this;d.forEach((function(t){e.adapter_.deregisterInteractionHandler(t,e.activateHandler_)})),this.adapter_.deregisterInteractionHandler("focus",this.focusHandler_),this.adapter_.deregisterInteractionHandler("blur",this.blurHandler_),this.adapter_.isUnbounded()&&this.adapter_.deregisterResizeHandler(this.resizeHandler_)},t.prototype.deregisterDeactivationHandlers_=function(){var e=this;this.adapter_.deregisterInteractionHandler("keyup",this.deactivateHandler_),l.forEach((function(t){e.adapter_.deregisterDocumentInteractionHandler(t,e.deactivateHandler_)}))},t.prototype.removeCssVars_=function(){var e=this,n=t.strings;Object.keys(n).forEach((function(t){0===t.indexOf("VAR_")&&e.adapter_.updateCssVariable(n[t],null)}))},t.prototype.activate_=function(e){var t=this;if(!this.adapter_.isSurfaceDisabled()){var n=this.activationState_;if(!n.isActivated){var i=this.previousActivationEvent_;if(!(i&&void 0!==e&&i.type!==e.type))n.isActivated=!0,n.isProgrammatic=void 0===e,n.activationEvent=e,n.wasActivatedByPointer=!n.isProgrammatic&&(void 0!==e&&("mousedown"===e.type||"touchstart"===e.type||"pointerdown"===e.type)),void 0!==e&&u.length>0&&u.some((function(e){return t.adapter_.containsEventTarget(e)}))?this.resetActivationState_():(void 0!==e&&(u.push(e.target),this.registerDeactivationHandlers_(e)),n.wasElementMadeActive=this.checkElementMadeActive_(e),n.wasElementMadeActive&&this.animateActivation_(),requestAnimationFrame((function(){u=[],n.wasElementMadeActive||void 0===e||" "!==e.key&&32!==e.keyCode||(n.wasElementMadeActive=t.checkElementMadeActive_(e),n.wasElementMadeActive&&t.animateActivation_()),n.wasElementMadeActive||(t.activationState_=t.defaultActivationState_())})))}}},t.prototype.checkElementMadeActive_=function(e){return void 0===e||"keydown"!==e.type||this.adapter_.isSurfaceActive()},t.prototype.animateActivation_=function(){var e=this,n=t.strings,i=n.VAR_FG_TRANSLATE_START,s=n.VAR_FG_TRANSLATE_END,a=t.cssClasses,o=a.FG_DEACTIVATION,r=a.FG_ACTIVATION,c=t.numbers.DEACTIVATION_TIMEOUT_MS;this.layoutInternal_();var d="",l="";if(!this.adapter_.isUnbounded()){var u=this.getFgTranslationCoordinates_(),h=u.startPoint,p=u.endPoint;d=h.x+"px, "+h.y+"px",l=p.x+"px, "+p.y+"px"}this.adapter_.updateCssVariable(i,d),this.adapter_.updateCssVariable(s,l),clearTimeout(this.activationTimer_),clearTimeout(this.fgDeactivationRemovalTimer_),this.rmBoundedActivationClasses_(),this.adapter_.removeClass(o),this.adapter_.computeBoundingRect(),this.adapter_.addClass(r),this.activationTimer_=setTimeout((function(){return e.activationTimerCallback_()}),c)},t.prototype.getFgTranslationCoordinates_=function(){var e,t=this.activationState_,n=t.activationEvent;return{startPoint:e={x:(e=t.wasActivatedByPointer?Object(c.a)(n,this.adapter_.getWindowPageOffset(),this.adapter_.computeBoundingRect()):{x:this.frame_.width/2,y:this.frame_.height/2}).x-this.initialSize_/2,y:e.y-this.initialSize_/2},endPoint:{x:this.frame_.width/2-this.initialSize_/2,y:this.frame_.height/2-this.initialSize_/2}}},t.prototype.runDeactivationUXLogicIfReady_=function(){var e=this,n=t.cssClasses.FG_DEACTIVATION,i=this.activationState_,s=i.hasDeactivationUXRun,a=i.isActivated;(s||!a)&&this.activationAnimationHasEnded_&&(this.rmBoundedActivationClasses_(),this.adapter_.addClass(n),this.fgDeactivationRemovalTimer_=setTimeout((function(){e.adapter_.removeClass(n)}),r.FG_DEACTIVATION_MS))},t.prototype.rmBoundedActivationClasses_=function(){var e=t.cssClasses.FG_ACTIVATION;this.adapter_.removeClass(e),this.activationAnimationHasEnded_=!1,this.adapter_.computeBoundingRect()},t.prototype.resetActivationState_=function(){var e=this;this.previousActivationEvent_=this.activationState_.activationEvent,this.activationState_=this.defaultActivationState_(),setTimeout((function(){return e.previousActivationEvent_=void 0}),t.numbers.TAP_DELAY_MS)},t.prototype.deactivate_=function(){var e=this,t=this.activationState_;if(t.isActivated){var n=i.a({},t);t.isProgrammatic?(requestAnimationFrame((function(){return e.animateDeactivation_(n)})),this.resetActivationState_()):(this.deregisterDeactivationHandlers_(),requestAnimationFrame((function(){e.activationState_.hasDeactivationUXRun=!0,e.animateDeactivation_(n),e.resetActivationState_()})))}},t.prototype.animateDeactivation_=function(e){var t=e.wasActivatedByPointer,n=e.wasElementMadeActive;(t||n)&&this.runDeactivationUXLogicIfReady_()},t.prototype.layoutInternal_=function(){var e=this;this.frame_=this.adapter_.computeBoundingRect();var n=Math.max(this.frame_.height,this.frame_.width);this.maxRadius_=this.adapter_.isUnbounded()?n:Math.sqrt(Math.pow(e.frame_.width,2)+Math.pow(e.frame_.height,2))+t.numbers.PADDING;var i=Math.floor(n*t.numbers.INITIAL_ORIGIN_SCALE);this.adapter_.isUnbounded()&&i%2!=0?this.initialSize_=i-1:this.initialSize_=i,this.fgScale_=""+this.maxRadius_/this.initialSize_,this.updateLayoutCssVars_()},t.prototype.updateLayoutCssVars_=function(){var e=t.strings,n=e.VAR_FG_SIZE,i=e.VAR_LEFT,s=e.VAR_TOP,a=e.VAR_FG_SCALE;this.adapter_.updateCssVariable(n,this.initialSize_+"px"),this.adapter_.updateCssVariable(a,this.fgScale_),this.adapter_.isUnbounded()&&(this.unboundedCoords_={left:Math.round(this.frame_.width/2-this.initialSize_/2),top:Math.round(this.frame_.height/2-this.initialSize_/2)},this.adapter_.updateCssVariable(i,this.unboundedCoords_.left+"px"),this.adapter_.updateCssVariable(s,this.unboundedCoords_.top+"px"))},t}(s.a)},function(e,t,n){"use strict";var i;function s(e,t){void 0===t&&(t=!1);var n=e.CSS,s=i;if("boolean"==typeof i&&!t)return i;if(!(n&&"function"==typeof n.supports))return!1;var a=n.supports("--css-vars","yes"),o=n.supports("(--css-vars: yes)")&&n.supports("color","#00000000");return s=!(!a&&!o)&&!function(e){var t=e.document,n=t.createElement("div");n.className="mdc-ripple-surface--test-edge-var-bug",t.head.appendChild(n);var i=e.getComputedStyle(n),s=null!==i&&"solid"===i.borderTopStyle;return n.parentNode&&n.parentNode.removeChild(n),s}(e),t||(i=s),s}function a(e,t,n){if(!e)return{x:0,y:0};var i,s,a=t.x,o=t.y,r=a+n.left,c=o+n.top;if("touchstart"===e.type){var d=e;i=d.changedTouches[0].pageX-r,s=d.changedTouches[0].pageY-c}else{var l=e;i=l.pageX-r,s=l.pageY-c}return{x:i,y:s}}n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return a}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n(8),s=n(0);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class o{constructor(e={}){a(this,"connectionReady",!1),a(this,"connectionInited",!1),a(this,"emitter",new s.c),a(this,"onUpdates",e=>{this.emitter.trigger("updates",e)}),this.options=e,this.connectionDefered=Object(s.v)(),n.e(0).then(n.bind(null,25)).then(({MTProto:t})=>{this.updateConnectionState("connecting"),this.mtproto=new t({dcId:e.dcId,onConnectionReady:()=>{this.init(),this.updateConnectionState("connected")},onUpdates:this.onUpdates})})}exportAuthorization(e){return ApiClient.callMethod("auth.exportAuthorization",{dc_id:e})}async importAuthorization({id:e,bytes:t}){await this.callMethod("auth.importAuthorization",{id:e,bytes:t},!0)}updateConnectionState(e){this.emitter.trigger("updateConnectionState",e)}async init(){if(this.options.upload&&!this.mtproto.hasApiAuth())try{const e=await ApiClient.exportAuthorization(this.options.dcId);await this.importAuthorization(e)}catch(e){return void this.connectionDefered.reject(e)}this.connectionReady=!0,this.connectionDefered.resolve()}destroy(){this.mtproto.destroy()}wrapCall(e,t){const n=this.mtproto.getSerializer({api:!0,upload:this.options.upload});if(!this.connectionInited){const e=this.mtproto.getSchema();n.storeInt(3667594509,"invokeWithLayer"),n.storeInt(e.API.layer,"layer"),n.storeInt(3343392166,"initConnection"),n.storeInt(i.a.API_ID,"api_id"),n.storeString(function(){const e=!!document.documentMode,t=!e&&!!window.StyleMedia;if(navigator.userAgent.includes("Chrome")&&!t)return"Chrome";if(navigator.userAgent.includes("Safari")&&!t)return"Safari";if(navigator.userAgent.includes("Firefox"))return"Firefox";if(navigator.userAgent.includes("MSIE")||e)return"IE";if(t)return"Edge";return"Unknown"}(),"device_model"),n.storeString(function(){if(window.navigator.userAgent.includes("Windows NT 10.0"))return"Windows 10";if(window.navigator.userAgent.includes("Windows NT 6.2"))return"Windows 8";if(window.navigator.userAgent.includes("Windows NT 6.1"))return"Windows 7";if(window.navigator.userAgent.includes("Windows NT 6.0"))return"Windows Vista";if(window.navigator.userAgent.includes("Windows NT 5.1"))return"Windows XP";if(window.navigator.userAgent.includes("Windows NT 5.0"))return"Windows 2000";if(window.navigator.userAgent.includes("Mac"))return"Mac/iOS";if(window.navigator.userAgent.includes("X11"))return"UNIX";if(window.navigator.userAgent.includes("Linux"))return"Linux";return"Unknown"}(),"system_version"),n.storeString(i.a.APP_VERSION,"app_version"),n.storeString(r(),"system_lang_code"),n.storeString("","lang_pack"),n.storeString(r(),"lang_code"),this.connectionInited=!0}const s={api:!0,source:e};return s.resultType=n.storeMethod(e,t),this.mtproto.prepareMessageFromBuffer(n.getBuffer(),s)}async callMethod(e,t={},n=!1){this.connectionReady||n||await this.connectionDefered.promise;const s=this.wrapCall(e,t),a=await this.mtproto.pushMessage(s);return"rpc_error"===a._?303===a.error_code?(await this.migrateDC(this.getMigrateErrorDcId(a.error_message)),this.callMethod(e,t)):("AUTH_KEY_UNREGISTERED"===a.error_message&&(this.options.upload||i.a.logOutDone()),Promise.reject(a)):("auth.authorization"===a._&&this.mtproto.saveApiAuth(),a)}getDcId(){return this.mtproto.dcId}migrateDC(e){return this.connectionInited=!1,this.mtproto.migrateDC(e)}getMigrateErrorDcId(e){return+e.match(/\d+$/)[0]}getServerTimeOffset(){return this.mtproto.timeOffset}getServerTimeNow(){return Math.floor(Date.now()/1e3)+this.getServerTimeOffset()}}function r(){return navigator.language||"en"}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n(0),s=n(18),a=n(1);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const r=1024,c=new class{constructor(){o(this,"blobUrls",new Map),o(this,"requests",new Map),o(this,"queue",[]),o(this,"inProgress",0),o(this,"connections",new Map)}getBlobUrl(e){return URL.createObjectURL(e)}queueWait(e){if(this.inProgress++<4)return Promise.resolve();const t=this.queue.findIndex(t=>t.priority<e),n=Object(i.v)();return this.queue.splice(t,0,{priority:e,deferred:n}),n.promise}queueDone(){this.inProgress--;const e=this.queue.shift();e&&e.deferred.resolve()}getConnection(e){let t;if(this.connections.has(e)){const n=this.connections.get(e);t=n.connection,n.processCount++}else t=new s.a({dcId:e,upload:!0}),this.connections.set(e,{connection:t,processCount:1});return t}connectionDone(e){const t=e.getDcId(),n=this.connections.get(t);n&&--n.processCount||(this.connections.delete(t),e.destroy())}loadFile(e,t,n){const i=this.getDbFileName(e);if(this.requests.has(i))return this.requests.get(i);const s=this.loadFileRequest(e,t,n);return this.requests.set(i,s),s.finally(()=>{this.requests.delete(i)})}async loadFileRequest(e,t,{priority:n=1,cache:s=!1,mimeType:a="",size:o=0,onProgress:r,signal:d}={}){const l=this.getDbFileName(e);if(this.blobUrls.has(l))return this.blobUrls.get(l);let u;if(s)try{Date.now();u=await this.getFromCache(l)}catch(e){console.warn(e)}if(!u){const c=[],h=this.getConnection(t);try{Date.now();await this.queueWait(n);Date.now();for(let t=0,n=0;;t+=262144){if(d&&d.aborted)throw new Error("File download aborted");const i=await h.callMethod("upload.getFile",{location:e,offset:t,limit:262144});if(c.push(new Blob([i.bytes])),n+=i.bytes.byteLength,r&&r(n,i.bytes,t),a||(a=this.getMimeType(i.type)),o&&n>=o||!o&&i.bytes.byteLength<262144)break}}finally{this.queueDone(),this.connectionDone(h)}if(u=new Blob(c,{type:a}),"image/webp"===a){await Object(i.j)()||(u=await Object(i.k)(await Object(i.h)(u)))}if(s)try{this.saveToCache(l,u)}catch(e){console.warn(e)}}const h=c.getBlobUrl(u);return this.blobUrls.set(l,h),h}getMimeType(e){switch(e._){case"storage.fileJpeg":return"image/jpeg";case"storage.fileGif":return"image/gif";case"storage.filePng":return"image/png";case"storage.filePdf":return"application/pdf";case"storage.fileMp3":return"audio/mpeg";case"storage.fileMov":return"video/quicktime";case"storage.fileMp4":return"video/mp4";case"storage.fileWebp":return"image/webp";default:return""}}async getFromCache(e){const t=(await this.openDb()).transaction(["files"],"readonly").objectStore("files").get(e);return this.getDbRequestPromise(t)}async saveToCache(e,t){const n=(await this.openDb()).transaction(["files"],"readwrite").objectStore("files").put(t,e);return this.getDbRequestPromise(n)}async openDb(){return this.db?this.db:new Promise((e,t)=>{const n=indexedDB.open("telegram_cache",1);n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{this.db=t.target.result,e(this.db)},n.onupgradeneeded=t=>{const n=t.target.result;n.createObjectStore("files"),t.target.transaction.oncomplete=()=>{this.db=n,e(this.db)}}})}getDbFileName(e){return e._+(e.id||e.volume_id+e.local_id)+(e.thumb_size||"")}getDbRequestPromise(e){return new Promise((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}})}loadPeerPhoto(e,t,n,i,s){const o=n?t.photo_big:t.photo_small,r={_:"inputPeerPhotoFileLocation",peer:a.a.getInputPeer(e),volume_id:o.volume_id,local_id:o.local_id};return n&&(r.big=!0),this.loadFile(r,i,s)}loadPhoto(e,t,n={}){const i={_:"inputPhotoFileLocation",id:e.id,access_hash:e.access_hash,file_reference:e.file_reference,thumb_size:t};return this.loadFile(i,e.dc_id,n)}loadDocumentThumb(e,t,n={}){const i={_:"inputDocumentFileLocation",id:e.id,access_hash:e.access_hash,file_reference:e.file_reference,thumb_size:t};return"v"===t&&(n.mimeType="video/mp4"),this.loadFile(i,e.dc_id,n)}loadDocument(e,t={}){const n={_:"inputDocumentFileLocation",id:e.id,access_hash:e.access_hash,file_reference:e.file_reference};return Object.assign(t,{mimeType:e.mime_type,size:e.size}),this.loadFile(n,e.dc_id,t)}async loadDocumentBytes(e,t,n){const i={_:"inputDocumentFileLocation",id:e.id,access_hash:e.access_hash,file_reference:e.file_reference},s=this.getConnection(e.dc_id);try{await this.queueWait(1);const e=t-t%r;let a=n+t-e;a+=r-a%r,a=Math.min(a,1048576-e%1048576);const o=await s.callMethod("upload.getFile",{location:i,offset:e,limit:a,precise:!0}),c=t-e;return new Uint8Array(o.bytes.subarray(c))}finally{this.queueDone(),this.connectionDone(s)}}loadStickerSetThumb(e,t={}){const n={_:"inputStickerSetThumb",stickerset:{_:"inputStickerSetID",id:e.id,access_hash:e.access_hash},volume_id:e.thumb.location.volume_id,local_id:e.thumb.location.local_id};return this.loadFile(n,e.thumb_dc_id,t)}async uploadFile(e,t="",{onProgress:n,signal:s}={}){const a=Object(i.D)(),o=e.size>10485760,r=Math.ceil(e.size/262144),c=this.getConnection(ApiClient.getDcId());let d=!1;s&&s.addEventListener("abort",()=>d=!0);try{await this.queueWait(100);for(let t=0,s=0;s<e.size;t++,s+=262144){if(d)throw new Error("File upload aborted");await c.callMethod(o?"upload.saveBigFilePart":"upload.saveFilePart",{file_id:a,file_part:t,file_total_parts:r,bytes:await Object(i.h)(e.slice(s,s+262144))}),n&&n(Math.min(e.size,s+262144))}}finally{this.queueDone(),this.connectionDone(c)}return{_:o?"inputFileBig":"inputFile",id:a,parts:r,name:t,md5_checksum:""}}};window.FileApiManager=c},function(e,t,n){"use strict";var i=n(0),s=n(1),a=n(7),o=n(11);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const c=new class{constructor(){r(this,"onMenuItemClick",e=>{const t=e.currentTarget.dataset.type;if("media"===t||"file"===t){const e="media"===t,n=document.createElement("input");n.type="file",n.accept=e?"image/*, video/*":"*/*",n.multiple=!0,n.click(),window.input=n,n.onchange=()=>{this.onFilesSelected(n.files,e),this.fileInput=null},this.fileInput=n}}),r(this,"onMenuButtonClick",()=>{this.isMenuOpen()||this.showMenu()}),r(this,"onMenuMouseEnter",()=>{clearTimeout(this.hideTimeout),this.isMenuOpen()||this.showMenu()}),r(this,"onMenuMouseLeave",()=>{this.hideTimeout=setTimeout(()=>{this.isMenuOpen()&&this.hideMenu(),this.hideTimeout=null},500)}),r(this,"onGlobalClick",e=>{this.menu.contains(e.target)||this.hideMenu()})}init(){this.menu=i.e.html`
      <div class="mdc-menu mdc-menu-surface messages_form_media_menu" hidden>
        <ul class="mdc-list" role="menu" aria-hidden="true" aria-orientation="vertical" tabindex="-1">
          <li class="mdc-list-item messages_form_media_menu_item messages_form_media_menu_item-media" data-type="media" role="menuitem">
            <span class="mdc-list-item__text">Photo or Video</span>
          </li>
          <li class="mdc-list-item messages_form_media_menu_item messages_form_media_menu_item-file" data-type="file" role="menuitem">
            <span class="mdc-list-item__text">Document</span>
          </li>
          <li class="mdc-list-item messages_form_media_menu_item messages_form_media_menu_item-poll" data-type="poll" role="menuitem">
            <span class="mdc-list-item__text">Poll</span>
          </li>
        </ul>
      </div>
    `.buildElement();for(const e of Object(i.a)(".mdc-list",this.menu).children)Object(i.g)(e),e.addEventListener("click",this.onMenuItemClick)}bind(e){e.parentNode.append(this.menu),e.addEventListener("mousedown",this.onMenuButtonClick),e.addEventListener("mouseenter",this.onMenuMouseEnter),e.addEventListener("mouseleave",this.onMenuMouseLeave),this.menu.addEventListener("mouseenter",this.onMenuMouseEnter),this.menu.addEventListener("mouseleave",this.onMenuMouseLeave),this.menuButton=e}isMenuOpen(){return!this.menu.hidden}showMenu(){this.menu.hidden=!1,this.menuButton.classList.add("messages_form_media_button-active"),document.addEventListener("mousedown",this.onGlobalClick)}hideMenu(){this.menu.hidden=!0,this.menuButton.classList.remove("messages_form_media_button-active"),document.removeEventListener("mousedown",this.onGlobalClick)}onFilesSelected(e,t){if(e.length)if(e.length>1)for(const n of e)l.onFileSend(n,t);else l.onFileSend(e[0],t)}showFilesUploadPopup(e){let t="";for(const n of e){n.name.split(".").pop();t+=i.e.html`
        <div class="messages_upload_popup_files_item">
          <div class="messages_upload_popup_files_item_thumb"></div>
          <div class="messages_upload_popup_files_item_name">${n.name}</div>
          <div class="messages_upload_popup_files_item_size">${n.size}</div>
        </div>
      `}i.e.html`
      <div class="messages_upload_popup">
        <div class="messages_upload_popup_header">${o.a.getPlural("messages_send_n_files",e.length)}</div>
        <button class="messages_upload_popup_send_button">Send</button>
        <button class="messages_upload_popup_close_button"></button>
        ${t}
        <input class="messages_upload_popup_caption_input">
      </div>
    `.buildElement()}};function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}window.FileUploadPopup=c,n.d(t,"a",(function(){return l}));const l=new class{constructor(){d(this,"onInput",()=>{const e=this.dom.input;e.style.height="",e.style.height=e.scrollHeight+"px";const t=e.value.trim();this.dom.submit_button.classList.toggle("messages_form_submit_button-send",!!t),this.saveDraft(a.a.dialog.peer,t)}),d(this,"onSubmit",()=>{const e=this.dom.input.value.trim();e&&(s.a.sendMessage(a.a.dialog.peer,e),this.clear())}),d(this,"onSubmitMouseDown",()=>{const e=this.dom.submit_button,t=this.dom.cancel_button;if(e.classList.contains("messages_form_submit_button-send"))return;function n(e){t.classList.toggle("messages_form_cancel_button-active",e.target===t)}let s;e.classList.add("messages_form_submit_button-send"),t.hidden=!1,document.addEventListener(Object(i.B)()?"touchend":"mouseup",(function a(r){console.log("stop",r.target),r.target===t&&(o=!0);s&&s.stop(),e.classList.remove("messages_form_submit_button-send"),t.hidden=!0,document.removeEventListener(Object(i.B)()?"touchend":"mouseup",a),document.removeEventListener(Object(i.B)()?"touchmove":"mousemove",n)})),document.addEventListener(Object(i.B)()?"touchmove":"mousemove",n);let a,o=!1;this.initRecorder().then(t=>{o||((s=t).addEventListener("start",()=>{!function(){const t=s.sourceNode,n=t.context.createAnalyser();t.connect(n),function t(){const i=new Uint8Array(n.fftSize);n.getByteTimeDomainData(i);let s=0;for(let e=0;e<i.length;e++){s+=Math.abs(i[e]-128)}const o=s/i.length;e.style.setProperty("--highlight-radius",Math.round(50+10*o)+"px"),a=requestAnimationFrame(t)}()}()}),s.addEventListener("stop",()=>{cancelAnimationFrame(a),e.style.setProperty("--highlight-radius",0)}),s.addEventListener("dataAvailable",e=>{if(!o){const t=new Blob([e.detail],{type:"audio/ogg"});this.onVoiceSend(t)}}),s.start())})}),d(this,"onKeyDown",e=>{13!==e.keyCode||e.shiftKey||(this.onSubmit(),e.preventDefault())})}init(){this.container=Object(i.a)(".messages_form"),this.container.innerHTML='\n      <div class="messages_form_input_wrap">\n        <textarea class="messages_form_input" placeholder="Message" data-js-label="input"></textarea>\n        <button class="messages_form_emoji_button" data-js-label="emoji_button"></button>\n        <button class="messages_form_media_button" data-js-label="media_button"></button>\n      </div>\n      <button class="messages_form_cancel_button mdc-icon-button" data-js-label="cancel_button" hidden></button>\n      <button class="messages_form_submit_button mdc-icon-button" data-js-label="submit_button"></button>\n    ',this.dom=Object(i.x)(this.container),this.saveDraft=Object(i.m)((e,t)=>{s.a.saveDraft(e,t)});const e=this.dom.input,t=this.dom.submit_button;e.addEventListener("input",this.onInput),e.addEventListener("change",this.onInput),e.addEventListener("keydown",this.onKeyDown),t.addEventListener("click",this.onSubmit),t.addEventListener(Object(i.B)()?"touchstart":"mousedown",this.onSubmitMouseDown),Object(i.g)(t),c.init(),c.bind(this.dom.media_button)}onShown(){this.emojiInited||(this.emojiInited=!0,n.e(7).then(n.bind(null,38)).then(({EmojiDropdown:e})=>{e.init(),e.bind(this.dom.emoji_button,this.dom.input),this.dom.input.parentNode.appendChild(e.container)})),Object(i.B)()||this.focus()}focus(){this.dom.input.focus()}clear(){this.dom.input.value&&(this.dom.input.value="",this.onInput())}async initRecorder(){window.Recorder||await Object(i.C)("./vendor/opus-recorder/recorder.min.js");const e=new Recorder({encoderPath:"./vendor/opus-recorder/encoder_worker.min.js"});return new Promise(t=>{e.addEventListener("streamReady",()=>t(e)),e.initStream()})}onStickerSend(e){const t={_:"inputMediaDocument",id:{_:"inputDocument",id:e.id,access_hash:e.access_hash,file_reference:e.file_reference}};s.a.sendMedia(a.a.dialog.peer,t)}async onVoiceSend(e){const t={_:"inputMediaUploadedDocument",file:await FileApiManager.uploadFile(e,"voice.ogg"),mime_type:"audio/ogg",attributes:[{_:"documentAttributeFilename",file_name:"voice.ogg"}]};s.a.sendMedia(a.a.dialog.peer,t)}async onFileSend(e,t=!1){const n=a.a.dialog.peer,o=new AbortController,r=this.buildFileUploadProgressElement(e.name,e.size),c=a.a.appendPendingMessage(r);Object(i.a)(".document_icon",r).addEventListener("click",()=>{o.abort(),a.a.removePendingMessage(c)});const d=await FileApiManager.uploadFile(e,e.name,{onProgress:t=>{const n=Math.round(t/e.size*100);Object(i.a)(".document_size_percent",r).innerText=`${n}%`,Object(i.a)(".document_icon_progress_path",r).style.strokeDasharray=`${n}, 100`},signal:o.signal});let l;l=t&&e.type.startsWith("image/")?{_:"inputMediaUploadedPhoto",file:d}:{_:"inputMediaUploadedDocument",file:d,mime_type:e.type,attributes:[{_:"documentAttributeFilename",file_name:e.name}]};try{await s.a.sendMedia(n,l)}catch(e){console.error(e)}a.a.removePendingMessage(c)}buildFileUploadProgressElement(e,t){return i.e.html`
      <div class="document">
        <div class="document_col">
          <div class="document_icon document_icon-loading">
            <svg class="document_icon_progress_svg" viewBox="0 0 36 36" xmlns="http://www.w3.org/2000/svg">
              <path class="document_icon_progress_path" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"/>
            </svg>
          </div>
        </div>
        <div class="document_col">
          <div class="document_filename">${e}</div>
          <div class="document_size"><span class="document_size_percent">0%</span> &middot; ${Object(i.t)(t)}</div>        
        </div>
      </div>
    `.buildElement()}};window.MessagesFormController=l},function(e,t,n){n(22),e.exports=n(23)},function(e,t,n){e.exports=n.p+"main.css"},function(e,t,n){"use strict";n.r(t);var i=n(8);window.App=i.a},function(e,t,n){"use strict";var i=n(2),s=n(5),a=n(9),o={LIST_ITEM_ACTIVATED_CLASS:"mdc-list-item--activated",LIST_ITEM_CLASS:"mdc-list-item",LIST_ITEM_DISABLED_CLASS:"mdc-list-item--disabled",LIST_ITEM_SELECTED_CLASS:"mdc-list-item--selected",ROOT:"mdc-list"},r={ACTION_EVENT:"MDCList:action",ARIA_CHECKED:"aria-checked",ARIA_CHECKED_CHECKBOX_SELECTOR:'[role="checkbox"][aria-checked="true"]',ARIA_CHECKED_RADIO_SELECTOR:'[role="radio"][aria-checked="true"]',ARIA_CURRENT:"aria-current",ARIA_DISABLED:"aria-disabled",ARIA_ORIENTATION:"aria-orientation",ARIA_ORIENTATION_HORIZONTAL:"horizontal",ARIA_ROLE_CHECKBOX_SELECTOR:'[role="checkbox"]',ARIA_SELECTED:"aria-selected",CHECKBOX_RADIO_SELECTOR:'input[type="checkbox"], input[type="radio"]',CHECKBOX_SELECTOR:'input[type="checkbox"]',CHILD_ELEMENTS_TO_TOGGLE_TABINDEX:"\n    ."+o.LIST_ITEM_CLASS+" button:not(:disabled),\n    ."+o.LIST_ITEM_CLASS+" a\n  ",FOCUSABLE_CHILD_ELEMENTS:"\n    ."+o.LIST_ITEM_CLASS+" button:not(:disabled),\n    ."+o.LIST_ITEM_CLASS+" a,\n    ."+o.LIST_ITEM_CLASS+' input[type="radio"]:not(:disabled),\n    .'+o.LIST_ITEM_CLASS+' input[type="checkbox"]:not(:disabled)\n  ',RADIO_SELECTOR:'input[type="radio"]'},c={UNSET_INDEX:-1},d=n(4),l=["input","button","textarea","select"];var u,h,p=function(e){function t(n){var s=e.call(this,i.a({},t.defaultAdapter,n))||this;return s.wrapFocus_=!1,s.isVertical_=!0,s.isSingleSelectionList_=!1,s.selectedIndex_=c.UNSET_INDEX,s.focusedItemIndex_=c.UNSET_INDEX,s.useActivatedClass_=!1,s.ariaCurrentAttrValue_=null,s.isCheckboxList_=!1,s.isRadioList_=!1,s}return i.b(t,e),Object.defineProperty(t,"strings",{get:function(){return r},enumerable:!0,configurable:!0}),Object.defineProperty(t,"cssClasses",{get:function(){return o},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return c},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClassForElementIndex:function(){},focusItemAtIndex:function(){},getAttributeForElementIndex:function(){return null},getFocusedElementIndex:function(){return 0},getListItemCount:function(){return 0},hasCheckboxAtIndex:function(){return!1},hasRadioAtIndex:function(){return!1},isCheckboxCheckedAtIndex:function(){return!1},isFocusInsideList:function(){return!1},isRootFocused:function(){return!1},listItemAtIndexHasClass:function(){return!1},notifyAction:function(){},removeClassForElementIndex:function(){},setAttributeForElementIndex:function(){},setCheckedCheckboxOrRadioAtIndex:function(){},setTabIndexForListItemChildren:function(){}}},enumerable:!0,configurable:!0}),t.prototype.layout=function(){0!==this.adapter_.getListItemCount()&&(this.adapter_.hasCheckboxAtIndex(0)?this.isCheckboxList_=!0:this.adapter_.hasRadioAtIndex(0)&&(this.isRadioList_=!0))},t.prototype.setWrapFocus=function(e){this.wrapFocus_=e},t.prototype.setVerticalOrientation=function(e){this.isVertical_=e},t.prototype.setSingleSelection=function(e){this.isSingleSelectionList_=e},t.prototype.setUseActivatedClass=function(e){this.useActivatedClass_=e},t.prototype.getSelectedIndex=function(){return this.selectedIndex_},t.prototype.setSelectedIndex=function(e){this.isIndexValid_(e)&&(this.isCheckboxList_?this.setCheckboxAtIndex_(e):this.isRadioList_?this.setRadioAtIndex_(e):this.setSingleSelectionAtIndex_(e))},t.prototype.handleFocusIn=function(e,t){t>=0&&this.adapter_.setTabIndexForListItemChildren(t,"0")},t.prototype.handleFocusOut=function(e,t){var n=this;t>=0&&this.adapter_.setTabIndexForListItemChildren(t,"-1"),setTimeout((function(){n.adapter_.isFocusInsideList()||n.setTabindexToFirstSelectedItem_()}),0)},t.prototype.handleKeydown=function(e,t,n){var i="ArrowLeft"===e.key||37===e.keyCode,s="ArrowUp"===e.key||38===e.keyCode,a="ArrowRight"===e.key||39===e.keyCode,o="ArrowDown"===e.key||40===e.keyCode,r="Home"===e.key||36===e.keyCode,c="End"===e.key||35===e.keyCode,d="Enter"===e.key||13===e.keyCode,l="Space"===e.key||32===e.keyCode;if(this.adapter_.isRootFocused())s||c?(e.preventDefault(),this.focusLastElement()):(o||r)&&(e.preventDefault(),this.focusFirstElement());else{var u=this.adapter_.getFocusedElementIndex();if(!(-1===u&&(u=n)<0)){var h;if(this.isVertical_&&o||!this.isVertical_&&a)this.preventDefaultEvent_(e),h=this.focusNextElement(u);else if(this.isVertical_&&s||!this.isVertical_&&i)this.preventDefaultEvent_(e),h=this.focusPrevElement(u);else if(r)this.preventDefaultEvent_(e),h=this.focusFirstElement();else if(c)this.preventDefaultEvent_(e),h=this.focusLastElement();else if((d||l)&&t){var p=e.target;if(p&&"A"===p.tagName&&d)return;this.preventDefaultEvent_(e),this.isSelectableList_()&&this.setSelectedIndexOnAction_(u),this.adapter_.notifyAction(u)}this.focusedItemIndex_=u,void 0!==h&&(this.setTabindexAtIndex_(h),this.focusedItemIndex_=h)}}},t.prototype.handleClick=function(e,t){e!==c.UNSET_INDEX&&(this.isSelectableList_()&&this.setSelectedIndexOnAction_(e,t),this.adapter_.notifyAction(e),this.setTabindexAtIndex_(e),this.focusedItemIndex_=e)},t.prototype.focusNextElement=function(e){var t=e+1;if(t>=this.adapter_.getListItemCount()){if(!this.wrapFocus_)return e;t=0}return this.adapter_.focusItemAtIndex(t),t},t.prototype.focusPrevElement=function(e){var t=e-1;if(t<0){if(!this.wrapFocus_)return e;t=this.adapter_.getListItemCount()-1}return this.adapter_.focusItemAtIndex(t),t},t.prototype.focusFirstElement=function(){return this.adapter_.focusItemAtIndex(0),0},t.prototype.focusLastElement=function(){var e=this.adapter_.getListItemCount()-1;return this.adapter_.focusItemAtIndex(e),e},t.prototype.setEnabled=function(e,t){this.isIndexValid_(e)&&(t?(this.adapter_.removeClassForElementIndex(e,o.LIST_ITEM_DISABLED_CLASS),this.adapter_.setAttributeForElementIndex(e,r.ARIA_DISABLED,"false")):(this.adapter_.addClassForElementIndex(e,o.LIST_ITEM_DISABLED_CLASS),this.adapter_.setAttributeForElementIndex(e,r.ARIA_DISABLED,"true")))},t.prototype.preventDefaultEvent_=function(e){var t=(""+e.target.tagName).toLowerCase();-1===l.indexOf(t)&&e.preventDefault()},t.prototype.setSingleSelectionAtIndex_=function(e){if(this.selectedIndex_!==e){var t=o.LIST_ITEM_SELECTED_CLASS;this.useActivatedClass_&&(t=o.LIST_ITEM_ACTIVATED_CLASS),this.selectedIndex_!==c.UNSET_INDEX&&this.adapter_.removeClassForElementIndex(this.selectedIndex_,t),this.adapter_.addClassForElementIndex(e,t),this.setAriaForSingleSelectionAtIndex_(e),this.selectedIndex_=e}},t.prototype.setAriaForSingleSelectionAtIndex_=function(e){this.selectedIndex_===c.UNSET_INDEX&&(this.ariaCurrentAttrValue_=this.adapter_.getAttributeForElementIndex(e,r.ARIA_CURRENT));var t=null!==this.ariaCurrentAttrValue_,n=t?r.ARIA_CURRENT:r.ARIA_SELECTED;this.selectedIndex_!==c.UNSET_INDEX&&this.adapter_.setAttributeForElementIndex(this.selectedIndex_,n,"false");var i=t?this.ariaCurrentAttrValue_:"true";this.adapter_.setAttributeForElementIndex(e,n,i)},t.prototype.setRadioAtIndex_=function(e){this.adapter_.setCheckedCheckboxOrRadioAtIndex(e,!0),this.selectedIndex_!==c.UNSET_INDEX&&this.adapter_.setAttributeForElementIndex(this.selectedIndex_,r.ARIA_CHECKED,"false"),this.adapter_.setAttributeForElementIndex(e,r.ARIA_CHECKED,"true"),this.selectedIndex_=e},t.prototype.setCheckboxAtIndex_=function(e){for(var t=0;t<this.adapter_.getListItemCount();t++){var n=!1;e.indexOf(t)>=0&&(n=!0),this.adapter_.setCheckedCheckboxOrRadioAtIndex(t,n),this.adapter_.setAttributeForElementIndex(t,r.ARIA_CHECKED,n?"true":"false")}this.selectedIndex_=e},t.prototype.setTabindexAtIndex_=function(e){this.focusedItemIndex_===c.UNSET_INDEX&&0!==e?this.adapter_.setAttributeForElementIndex(0,"tabindex","-1"):this.focusedItemIndex_>=0&&this.focusedItemIndex_!==e&&this.adapter_.setAttributeForElementIndex(this.focusedItemIndex_,"tabindex","-1"),this.adapter_.setAttributeForElementIndex(e,"tabindex","0")},t.prototype.isSelectableList_=function(){return this.isSingleSelectionList_||this.isCheckboxList_||this.isRadioList_},t.prototype.setTabindexToFirstSelectedItem_=function(){var e=0;this.isSelectableList_()&&("number"==typeof this.selectedIndex_&&this.selectedIndex_!==c.UNSET_INDEX?e=this.selectedIndex_:this.selectedIndex_ instanceof Array&&this.selectedIndex_.length>0&&(e=this.selectedIndex_.reduce((function(e,t){return Math.min(e,t)})))),this.setTabindexAtIndex_(e)},t.prototype.isIndexValid_=function(e){var t=this;if(e instanceof Array){if(!this.isCheckboxList_)throw new Error("MDCListFoundation: Array of index is only supported for checkbox based list");return 0===e.length||e.some((function(e){return t.isIndexInRange_(e)}))}if("number"==typeof e){if(this.isCheckboxList_)throw new Error("MDCListFoundation: Expected array of index for checkbox based list but got number: "+e);return this.isIndexInRange_(e)}return!1},t.prototype.isIndexInRange_=function(e){var t=this.adapter_.getListItemCount();return e>=0&&e<t},t.prototype.setSelectedIndexOnAction_=function(e,t){void 0===t&&(t=!0),this.adapter_.listItemAtIndexHasClass(e,o.LIST_ITEM_DISABLED_CLASS)||(this.isCheckboxList_?this.toggleCheckboxAtIndex_(e,t):this.setSelectedIndex(e))},t.prototype.toggleCheckboxAtIndex_=function(e,t){var n=this.adapter_.isCheckboxCheckedAtIndex(e);t&&(n=!n,this.adapter_.setCheckedCheckboxOrRadioAtIndex(e,n)),this.adapter_.setAttributeForElementIndex(e,r.ARIA_CHECKED,n?"true":"false");var i=this.selectedIndex_===c.UNSET_INDEX?[]:this.selectedIndex_.slice();n?i.push(e):i=i.filter((function(t){return t!==e})),this.selectedIndex_=i},t}(d.a),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.b(t,e),Object.defineProperty(t.prototype,"vertical",{set:function(e){this.foundation_.setVerticalOrientation(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"listElements",{get:function(){return[].slice.call(this.root_.querySelectorAll("."+o.LIST_ITEM_CLASS))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wrapFocus",{set:function(e){this.foundation_.setWrapFocus(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"singleSelection",{set:function(e){this.foundation_.setSingleSelection(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedIndex",{get:function(){return this.foundation_.getSelectedIndex()},set:function(e){this.foundation_.setSelectedIndex(e)},enumerable:!0,configurable:!0}),t.attachTo=function(e){return new t(e)},t.prototype.initialSyncWithDOM=function(){this.handleClick_=this.handleClickEvent_.bind(this),this.handleKeydown_=this.handleKeydownEvent_.bind(this),this.focusInEventListener_=this.handleFocusInEvent_.bind(this),this.focusOutEventListener_=this.handleFocusOutEvent_.bind(this),this.listen("keydown",this.handleKeydown_),this.listen("click",this.handleClick_),this.listen("focusin",this.focusInEventListener_),this.listen("focusout",this.focusOutEventListener_),this.layout(),this.initializeListType()},t.prototype.destroy=function(){this.unlisten("keydown",this.handleKeydown_),this.unlisten("click",this.handleClick_),this.unlisten("focusin",this.focusInEventListener_),this.unlisten("focusout",this.focusOutEventListener_)},t.prototype.layout=function(){var e=this.root_.getAttribute(r.ARIA_ORIENTATION);this.vertical=e!==r.ARIA_ORIENTATION_HORIZONTAL,[].slice.call(this.root_.querySelectorAll(".mdc-list-item:not([tabindex])")).forEach((function(e){e.setAttribute("tabindex","-1")})),[].slice.call(this.root_.querySelectorAll(r.FOCUSABLE_CHILD_ELEMENTS)).forEach((function(e){return e.setAttribute("tabindex","-1")})),this.foundation_.layout()},t.prototype.initializeListType=function(){var e=this,t=this.root_.querySelectorAll(r.ARIA_ROLE_CHECKBOX_SELECTOR),n=this.root_.querySelector("\n      ."+o.LIST_ITEM_ACTIVATED_CLASS+",\n      ."+o.LIST_ITEM_SELECTED_CLASS+"\n    "),i=this.root_.querySelector(r.ARIA_CHECKED_RADIO_SELECTOR);if(t.length){var s=this.root_.querySelectorAll(r.ARIA_CHECKED_CHECKBOX_SELECTOR);this.selectedIndex=[].map.call(s,(function(t){return e.listElements.indexOf(t)}))}else n?(n.classList.contains(o.LIST_ITEM_ACTIVATED_CLASS)&&this.foundation_.setUseActivatedClass(!0),this.singleSelection=!0,this.selectedIndex=this.listElements.indexOf(n)):i&&(this.selectedIndex=this.listElements.indexOf(i))},t.prototype.setEnabled=function(e,t){this.foundation_.setEnabled(e,t)},t.prototype.getDefaultFoundation=function(){var e=this;return new p({addClassForElementIndex:function(t,n){var i=e.listElements[t];i&&i.classList.add(n)},focusItemAtIndex:function(t){var n=e.listElements[t];n&&n.focus()},getAttributeForElementIndex:function(t,n){return e.listElements[t].getAttribute(n)},getFocusedElementIndex:function(){return e.listElements.indexOf(document.activeElement)},getListItemCount:function(){return e.listElements.length},hasCheckboxAtIndex:function(t){return!!e.listElements[t].querySelector(r.CHECKBOX_SELECTOR)},hasRadioAtIndex:function(t){return!!e.listElements[t].querySelector(r.RADIO_SELECTOR)},isCheckboxCheckedAtIndex:function(t){return e.listElements[t].querySelector(r.CHECKBOX_SELECTOR).checked},isFocusInsideList:function(){return e.root_.contains(document.activeElement)},isRootFocused:function(){return document.activeElement===e.root_},listItemAtIndexHasClass:function(t,n){return e.listElements[t].classList.contains(n)},notifyAction:function(t){e.emit(r.ACTION_EVENT,{index:t},!0)},removeClassForElementIndex:function(t,n){var i=e.listElements[t];i&&i.classList.remove(n)},setAttributeForElementIndex:function(t,n,i){var s=e.listElements[t];s&&s.setAttribute(n,i)},setCheckedCheckboxOrRadioAtIndex:function(t,n){var i=e.listElements[t].querySelector(r.CHECKBOX_RADIO_SELECTOR);i.checked=n;var s=document.createEvent("Event");s.initEvent("change",!0,!0),i.dispatchEvent(s)},setTabIndexForListItemChildren:function(t,n){var i=e.listElements[t];[].slice.call(i.querySelectorAll(r.CHILD_ELEMENTS_TO_TOGGLE_TABINDEX)).forEach((function(e){return e.setAttribute("tabindex",n)}))}})},t.prototype.getListItemIndex_=function(e){var t=e.target,n=Object(a.a)(t,"."+o.LIST_ITEM_CLASS+", ."+o.ROOT);return n&&Object(a.b)(n,"."+o.LIST_ITEM_CLASS)?this.listElements.indexOf(n):-1},t.prototype.handleFocusInEvent_=function(e){var t=this.getListItemIndex_(e);this.foundation_.handleFocusIn(e,t)},t.prototype.handleFocusOutEvent_=function(e){var t=this.getListItemIndex_(e);this.foundation_.handleFocusOut(e,t)},t.prototype.handleKeydownEvent_=function(e){var t=this.getListItemIndex_(e),n=e.target;this.foundation_.handleKeydown(e,n.classList.contains(o.LIST_ITEM_CLASS),t)},t.prototype.handleClickEvent_=function(e){var t=this.getListItemIndex_(e),n=e.target,i=!Object(a.b)(n,r.CHECKBOX_RADIO_SELECTOR);this.foundation_.handleClick(t,i)},t}(s.a),_={ANCHOR:"mdc-menu-surface--anchor",ANIMATING_CLOSED:"mdc-menu-surface--animating-closed",ANIMATING_OPEN:"mdc-menu-surface--animating-open",FIXED:"mdc-menu-surface--fixed",OPEN:"mdc-menu-surface--open",ROOT:"mdc-menu-surface"},g={CLOSED_EVENT:"MDCMenuSurface:closed",OPENED_EVENT:"MDCMenuSurface:opened",FOCUSABLE_ELEMENTS:["button:not(:disabled)",'[href]:not([aria-disabled="true"])',"input:not(:disabled)","select:not(:disabled)","textarea:not(:disabled)",'[tabindex]:not([tabindex="-1"]):not([aria-disabled="true"])'].join(", ")},f={TRANSITION_OPEN_DURATION:120,TRANSITION_CLOSE_DURATION:75,MARGIN_TO_EDGE:32,ANCHOR_TO_MENU_SURFACE_WIDTH_RATIO:.67};!function(e){e[e.BOTTOM=1]="BOTTOM",e[e.CENTER=2]="CENTER",e[e.RIGHT=4]="RIGHT",e[e.FLIP_RTL=8]="FLIP_RTL"}(u||(u={})),function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=4]="TOP_RIGHT",e[e.BOTTOM_LEFT=1]="BOTTOM_LEFT",e[e.BOTTOM_RIGHT=5]="BOTTOM_RIGHT",e[e.TOP_START=8]="TOP_START",e[e.TOP_END=12]="TOP_END",e[e.BOTTOM_START=9]="BOTTOM_START",e[e.BOTTOM_END=13]="BOTTOM_END"}(h||(h={}));
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
var b,v=function(e){function t(n){var s=e.call(this,i.a({},t.defaultAdapter,n))||this;return s.isOpen_=!1,s.isQuickOpen_=!1,s.isHoistedElement_=!1,s.isFixedPosition_=!1,s.openAnimationEndTimerId_=0,s.closeAnimationEndTimerId_=0,s.animationRequestId_=0,s.anchorCorner_=h.TOP_START,s.anchorMargin_={top:0,right:0,bottom:0,left:0},s.position_={x:0,y:0},s}return i.b(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return _},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return g},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return f},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Corner",{get:function(){return h},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},hasAnchor:function(){return!1},isElementInContainer:function(){return!1},isFocused:function(){return!1},isRtl:function(){return!1},getInnerDimensions:function(){return{height:0,width:0}},getAnchorDimensions:function(){return null},getWindowDimensions:function(){return{height:0,width:0}},getBodyDimensions:function(){return{height:0,width:0}},getWindowScroll:function(){return{x:0,y:0}},setPosition:function(){},setMaxHeight:function(){},setTransformOrigin:function(){},saveFocus:function(){},restoreFocus:function(){},notifyClose:function(){},notifyOpen:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){var e=t.cssClasses,n=e.ROOT,i=e.OPEN;if(!this.adapter_.hasClass(n))throw new Error(n+" class required in root element.");this.adapter_.hasClass(i)&&(this.isOpen_=!0)},t.prototype.destroy=function(){clearTimeout(this.openAnimationEndTimerId_),clearTimeout(this.closeAnimationEndTimerId_),cancelAnimationFrame(this.animationRequestId_)},t.prototype.setAnchorCorner=function(e){this.anchorCorner_=e},t.prototype.setAnchorMargin=function(e){this.anchorMargin_.top=e.top||0,this.anchorMargin_.right=e.right||0,this.anchorMargin_.bottom=e.bottom||0,this.anchorMargin_.left=e.left||0},t.prototype.setIsHoisted=function(e){this.isHoistedElement_=e},t.prototype.setFixedPosition=function(e){this.isFixedPosition_=e},t.prototype.setAbsolutePosition=function(e,t){this.position_.x=this.isFinite_(e)?e:0,this.position_.y=this.isFinite_(t)?t:0},t.prototype.setQuickOpen=function(e){this.isQuickOpen_=e},t.prototype.isOpen=function(){return this.isOpen_},t.prototype.open=function(){var e=this;this.adapter_.saveFocus(),this.isQuickOpen_||this.adapter_.addClass(t.cssClasses.ANIMATING_OPEN),this.animationRequestId_=requestAnimationFrame((function(){e.adapter_.addClass(t.cssClasses.OPEN),e.dimensions_=e.adapter_.getInnerDimensions(),e.autoPosition_(),e.isQuickOpen_?e.adapter_.notifyOpen():e.openAnimationEndTimerId_=setTimeout((function(){e.openAnimationEndTimerId_=0,e.adapter_.removeClass(t.cssClasses.ANIMATING_OPEN),e.adapter_.notifyOpen()}),f.TRANSITION_OPEN_DURATION)})),this.isOpen_=!0},t.prototype.close=function(e){var n=this;void 0===e&&(e=!1),this.isQuickOpen_||this.adapter_.addClass(t.cssClasses.ANIMATING_CLOSED),requestAnimationFrame((function(){n.adapter_.removeClass(t.cssClasses.OPEN),n.isQuickOpen_?n.adapter_.notifyClose():n.closeAnimationEndTimerId_=setTimeout((function(){n.closeAnimationEndTimerId_=0,n.adapter_.removeClass(t.cssClasses.ANIMATING_CLOSED),n.adapter_.notifyClose()}),f.TRANSITION_CLOSE_DURATION)})),this.isOpen_=!1,e||this.maybeRestoreFocus_()},t.prototype.handleBodyClick=function(e){var t=e.target;this.adapter_.isElementInContainer(t)||this.close()},t.prototype.handleKeydown=function(e){var t=e.keyCode;("Escape"===e.key||27===t)&&this.close()},t.prototype.autoPosition_=function(){var e;this.measurements_=this.getAutoLayoutMeasurements_();var t=this.getOriginCorner_(),n=this.getMenuSurfaceMaxHeight_(t),i=this.hasBit_(t,u.BOTTOM)?"bottom":"top",s=this.hasBit_(t,u.RIGHT)?"right":"left",a=this.getHorizontalOriginOffset_(t),o=this.getVerticalOriginOffset_(t),r=this.measurements_,c=r.anchorSize,d=r.surfaceSize,l=((e={})[s]=a,e[i]=o,e);c.width/d.width>f.ANCHOR_TO_MENU_SURFACE_WIDTH_RATIO&&(s="center"),(this.isHoistedElement_||this.isFixedPosition_)&&this.adjustPositionForHoistedElement_(l),this.adapter_.setTransformOrigin(s+" "+i),this.adapter_.setPosition(l),this.adapter_.setMaxHeight(n?n+"px":"")},t.prototype.getAutoLayoutMeasurements_=function(){var e=this.adapter_.getAnchorDimensions(),t=this.adapter_.getBodyDimensions(),n=this.adapter_.getWindowDimensions(),i=this.adapter_.getWindowScroll();return e||(e={top:this.position_.y,right:this.position_.x,bottom:this.position_.y,left:this.position_.x,width:0,height:0}),{anchorSize:e,bodySize:t,surfaceSize:this.dimensions_,viewportDistance:{top:e.top,right:n.width-e.right,bottom:n.height-e.bottom,left:e.left},viewportSize:n,windowScroll:i}},t.prototype.getOriginCorner_=function(){var e=h.TOP_LEFT,t=this.measurements_,n=t.viewportDistance,i=t.anchorSize,s=t.surfaceSize,a=this.hasBit_(this.anchorCorner_,u.BOTTOM),o=a?n.top+i.height+this.anchorMargin_.bottom:n.top+this.anchorMargin_.top,r=a?n.bottom-this.anchorMargin_.bottom:n.bottom+i.height-this.anchorMargin_.top,c=s.height-o,d=s.height-r;d>0&&c<d&&(e=this.setBit_(e,u.BOTTOM));var l=this.adapter_.isRtl(),p=this.hasBit_(this.anchorCorner_,u.FLIP_RTL),m=this.hasBit_(this.anchorCorner_,u.RIGHT),_=m&&!l||!m&&p&&l,g=_?n.left+i.width+this.anchorMargin_.right:n.left+this.anchorMargin_.left,f=_?n.right-this.anchorMargin_.right:n.right+i.width-this.anchorMargin_.left,b=s.width-g,v=s.width-f;return(b<0&&_&&l||m&&!_&&b<0||v>0&&b<v)&&(e=this.setBit_(e,u.RIGHT)),e},t.prototype.getMenuSurfaceMaxHeight_=function(e){var n=this.measurements_.viewportDistance,i=0,s=this.hasBit_(e,u.BOTTOM),a=this.hasBit_(this.anchorCorner_,u.BOTTOM),o=t.numbers.MARGIN_TO_EDGE;return s?(i=n.top+this.anchorMargin_.top-o,a||(i+=this.measurements_.anchorSize.height)):(i=n.bottom-this.anchorMargin_.bottom+this.measurements_.anchorSize.height-o,a&&(i-=this.measurements_.anchorSize.height)),i},t.prototype.getHorizontalOriginOffset_=function(e){var t=this.measurements_.anchorSize,n=this.hasBit_(e,u.RIGHT),i=this.hasBit_(this.anchorCorner_,u.RIGHT);if(n){var s=i?t.width-this.anchorMargin_.left:this.anchorMargin_.right;return this.isHoistedElement_||this.isFixedPosition_?s-(this.measurements_.viewportSize.width-this.measurements_.bodySize.width):s}return i?t.width-this.anchorMargin_.right:this.anchorMargin_.left},t.prototype.getVerticalOriginOffset_=function(e){var t=this.measurements_.anchorSize,n=this.hasBit_(e,u.BOTTOM),i=this.hasBit_(this.anchorCorner_,u.BOTTOM);return n?i?t.height-this.anchorMargin_.top:-this.anchorMargin_.bottom:i?t.height+this.anchorMargin_.bottom:this.anchorMargin_.top},t.prototype.adjustPositionForHoistedElement_=function(e){var t,n,s=this.measurements_,a=s.windowScroll,o=s.viewportDistance,r=Object.keys(e);try{for(var c=i.d(r),d=c.next();!d.done;d=c.next()){var l=d.value,u=e[l]||0;u+=o[l],this.isFixedPosition_||("top"===l?u+=a.y:"bottom"===l?u-=a.y:"left"===l?u+=a.x:u-=a.x),e[l]=u}}catch(e){t={error:e}}finally{try{d&&!d.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}},t.prototype.maybeRestoreFocus_=function(){var e=this.adapter_.isFocused(),t=document.activeElement&&this.adapter_.isElementInContainer(document.activeElement);(e||t)&&this.adapter_.restoreFocus()},t.prototype.hasBit_=function(e,t){return Boolean(e&t)},t.prototype.setBit_=function(e,t){return e|t},t.prototype.isFinite_=function(e){return"number"==typeof e&&isFinite(e)},t}(d.a);
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
var y,E=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.b(t,e),t.attachTo=function(e){return new t(e)},t.prototype.initialSyncWithDOM=function(){var e=this,t=this.root_.parentElement;this.anchorElement=t&&t.classList.contains(_.ANCHOR)?t:null,this.root_.classList.contains(_.FIXED)&&this.setFixedPosition(!0),this.handleKeydown_=function(t){return e.foundation_.handleKeydown(t)},this.handleBodyClick_=function(t){return e.foundation_.handleBodyClick(t)},this.registerBodyClickListener_=function(){return document.body.addEventListener("click",e.handleBodyClick_)},this.deregisterBodyClickListener_=function(){return document.body.removeEventListener("click",e.handleBodyClick_)},this.listen("keydown",this.handleKeydown_),this.listen(g.OPENED_EVENT,this.registerBodyClickListener_),this.listen(g.CLOSED_EVENT,this.deregisterBodyClickListener_)},t.prototype.destroy=function(){this.unlisten("keydown",this.handleKeydown_),this.unlisten(g.OPENED_EVENT,this.registerBodyClickListener_),this.unlisten(g.CLOSED_EVENT,this.deregisterBodyClickListener_),e.prototype.destroy.call(this)},t.prototype.isOpen=function(){return this.foundation_.isOpen()},t.prototype.open=function(){this.foundation_.open()},t.prototype.close=function(e){void 0===e&&(e=!1),this.foundation_.close(e)},Object.defineProperty(t.prototype,"quickOpen",{set:function(e){this.foundation_.setQuickOpen(e)},enumerable:!0,configurable:!0}),t.prototype.setIsHoisted=function(e){this.foundation_.setIsHoisted(e)},t.prototype.setMenuSurfaceAnchorElement=function(e){this.anchorElement=e},t.prototype.setFixedPosition=function(e){e?this.root_.classList.add(_.FIXED):this.root_.classList.remove(_.FIXED),this.foundation_.setFixedPosition(e)},t.prototype.setAbsolutePosition=function(e,t){this.foundation_.setAbsolutePosition(e,t),this.setIsHoisted(!0)},t.prototype.setAnchorCorner=function(e){this.foundation_.setAnchorCorner(e)},t.prototype.setAnchorMargin=function(e){this.foundation_.setAnchorMargin(e)},t.prototype.getDefaultFoundation=function(){var e=this;return new v({addClass:function(t){return e.root_.classList.add(t)},removeClass:function(t){return e.root_.classList.remove(t)},hasClass:function(t){return e.root_.classList.contains(t)},hasAnchor:function(){return!!e.anchorElement},notifyClose:function(){return e.emit(v.strings.CLOSED_EVENT,{})},notifyOpen:function(){return e.emit(v.strings.OPENED_EVENT,{})},isElementInContainer:function(t){return e.root_.contains(t)},isRtl:function(){return"rtl"===getComputedStyle(e.root_).getPropertyValue("direction")},setTransformOrigin:function(t){var n=function(e,t){if(void 0===t&&(t=!1),void 0===b||t){var n=e.document.createElement("div");b="transform"in n.style?"transform":"webkitTransform"}return b}(window)+"-origin";e.root_.style.setProperty(n,t)},isFocused:function(){return document.activeElement===e.root_},saveFocus:function(){e.previousFocus_=document.activeElement},restoreFocus:function(){e.root_.contains(document.activeElement)&&e.previousFocus_&&e.previousFocus_.focus&&e.previousFocus_.focus()},getInnerDimensions:function(){return{width:e.root_.offsetWidth,height:e.root_.offsetHeight}},getAnchorDimensions:function(){return e.anchorElement?e.anchorElement.getBoundingClientRect():null},getWindowDimensions:function(){return{width:window.innerWidth,height:window.innerHeight}},getBodyDimensions:function(){return{width:document.body.clientWidth,height:document.body.clientHeight}},getWindowScroll:function(){return{x:window.pageXOffset,y:window.pageYOffset}},setPosition:function(t){e.root_.style.left="left"in t?t.left+"px":"",e.root_.style.right="right"in t?t.right+"px":"",e.root_.style.top="top"in t?t.top+"px":"",e.root_.style.bottom="bottom"in t?t.bottom+"px":""},setMaxHeight:function(t){e.root_.style.maxHeight=t}})},t}(s.a),I={MENU_SELECTED_LIST_ITEM:"mdc-menu-item--selected",MENU_SELECTION_GROUP:"mdc-menu__selection-group",ROOT:"mdc-menu"},C={ARIA_CHECKED_ATTR:"aria-checked",ARIA_DISABLED_ATTR:"aria-disabled",CHECKBOX_SELECTOR:'input[type="checkbox"]',LIST_SELECTOR:".mdc-list",SELECTED_EVENT:"MDCMenu:selected"},A={FOCUS_ROOT_INDEX:-1};
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */!function(e){e[e.NONE=0]="NONE",e[e.LIST_ROOT=1]="LIST_ROOT",e[e.FIRST_ITEM=2]="FIRST_ITEM",e[e.LAST_ITEM=3]="LAST_ITEM"}(y||(y={}));
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
var T=function(e){function t(n){var s=e.call(this,i.a({},t.defaultAdapter,n))||this;return s.closeAnimationEndTimerId_=0,s.defaultFocusState_=y.LIST_ROOT,s}return i.b(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return I},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return C},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return A},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClassToElementAtIndex:function(){},removeClassFromElementAtIndex:function(){},addAttributeToElementAtIndex:function(){},removeAttributeFromElementAtIndex:function(){},elementContainsClass:function(){return!1},closeSurface:function(){},getElementIndex:function(){return-1},notifySelected:function(){},getMenuItemCount:function(){return 0},focusItemAtIndex:function(){},focusListRoot:function(){},getSelectedSiblingOfItemAtIndex:function(){return-1},isSelectableItemAtIndex:function(){return!1}}},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){this.closeAnimationEndTimerId_&&clearTimeout(this.closeAnimationEndTimerId_),this.adapter_.closeSurface()},t.prototype.handleKeydown=function(e){var t=e.key,n=e.keyCode;("Tab"===t||9===n)&&this.adapter_.closeSurface(!0)},t.prototype.handleItemAction=function(e){var t=this,n=this.adapter_.getElementIndex(e);n<0||(this.adapter_.notifySelected({index:n}),this.adapter_.closeSurface(),this.closeAnimationEndTimerId_=setTimeout((function(){var n=t.adapter_.getElementIndex(e);t.adapter_.isSelectableItemAtIndex(n)&&t.setSelectedIndex(n)}),v.numbers.TRANSITION_CLOSE_DURATION))},t.prototype.handleMenuSurfaceOpened=function(){switch(this.defaultFocusState_){case y.FIRST_ITEM:this.adapter_.focusItemAtIndex(0);break;case y.LAST_ITEM:this.adapter_.focusItemAtIndex(this.adapter_.getMenuItemCount()-1);break;case y.NONE:break;default:this.adapter_.focusListRoot()}},t.prototype.setDefaultFocusState=function(e){this.defaultFocusState_=e},t.prototype.setSelectedIndex=function(e){if(this.validatedIndex_(e),!this.adapter_.isSelectableItemAtIndex(e))throw new Error("MDCMenuFoundation: No selection group at specified index.");var t=this.adapter_.getSelectedSiblingOfItemAtIndex(e);t>=0&&(this.adapter_.removeAttributeFromElementAtIndex(t,C.ARIA_CHECKED_ATTR),this.adapter_.removeClassFromElementAtIndex(t,I.MENU_SELECTED_LIST_ITEM)),this.adapter_.addClassToElementAtIndex(e,I.MENU_SELECTED_LIST_ITEM),this.adapter_.addAttributeToElementAtIndex(e,C.ARIA_CHECKED_ATTR,"true")},t.prototype.setEnabled=function(e,t){this.validatedIndex_(e),t?(this.adapter_.removeClassFromElementAtIndex(e,o.LIST_ITEM_DISABLED_CLASS),this.adapter_.addAttributeToElementAtIndex(e,C.ARIA_DISABLED_ATTR,"false")):(this.adapter_.addClassToElementAtIndex(e,o.LIST_ITEM_DISABLED_CLASS),this.adapter_.addAttributeToElementAtIndex(e,C.ARIA_DISABLED_ATTR,"true"))},t.prototype.validatedIndex_=function(e){var t=this.adapter_.getMenuItemCount();if(!(e>=0&&e<t))throw new Error("MDCMenuFoundation: No list item at specified index.")},t}(d.a);n.d(t,"a",(function(){return O}));
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
var O=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.b(t,e),t.attachTo=function(e){return new t(e)},t.prototype.initialize=function(e,t){void 0===e&&(e=function(e){return new E(e)}),void 0===t&&(t=function(e){return new m(e)}),this.menuSurfaceFactory_=e,this.listFactory_=t},t.prototype.initialSyncWithDOM=function(){var e=this;this.menuSurface_=this.menuSurfaceFactory_(this.root_);var t=this.root_.querySelector(C.LIST_SELECTOR);t?(this.list_=this.listFactory_(t),this.list_.wrapFocus=!0):this.list_=null,this.handleKeydown_=function(t){return e.foundation_.handleKeydown(t)},this.handleItemAction_=function(t){return e.foundation_.handleItemAction(e.items[t.detail.index])},this.handleMenuSurfaceOpened_=function(){return e.foundation_.handleMenuSurfaceOpened()},this.menuSurface_.listen(v.strings.OPENED_EVENT,this.handleMenuSurfaceOpened_),this.listen("keydown",this.handleKeydown_),this.listen(p.strings.ACTION_EVENT,this.handleItemAction_)},t.prototype.destroy=function(){this.list_&&this.list_.destroy(),this.menuSurface_.destroy(),this.menuSurface_.unlisten(v.strings.OPENED_EVENT,this.handleMenuSurfaceOpened_),this.unlisten("keydown",this.handleKeydown_),this.unlisten(p.strings.ACTION_EVENT,this.handleItemAction_),e.prototype.destroy.call(this)},Object.defineProperty(t.prototype,"open",{get:function(){return this.menuSurface_.isOpen()},set:function(e){e?this.menuSurface_.open():this.menuSurface_.close()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wrapFocus",{get:function(){return!!this.list_&&this.list_.wrapFocus},set:function(e){this.list_&&(this.list_.wrapFocus=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){return this.list_?this.list_.listElements:[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"quickOpen",{set:function(e){this.menuSurface_.quickOpen=e},enumerable:!0,configurable:!0}),t.prototype.setDefaultFocusState=function(e){this.foundation_.setDefaultFocusState(e)},t.prototype.setAnchorCorner=function(e){this.menuSurface_.setAnchorCorner(e)},t.prototype.setAnchorMargin=function(e){this.menuSurface_.setAnchorMargin(e)},t.prototype.setSelectedIndex=function(e){this.foundation_.setSelectedIndex(e)},t.prototype.setEnabled=function(e,t){this.foundation_.setEnabled(e,t)},t.prototype.getOptionByIndex=function(e){return e<this.items.length?this.items[e]:null},t.prototype.setFixedPosition=function(e){this.menuSurface_.setFixedPosition(e)},t.prototype.setIsHoisted=function(e){this.menuSurface_.setIsHoisted(e)},t.prototype.setAbsolutePosition=function(e,t){this.menuSurface_.setAbsolutePosition(e,t)},t.prototype.setAnchorElement=function(e){this.menuSurface_.anchorElement=e},t.prototype.getDefaultFoundation=function(){var e=this;return new T({addClassToElementAtIndex:function(t,n){e.items[t].classList.add(n)},removeClassFromElementAtIndex:function(t,n){e.items[t].classList.remove(n)},addAttributeToElementAtIndex:function(t,n,i){e.items[t].setAttribute(n,i)},removeAttributeFromElementAtIndex:function(t,n){e.items[t].removeAttribute(n)},elementContainsClass:function(e,t){return e.classList.contains(t)},closeSurface:function(t){return e.menuSurface_.close(t)},getElementIndex:function(t){return e.items.indexOf(t)},notifySelected:function(t){return e.emit(C.SELECTED_EVENT,{index:t.index,item:e.items[t.index]})},getMenuItemCount:function(){return e.items.length},focusItemAtIndex:function(t){return e.items[t].focus()},focusListRoot:function(){return e.root_.querySelector(C.LIST_SELECTOR).focus()},isSelectableItemAtIndex:function(t){return!!Object(a.a)(e.items[t],"."+I.MENU_SELECTION_GROUP)},getSelectedSiblingOfItemAtIndex:function(t){var n=Object(a.a)(e.items[t],"."+I.MENU_SELECTION_GROUP).querySelector("."+I.MENU_SELECTED_LIST_ITEM);return n?e.items.indexOf(n):-1}})},t}(s.a)}]);