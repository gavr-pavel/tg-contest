!function(e){function t(t){for(var n,s,o=t[0],r=t[1],a=0,u=[];a<o.length;a++)s=o[a],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&u.push(i[s][0]),i[s]=0;for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n]);for(c&&c(t);u.length;)u.shift()()}var n={},i={2:0};function s(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.e=function(e){var t=[],n=i[e];if(0!==n)if(n)t.push(n[2]);else{var o=new Promise((function(t,s){n=i[e]=[t,s]}));t.push(n[2]=o);var r,a=document.createElement("script");a.charset="utf-8",a.timeout=120,s.nc&&a.setAttribute("nonce",s.nc),a.src=function(e){return s.p+""+e+".main.js"}(e);var c=new Error;r=function(t){a.onerror=a.onload=null,clearTimeout(u);var n=i[e];if(0!==n){if(n){var s=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+s+": "+o+")",c.name="ChunkLoadError",c.type=s,c.request=o,n[1](c)}i[e]=void 0}};var u=setTimeout((function(){r({type:"timeout",target:a})}),12e4);a.onerror=a.onload=r,document.head.appendChild(a)}return Promise.all(t)},s.m=e,s.c=n,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(n,i,function(t){return e[t]}.bind(null,i));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s.oe=function(e){throw console.error(e),e};var o=window.webpackJsonp=window.webpackJsonp||[],r=o.push.bind(o);o.push=t,o=o.slice();for(var a=0;a<o.length;a++)t(o[a]);var c=r;s(s.s=2)}([,,function(e,t,n){n(3),e.exports=n(4)},function(e,t,n){e.exports=n.p+"main.css"},function(e,t,n){"use strict";n.r(t);class i{static get(e){try{return JSON.parse(localStorage.getItem(e))}catch(e){return null}}static set(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(e){}}static remove(e){try{localStorage.removeItem(e)}catch(e){}}}class s{constructor(){var e,t,n;e=this,t="port",n=(new MessageChannel).port1,t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}on(e,t){this.port.addEventListener(e,t)}off(e,t){this.port.removeEventListener(e,t)}trigger(e,t){this.port.dispatchEvent(new CustomEvent(e,{detail:t}))}}function o(){const e={};return e.promise=new Promise((t,n)=>{e.resolve=t,e.reject=n}),e}function r(e,t,n){let i;return function(...s){const o=n&&!i;clearTimeout(i),i=setTimeout(()=>{i=null,n||e(...s)},t),o&&e(...s)}}function a(e,t=document){return t.querySelector(e)}function c(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function u(e){const t=a("#template_"+e);return document.importNode(t.content,!0)}function d(e){const t={};if(e.childElementCount)for(const n of e.children){n.dataset.jsLabel&&(t[n.dataset.jsLabel]=n),Object.assign(t,d(n))}return t}function l(e){const t=document.createElement("div");return t.innerHTML=e,t.firstElementChild}function _(e){return new Promise(t=>setTimeout(t,e))}function h(){return crypto.getRandomValues(new Uint32Array(2))}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class m{constructor(e={}){p(this,"connectionReady",!1),p(this,"connectionInited",!1),p(this,"emitter",new s),p(this,"onUpdates",e=>{this.emitter.trigger("updates",e)}),this.options=e,this.connectionDefered=o(),n.e(0).then(n.bind(null,80)).then(({MTProto:t})=>{this.updateConnectionState("connecting"),this.mtproto=new t({dcId:e.dcId,onConnectionReady:()=>{this.init(),this.updateConnectionState("connected")},onUpdates:this.onUpdates})})}exportAuthorization(e){return ApiClient.callMethod("auth.exportAuthorization",{dc_id:e})}async importAuthorization({id:e,bytes:t}){await this.callMethod("auth.importAuthorization",{id:e,bytes:t},!0)}updateConnectionState(e){this.emitter.trigger("updateConnectionState",e)}async init(){if(this.options.upload&&!this.mtproto.hasApiAuth())try{const e=await ApiClient.exportAuthorization(this.options.dcId);await this.importAuthorization(e)}catch(e){return void this.connectionDefered.reject(e)}this.connectionReady=!0,this.connectionDefered.resolve()}destroy(){this.mtproto.destroy()}wrapCall(e,t){const n=this.mtproto.getSerializer({api:!0,upload:this.options.upload});if(!this.connectionInited){const e=this.mtproto.getSchema();n.storeInt(3667594509,"invokeWithLayer"),n.storeInt(e.API.layer,"layer"),n.storeInt(3343392166,"initConnection"),n.storeInt(Qt.API_ID,"api_id"),n.storeString(function(){const e=!!document.documentMode,t=!e&&!!window.StyleMedia;if(navigator.userAgent.includes("Chrome")&&!t)return"Chrome";if(navigator.userAgent.includes("Safari")&&!t)return"Safari";if(navigator.userAgent.includes("Firefox"))return"Firefox";if(navigator.userAgent.includes("MSIE")||e)return"IE";if(t)return"Edge";return"Unknown"}(),"device_model"),n.storeString(function(){if(window.navigator.userAgent.includes("Windows NT 10.0"))return"Windows 10";if(window.navigator.userAgent.includes("Windows NT 6.2"))return"Windows 8";if(window.navigator.userAgent.includes("Windows NT 6.1"))return"Windows 7";if(window.navigator.userAgent.includes("Windows NT 6.0"))return"Windows Vista";if(window.navigator.userAgent.includes("Windows NT 5.1"))return"Windows XP";if(window.navigator.userAgent.includes("Windows NT 5.0"))return"Windows 2000";if(window.navigator.userAgent.includes("Mac"))return"Mac/iOS";if(window.navigator.userAgent.includes("X11"))return"UNIX";if(window.navigator.userAgent.includes("Linux"))return"Linux";return"Unknown"}(),"system_version"),n.storeString(Qt.APP_VERSION,"app_version"),n.storeString(f(),"system_lang_code"),n.storeString("","lang_pack"),n.storeString(f(),"lang_code"),this.connectionInited=!0}const i={api:!0,source:e};return i.resultType=n.storeMethod(e,t),this.mtproto.prepareMessageFromBuffer(n.getBuffer(),i)}async callMethod(e,t={},n=!1){this.connectionReady||n||await this.connectionDefered.promise;const i=this.wrapCall(e,t),s=await this.mtproto.pushMessage(i);return"rpc_error"===s._?303===s.error_code?(await this.migrateDC(this.getMigrateErrorDcId(s.error_message)),this.callMethod(e,t)):("AUTH_KEY_UNREGISTERED"===s.error_message&&(this.options.upload||Qt.logOutDone()),Promise.reject(s)):("auth.authorization"===s._&&this.mtproto.saveApiAuth(),s)}getDcId(){return this.mtproto.dcId}migrateDC(e){return this.connectionInited=!1,this.mtproto.migrateDC(e)}getMigrateErrorDcId(e){return+e.match(/\d+$/)[0]}}function f(){return navigator.language||"en"}const g=new m;window.ApiClient=g;const y={login_flood_pluralize_seconds:["","Try again in {} second","Try again in {} seconds"],login_flood_pluralize_minutes:["","Try again in {} minute","Try again in {} minutes"],login_flood_pluralize_hours:["","Try again in {} hour","Try again in {} hours"],messages_search_n_results_found:["No messages found","{} message found","{} messages found"],messages_send_n_files:["","Send {} File","Send {} files"],country_select_country_ab:"Abkhazia",country_select_country_af:"Afghanistan",country_select_country_ax:"Åland Islands",country_select_country_al:"Albania",country_select_country_dz:"Algeria",country_select_country_as:"American Samoa",country_select_country_ad:"Andorra",country_select_country_ao:"Angola",country_select_country_ai:"Anguilla",country_select_country_ag:"Antigua & Barbuda",country_select_country_ar:"Argentina",country_select_country_am:"Armenia",country_select_country_aw:"Aruba",country_select_country_sh_ac:"Ascension",country_select_country_au:"Australia",country_select_country_au_et:"Australian External Territories",country_select_country_at:"Austria",country_select_country_az:"Azerbaijan",country_select_country_bs:"Bahamas",country_select_country_bh:"Bahrain",country_select_country_bd:"Bangladesh",country_select_country_bb:"Barbados",country_select_country_ag_bar:"Barbuda",country_select_country_by:"Belarus",country_select_country_be:"Belgium",country_select_country_bz:"Belize",country_select_country_bj:"Benin",country_select_country_bm:"Bermuda",country_select_country_bt:"Bhutan",country_select_country_bo:"Bolivia",country_select_country_bq:"Caribbean Netherlands",country_select_country_ba:"Bosnia & Herzegovina",country_select_country_bw:"Botswana",country_select_country_br:"Brazil",country_select_country_io:"British Indian Ocean Territory",country_select_country_vg:"British Virgin Islands",country_select_country_bn:"Brunei",country_select_country_bg:"Bulgaria",country_select_country_bf:"Burkina Faso",country_select_country_mm:"Myanmar (Burma)",country_select_country_bi:"Burundi",country_select_country_kh:"Cambodia",country_select_country_cm:"Cameroon",country_select_country_ca:"Canada",country_select_country_cv:"Cape Verde",country_select_country_ky:"Cayman Islands",country_select_country_cf:"Central African Republic",country_select_country_td:"Chad",country_select_country_cl:"Chile",country_select_country_cn:"China",country_select_country_cx:"Christmas Island",country_select_country_cc:"Cocos (Keeling) Islands",country_select_country_co:"Colombia",country_select_country_km:"Comoros",country_select_country_cg:"Congo - Brazzaville",country_select_country_cd:"Congo - Kinshasa",country_select_country_ck:"Cook Islands",country_select_country_cr:"Costa Rica",country_select_country_ci:"Côte d’Ivoire",country_select_country_hr:"Croatia",country_select_country_cu:"Cuba",country_select_country_cw:"Curaçao",country_select_country_cy:"Cyprus",country_select_country_cz:"Czech Republic",country_select_country_dk:"Denmark",country_select_country_dg:"Diego Garcia",country_select_country_dj:"Djibouti",country_select_country_dm:"Dominica",country_select_country_do:"Dominican Republic",country_select_country_tl:"Timor-Leste",country_select_country_ec:"Ecuador",country_select_country_eg:"Egypt",country_select_country_sv:"El Salvador",country_select_country_gq:"Equatorial Guinea",country_select_country_er:"Eritrea",country_select_country_ee:"Estonia",country_select_country_et:"Ethiopia",country_select_country_fk:"Falkland Islands",country_select_country_fo:"Faroe Islands",country_select_country_fj:"Fiji",country_select_country_fi:"Finland",country_select_country_fr:"France",country_select_country_gf:"French Guiana",country_select_country_pf:"French Polynesia",country_select_country_ga:"Gabon",country_select_country_gm:"Gambia",country_select_country_ge:"Georgia",country_select_country_de:"Germany",country_select_country_gh:"Ghana",country_select_country_gi:"Gibraltar",country_select_country_gr:"Greece",country_select_country_gl:"Greenland",country_select_country_gd:"Grenada",country_select_country_gp:"Guadeloupe",country_select_country_gu:"Guam",country_select_country_gt:"Guatemala",country_select_country_gg:"Guernsey",country_select_country_gn:"Guinea",country_select_country_gw:"Guinea-Bissau",country_select_country_gy:"Guyana",country_select_country_ht:"Haiti",country_select_country_hn:"Honduras",country_select_country_hk:"Hong Kong SAR China",country_select_country_hu:"Hungary",country_select_country_is:"Iceland",country_select_country_in:"India",country_select_country_id:"Indonesia",country_select_country_ir:"Iran",country_select_country_iq:"Iraq",country_select_country_ie:"Ireland",country_select_country_il:"Israel",country_select_country_it:"Italy",country_select_country_jm:"Jamaica",country_select_country_sj:"Svalbard & Jan Mayen",country_select_country_jp:"Japan",country_select_country_je:"Jersey",country_select_country_jo:"Jordan",country_select_country_kz:"Kazakhstan",country_select_country_ke:"Kenya",country_select_country_ki:"Kiribati",country_select_country_kp:"North Korea",country_select_country_kr:"South Korea",country_select_country_kw:"Kuwait",country_select_country_kg:"Kyrgyzstan",country_select_country_la:"Laos",country_select_country_lv:"Latvia",country_select_country_lb:"Lebanon",country_select_country_ls:"Lesotho",country_select_country_lr:"Liberia",country_select_country_ly:"Libya",country_select_country_li:"Liechtenstein",country_select_country_lt:"Lithuania",country_select_country_lu:"Luxembourg",country_select_country_mo:"Macau SAR China",country_select_country_mk:"Macedonia",country_select_country_mg:"Madagascar",country_select_country_mw:"Malawi",country_select_country_my:"Malaysia",country_select_country_mv:"Maldives",country_select_country_ml:"Mali",country_select_country_mt:"Malta",country_select_country_mh:"Marshall Islands",country_select_country_mq:"Martinique",country_select_country_mr:"Mauritania",country_select_country_mu:"Mauritius",country_select_country_yt:"Mayotte",country_select_country_mx:"Mexico",country_select_country_fm:"Micronesia",country_select_country_md:"Moldova",country_select_country_mc:"Monaco",country_select_country_mn:"Mongolia",country_select_country_me:"Montenegro",country_select_country_ms:"Montserrat",country_select_country_ma:"Morocco",country_select_country_mz:"Mozambique",country_select_country_na:"Namibia",country_select_country_nr:"Nauru",country_select_country_np:"Nepal",country_select_country_nl:"Netherlands",country_select_country_nc:"New Caledonia",country_select_country_nz:"New Zealand",country_select_country_ni:"Nicaragua",country_select_country_ne:"Niger",country_select_country_ng:"Nigeria",country_select_country_nu:"Niue",country_select_country_nf:"Norfolk Island",country_select_country_mp:"Northern Mariana Islands",country_select_country_no:"Norway",country_select_country_om:"Oman",country_select_country_pk:"Pakistan",country_select_country_pw:"Palau",country_select_country_ps:"Palestinian Territories",country_select_country_pa:"Panama",country_select_country_pg:"Papua New Guinea",country_select_country_py:"Paraguay",country_select_country_pe:"Peru",country_select_country_ph:"Philippines",country_select_country_pn:"Pitcairn Islands",country_select_country_pl:"Poland",country_select_country_pt:"Portugal",country_select_country_pr:"Puerto Rico",country_select_country_qa:"Qatar",country_select_country_re:"Réunion",country_select_country_ro:"Romania",country_select_country_ru:"Russia",country_select_country_rw:"Rwanda",country_select_country_bl:"St. Barthélemy",country_select_country_sh:"St. Helena",country_select_country_kn:"St. Kitts & Nevis",country_select_country_lc:"St. Lucia",country_select_country_mf:"St. Martin (France)",country_select_country_pm:"St. Pierre and Miquelon",country_select_country_vc:"St. Vincent and the Grenadines",country_select_country_ws:"Samoa",country_select_country_sm:"San Marino",country_select_country_st:"São Tomé & Príncipe",country_select_country_sa:"Saudi Arabia",country_select_country_sn:"Senegal",country_select_country_rs:"Serbia",country_select_country_sc:"Seychelles",country_select_country_sl:"Sierra Leone",country_select_country_sg:"Singapore",country_select_country_nl_bq3:"Sint Eustatius",country_select_country_sx:"Sint Maarten",country_select_country_sk:"Slovakia",country_select_country_si:"Slovenia",country_select_country_sb:"Solomon Islands",country_select_country_so:"Somalia",country_select_country_za:"South Africa",country_select_country_gs:"South Georgia & South Sandwich Islands",country_select_country_ge_so:"South Ossetia",country_select_country_ss:"South Sudan",country_select_country_es:"Spain",country_select_country_lk:"Sri Lanka",country_select_country_sd:"Sudan",country_select_country_sr:"Suriname",country_select_country_sj_no:"Svalbard",country_select_country_sz:"Swaziland",country_select_country_se:"Sweden",country_select_country_ch:"Switzerland",country_select_country_sy:"Syria",country_select_country_tw:"Taiwan",country_select_country_tj:"Tajikistan",country_select_country_tz:"Tanzania",country_select_country_th:"Thailand",country_select_country_tg:"Togo",country_select_country_tk:"Tokelau",country_select_country_to:"Tonga",country_select_country_tt:"Trinidad & Tobago",country_select_country_tn:"Tunisia",country_select_country_tr:"Turkey",country_select_country_tm:"Turkmenistan",country_select_country_tc:"Turks & Caicos Islands",country_select_country_tv:"Tuvalu",country_select_country_ug:"Uganda",country_select_country_ua:"Ukraine",country_select_country_ae:"United Arab Emirates",country_select_country_uk:"United Kingdom",country_select_country_us:"United States",country_select_country_uy:"Uruguay",country_select_country_vi:"U.S. Virgin Islands",country_select_country_uz:"Uzbekistan",country_select_country_vu:"Vanuatu",country_select_country_ve:"Venezuela",country_select_country_va:"Vatican City",country_select_country_vn:"Vietnam",country_select_country_wf:"Wallis & Futuna",country_select_country_ye:"Yemen",country_select_country_zm:"Zambia",country_select_country_tz_uk:"Zanzibar",country_select_country_zw:"Zimbabwe"},b=new class{get(e,t=!1){const n=y[e]||"";return this.replaceTokens(n,t)}replaceTokens(e,t){if(!t)return e;for(const[n,i]of Object.entries(t))e=e.replace(`{${n}}`,i);return e}getPlural(e,t,n){const i=y[e];let s;return s=(s=!t&&i[0]?i[0]:1===t?i[1]:i[2]).replace("{}",t),this.replaceTokens(s,n)}};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var v=function(e,t){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function E(e,t){function n(){this.constructor=e}v(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var C=function(){return(C=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)};function I(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function A(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,s,o=n.call(e),r=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)r.push(i.value)}catch(e){s={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(s)throw s.error}}return r}
/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
var T,S=function(){function e(e){void 0===e&&(e={}),this.adapter_=e}return Object.defineProperty(e,"cssClasses",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{}},enumerable:!0,configurable:!0}),e.prototype.init=function(){},e.prototype.destroy=function(){},e}(),w=function(){function e(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];this.root_=e,this.initialize.apply(this,function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(A(arguments[t]));return e}(n)),this.foundation_=void 0===t?this.getDefaultFoundation():t,this.foundation_.init(),this.initialSyncWithDOM()}return e.attachTo=function(t){return new e(t,new S({}))},e.prototype.initialize=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e.prototype.getDefaultFoundation=function(){throw new Error("Subclasses must override getDefaultFoundation to return a properly configured foundation class")},e.prototype.initialSyncWithDOM=function(){},e.prototype.destroy=function(){this.foundation_.destroy()},e.prototype.listen=function(e,t,n){this.root_.addEventListener(e,t,n)},e.prototype.unlisten=function(e,t,n){this.root_.removeEventListener(e,t,n)},e.prototype.emit=function(e,t,n){var i;void 0===n&&(n=!1),"function"==typeof CustomEvent?i=new CustomEvent(e,{bubbles:n,detail:t}):(i=document.createEvent("CustomEvent")).initCustomEvent(e,n,!1,t),this.root_.dispatchEvent(i)},e}();function M(e,t){if(void 0===e&&(e=window),void 0===t&&(t=!1),void 0===T||t){var n=!1;try{e.document.addEventListener("test",(function(){}),{get passive(){return n=!0}})}catch(e){}T=n}return!!T&&{passive:!0}}
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */function L(e,t){if(e.closest)return e.closest(t);for(var n=e;n;){if(O(n,t))return n;n=n.parentElement}return null}function O(e,t){return(e.matches||e.webkitMatchesSelector||e.msMatchesSelector).call(e,t)}
/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var D,P={LABEL_FLOAT_ABOVE:"mdc-floating-label--float-above",LABEL_SHAKE:"mdc-floating-label--shake",ROOT:"mdc-floating-label"},x=function(e){function t(n){var i=e.call(this,C({},t.defaultAdapter,n))||this;return i.shakeAnimationEndHandler_=function(){return i.handleShakeAnimationEnd_()},i}return E(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return P},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},getWidth:function(){return 0},registerInteractionHandler:function(){},deregisterInteractionHandler:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.adapter_.registerInteractionHandler("animationend",this.shakeAnimationEndHandler_)},t.prototype.destroy=function(){this.adapter_.deregisterInteractionHandler("animationend",this.shakeAnimationEndHandler_)},t.prototype.getWidth=function(){return this.adapter_.getWidth()},t.prototype.shake=function(e){var n=t.cssClasses.LABEL_SHAKE;e?this.adapter_.addClass(n):this.adapter_.removeClass(n)},t.prototype.float=function(e){var n=t.cssClasses,i=n.LABEL_FLOAT_ABOVE,s=n.LABEL_SHAKE;e?this.adapter_.addClass(i):(this.adapter_.removeClass(i),this.adapter_.removeClass(s))},t.prototype.handleShakeAnimationEnd_=function(){var e=t.cssClasses.LABEL_SHAKE;this.adapter_.removeClass(e)},t}(S),k=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return E(t,e),t.attachTo=function(e){return new t(e)},t.prototype.shake=function(e){this.foundation_.shake(e)},t.prototype.float=function(e){this.foundation_.float(e)},t.prototype.getWidth=function(){return this.foundation_.getWidth()},t.prototype.getDefaultFoundation=function(){var e=this;return new x({addClass:function(t){return e.root_.classList.add(t)},removeClass:function(t){return e.root_.classList.remove(t)},getWidth:function(){return e.root_.scrollWidth},registerInteractionHandler:function(t,n){return e.listen(t,n)},deregisterInteractionHandler:function(t,n){return e.unlisten(t,n)}})},t}(w),N={LINE_RIPPLE_ACTIVE:"mdc-line-ripple--active",LINE_RIPPLE_DEACTIVATING:"mdc-line-ripple--deactivating"},F=function(e){function t(n){var i=e.call(this,C({},t.defaultAdapter,n))||this;return i.transitionEndHandler_=function(e){return i.handleTransitionEnd(e)},i}return E(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return N},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},setStyle:function(){},registerEventHandler:function(){},deregisterEventHandler:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.adapter_.registerEventHandler("transitionend",this.transitionEndHandler_)},t.prototype.destroy=function(){this.adapter_.deregisterEventHandler("transitionend",this.transitionEndHandler_)},t.prototype.activate=function(){this.adapter_.removeClass(N.LINE_RIPPLE_DEACTIVATING),this.adapter_.addClass(N.LINE_RIPPLE_ACTIVE)},t.prototype.setRippleCenter=function(e){this.adapter_.setStyle("transform-origin",e+"px center")},t.prototype.deactivate=function(){this.adapter_.addClass(N.LINE_RIPPLE_DEACTIVATING)},t.prototype.handleTransitionEnd=function(e){var t=this.adapter_.hasClass(N.LINE_RIPPLE_DEACTIVATING);"opacity"===e.propertyName&&t&&(this.adapter_.removeClass(N.LINE_RIPPLE_ACTIVE),this.adapter_.removeClass(N.LINE_RIPPLE_DEACTIVATING))},t}(S),R=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return E(t,e),t.attachTo=function(e){return new t(e)},t.prototype.activate=function(){this.foundation_.activate()},t.prototype.deactivate=function(){this.foundation_.deactivate()},t.prototype.setRippleCenter=function(e){this.foundation_.setRippleCenter(e)},t.prototype.getDefaultFoundation=function(){var e=this;return new F({addClass:function(t){return e.root_.classList.add(t)},removeClass:function(t){return e.root_.classList.remove(t)},hasClass:function(t){return e.root_.classList.contains(t)},setStyle:function(t,n){return e.root_.style.setProperty(t,n)},registerEventHandler:function(t,n){return e.listen(t,n)},deregisterEventHandler:function(t,n){return e.unlisten(t,n)}})},t}(w),H={NOTCH_ELEMENT_SELECTOR:".mdc-notched-outline__notch"},B={NOTCH_ELEMENT_PADDING:8},U={NO_LABEL:"mdc-notched-outline--no-label",OUTLINE_NOTCHED:"mdc-notched-outline--notched",OUTLINE_UPGRADED:"mdc-notched-outline--upgraded"},j=function(e){function t(n){return e.call(this,C({},t.defaultAdapter,n))||this}return E(t,e),Object.defineProperty(t,"strings",{get:function(){return H},enumerable:!0,configurable:!0}),Object.defineProperty(t,"cssClasses",{get:function(){return U},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return B},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},setNotchWidthProperty:function(){},removeNotchWidthProperty:function(){}}},enumerable:!0,configurable:!0}),t.prototype.notch=function(e){var n=t.cssClasses.OUTLINE_NOTCHED;e>0&&(e+=B.NOTCH_ELEMENT_PADDING),this.adapter_.setNotchWidthProperty(e),this.adapter_.addClass(n)},t.prototype.closeNotch=function(){var e=t.cssClasses.OUTLINE_NOTCHED;this.adapter_.removeClass(e),this.adapter_.removeNotchWidthProperty()},t}(S),V=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return E(t,e),t.attachTo=function(e){return new t(e)},t.prototype.initialSyncWithDOM=function(){this.notchElement_=this.root_.querySelector(H.NOTCH_ELEMENT_SELECTOR);var e=this.root_.querySelector("."+x.cssClasses.ROOT);e?(e.style.transitionDuration="0s",this.root_.classList.add(U.OUTLINE_UPGRADED),requestAnimationFrame((function(){e.style.transitionDuration=""}))):this.root_.classList.add(U.NO_LABEL)},t.prototype.notch=function(e){this.foundation_.notch(e)},t.prototype.closeNotch=function(){this.foundation_.closeNotch()},t.prototype.getDefaultFoundation=function(){var e=this;return new j({addClass:function(t){return e.root_.classList.add(t)},removeClass:function(t){return e.root_.classList.remove(t)},setNotchWidthProperty:function(t){return e.notchElement_.style.setProperty("width",t+"px")},removeNotchWidthProperty:function(){return e.notchElement_.style.removeProperty("width")}})},t}(w),z={BG_FOCUSED:"mdc-ripple-upgraded--background-focused",FG_ACTIVATION:"mdc-ripple-upgraded--foreground-activation",FG_DEACTIVATION:"mdc-ripple-upgraded--foreground-deactivation",ROOT:"mdc-ripple-upgraded",UNBOUNDED:"mdc-ripple-upgraded--unbounded"},G={VAR_FG_SCALE:"--mdc-ripple-fg-scale",VAR_FG_SIZE:"--mdc-ripple-fg-size",VAR_FG_TRANSLATE_END:"--mdc-ripple-fg-translate-end",VAR_FG_TRANSLATE_START:"--mdc-ripple-fg-translate-start",VAR_LEFT:"--mdc-ripple-left",VAR_TOP:"--mdc-ripple-top"},K={DEACTIVATION_TIMEOUT_MS:225,FG_DEACTIVATION_MS:150,INITIAL_ORIGIN_SCALE:.6,PADDING:10,TAP_DELAY_MS:300};
/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
var $=["touchstart","pointerdown","mousedown","keydown"],W=["touchend","pointerup","mouseup","contextmenu"],q=[],X=function(e){function t(n){var i=e.call(this,C({},t.defaultAdapter,n))||this;return i.activationAnimationHasEnded_=!1,i.activationTimer_=0,i.fgDeactivationRemovalTimer_=0,i.fgScale_="0",i.frame_={width:0,height:0},i.initialSize_=0,i.layoutFrame_=0,i.maxRadius_=0,i.unboundedCoords_={left:0,top:0},i.activationState_=i.defaultActivationState_(),i.activationTimerCallback_=function(){i.activationAnimationHasEnded_=!0,i.runDeactivationUXLogicIfReady_()},i.activateHandler_=function(e){return i.activate_(e)},i.deactivateHandler_=function(){return i.deactivate_()},i.focusHandler_=function(){return i.handleFocus()},i.blurHandler_=function(){return i.handleBlur()},i.resizeHandler_=function(){return i.layout()},i}return E(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return z},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return G},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return K},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},browserSupportsCssVars:function(){return!0},computeBoundingRect:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},containsEventTarget:function(){return!0},deregisterDocumentInteractionHandler:function(){},deregisterInteractionHandler:function(){},deregisterResizeHandler:function(){},getWindowPageOffset:function(){return{x:0,y:0}},isSurfaceActive:function(){return!0},isSurfaceDisabled:function(){return!0},isUnbounded:function(){return!0},registerDocumentInteractionHandler:function(){},registerInteractionHandler:function(){},registerResizeHandler:function(){},removeClass:function(){},updateCssVariable:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){var e=this,n=this.supportsPressRipple_();if(this.registerRootHandlers_(n),n){var i=t.cssClasses,s=i.ROOT,o=i.UNBOUNDED;requestAnimationFrame((function(){e.adapter_.addClass(s),e.adapter_.isUnbounded()&&(e.adapter_.addClass(o),e.layoutInternal_())}))}},t.prototype.destroy=function(){var e=this;if(this.supportsPressRipple_()){this.activationTimer_&&(clearTimeout(this.activationTimer_),this.activationTimer_=0,this.adapter_.removeClass(t.cssClasses.FG_ACTIVATION)),this.fgDeactivationRemovalTimer_&&(clearTimeout(this.fgDeactivationRemovalTimer_),this.fgDeactivationRemovalTimer_=0,this.adapter_.removeClass(t.cssClasses.FG_DEACTIVATION));var n=t.cssClasses,i=n.ROOT,s=n.UNBOUNDED;requestAnimationFrame((function(){e.adapter_.removeClass(i),e.adapter_.removeClass(s),e.removeCssVars_()}))}this.deregisterRootHandlers_(),this.deregisterDeactivationHandlers_()},t.prototype.activate=function(e){this.activate_(e)},t.prototype.deactivate=function(){this.deactivate_()},t.prototype.layout=function(){var e=this;this.layoutFrame_&&cancelAnimationFrame(this.layoutFrame_),this.layoutFrame_=requestAnimationFrame((function(){e.layoutInternal_(),e.layoutFrame_=0}))},t.prototype.setUnbounded=function(e){var n=t.cssClasses.UNBOUNDED;e?this.adapter_.addClass(n):this.adapter_.removeClass(n)},t.prototype.handleFocus=function(){var e=this;requestAnimationFrame((function(){return e.adapter_.addClass(t.cssClasses.BG_FOCUSED)}))},t.prototype.handleBlur=function(){var e=this;requestAnimationFrame((function(){return e.adapter_.removeClass(t.cssClasses.BG_FOCUSED)}))},t.prototype.supportsPressRipple_=function(){return this.adapter_.browserSupportsCssVars()},t.prototype.defaultActivationState_=function(){return{activationEvent:void 0,hasDeactivationUXRun:!1,isActivated:!1,isProgrammatic:!1,wasActivatedByPointer:!1,wasElementMadeActive:!1}},t.prototype.registerRootHandlers_=function(e){var t=this;e&&($.forEach((function(e){t.adapter_.registerInteractionHandler(e,t.activateHandler_)})),this.adapter_.isUnbounded()&&this.adapter_.registerResizeHandler(this.resizeHandler_)),this.adapter_.registerInteractionHandler("focus",this.focusHandler_),this.adapter_.registerInteractionHandler("blur",this.blurHandler_)},t.prototype.registerDeactivationHandlers_=function(e){var t=this;"keydown"===e.type?this.adapter_.registerInteractionHandler("keyup",this.deactivateHandler_):W.forEach((function(e){t.adapter_.registerDocumentInteractionHandler(e,t.deactivateHandler_)}))},t.prototype.deregisterRootHandlers_=function(){var e=this;$.forEach((function(t){e.adapter_.deregisterInteractionHandler(t,e.activateHandler_)})),this.adapter_.deregisterInteractionHandler("focus",this.focusHandler_),this.adapter_.deregisterInteractionHandler("blur",this.blurHandler_),this.adapter_.isUnbounded()&&this.adapter_.deregisterResizeHandler(this.resizeHandler_)},t.prototype.deregisterDeactivationHandlers_=function(){var e=this;this.adapter_.deregisterInteractionHandler("keyup",this.deactivateHandler_),W.forEach((function(t){e.adapter_.deregisterDocumentInteractionHandler(t,e.deactivateHandler_)}))},t.prototype.removeCssVars_=function(){var e=this,n=t.strings;Object.keys(n).forEach((function(t){0===t.indexOf("VAR_")&&e.adapter_.updateCssVariable(n[t],null)}))},t.prototype.activate_=function(e){var t=this;if(!this.adapter_.isSurfaceDisabled()){var n=this.activationState_;if(!n.isActivated){var i=this.previousActivationEvent_;if(!(i&&void 0!==e&&i.type!==e.type))n.isActivated=!0,n.isProgrammatic=void 0===e,n.activationEvent=e,n.wasActivatedByPointer=!n.isProgrammatic&&(void 0!==e&&("mousedown"===e.type||"touchstart"===e.type||"pointerdown"===e.type)),void 0!==e&&q.length>0&&q.some((function(e){return t.adapter_.containsEventTarget(e)}))?this.resetActivationState_():(void 0!==e&&(q.push(e.target),this.registerDeactivationHandlers_(e)),n.wasElementMadeActive=this.checkElementMadeActive_(e),n.wasElementMadeActive&&this.animateActivation_(),requestAnimationFrame((function(){q=[],n.wasElementMadeActive||void 0===e||" "!==e.key&&32!==e.keyCode||(n.wasElementMadeActive=t.checkElementMadeActive_(e),n.wasElementMadeActive&&t.animateActivation_()),n.wasElementMadeActive||(t.activationState_=t.defaultActivationState_())})))}}},t.prototype.checkElementMadeActive_=function(e){return void 0===e||"keydown"!==e.type||this.adapter_.isSurfaceActive()},t.prototype.animateActivation_=function(){var e=this,n=t.strings,i=n.VAR_FG_TRANSLATE_START,s=n.VAR_FG_TRANSLATE_END,o=t.cssClasses,r=o.FG_DEACTIVATION,a=o.FG_ACTIVATION,c=t.numbers.DEACTIVATION_TIMEOUT_MS;this.layoutInternal_();var u="",d="";if(!this.adapter_.isUnbounded()){var l=this.getFgTranslationCoordinates_(),_=l.startPoint,h=l.endPoint;u=_.x+"px, "+_.y+"px",d=h.x+"px, "+h.y+"px"}this.adapter_.updateCssVariable(i,u),this.adapter_.updateCssVariable(s,d),clearTimeout(this.activationTimer_),clearTimeout(this.fgDeactivationRemovalTimer_),this.rmBoundedActivationClasses_(),this.adapter_.removeClass(r),this.adapter_.computeBoundingRect(),this.adapter_.addClass(a),this.activationTimer_=setTimeout((function(){return e.activationTimerCallback_()}),c)},t.prototype.getFgTranslationCoordinates_=function(){var e,t=this.activationState_,n=t.activationEvent;return{startPoint:e={x:(e=t.wasActivatedByPointer?function(e,t,n){if(!e)return{x:0,y:0};var i,s,o=t.x,r=t.y,a=o+n.left,c=r+n.top;if("touchstart"===e.type){var u=e;i=u.changedTouches[0].pageX-a,s=u.changedTouches[0].pageY-c}else{var d=e;i=d.pageX-a,s=d.pageY-c}return{x:i,y:s}}(n,this.adapter_.getWindowPageOffset(),this.adapter_.computeBoundingRect()):{x:this.frame_.width/2,y:this.frame_.height/2}).x-this.initialSize_/2,y:e.y-this.initialSize_/2},endPoint:{x:this.frame_.width/2-this.initialSize_/2,y:this.frame_.height/2-this.initialSize_/2}}},t.prototype.runDeactivationUXLogicIfReady_=function(){var e=this,n=t.cssClasses.FG_DEACTIVATION,i=this.activationState_,s=i.hasDeactivationUXRun,o=i.isActivated;(s||!o)&&this.activationAnimationHasEnded_&&(this.rmBoundedActivationClasses_(),this.adapter_.addClass(n),this.fgDeactivationRemovalTimer_=setTimeout((function(){e.adapter_.removeClass(n)}),K.FG_DEACTIVATION_MS))},t.prototype.rmBoundedActivationClasses_=function(){var e=t.cssClasses.FG_ACTIVATION;this.adapter_.removeClass(e),this.activationAnimationHasEnded_=!1,this.adapter_.computeBoundingRect()},t.prototype.resetActivationState_=function(){var e=this;this.previousActivationEvent_=this.activationState_.activationEvent,this.activationState_=this.defaultActivationState_(),setTimeout((function(){return e.previousActivationEvent_=void 0}),t.numbers.TAP_DELAY_MS)},t.prototype.deactivate_=function(){var e=this,t=this.activationState_;if(t.isActivated){var n=C({},t);t.isProgrammatic?(requestAnimationFrame((function(){return e.animateDeactivation_(n)})),this.resetActivationState_()):(this.deregisterDeactivationHandlers_(),requestAnimationFrame((function(){e.activationState_.hasDeactivationUXRun=!0,e.animateDeactivation_(n),e.resetActivationState_()})))}},t.prototype.animateDeactivation_=function(e){var t=e.wasActivatedByPointer,n=e.wasElementMadeActive;(t||n)&&this.runDeactivationUXLogicIfReady_()},t.prototype.layoutInternal_=function(){var e=this;this.frame_=this.adapter_.computeBoundingRect();var n=Math.max(this.frame_.height,this.frame_.width);this.maxRadius_=this.adapter_.isUnbounded()?n:Math.sqrt(Math.pow(e.frame_.width,2)+Math.pow(e.frame_.height,2))+t.numbers.PADDING;var i=Math.floor(n*t.numbers.INITIAL_ORIGIN_SCALE);this.adapter_.isUnbounded()&&i%2!=0?this.initialSize_=i-1:this.initialSize_=i,this.fgScale_=""+this.maxRadius_/this.initialSize_,this.updateLayoutCssVars_()},t.prototype.updateLayoutCssVars_=function(){var e=t.strings,n=e.VAR_FG_SIZE,i=e.VAR_LEFT,s=e.VAR_TOP,o=e.VAR_FG_SCALE;this.adapter_.updateCssVariable(n,this.initialSize_+"px"),this.adapter_.updateCssVariable(o,this.fgScale_),this.adapter_.isUnbounded()&&(this.unboundedCoords_={left:Math.round(this.frame_.width/2-this.initialSize_/2),top:Math.round(this.frame_.height/2-this.initialSize_/2)},this.adapter_.updateCssVariable(i,this.unboundedCoords_.left+"px"),this.adapter_.updateCssVariable(s,this.unboundedCoords_.top+"px"))},t}(S),Q=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.disabled=!1,t}return E(t,e),t.attachTo=function(e,n){void 0===n&&(n={isUnbounded:void 0});var i=new t(e);return void 0!==n.isUnbounded&&(i.unbounded=n.isUnbounded),i},t.createAdapter=function(e){return{addClass:function(t){return e.root_.classList.add(t)},browserSupportsCssVars:function(){return function(e,t){void 0===t&&(t=!1);var n=e.CSS,i=D;if("boolean"==typeof D&&!t)return D;if(!(n&&"function"==typeof n.supports))return!1;var s=n.supports("--css-vars","yes"),o=n.supports("(--css-vars: yes)")&&n.supports("color","#00000000");return i=!(!s&&!o)&&!function(e){var t=e.document,n=t.createElement("div");n.className="mdc-ripple-surface--test-edge-var-bug",t.head.appendChild(n);var i=e.getComputedStyle(n),s=null!==i&&"solid"===i.borderTopStyle;return n.parentNode&&n.parentNode.removeChild(n),s}(e),t||(D=i),i}(window)},computeBoundingRect:function(){return e.root_.getBoundingClientRect()},containsEventTarget:function(t){return e.root_.contains(t)},deregisterDocumentInteractionHandler:function(e,t){return document.documentElement.removeEventListener(e,t,M())},deregisterInteractionHandler:function(t,n){return e.root_.removeEventListener(t,n,M())},deregisterResizeHandler:function(e){return window.removeEventListener("resize",e)},getWindowPageOffset:function(){return{x:window.pageXOffset,y:window.pageYOffset}},isSurfaceActive:function(){return O(e.root_,":active")},isSurfaceDisabled:function(){return Boolean(e.disabled)},isUnbounded:function(){return Boolean(e.unbounded)},registerDocumentInteractionHandler:function(e,t){return document.documentElement.addEventListener(e,t,M())},registerInteractionHandler:function(t,n){return e.root_.addEventListener(t,n,M())},registerResizeHandler:function(e){return window.addEventListener("resize",e)},removeClass:function(t){return e.root_.classList.remove(t)},updateCssVariable:function(t,n){return e.root_.style.setProperty(t,n)}}},Object.defineProperty(t.prototype,"unbounded",{get:function(){return Boolean(this.unbounded_)},set:function(e){this.unbounded_=Boolean(e),this.setUnbounded_()},enumerable:!0,configurable:!0}),t.prototype.activate=function(){this.foundation_.activate()},t.prototype.deactivate=function(){this.foundation_.deactivate()},t.prototype.layout=function(){this.foundation_.layout()},t.prototype.getDefaultFoundation=function(){return new X(t.createAdapter(this))},t.prototype.initialSyncWithDOM=function(){var e=this.root_;this.unbounded="mdcRippleIsUnbounded"in e.dataset},t.prototype.setUnbounded_=function(){this.foundation_.setUnbounded(Boolean(this.unbounded_))},t}(w),Y={ROOT:"mdc-text-field-character-counter"},J={ROOT_SELECTOR:"."+Y.ROOT},Z=function(e){function t(n){return e.call(this,C({},t.defaultAdapter,n))||this}return E(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return Y},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return J},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{setContent:function(){}}},enumerable:!0,configurable:!0}),t.prototype.setCounterValue=function(e,t){e=Math.min(e,t),this.adapter_.setContent(e+" / "+t)},t}(S),ee=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return E(t,e),t.attachTo=function(e){return new t(e)},Object.defineProperty(t.prototype,"foundation",{get:function(){return this.foundation_},enumerable:!0,configurable:!0}),t.prototype.getDefaultFoundation=function(){var e=this;return new Z({setContent:function(t){e.root_.textContent=t}})},t}(w),te={ARIA_CONTROLS:"aria-controls",ICON_SELECTOR:".mdc-text-field__icon",INPUT_SELECTOR:".mdc-text-field__input",LABEL_SELECTOR:".mdc-floating-label",LINE_RIPPLE_SELECTOR:".mdc-line-ripple",OUTLINE_SELECTOR:".mdc-notched-outline"},ne={DENSE:"mdc-text-field--dense",DISABLED:"mdc-text-field--disabled",FOCUSED:"mdc-text-field--focused",FULLWIDTH:"mdc-text-field--fullwidth",HELPER_LINE:"mdc-text-field-helper-line",INVALID:"mdc-text-field--invalid",NO_LABEL:"mdc-text-field--no-label",OUTLINED:"mdc-text-field--outlined",ROOT:"mdc-text-field",TEXTAREA:"mdc-text-field--textarea",WITH_LEADING_ICON:"mdc-text-field--with-leading-icon",WITH_TRAILING_ICON:"mdc-text-field--with-trailing-icon"},ie={DENSE_LABEL_SCALE:.923,LABEL_SCALE:.75},se=["pattern","min","max","required","step","minlength","maxlength"],oe=["color","date","datetime-local","month","range","time","week"],re=["mousedown","touchstart"],ae=["click","keydown"],ce=function(e){function t(n,i){void 0===i&&(i={});var s=e.call(this,C({},t.defaultAdapter,n))||this;return s.isFocused_=!1,s.receivedUserInput_=!1,s.isValid_=!0,s.useNativeValidation_=!0,s.helperText_=i.helperText,s.characterCounter_=i.characterCounter,s.leadingIcon_=i.leadingIcon,s.trailingIcon_=i.trailingIcon,s.inputFocusHandler_=function(){return s.activateFocus()},s.inputBlurHandler_=function(){return s.deactivateFocus()},s.inputInputHandler_=function(){return s.handleInput()},s.setPointerXOffset_=function(e){return s.setTransformOrigin(e)},s.textFieldInteractionHandler_=function(){return s.handleTextFieldInteraction()},s.validationAttributeChangeHandler_=function(e){return s.handleValidationAttributeChange(e)},s}return E(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return ne},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return te},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return ie},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shouldAlwaysFloat_",{get:function(){var e=this.getNativeInput_().type;return oe.indexOf(e)>=0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shouldFloat",{get:function(){return this.shouldAlwaysFloat_||this.isFocused_||!!this.getValue()||this.isBadInput_()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shouldShake",{get:function(){return!this.isFocused_&&!this.isValid()&&!!this.getValue()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!0},registerTextFieldInteractionHandler:function(){},deregisterTextFieldInteractionHandler:function(){},registerInputInteractionHandler:function(){},deregisterInputInteractionHandler:function(){},registerValidationAttributeChangeHandler:function(){return new MutationObserver((function(){}))},deregisterValidationAttributeChangeHandler:function(){},getNativeInput:function(){return null},isFocused:function(){return!1},activateLineRipple:function(){},deactivateLineRipple:function(){},setLineRippleTransformOrigin:function(){},shakeLabel:function(){},floatLabel:function(){},hasLabel:function(){return!1},getLabelWidth:function(){return 0},hasOutline:function(){return!1},notchOutline:function(){},closeOutline:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){var e=this;this.adapter_.isFocused()?this.inputFocusHandler_():this.adapter_.hasLabel()&&this.shouldFloat&&(this.notchOutline(!0),this.adapter_.floatLabel(!0)),this.adapter_.registerInputInteractionHandler("focus",this.inputFocusHandler_),this.adapter_.registerInputInteractionHandler("blur",this.inputBlurHandler_),this.adapter_.registerInputInteractionHandler("input",this.inputInputHandler_),re.forEach((function(t){e.adapter_.registerInputInteractionHandler(t,e.setPointerXOffset_)})),ae.forEach((function(t){e.adapter_.registerTextFieldInteractionHandler(t,e.textFieldInteractionHandler_)})),this.validationObserver_=this.adapter_.registerValidationAttributeChangeHandler(this.validationAttributeChangeHandler_),this.setCharacterCounter_(this.getValue().length)},t.prototype.destroy=function(){var e=this;this.adapter_.deregisterInputInteractionHandler("focus",this.inputFocusHandler_),this.adapter_.deregisterInputInteractionHandler("blur",this.inputBlurHandler_),this.adapter_.deregisterInputInteractionHandler("input",this.inputInputHandler_),re.forEach((function(t){e.adapter_.deregisterInputInteractionHandler(t,e.setPointerXOffset_)})),ae.forEach((function(t){e.adapter_.deregisterTextFieldInteractionHandler(t,e.textFieldInteractionHandler_)})),this.adapter_.deregisterValidationAttributeChangeHandler(this.validationObserver_)},t.prototype.handleTextFieldInteraction=function(){var e=this.adapter_.getNativeInput();e&&e.disabled||(this.receivedUserInput_=!0)},t.prototype.handleValidationAttributeChange=function(e){var t=this;e.some((function(e){return se.indexOf(e)>-1&&(t.styleValidity_(!0),!0)})),e.indexOf("maxlength")>-1&&this.setCharacterCounter_(this.getValue().length)},t.prototype.notchOutline=function(e){if(this.adapter_.hasOutline())if(e){var t=this.adapter_.hasClass(ne.DENSE)?ie.DENSE_LABEL_SCALE:ie.LABEL_SCALE,n=this.adapter_.getLabelWidth()*t;this.adapter_.notchOutline(n)}else this.adapter_.closeOutline()},t.prototype.activateFocus=function(){this.isFocused_=!0,this.styleFocused_(this.isFocused_),this.adapter_.activateLineRipple(),this.adapter_.hasLabel()&&(this.notchOutline(this.shouldFloat),this.adapter_.floatLabel(this.shouldFloat),this.adapter_.shakeLabel(this.shouldShake)),this.helperText_&&this.helperText_.showToScreenReader()},t.prototype.setTransformOrigin=function(e){var t=e.touches,n=t?t[0]:e,i=n.target.getBoundingClientRect(),s=n.clientX-i.left;this.adapter_.setLineRippleTransformOrigin(s)},t.prototype.handleInput=function(){this.autoCompleteFocus(),this.setCharacterCounter_(this.getValue().length)},t.prototype.autoCompleteFocus=function(){this.receivedUserInput_||this.activateFocus()},t.prototype.deactivateFocus=function(){this.isFocused_=!1,this.adapter_.deactivateLineRipple();var e=this.isValid();this.styleValidity_(e),this.styleFocused_(this.isFocused_),this.adapter_.hasLabel()&&(this.notchOutline(this.shouldFloat),this.adapter_.floatLabel(this.shouldFloat),this.adapter_.shakeLabel(this.shouldShake)),this.shouldFloat||(this.receivedUserInput_=!1)},t.prototype.getValue=function(){return this.getNativeInput_().value},t.prototype.setValue=function(e){this.getValue()!==e&&(this.getNativeInput_().value=e),this.setCharacterCounter_(e.length);var t=this.isValid();this.styleValidity_(t),this.adapter_.hasLabel()&&(this.notchOutline(this.shouldFloat),this.adapter_.floatLabel(this.shouldFloat),this.adapter_.shakeLabel(this.shouldShake))},t.prototype.isValid=function(){return this.useNativeValidation_?this.isNativeInputValid_():this.isValid_},t.prototype.setValid=function(e){this.isValid_=e,this.styleValidity_(e);var t=!e&&!this.isFocused_&&!!this.getValue();this.adapter_.hasLabel()&&this.adapter_.shakeLabel(t)},t.prototype.setUseNativeValidation=function(e){this.useNativeValidation_=e},t.prototype.isDisabled=function(){return this.getNativeInput_().disabled},t.prototype.setDisabled=function(e){this.getNativeInput_().disabled=e,this.styleDisabled_(e)},t.prototype.setHelperTextContent=function(e){this.helperText_&&this.helperText_.setContent(e)},t.prototype.setLeadingIconAriaLabel=function(e){this.leadingIcon_&&this.leadingIcon_.setAriaLabel(e)},t.prototype.setLeadingIconContent=function(e){this.leadingIcon_&&this.leadingIcon_.setContent(e)},t.prototype.setTrailingIconAriaLabel=function(e){this.trailingIcon_&&this.trailingIcon_.setAriaLabel(e)},t.prototype.setTrailingIconContent=function(e){this.trailingIcon_&&this.trailingIcon_.setContent(e)},t.prototype.setCharacterCounter_=function(e){if(this.characterCounter_){var t=this.getNativeInput_().maxLength;if(-1===t)throw new Error("MDCTextFieldFoundation: Expected maxlength html property on text input or textarea.");this.characterCounter_.setCounterValue(e,t)}},t.prototype.isBadInput_=function(){return this.getNativeInput_().validity.badInput||!1},t.prototype.isNativeInputValid_=function(){return this.getNativeInput_().validity.valid},t.prototype.styleValidity_=function(e){var n=t.cssClasses.INVALID;e?this.adapter_.removeClass(n):this.adapter_.addClass(n),this.helperText_&&this.helperText_.setValidity(e)},t.prototype.styleFocused_=function(e){var n=t.cssClasses.FOCUSED;e?this.adapter_.addClass(n):this.adapter_.removeClass(n)},t.prototype.styleDisabled_=function(e){var n=t.cssClasses,i=n.DISABLED,s=n.INVALID;e?(this.adapter_.addClass(i),this.adapter_.removeClass(s)):this.adapter_.removeClass(i),this.leadingIcon_&&this.leadingIcon_.setDisabled(e),this.trailingIcon_&&this.trailingIcon_.setDisabled(e)},t.prototype.getNativeInput_=function(){return(this.adapter_?this.adapter_.getNativeInput():null)||{disabled:!1,maxLength:-1,type:"input",validity:{badInput:!1,valid:!0},value:""}},t}(S),ue={HELPER_TEXT_PERSISTENT:"mdc-text-field-helper-text--persistent",HELPER_TEXT_VALIDATION_MSG:"mdc-text-field-helper-text--validation-msg",ROOT:"mdc-text-field-helper-text"},de={ARIA_HIDDEN:"aria-hidden",ROLE:"role",ROOT_SELECTOR:"."+ue.ROOT},le=function(e){function t(n){return e.call(this,C({},t.defaultAdapter,n))||this}return E(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return ue},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return de},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},setAttr:function(){},removeAttr:function(){},setContent:function(){}}},enumerable:!0,configurable:!0}),t.prototype.setContent=function(e){this.adapter_.setContent(e)},t.prototype.setPersistent=function(e){e?this.adapter_.addClass(ue.HELPER_TEXT_PERSISTENT):this.adapter_.removeClass(ue.HELPER_TEXT_PERSISTENT)},t.prototype.setValidation=function(e){e?this.adapter_.addClass(ue.HELPER_TEXT_VALIDATION_MSG):this.adapter_.removeClass(ue.HELPER_TEXT_VALIDATION_MSG)},t.prototype.showToScreenReader=function(){this.adapter_.removeAttr(de.ARIA_HIDDEN)},t.prototype.setValidity=function(e){var t=this.adapter_.hasClass(ue.HELPER_TEXT_PERSISTENT),n=this.adapter_.hasClass(ue.HELPER_TEXT_VALIDATION_MSG)&&!e;n?this.adapter_.setAttr(de.ROLE,"alert"):this.adapter_.removeAttr(de.ROLE),t||n||this.hide_()},t.prototype.hide_=function(){this.adapter_.setAttr(de.ARIA_HIDDEN,"true")},t}(S),_e=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return E(t,e),t.attachTo=function(e){return new t(e)},Object.defineProperty(t.prototype,"foundation",{get:function(){return this.foundation_},enumerable:!0,configurable:!0}),t.prototype.getDefaultFoundation=function(){var e=this;return new le({addClass:function(t){return e.root_.classList.add(t)},removeClass:function(t){return e.root_.classList.remove(t)},hasClass:function(t){return e.root_.classList.contains(t)},setAttr:function(t,n){return e.root_.setAttribute(t,n)},removeAttr:function(t){return e.root_.removeAttribute(t)},setContent:function(t){e.root_.textContent=t}})},t}(w),he={ICON_EVENT:"MDCTextField:icon",ICON_ROLE:"button"},pe={ROOT:"mdc-text-field__icon"},me=["click","keydown"],fe=function(e){function t(n){var i=e.call(this,C({},t.defaultAdapter,n))||this;return i.savedTabIndex_=null,i.interactionHandler_=function(e){return i.handleInteraction(e)},i}return E(t,e),Object.defineProperty(t,"strings",{get:function(){return he},enumerable:!0,configurable:!0}),Object.defineProperty(t,"cssClasses",{get:function(){return pe},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{getAttr:function(){return null},setAttr:function(){},removeAttr:function(){},setContent:function(){},registerInteractionHandler:function(){},deregisterInteractionHandler:function(){},notifyIconAction:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){var e=this;this.savedTabIndex_=this.adapter_.getAttr("tabindex"),me.forEach((function(t){e.adapter_.registerInteractionHandler(t,e.interactionHandler_)}))},t.prototype.destroy=function(){var e=this;me.forEach((function(t){e.adapter_.deregisterInteractionHandler(t,e.interactionHandler_)}))},t.prototype.setDisabled=function(e){this.savedTabIndex_&&(e?(this.adapter_.setAttr("tabindex","-1"),this.adapter_.removeAttr("role")):(this.adapter_.setAttr("tabindex",this.savedTabIndex_),this.adapter_.setAttr("role",he.ICON_ROLE)))},t.prototype.setAriaLabel=function(e){this.adapter_.setAttr("aria-label",e)},t.prototype.setContent=function(e){this.adapter_.setContent(e)},t.prototype.handleInteraction=function(e){var t="Enter"===e.key||13===e.keyCode;("click"===e.type||t)&&this.adapter_.notifyIconAction()},t}(S),ge=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return E(t,e),t.attachTo=function(e){return new t(e)},Object.defineProperty(t.prototype,"foundation",{get:function(){return this.foundation_},enumerable:!0,configurable:!0}),t.prototype.getDefaultFoundation=function(){var e=this;return new fe({getAttr:function(t){return e.root_.getAttribute(t)},setAttr:function(t,n){return e.root_.setAttribute(t,n)},removeAttr:function(t){return e.root_.removeAttribute(t)},setContent:function(t){e.root_.textContent=t},registerInteractionHandler:function(t,n){return e.listen(t,n)},deregisterInteractionHandler:function(t,n){return e.unlisten(t,n)},notifyIconAction:function(){return e.emit(fe.strings.ICON_EVENT,{},!0)}})},t}(w),ye=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return E(t,e),t.attachTo=function(e){return new t(e)},t.prototype.initialize=function(e,t,n,i,s,o,r){void 0===e&&(e=function(e,t){return new Q(e,t)}),void 0===t&&(t=function(e){return new R(e)}),void 0===n&&(n=function(e){return new _e(e)}),void 0===i&&(i=function(e){return new ee(e)}),void 0===s&&(s=function(e){return new ge(e)}),void 0===o&&(o=function(e){return new k(e)}),void 0===r&&(r=function(e){return new V(e)}),this.input_=this.root_.querySelector(te.INPUT_SELECTOR);var a=this.root_.querySelector(te.LABEL_SELECTOR);this.label_=a?o(a):null;var c=this.root_.querySelector(te.LINE_RIPPLE_SELECTOR);this.lineRipple_=c?t(c):null;var u=this.root_.querySelector(te.OUTLINE_SELECTOR);this.outline_=u?r(u):null;var d=le.strings,l=this.root_.nextElementSibling,_=l&&l.classList.contains(ne.HELPER_LINE),h=_&&l&&l.querySelector(d.ROOT_SELECTOR);this.helperText_=h?n(h):null;var p=Z.strings,m=this.root_.querySelector(p.ROOT_SELECTOR);!m&&_&&l&&(m=l.querySelector(p.ROOT_SELECTOR)),this.characterCounter_=m?i(m):null,this.leadingIcon_=null,this.trailingIcon_=null;var f=this.root_.querySelectorAll(te.ICON_SELECTOR);f.length>0&&(f.length>1?(this.leadingIcon_=s(f[0]),this.trailingIcon_=s(f[1])):this.root_.classList.contains(ne.WITH_LEADING_ICON)?this.leadingIcon_=s(f[0]):this.trailingIcon_=s(f[0])),this.ripple=this.createRipple_(e)},t.prototype.destroy=function(){this.ripple&&this.ripple.destroy(),this.lineRipple_&&this.lineRipple_.destroy(),this.helperText_&&this.helperText_.destroy(),this.characterCounter_&&this.characterCounter_.destroy(),this.leadingIcon_&&this.leadingIcon_.destroy(),this.trailingIcon_&&this.trailingIcon_.destroy(),this.label_&&this.label_.destroy(),this.outline_&&this.outline_.destroy(),e.prototype.destroy.call(this)},t.prototype.initialSyncWithDOM=function(){this.disabled=this.input_.disabled},Object.defineProperty(t.prototype,"value",{get:function(){return this.foundation_.getValue()},set:function(e){this.foundation_.setValue(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return this.foundation_.isDisabled()},set:function(e){this.foundation_.setDisabled(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"valid",{get:function(){return this.foundation_.isValid()},set:function(e){this.foundation_.setValid(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"required",{get:function(){return this.input_.required},set:function(e){this.input_.required=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pattern",{get:function(){return this.input_.pattern},set:function(e){this.input_.pattern=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minLength",{get:function(){return this.input_.minLength},set:function(e){this.input_.minLength=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxLength",{get:function(){return this.input_.maxLength},set:function(e){e<0?this.input_.removeAttribute("maxLength"):this.input_.maxLength=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"min",{get:function(){return this.input_.min},set:function(e){this.input_.min=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"max",{get:function(){return this.input_.max},set:function(e){this.input_.max=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"step",{get:function(){return this.input_.step},set:function(e){this.input_.step=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"helperTextContent",{set:function(e){this.foundation_.setHelperTextContent(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leadingIconAriaLabel",{set:function(e){this.foundation_.setLeadingIconAriaLabel(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leadingIconContent",{set:function(e){this.foundation_.setLeadingIconContent(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"trailingIconAriaLabel",{set:function(e){this.foundation_.setTrailingIconAriaLabel(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"trailingIconContent",{set:function(e){this.foundation_.setTrailingIconContent(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"useNativeValidation",{set:function(e){this.foundation_.setUseNativeValidation(e)},enumerable:!0,configurable:!0}),t.prototype.focus=function(){this.input_.focus()},t.prototype.layout=function(){var e=this.foundation_.shouldFloat;this.foundation_.notchOutline(e)},t.prototype.getDefaultFoundation=function(){var e=C({},this.getRootAdapterMethods_(),this.getInputAdapterMethods_(),this.getLabelAdapterMethods_(),this.getLineRippleAdapterMethods_(),this.getOutlineAdapterMethods_());return new ce(e,this.getFoundationMap_())},t.prototype.getRootAdapterMethods_=function(){var e=this;return{addClass:function(t){return e.root_.classList.add(t)},removeClass:function(t){return e.root_.classList.remove(t)},hasClass:function(t){return e.root_.classList.contains(t)},registerTextFieldInteractionHandler:function(t,n){return e.listen(t,n)},deregisterTextFieldInteractionHandler:function(t,n){return e.unlisten(t,n)},registerValidationAttributeChangeHandler:function(t){var n=new MutationObserver((function(e){return t(function(e){return e.map((function(e){return e.attributeName})).filter((function(e){return e}))}(e))}));return n.observe(e.input_,{attributes:!0}),n},deregisterValidationAttributeChangeHandler:function(e){return e.disconnect()}}},t.prototype.getInputAdapterMethods_=function(){var e=this;return{getNativeInput:function(){return e.input_},isFocused:function(){return document.activeElement===e.input_},registerInputInteractionHandler:function(t,n){return e.input_.addEventListener(t,n,M())},deregisterInputInteractionHandler:function(t,n){return e.input_.removeEventListener(t,n,M())}}},t.prototype.getLabelAdapterMethods_=function(){var e=this;return{floatLabel:function(t){return e.label_&&e.label_.float(t)},getLabelWidth:function(){return e.label_?e.label_.getWidth():0},hasLabel:function(){return Boolean(e.label_)},shakeLabel:function(t){return e.label_&&e.label_.shake(t)}}},t.prototype.getLineRippleAdapterMethods_=function(){var e=this;return{activateLineRipple:function(){e.lineRipple_&&e.lineRipple_.activate()},deactivateLineRipple:function(){e.lineRipple_&&e.lineRipple_.deactivate()},setLineRippleTransformOrigin:function(t){e.lineRipple_&&e.lineRipple_.setRippleCenter(t)}}},t.prototype.getOutlineAdapterMethods_=function(){var e=this;return{closeOutline:function(){return e.outline_&&e.outline_.closeNotch()},hasOutline:function(){return Boolean(e.outline_)},notchOutline:function(t){return e.outline_&&e.outline_.notch(t)}}},t.prototype.getFoundationMap_=function(){return{characterCounter:this.characterCounter_?this.characterCounter_.foundation:void 0,helperText:this.helperText_?this.helperText_.foundation:void 0,leadingIcon:this.leadingIcon_?this.leadingIcon_.foundation:void 0,trailingIcon:this.trailingIcon_?this.trailingIcon_.foundation:void 0}},t.prototype.createRipple_=function(e){var t=this,n=this.root_.classList.contains(ne.TEXTAREA),i=this.root_.classList.contains(ne.OUTLINED);if(n||i)return null;var s=C({},Q.createAdapter(this),{isSurfaceActive:function(){return O(t.input_,":active")},registerInteractionHandler:function(e,n){return t.input_.addEventListener(e,n,M())},deregisterInteractionHandler:function(e,n){return t.input_.removeEventListener(e,n,M())}});return e(this.root_,new X(s))},t}(w);const be=[["AF","country_select_country_af","+93"],["AX","country_select_country_ax","+358 18"],["AL","country_select_country_al","+355"],["DZ","country_select_country_dz","+213"],["AS","country_select_country_as","+1 684"],["AD","country_select_country_ad","+376"],["AO","country_select_country_ao","+244"],["AI","country_select_country_ai","+1 264"],["AG","country_select_country_ag","+1 268"],["AR","country_select_country_ar","+54"],["AM","country_select_country_am","+374"],["AW","country_select_country_aw","+297"],["SH","country_select_country_sh_ac","+247"],["AU","country_select_country_au","+61"],["AU","country_select_country_au_et","+672"],["AT","country_select_country_at","+43"],["AZ","country_select_country_az","+994"],["BS","country_select_country_bs","+1 242"],["BH","country_select_country_bh","+973"],["BD","country_select_country_bd","+880"],["BB","country_select_country_bb","+1 246"],["AG","country_select_country_ag_bar","+1 268"],["BY","country_select_country_by","+375"],["BE","country_select_country_be","+32"],["BZ","country_select_country_bz","+501"],["BJ","country_select_country_bj","+229"],["BM","country_select_country_bm","+1 441"],["BT","country_select_country_bt","+975"],["BO","country_select_country_bo","+591"],["BQ","country_select_country_bq","+599 7"],["BA","country_select_country_ba","+387"],["BW","country_select_country_bw","+267"],["BR","country_select_country_br","+55"],["IO","country_select_country_io","+246"],["VG","country_select_country_vg","+1 284"],["BN","country_select_country_bn","+673"],["BG","country_select_country_bg","+359"],["BF","country_select_country_bf","+226"],["MY","country_select_country_mm","+95"],["BI","country_select_country_bi","+257"],["KH","country_select_country_kh","+855"],["CM","country_select_country_cm","+237"],["CA","country_select_country_ca","+1"],["CV","country_select_country_cv","+238"],["KY","country_select_country_ky","+1 345"],["CF","country_select_country_cf","+236"],["TD","country_select_country_td","+235"],["CL","country_select_country_cl","+56"],["CN","country_select_country_cn","+86"],["CX","country_select_country_cx","+61"],["CC","country_select_country_cc","+61"],["CO","country_select_country_co","+57"],["KM","country_select_country_km","+269"],["CG","country_select_country_cg","+242"],["CD","country_select_country_cd","+243"],["CK","country_select_country_ck","+682"],["CR","country_select_country_cr","+506"],["CI","country_select_country_ci","+225"],["HR","country_select_country_hr","+385"],["CU","country_select_country_cu","+53"],["CW","country_select_country_cw","+599 9"],["CY","country_select_country_cy","+357"],["CZ","country_select_country_cz","+420"],["DK","country_select_country_dk","+45"],["DG","country_select_country_dg","+246"],["DJ","country_select_country_dj","+253"],["DM","country_select_country_dm","+1 767"],["DO","country_select_country_do","+1 809","+1 829","+1 849"],["TL","country_select_country_tl","+670"],["EC","country_select_country_ec","+593"],["EG","country_select_country_eg","+20"],["SV","country_select_country_sv","+503"],["GQ","country_select_country_gq","+240"],["ER","country_select_country_er","+291"],["EE","country_select_country_ee","+372"],["ET","country_select_country_et","+251"],["FK","country_select_country_fk","+500"],["FO","country_select_country_fo","+298"],["FJ","country_select_country_fj","+679"],["FI","country_select_country_fi","+358"],["FR","country_select_country_fr","+33"],["GF","country_select_country_gf","+594"],["PF","country_select_country_pf","+689"],["GA","country_select_country_ga","+241"],["GM","country_select_country_gm","+220"],["GE","country_select_country_ge","+995"],["DE","country_select_country_de","+49"],["GH","country_select_country_gh","+233"],["GI","country_select_country_gi","+350"],["GR","country_select_country_gr","+30"],["GL","country_select_country_gl","+299"],["GD","country_select_country_gd","+1 473"],["GP","country_select_country_gp","+590"],["GU","country_select_country_gu","+1 671"],["GT","country_select_country_gt","+502"],["GG","country_select_country_gg","+44"],["GN","country_select_country_gn","+224"],["GW","country_select_country_gw","+245"],["GY","country_select_country_gy","+592"],["HT","country_select_country_ht","+509"],["HN","country_select_country_hn","+504"],["HK","country_select_country_hk","+852"],["HU","country_select_country_hu","+36"],["IS","country_select_country_is","+354"],["IN","country_select_country_in","+91"],["ID","country_select_country_id","+62"],["IR","country_select_country_ir","+98"],["IQ","country_select_country_iq","+964"],["IE","country_select_country_ie","+353"],["IL","country_select_country_il","+972"],["IT","country_select_country_it","+39"],["JM","country_select_country_jm","+1 876"],["SJ","country_select_country_sj","+47 79"],["JP","country_select_country_jp","+81"],["JE","country_select_country_je","+44"],["JO","country_select_country_jo","+962"],["KZ","country_select_country_kz","+7 7"],["KE","country_select_country_ke","+254"],["KI","country_select_country_ki","+686"],["KP","country_select_country_kp","+850"],["KR","country_select_country_kr","+82"],["KW","country_select_country_kw","+965"],["KG","country_select_country_kg","+996"],["LA","country_select_country_la","+856"],["LV","country_select_country_lv","+371"],["LB","country_select_country_lb","+961"],["LS","country_select_country_ls","+266"],["LR","country_select_country_lr","+231"],["LY","country_select_country_ly","+218"],["LI","country_select_country_li","+423"],["LT","country_select_country_lt","+370"],["LU","country_select_country_lu","+352"],["MO","country_select_country_mo","+853"],["MK","country_select_country_mk","+389"],["MG","country_select_country_mg","+261"],["MW","country_select_country_mw","+265"],["MY","country_select_country_my","+60"],["MV","country_select_country_mv","+960"],["ML","country_select_country_ml","+223"],["MT","country_select_country_mt","+356"],["MH","country_select_country_mh","+692"],["MQ","country_select_country_mq","+596"],["MR","country_select_country_mr","+222"],["MU","country_select_country_mu","+230"],["YT","country_select_country_yt","+262"],["MX","country_select_country_mx","+52"],["FM","country_select_country_fm","+691"],["MD","country_select_country_md","+373"],["MC","country_select_country_mc","+377"],["MN","country_select_country_mn","+976"],["ME","country_select_country_me","+382"],["MS","country_select_country_ms","+1 664"],["MA","country_select_country_ma","+212"],["MZ","country_select_country_mz","+258"],["NA","country_select_country_na","+264"],["NR","country_select_country_nr","+674"],["NP","country_select_country_np","+977"],["NL","country_select_country_nl","+31"],["NC","country_select_country_nc","+687"],["NZ","country_select_country_nz","+64"],["NI","country_select_country_ni","+505"],["NE","country_select_country_ne","+227"],["NG","country_select_country_ng","+234"],["NU","country_select_country_nu","+683"],["NF","country_select_country_nf","+672"],["MP","country_select_country_mp","+1 670"],["NO","country_select_country_no","+47"],["OM","country_select_country_om","+968"],["PK","country_select_country_pk","+92"],["PW","country_select_country_pw","+680"],["PS","country_select_country_ps","+970"],["PA","country_select_country_pa","+507"],["PG","country_select_country_pg","+675"],["PY","country_select_country_py","+595"],["PE","country_select_country_pe","+51"],["PH","country_select_country_ph","+63"],["PN","country_select_country_pn","+64"],["PL","country_select_country_pl","+48"],["PT","country_select_country_pt","+351"],["PR","country_select_country_pr","+1 787","+1 939"],["QA","country_select_country_qa","+974"],["RE","country_select_country_re","+262"],["RO","country_select_country_ro","+40"],["RU","country_select_country_ru","+7"],["RW","country_select_country_rw","+250"],["BL","country_select_country_bl","+590"],["SH","country_select_country_sh","+290"],["KN","country_select_country_kn","+1 869"],["LC","country_select_country_lc","+1 758"],["MF","country_select_country_mf","+590"],["PM","country_select_country_pm","+508"],["VC","country_select_country_vc","+1 784"],["WS","country_select_country_ws","+685"],["SM","country_select_country_sm","+378"],["ST","country_select_country_st","+239"],["SA","country_select_country_sa","+966"],["SN","country_select_country_sn","+221"],["RS","country_select_country_rs","+381"],["SC","country_select_country_sc","+248"],["SL","country_select_country_sl","+232"],["SG","country_select_country_sg","+65"],["BQ","country_select_country_nl_bq3","+599 3"],["SX","country_select_country_sx","+1 721"],["SK","country_select_country_sk","+421"],["SI","country_select_country_si","+386"],["SB","country_select_country_sb","+677"],["SO","country_select_country_so","+252"],["ZA","country_select_country_za","+27"],["GS","country_select_country_gs","+500"],[!1,"country_select_country_ge_so","+995 34"],["SS","country_select_country_ss","+211"],["ES","country_select_country_es","+34"],["LK","country_select_country_lk","+94"],["SD","country_select_country_sd","+249"],["SR","country_select_country_sr","+597"],["SJ","country_select_country_sj_no","+47 79"],["SZ","country_select_country_sz","+268"],["SE","country_select_country_se","+46"],["CH","country_select_country_ch","+41"],["SY","country_select_country_sy","+963"],["TW","country_select_country_tw","+886"],["TJ","country_select_country_tj","+992"],["TZ","country_select_country_tz","+255"],["TH","country_select_country_th","+66"],["TG","country_select_country_tg","+228"],["TK","country_select_country_tk","+690"],["TO","country_select_country_to","+676"],["TT","country_select_country_tt","+1 868"],["TN","country_select_country_tn","+216"],["TR","country_select_country_tr","+90"],["TM","country_select_country_tm","+993"],["TC","country_select_country_tc","+1 649"],["TV","country_select_country_tv","+688"],["UG","country_select_country_ug","+256"],["UA","country_select_country_ua","+380"],["AE","country_select_country_ae","+971"],["UK","country_select_country_uk","+44"],["US","country_select_country_us","+1"],["UY","country_select_country_uy","+598"],["VI","country_select_country_vi","+1 340"],["UZ","country_select_country_uz","+998"],["VU","country_select_country_vu","+678"],["VE","country_select_country_ve","+58"],["VA","country_select_country_va","+39 06 698","+379"],["VN","country_select_country_vn","+84"],["WF","country_select_country_wf","+681"],["YE","country_select_country_ye","+967"],["ZM","country_select_country_zm","+260"],[!1,"country_select_country_tz_uk","+255"],["ZW","country_select_country_zw","+263"]];function ve(e){"UK"===e&&(e="GB");const t=e.codePointAt(0)-65+127462,n=e.codePointAt(1)-65+127462;return String.fromCodePoint(t,n)}function Ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Ce=new class{constructor(){Ee(this,"dom",{}),Ee(this,"mdcComponents",[]),Ee(this,"authParams",{}),Ee(this,"checkInput",()=>{switch(this.step){case 0:this.phoneTextField.value.replace(/\D/g,"").length>=8&&(this.submitButton.hidden=!1);break;case 1:this.codeTextField.value.length>=this.authParams.codeLength&&(this.submitButton.hidden=!1);break;case 2:this.passwordTextField.value&&(this.submitButton.hidden=!1);break;case 3:this.firstNameTextField.value.trim()&&(this.submitButton.hidden=!1)}}),Ee(this,"onFormSubmit",e=>{switch(e.preventDefault(),this.step){case 0:this.submitPhoneNumber();break;case 1:this.submitConfirmationCode();break;case 2:this.submitPassword();break;case 3:this.submitSignUp()}})}init(){const e=a(".login_container",u("login"));this.dom=d(e),this.dom.container=e,this.dom.form.addEventListener("submit",this.onFormSubmit),this.setStep(0),document.body.append(e)}setDomContent(e,t){this.dom[e].innerHTML=t}setDomText(e,t){this.dom[e].textContent=t}setStep(e,t={}){switch(this.step=e,e){case 0:{const e='<div class="login_telegram_logo login_image_content"></div>';this.setDomContent("image",e,!1),this.setDomContent("header","Sign in to Telegram"),this.setDomContent("subheader","Please enter your phone number",!1),this.dom.form.innerHTML="";const t=this.buildInput("Country"),n=this.buildCountryMenu(t),i=this.buildInput("Phone Number","tel");this.submitButton=this.buildButton("Next"),this.countryTextField=new ye(t),this.phoneTextField=new ye(i),this.dom.form.append(t,n,i,this.submitButton),this.mdcComponents.push(this.phoneTextField),this.authParams.phoneNumber&&(this.phoneTextField.value=this.authParams.phoneNumber),this.phoneTextField.focus()}break;case 1:{const e='<tgs-player autoplay="" loop="" intermission="1000" mode="normal" src="tgs/TwoFactorSetupMonkeyTracking.tgs" background="transparent" class="login_image_content"></tgs-player>';this.setDomContent("image",e,!1),this.setDomText("header","+"+this.authParams.phoneNumber),this.setDomContent("subheader","We have sent you an SMS<br>with the code."),this.dom.header.append(this.buildEditPhoneButton()),this.dom.form.innerHTML="";const t=this.buildInput("Code");this.submitButton=this.buildButton("Next"),this.codeTextField=new ye(t),this.dom.form.append(t,this.submitButton),this.mdcComponents.push(this.codeTextField)}break;case 2:{const e='<tgs-player autoplay="" loop="" intermission="3000" mode="normal" src="tgs/TwoFactorSetupMonkeyPeek.tgs" background="transparent" class="login_image_content"></tgs-player>';this.setDomContent("image",e),this.setDomContent("header","Enter a password"),this.setDomContent("subheader","Your account is protected with<br>an additional password",!1),this.dom.form.innerHTML="";const t=this.buildPasswordInput();this.submitButton=this.buildButton("Next"),this.passwordTextField=new ye(t),this.dom.form.append(t,this.submitButton),this.mdcComponents.push(this.passwordTextField),Promise.all([n.e(0),n.e(1)]).then(n.bind(null,81))}break;case 3:{const e='<div class="login_upload_photo login_image_content">';this.setDomContent("image",e),this.setDomContent("header","Your Name"),this.setDomContent("subheader","Enter your name and add<br>a profile picture",!1),this.dom.form.innerHTML="";const t=this.buildInput("Name"),n=this.buildInput("Last Name (optional)");this.submitButton=this.buildButton("Start messaging"),this.firstNameTextField=new ye(t),this.lastNameTextField=new ye(n),this.dom.form.append(t,n,this.submitButton),this.mdcComponents.push(this.firstNameTextField,this.lastNameTextField)}}}submitPhoneNumber(){const e=this.phoneTextField.value.replace(/\D/g,"");e.length<8?this.phoneTextField.valid=!1:(this.submitButton.disabled=!0,g.callMethod("auth.sendCode",{phone_number:e,api_id:Qt.API_ID,api_hash:Qt.API_HASH,settings:{_:"codeSettings"}}).then(t=>{console.log(t),this.authParams.phoneNumber=e,this.authParams.phoneCodeHash=t.phone_code_hash,this.authParams.codeType=t.type._,this.authParams.codeLength=t.type.length,this.setStep(1)}).catch(e=>{"AUTH_RESTART"===e.error_message?this.submitPhoneNumber():(this.phoneTextField.valid=!1,Qt.alert(this.getApiErrorDescription(e.error_code,e.error_message)))}).finally(()=>{this.submitButton.disabled=!1}))}submitConfirmationCode(){const e=this.codeTextField.value;e.length===this.authParams.codeLength?(this.submitButton.disabled=!0,g.callMethod("auth.signIn",{phone_number:this.authParams.phoneNumber,phone_code_hash:this.authParams.phoneCodeHash,phone_code:e}).then(e=>{this.onAuthResult(e)}).catch(t=>{"PHONE_CODE_INVALID"===t.error_message?this.codeTextField.valid=!1:"SESSION_PASSWORD_NEEDED"===t.error_message?this.setStep(2):"PHONE_NUMBER_UNOCCUPIED"===t.error_message?(this.authParams.phoneCode=e,this.setStep(3)):(this.codeTextField.valid=!1,Qt.alert(this.getApiErrorDescription(t.error_code,t.error_message)))}).finally(()=>{this.submitButton.disabled=!1})):this.codeTextField.valid=!1}async submitPassword(){const e=this.passwordTextField.value;if(!e.length)return void(this.passwordTextField.valid=!1);this.submitButton.disabled=!0;const t=await g.callMethod("account.getPassword"),{getInputPasswordSRP:i}=await Promise.all([n.e(0),n.e(1)]).then(n.bind(null,81)),s=await i(e,t);g.callMethod("auth.checkPassword",{password:Object.assign({_:"inputCheckPasswordSRP"},s)}).then(e=>{this.onAuthResult(e)}).catch(e=>{this.passwordTextField.valid=!1,Qt.alert(this.getApiErrorDescription(e.error_code,e.error_message))}).finally(()=>{this.submitButton.disabled=!1})}submitSignUp(){const e=this.firstNameTextField.value,t=this.lastNameTextField.value;e?(this.submitButton.disabled=!0,g.callMethod("auth.signUp",{phone_number:this.authParams.phoneNumber,phone_code_hash:this.authParams.phoneCodeHash,phone_code:this.authParams.phoneCode,first_name:e,last_name:t}).then(e=>{this.onAuthResult(e)}).catch(e=>{this.passwordTextField.valid=!1,Qt.alert(this.getApiErrorDescription(e.error_code,e.error_message))}).finally(()=>{this.submitButton.disabled=!1})):this.firstNameTextField.valid=!1}onAuthResult(e){"auth.authorizationSignUpRequired"===e._?this.setStep(3,{terms_of_service:e.terms_of_service}):Qt.authDone(e)}getApiErrorDescription(e,t){switch(t){case"PHONE_NUMBER_INVALID":return"The phone number is invalid";case"PHONE_NUMBER_OCCUPIED":return"The phone number is already in use";case"PHONE_NUMBER_UNOCCUPIED":return"The phone number is not yet being used";case"PHONE_CODE_EXPIRED":return"The confirmation code has expired";case"PHONE_NUMBER_BANNED":return"The provided phone number is banned from telegram";case"PHONE_NUMBER_FLOOD":return"You asked for the code too many times";case"PHONE_PASSWORD_FLOOD":return"You have tried logging in too many times";case"PHONE_PASSWORD_PROTECTED":return"This phone is password protected"}if(420===e&&t.startsWith("FLOOD_WAIT_")){const e=+t.match(/\d+$/)[0];if(e<60)return b.getPlural("login_flood_pluralize_seconds",e);if(e<3600){const t=Math.floor(e/60);return b.getPlural("login_flood_pluralize_minutes",t)}{const t=Math.floor(e/60/60);return b.getPlural("login_flood_pluralize_hours",t)}}return"An error occurred"}buildInput(e,t="text"){const n=l(`\n      <div class="login_input mdc-text-field mdc-text-field--outlined">\n        <input type="${t}" class="mdc-text-field__input">\n        <div class="mdc-notched-outline">\n          <div class="mdc-notched-outline__leading"></div>\n          <div class="mdc-notched-outline__notch">\n            <label class="mdc-floating-label">${e}</label>\n          </div>\n          <div class="mdc-notched-outline__trailing"></div>\n        </div>\n      </div>\n    `);return n.querySelector("input").addEventListener("keyup",this.checkInput),n}buildPasswordInput(){const e=this.buildInput("Password","password"),t=a("input",e),n=l('<span class="login_password_visibility_button"></span>');return n.addEventListener("click",()=>{const e="password"===t.type;t.type=e?"text":"password",n.classList.toggle("login_password_visibility_button-visible",e)}),e.append(n),e}buildButton(e,t=!0){const n=l(`\n      <button class="login_button mdc-button mdc-button--unelevated" type="submit" ${t?" hidden":""}><span class="mdc-button__ripple"></span>${e}</button>\n    `);return this.mdcComponents.push(new Q(n)),n}buildCountryMenu(e){const t=[];for(const e of be){const[n,i,s]=e;if(!n)continue;const r=ve(n),a=b.get(i),c=l(`\n        <li class="mdc-list-item login_countries_item" role="menuitem" data-code="${n}" data-name="${a.toLowerCase()}">\n          <div class="login_countries_item_emoji">${r}</div>\n          <div class="login_countries_item_country">${a}</div>\n          <div class="login_countries_item_prefix">${s}</div>\n        </li>\n      `);c.addEventListener("mousedown",o),t.push(c)}const n=l('\n      <div class="mdc-menu mdc-menu-surface login_countries_menu" hidden>\n        <ul class="mdc-list login_countries_list" role="menu" aria-hidden="true" aria-orientation="vertical" tabindex="-1"></ul>\n      </div>\n    ');a(".login_countries_list",n).append(...t);let i=t.length;const s=e.querySelector("input");function o(e){e.preventDefault();const t=e.currentTarget,n=a(".login_countries_item_country",t).innerText,i=a(".login_countries_item_prefix",t).innerText.replace(/\s+/g,"");Ce.countryTextField.value=n,Ce.phoneTextField.value=i,Ce.phoneTextField.focus()}return s.addEventListener("focus",()=>{i&&(n.hidden=!1)}),s.addEventListener("blur",()=>{n.hidden=!0}),s.addEventListener("input",()=>{const e=s.value.trim().toLowerCase();i=0;for(const n of t)n.dataset.name.indexOf(e)>-1?(n.style.display="",i++):n.style.display="none";n.hidden=!i}),n}buildEditPhoneButton(){const e=l('\n      <span class="login_edit_phone_button"></span>\n    ');return e.addEventListener("click",()=>{this.setStep(0)}),e}destroy(){this.dom.container.remove(),this.dom=null;for(const e of this.mdcComponents)e.destroy();this.mdcComponents=[]}};function Ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}window.LoginController=Ce;const Ae=new class{constructor(){Ie(this,"dialogs",[]),Ie(this,"messages",new Map),Ie(this,"chats",new Map),Ie(this,"users",new Map),Ie(this,"peerDialogs",new Map),Ie(this,"chatMessages",new Map),Ie(this,"chatsFull",new Map),Ie(this,"usersFull",new Map),Ie(this,"emitter",new s),g.emitter.on("updates",e=>{this.onUpdates(e.detail)})}onUpdates(e){switch(e._){case"updates":case"updatesCombined":this.updateChats(e.chats),this.updateUsers(e.users);for(const t of e.updates)this.handleUpdate(t);break;case"updateShort":this.handleUpdate(e.update);break;case"updateShortMessage":case"updateShortChatMessage":this.handleUpdateShortMessage(e)}}handleUpdate(e){switch(e._){case"updateNewMessage":case"updateNewChannelMessage":{const t=e.message;this.updateMessages([t]);const n=this.getMessagePeerId(t),i=this.peerDialogs.get(n);i?(i.top_message=t.id,!t.pFlags.out&&t.id>i.read_inbox_max_id&&i.unread_count++,this.updateChatMessages(i,[t]),this.handleDialogOrder(i),this.emitter.trigger("chatNewMessage",{dialog:i,message:t})):this.handleNewDialog(t)}break;case"updateEditMessage":case"updateEditChannelMessage":{const t=e.message.id,n=this.messages.get(t);if(n){this.messages.set(t,e.message);const i=this.getPeerId(n.to_id);this.updateChatEditedMessage(i,n,e.message)}}break;case"updateDeleteMessages":case"updateDeleteChannelMessages":for(let t of e.messages){const e=this.messages.get(t);if(e){this.messages.delete(t);const n=this.getPeerId(e.to_id);this.updateChatDeletedMessage(n,e)}}break;case"updateReadHistoryInbox":case"updateReadChannelInbox":{const t=e.channel_id||this.getPeerId(e.peer),n=this.peerDialogs.get(t);n&&(n.unread_count=e.still_unread_count,n.read_inbox_max_id=e.max_id,this.emitter.trigger("chatUnreadCountUpdate",{dialog:n}))}break;case"updateUserStatus":{const t=this.users.get(e.user_id);t&&(t.status=e.status,this.emitter.trigger("userStatusUpdate",{user:t}))}break;case"updatePinnedDialogs":e.order&&this.handlePinnedDialogsOrder(e.order);break;case"updateDialogPinned":{const t=this.getPeerId(e.peer),n=this.peerDialogs.get(t);n&&(n.pFlags.pinned=e.pFlags.pinned,this.handleDialogOrder(n))}break;case"updateDraftMessage":{const t=this.getPeerId(e.peer),n=this.peerDialogs.get(t);n&&(n.draft=e.draft)}}}handleUpdateShortMessage(e){const t=e.pFlags.out,n=e.from_id||(t?Qt.getAuthUserId():e.user_id);let i;if(e.chat_id)i={_:"peerChat",chat_id:e.chat_id};else{i={_:"peerUser",user_id:t?e.user_id:Qt.getAuthUserId()}}this.handleUpdate({_:"updateNewMessage",message:{_:"message",flags:e.flags,pFlags:e.pFlags,id:e.id,from_id:n,to_id:i,date:e.date,message:e.message,fwd_from:e.fwd_from,reply_to_msg_id:e.reply_to_msg_id,entities:e.entities},pts:e.pts,pts_count:e.pts_count})}handleUpdateShortSentMessage(e,t,n,i){this.handleUpdate({_:"updateMessageID",random_id:i,id:e.id});const s=!!t.channel_id,o=s&&this.isMegagroup(t.channel_id),r={_:"message",id:e.id,from_id:s&&!o?0:Qt.getAuthUserId(),to_id:t,flags:e.flags,pFlags:e.pFlags,date:e.date,message:n};e.media&&"messageMediaEmpty"!==e.media._&&(r.media=e.media),e.entities&&(r.entities=e.entities),this.handleUpdate({_:s?"updateNewChannelMessage":"updateNewMessage",message:r,pts:e.pts,pts_count:e.pts_count})}async handleNewDialog(e){"peerChannel"===e.to_id._&&await this.reloadChannel(e.to_id.channel_id);const t=await this.loadPeerDialog(this.getMessagePeer(e));t&&(this.handleDialogOrder(t),this.emitter.trigger("chatNewMessage",{dialog:t,message:e}))}async handlePinnedDialogsOrder(e){const t=[],n=[];for(const t of e){let e=this.peerDialogs.get(this.getPeerId(t.peer));e||(e=await this.loadPeerDialog(t.peer)),e.pFlags.pinned=!0,n.push(e)}let i=0;for(const e of this.dialogs){if(!e.pFlags.pinned)break;i++,-1===n.indexOf(e)&&(delete e.pFlags.pinned,t.push(e))}this.dialogs.splice(0,i,...n),n.forEach((e,t)=>{this.emitter.trigger("dialogOrderUpdate",{dialog:e,index:t})}),t.forEach(e=>{this.handleDialogOrder(e)})}handleDialogOrder(e){if(e.pFlags.pinned)return;const t=e.top_message&&this.messages.get(e.top_message);if(!t)return;const n=this.dialogs.indexOf(e);n>-1&&this.dialogs.splice(n,1);const i=this.dialogs.findIndex(e=>{if(!e.pFlags.pinned&&e.top_message){const n=this.messages.get(e.top_message);return n&&n.date<t.date}return!1});this.dialogs.splice(i,0,e),this.emitter.trigger("dialogOrderUpdate",{dialog:e,index:i})}async loadDialogs(e={},t=20){await g.connectionDefered.promise;const n=await g.callMethod("messages.getDialogs",{offset_date:e.date||0,offset_id:e.id||0,offset_peer:this.getInputPeer(e.peer),limit:t}),{dialogs:i,messages:s,chats:o,users:r}=n;return this.updateUsers(r),this.updateChats(o),this.updateMessages(s),this.updateDialogs(i),this.dialogs=this.dialogs.concat(i),this.emitter.trigger("dialogsUpdate",{dialogs:this.dialogs}),this.preloadDialogsMessages(i),i}async loadChatMessages(e,t,n){const i=this.getPeerId(e.peer);let s;if(this.chatMessages.has(i)){if(s=this.chatMessages.get(i),!t||t>s[s.length-1].id)return this.emitter.trigger("chatMessagesUpdate",{dialog:e,messages:s}),s}else{s=[];const n=this.messages.get(e.top_message);n&&(s.push(n),t||(t=n.id)),this.chatMessages.set(i,s),this.emitter.trigger("chatMessagesUpdate",{dialog:e,messages:s})}const o=await g.callMethod("messages.getHistory",{peer:this.getInputPeer(e.peer),offset_id:t,limit:n,offset_date:0});return this.updateMessages(o.messages),this.updateUsers(o.users),this.updateChats(o.chats),this.updateChatMessages(e,o.messages,!0),o.messages}async preloadDialogsMessages(e){if(!this.dialogsPreloaded){this.dialogsPreloaded=!0;for(const t of e)this.chatMessages.has(this.getPeerId(t.peer))||(await this.loadChatMessages(t,0,10),await _(500))}}async loadPeerDialog(e){const t=await g.callMethod("messages.getPeerDialogs",{peers:[{_:"inputDialogPeer",peer:this.getInputPeer(e)}]});return this.updateUsers(t.users),this.updateChats(t.chats),this.updateMessages(t.messages),this.updateDialogs(t.dialogs),t.dialogs[0]}updateDialogs(e){for(const t of e){const e=this.getPeerId(t.peer);this.peerDialogs.set(e,t)}}updateUsers(e){for(const t of e)this.users.set(t.id,t)}updateChats(e,t=!1){for(const n of e)!t&&"channel"===n._&&this.chats.has(n.id)||this.chats.set(n.id,n)}updateMessages(e){for(const t of e)this.messages.set(t.id,t)}updateChatMessages(e,t,n=!1){const i=this.getPeerId(e.peer),s=this.chatMessages.get(i);s&&(n?s.push(...t):s.unshift(...t),this.emitter.trigger("chatMessagesUpdate",{dialog:e,messages:s}))}updateChatEditedMessage(e,t,n){const i=this.peerDialogs.get(e);if(!i)return;const s=this.chatMessages.get(e);if(s){const e=s.indexOf(t);e>-1&&s.splice(e,1,n),this.emitter.trigger("chatEditMessage",{dialog:i,message:n})}i.top_message===t.id&&this.emitter.trigger("dialogTopMessageUpdate",{dialog:i})}updateChatDeletedMessage(e,t){const n=this.peerDialogs.get(e);if(!n)return;const i=this.chatMessages.get(e);if(i){const e=i.indexOf(t);e>-1&&i.splice(e,1),this.emitter.trigger("chatDeleteMessage",{dialog:n,message:t})}n.top_message===t.id&&(i&&i.length?n.top_message=i[0].id:delete n.top_message,this.emitter.trigger("dialogTopMessageUpdate",{dialog:n}))}async sendMessage(e,t){const n=h(),i=await g.callMethod("messages.sendMessage",{message:t,peer:this.getInputPeer(e),random_id:n});"updateShortSentMessage"===i._?this.handleUpdateShortSentMessage(i,e,t,n):this.onUpdates(i)}async sendMedia(e,t,n=""){const i=h(),s=await g.callMethod("messages.sendMedia",{message:n,media:t,peer:this.getInputPeer(e),random_id:i});"updateShortSentMessage"===s._?this.handleUpdateShortSentMessage(s,e,n,i):this.onUpdates(s)}async readHistory(e,t){e.peer.channel_id?await g.callMethod("channels.readHistory",{channel:this.getInputPeer(e.peer),max_id:t}):await g.callMethod("messages.readHistory",{peer:this.getInputPeer(e.peer),max_id:t}),e.unread_count=0,this.emitter.trigger("chatUnreadCountUpdate",{dialog:e})}saveDraft(e,t){return g.callMethod("messages.saveDraft",{message:t,peer:this.getInputPeer(e)})}getDialog(e){return this.peerDialogs.get(e)}getMessagePeer(e){return"peerUser"===e.to_id._?e.pFlags.out?e.to_id:{_:"peerUser",user_id:e.from_id}:e.to_id}getMessagePeerId(e){return this.getPeerId(this.getMessagePeer(e))}getPeerId(e){switch(e._){case"peerUser":return e.user_id;case"peerChat":return e.chat_id;case"peerChannel":return e.channel_id}}getPeerData(e){switch(e._){case"peerUser":return this.users.get(e.user_id);case"peerChat":return this.chats.get(e.chat_id);case"peerChannel":return this.chats.get(e.channel_id)}}getPeerName(e,t=!0){const n=this.getPeerData(e);return n?"peerUser"===e._?this.getUserName(n,t):n.title||"":""}getUserName(e,t=!0){return e.pFlags.deleted?"Deleted Account":t?[e.first_name,e.last_name].join(" ").trim():e.first_name||e.last_name||""}getPeerPhoto(e){const t=this.getPeerData(e);return!!t&&t.photo}getInputPeer(e){if(!e)return{_:"inputPeerEmpty"};const t=this.getPeerData(e);switch(e._){case"peerUser":return e.user_id===Qt.getAuthUserId()?{_:"inputPeerSelf"}:{_:"inputPeerUser",user_id:e.user_id,access_hash:t&&t.access_hash||0};case"peerChat":return{_:"inputPeerChat",chat_id:e.chat_id,access_hash:t&&t.access_hash||0};case"peerChannel":return{_:"inputPeerChannel",channel_id:e.channel_id,access_hash:t&&t.access_hash||0}}}getInputPeerById(e){return this.getInputPeer(this.getPeerById(e))}getInputMessagesFilter(e){switch(e){case"media":return{_:"inputMessagesFilterPhotos"};case"docs":return{_:"inputMessagesFilterDocument"};case"links":return{_:"inputMessagesFilterUrl"};case"audio":return{_:"inputMessagesFilterMusic"}}}getUserPeer(e){return{_:"peerUser",user_id:e.id}}getChatPeer(e){return"channel"===e._?{_:"peerChannel",channel_id:e.id}:{_:"peerChat",chat_id:e.id}}getPeerById(e){return this.users.has(e)?this.getUserPeer(this.users.get(e)):this.chats.has(e)?this.getChatPeer(this.chats.get(e)):void 0}isMegagroup(e){return!!this.chats.get(e).pFlags.megagroup}async reloadChannel(e){const t=await g.callMethod("channels.getChannels",{id:[this.getInputPeerById(e)]});this.updateChats(t.chats,!0)}async loadChatFull(e){if(this.chatsFull.has(e))return this.chatsFull.get(e);const t=this.getInputPeerById(e);let n;n="inputPeerChannel"===t._?await g.callMethod("channels.getFullChannel",{channel:t}):await g.callMethod("messages.getFullChat",{chat_id:e}),this.updateUsers(n.users),this.updateChats(n.chats);const i=n.full_chat;return this.chatsFull.set(e,i),i}async loadUserFull(e){if(this.usersFull.has(e))return this.usersFull.get(e);const t=this.getInputPeerById(e),n=await g.callMethod("users.getFullUser",{id:t});return this.usersFull.set(e,n),n}};function Te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}window.MessagesApiManager=Ae;const Se=new class{constructor(){Te(this,"jpegHeader",we("/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDACgcHiMeGSgjISMtKygwPGRBPDc3PHtYXUlkkYCZlo+AjIqgtObDoKrarYqMyP/L2u71////m8H////6/+b9//j/2wBDASstLTw1PHZBQXb4pYyl+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj/wAARCAAAAAADASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwA=")),Te(this,"jpegFooter",we("/9k="))}choosePhotoSize(e,t="m"){const n=e.find(e=>e.type===t);return n||("i"!==t?e.find(e=>"i"!==e.type):void 0)}isCachedPhotoSize(e){return"photoCachedSize"===e._}getCachedPhotoSize(e){const t=new Blob([e.bytes],{type:"image/jpeg"});return URL.createObjectURL(t)}getPhotoStrippedSize(e){const t=this.choosePhotoSize(e,"i");if(t&&1===t.bytes[0]){const e=this.jpegHeader,n=this.jpegFooter;return"data:image/jpeg;base64,"+function(e){e instanceof ArrayBuffer&&(e=new Uint8Array(e));let t="";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return btoa(t)}(function(...e){let t=0;for(const n of e)t+=n.byteLength||n.length||0;const n=new Int8Array(t);let i=0;for(const t of e)n.set(t instanceof ArrayBuffer?new Int8Array(t):t,i),i+=t.byteLength||t.length;return n.buffer}(e.subarray(0,164),t.bytes.subarray(1,2),e.subarray(165,166),t.bytes.subarray(2,3),e.subarray(167),t.bytes.subarray(3),n))}}getDocumentAttributes(e){const t={},n=e.thumbs&&e.thumbs.length;for(const i of e.attributes)switch(i._){case"documentAttributeFilename":t.file_name=i.file_name;break;case"documentAttributeAudio":t.duration=i.duration,t.audioTitle=i.title,t.audioPerformer=i.performer,t.type=i.pFlags.voice?"voice":"audio";break;case"documentAttributeVideo":t.duration=i.duration,t.w=i.w,t.h=i.h,n&&i.pFlags.round_message?t.type="round":n&&(t.type="video");break;case"documentAttributeSticker":t.sticker=!0,void 0!==i.alt&&(t.stickerEmoji=i.alt),i.stickerset&&("inputStickerSetEmpty"===i.stickerset._?delete i.stickerset:"inputStickerSetID"===i.stickerset._&&(t.stickerSetInput=i.stickerset)),n&&(t.type="sticker");break;case"documentAttributeImageSize":t.w=i.w,t.h=i.h,n&&(t.type="image","application/x-tgsticker"===e.mime_type&&(t.type="sticker"));break;case"documentAttributeAnimated":"image/gif"!==e.mime_type&&"video/mp4"!==e.mime_type||!n||(t.type="gif"),t.animated=!0}if(!t.mime_type)switch(t.type){case"gif":t.mime_type="video/mp4";break;case"video":case"round":t.mime_type="video/mp4";break;case"sticker":t.mime_type="image/webp";break;case"audio":t.mime_type="audio/mpeg";break;case"voice":t.mime_type="audio/ogg";break;default:t.mime_type="application/octet-stream"}return t.file_name||(t.file_name=""),t}};function we(e){const t=atob(e),n=new Uint8Array(t.length);for(let i=0;i<e.length;i++)n[i]=t.charCodeAt(i);return n}function Me(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}window.MediaApiManager=Se;const Le=new class{constructor(){Me(this,"blobUrls",new Map),Me(this,"queue",[]),Me(this,"inProgress",0),Me(this,"connections",new Map)}getBlobUrl(e){return URL.createObjectURL(e)}checkQueue(e){if(this.inProgress++<2)return Promise.resolve();const t=this.queue.findIndex(t=>t.priority<e),n=o();return this.queue.splice(t,0,{priority:e,deferred:n}),n.promise}queueDone(){this.inProgress--;const e=this.queue.shift();e&&e.deferred.resolve()}getConnection(e){let t;if(this.connections.has(e)){const n=this.connections.get(e);t=n.connection,n.processCount++}else t=new m({dcId:e,upload:!0}),this.connections.set(e,{connection:t,processCount:1});return t}connectionDone(e){const t=e.getDcId(),n=this.connections.get(t);n&&--n.processCount||(this.connections.delete(t),e.destroy())}async loadFile(e,t,{priority:n=1,cache:i=!1,mimeType:s="",size:o=0,onProgress:r,signal:a}={}){if(i)try{const t=await this.getFromCache(e);if(t)return t}catch(e){console.warn(e)}const c=[],u=this.getConnection(t);let d=!1;a&&a.addEventListener("abort",()=>d=!0);try{await this.checkQueue(n);for(let t=0,n=0;;t+=524288){const i=await u.callMethod("upload.getFile",{location:e,offset:t,limit:524288});if(d)throw new Error("File download aborted");if(c.push(new Blob([i.bytes])),n+=i.bytes.byteLength,r&&r(n),s||(s=this.getMimeType(i.type)),o&&n>=o||!o&&i.bytes.byteLength<524288)break}}finally{this.queueDone(),this.connectionDone(u)}const l=new Blob(c,{type:s}),_=Le.getBlobUrl(l);if(i)try{this.saveToCache(e,l,_)}catch(e){console.warn(e)}return _}getMimeType(e){switch(e._){case"storage.fileJpeg":return"image/jpeg";case"storage.fileGif":return"image/gif";case"storage.filePng":return"image/png";case"storage.filePdf":return"application/pdf";case"storage.fileMp3":return"audio/mpeg";case"storage.fileMov":return"video/quicktime";case"storage.fileMp4":return"video/mp4";case"storage.fileWebp":return"image/webp";default:return""}}async getFromCache(e){const t=this.getDbFileName(e);if(this.blobUrls.has(t))return this.blobUrls.get(t);const n=(await this.openDb()).transaction(["files"],"readonly").objectStore("files").get(t),i=await this.getDbRequestPromise(n);if(i){const e=this.getBlobUrl(i);return this.blobUrls.set(t,e),e}}async saveToCache(e,t,n){const i=this.getDbFileName(e),s=(await this.openDb()).transaction(["files"],"readwrite").objectStore("files").put(t,this.getDbFileName(e));return this.blobUrls.set(i,n),this.getDbRequestPromise(s)}openDb(){return new Promise((e,t)=>{const n=indexedDB.open("telegram_cache",1);n.onerror=e=>{t()},n.onsuccess=t=>{const n=t.target.result;e(n)},n.onupgradeneeded=t=>{t.target.result.createObjectStore("files"),e(this.openDb())}})}getDbFileName(e){return e._+(e.id||e.volume_id+e.local_id)}getDbRequestPromise(e){return new Promise((t,n)=>{e.onerror=n,e.onsuccess=e=>{t(e.target.result)}})}loadPeerPhoto(e,t,n,i,s){const o=n?t.photo_big:t.photo_small,r={_:"inputPeerPhotoFileLocation",peer:Ae.getInputPeer(e),volume_id:o.volume_id,local_id:o.local_id};return n&&(r.big=!0),this.loadFile(r,i,s)}loadMessagePhoto(e,t,n={}){const i={_:"inputPhotoFileLocation",id:e.id,access_hash:e.access_hash,file_reference:e.file_reference,thumb_size:t};return this.loadFile(i,e.dc_id,n)}loadMessageDocumentThumb(e,t,n={}){const i={_:"inputDocumentFileLocation",id:e.id,access_hash:e.access_hash,file_reference:e.file_reference,thumb_size:t};return this.loadFile(i,e.dc_id,n)}loadMessageDocument(e,t={}){const n={_:"inputDocumentFileLocation",id:e.id,access_hash:e.access_hash,file_reference:e.file_reference};return Object.assign(t,{mimeType:e.mime_type,size:e.size}),this.loadFile(n,e.dc_id,t)}loadStickerSetThumb(e,t={}){const n={_:"inputStickerSetThumb",stickerset:{_:"inputStickerSetID",id:e.id,access_hash:e.access_hash},volume_id:e.thumb.location.volume_id,local_id:e.thumb.location.local_id};return this.loadFile(n,e.thumb_dc_id,t)}async uploadFile(e,t="",{onProgress:n,signal:i}){const s=h(),o=e.size>10485760,r=Math.ceil(e.size/262144),a=this.getConnection(ApiClient.getDcId());let c=!1;i&&i.addEventListener("abort",()=>c=!0);try{await this.checkQueue(100);for(let t=0,i=0;i<e.size;t++,i+=262144){if(await a.callMethod(o?"upload.saveBigFilePart":"upload.saveFilePart",{file_id:s,file_part:t,file_total_parts:r,bytes:await e.slice(i,i+262144).arrayBuffer()}),c)throw new Error("File upload aborted");n&&n(Math.min(e.size,i+262144))}}finally{this.queueDone(),this.connectionDone(a)}return{_:o?"inputFileBig":"inputFile",id:s,parts:r,name:t,md5_checksum:""}}};function Oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}window.FileApiManager=Le;const De=new class{constructor(){Oe(this,"close",()=>{this.state=null,this.dom.content.innerHTML="",this.container.hidden=!0,document.removeEventListener("keyup",this.onKeyUp)}),Oe(this,"onKeyUp",e=>{27===e.keyCode&&this.close()}),Oe(this,"download",()=>{if(this.state.url){const e=document.createElement("a");e.href=this.state.url,e.download=this.getDownloadFilename(this.state.object),e.click()}}),this.container=l('\n      <div class="media_view" hidden>\n        <div class="media_view_controls">\n          <button class="media_view_controls_item media_view_controls_item-delete" data-js-label="button_delete"></button>\n          <button class="media_view_controls_item media_view_controls_item-forward" data-js-label="button_forward"></button>\n          <button class="media_view_controls_item media_view_controls_item-download" data-js-label="button_download"></button>\n          <button class="media_view_controls_item media_view_controls_item-close" data-js-label="button_close"></button>\n        </div>\n        <div class="media_view_content" data-js-label="content"></div>\n      </div>\n    '),this.dom=d(this.container),this.dom.button_download.addEventListener("click",this.download),this.dom.button_close.addEventListener("click",this.close),this.dom.content.addEventListener("click",e=>{e.target===e.currentTarget&&this.close()}),document.body.appendChild(this.container)}showPhoto(e,t){const n=e.sizes[e.sizes.length-1];this.initLoading(document,t,n.size);const i=this.state.abortController,s=this.state.onProgress;Le.loadMessagePhoto(e,n.type,{onProgress:s,signal:i.signal}).then(e=>{this.dom.content.innerHTML=`<img class="media_view_content_image" src="${e}">`,this.onLoaded(e)})}showGif(e,t){this.initLoading(e,t,e.size);const n=this.state.abortController,i=this.state.onProgress;Le.loadMessageDocument(e,{onProgress:i,signal:n.signal}).then(e=>{this.dom.content.innerHTML=`<video class="media_view_content_gif" src="${e}" autoplay loop></video>`,this.onLoaded(e)})}showVideo(e,t){this.initLoading(e,t,e.size);const n=this.state.abortController,i=this.state.onProgress;Le.loadMessageDocument(e,{onProgress:i,signal:n.signal}).then(e=>{this.dom.content.innerHTML=`<video class="media_view_content_video" src="${e}" autoplay controls></video>`,this.onLoaded(e)})}initLoading(e,t,n){this.abort(),this.state={},this.state.object=e,this.state.abortController=new AbortController;const i=l('\n      <div class="messages_item_media_progress">\n        <svg class="messages_item_media_progress_svg" viewBox="0 0 36 36" xmlns="http://www.w3.org/2000/svg">\n          <path class="messages_item_media_progress_path" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"/>\n        </svg>\n      </div>\n    '),s=a(".messages_item_media_progress_path",i);i.addEventListener("click",e=>{e.stopPropagation(),this.state.abortController.abort()}),t.appendChild(i),t.classList.add("messages_item_media_thumb-loading");const o=()=>{i.remove(),t.classList.remove("messages_item_media_thumb-loading")};this.state.onProgress=e=>{const t=Math.round(100*Math.max(0,Math.min(1,e/n)));100===t?o():s.style.strokeDasharray=`${t}, 100`},this.state.abortController.signal.addEventListener("abort",o)}onLoaded(e){this.container.hidden=!1,this.state.url=e,document.addEventListener("keyup",this.onKeyUp)}abort(){this.state&&this.state.abortController&&this.state.abortController.abort(),this.state=null}isOpen(){return!this.container.hidden}getDownloadFilename(e){if("document"===e._){const t=Se.getDocumentAttributes(e);if(t.file_name)return t.file_name}return e._+e.id}};window.MediaViewController=De;const Pe={smileys:["😀","😁","😂","🤣","😃","😄","😅","😆","😉","😊","😋","😎","😍","😘","🥰","😗","😙","😚","☺️","🙂","🤗","🤩","🤔","🤨","😐","😑","😶","🙄","😏","😣","😥","😮","🤐","😯","😪","😫","😴","😌","😛","😜","😝","🤤","😒","😓","😔","😕","🙃","🤑","😲","☹️","🙁","😖","😞","😟","😤","😢","😭","😦","😧","😨","😩","🤯","😬","😰","😱","🥵","🥶","😳","🤪","😵","😡","😠","🤬","😷","🤒","🤕","🤢","🤮","🤧","😇","🤠","🤡","🥳","🥴","🥺","🤥","🤫","🤭","🧐","🤓","😈","👿","👹","👺","💀","👻","👽","🤖","💩","😺","😸","😹","😻","😼","😽","🙀","😿","😾","👶","👧","🧒","👦","👩","🧑","👨","👵","🧓","👴","👲","👳‍♀️","👳‍♂️","🧕","🧔","👱‍♂️","👱‍♀️","👨‍🦰","👩‍🦰","👨‍🦱","👩‍🦱","👨‍🦲","👩‍🦲","👨‍🦳","👩‍🦳","🦸‍♀️","🦸‍♂️","🦹‍♀️","🦹‍♂️","👮‍♀️","👮‍♂️","👷‍♀️","👷‍♂️","💂‍♀️","💂‍♂️","🕵️‍♀️","🕵️‍♂️","👩‍⚕️","👨‍⚕️","👩‍🌾","👨‍🌾","👩‍🍳","👨‍🍳","👩‍🎓","👨‍🎓","👩‍🎤","👨‍🎤","👩‍🏫","👨‍🏫","👩‍🏭","👨‍🏭","👩‍💻","👨‍💻","👩‍💼","👨‍💼","👩‍🔧","👨‍🔧","👩‍🔬","👨‍🔬","👩‍🎨","👨‍🎨","👩‍🚒","👨‍🚒","👩‍✈️","👨‍✈️","👩‍🚀","👨‍🚀","👩‍⚖️","👨‍⚖️","👰","🤵","👸","🤴","🤶","🎅","🧙‍♀️","🧙‍♂️","🧝‍♀️","🧝‍♂️","🧛‍♀️","🧛‍♂️","🧟‍♀️","🧟‍♂️","🧞‍♀️","🧞‍♂️","🧜‍♀️","🧜‍♂️","🧚‍♀️","🧚‍♂️","👼","🤰","🤱","🙇‍♀️","🙇‍♂️","💁‍♀️","💁‍♂️","🙅‍♀️","🙅‍♂️","🙆‍♀️","🙆‍♂️","🙋‍♀️","🙋‍♂️","🤦‍♀️","🤦‍♂️","🤷‍♀️","🤷‍♂️","🙎‍♀️","🙎‍♂️","🙍‍♀️","🙍‍♂️","💇‍♀️","💇‍♂️","💆‍♀️","💆‍♂️","🧖‍♀️","🧖‍♂️","💅","🤳","💃","🕺","👯‍♀️","👯‍♂️","🕴","🚶‍♀️","🚶‍♂️","🏃‍♀️","🏃‍♂️","👫","👭","👬","💑","👩‍❤️‍👩","👨‍❤️‍👨","💏","👩‍❤️‍💋‍👩","👨‍❤️‍💋‍👨","👪","👨‍👩‍👧","👨‍👩‍👧‍👦","👨‍👩‍👦‍👦","👨‍👩‍👧‍👧","👩‍👩‍👦","👩‍👩‍👧","👩‍👩‍👧‍👦","👩‍👩‍👦‍👦","👩‍👩‍👧‍👧","👨‍👨‍👦","👨‍👨‍👧","👨‍👨‍👧‍👦","👨‍👨‍👦‍👦","👨‍👨‍👧‍👧","👩‍👦","👩‍👧","👩‍👧‍👦","👩‍👦‍👦","👩‍👧‍👧","👨‍👦","👨‍👧","👨‍👧‍👦","👨‍👦‍👦","👨‍👧‍👧","🤲","👐","🙌","👏","🤝","👍","👎","👊","✊","🤛","🤜","🤞","✌️","🤟","🤘","👌","👈","👉","👆","👇","☝️","✋","🤚","🖐","🖖","👋","🤙","💪","🦵","🦶","🖕","✍️","🙏","💍","💄","💋","👄","👅","👂","👃","👣","👁","👀","🧠","🦴","🦷","🗣","👤","👥"],animals:["🐶","🐱","🐭","🐹","🐰","🦊","🦝","🐻","🐼","🦘","🦡","🐨","🐯","🦁","🐮","🐷","🐽","🐸","🐵","🙈","🙉","🙊","🐒","🐔","🐧","🐦","🐤","🐣","🐥","🦆","🦢","🦅","🦉","🦚","🦜","🦇","🐺","🐗","🐴","🦄","🐝","🐛","🦋","🐌","🐚","🐞","🐜","🦗","🕷","🕸","🦂","🦟","🦠","🐢","🐍","🦎","🦖","🦕","🐙","🦑","🦐","🦀","🐡","🐠","🐟","🐬","🐳","🐋","🦈","🐊","🐅","🐆","🦓","🦍","🐘","🦏","🦛","🐪","🐫","🦙","🦒","🐃","🐂","🐄","🐎","🐖","🐏","🐑","🐐","🦌","🐕","🐩","🐈","🐓","🦃","🕊","🐇","🐁","🐀","🐿","🦔","🐾","🐉","🐲","🌵","🎄","🌲","🌳","🌴","🌱","🌿","☘️","🍀","🎍","🎋","🍃","🍂","🍁","🍄","🌾","💐","🌷","🌹","🥀","🌺","🌸","🌼","🌻","🌞","🌝","🌛","🌜","🌚","🌕","🌖","🌗","🌘","🌑","🌒","🌓","🌔","🌙","🌎","🌍","🌏","💫","⭐️","🌟","✨","⚡️","☄️","💥","🔥","🌪","🌈","☀️","🌤","⛅️","🌥","☁️","🌦","🌧","⛈","🌩","🌨","❄️","☃️","⛄️","🌬","💨","💧","💦","☔️","☂️","🌊","🌫"],food:["🍏","🍎","🍐","🍊","🍋","🍌","🍉","🍇","🍓","🍈","🍒","🍑","🍍","🥭","🥥","🥝","🍅","🍆","🥑","🥦","🥒","🥬","🌶","🌽","🥕","🥔","🍠","🥐","🍞","🥖","🥨","🥯","🧀","🥚","🍳","🥞","🥓","🥩","🍗","🍖","🌭","🍔","🍟","🍕","🥪","🥙","🌮","🌯","🥗","🥘","🥫","🍝","🍜","🍲","🍛","🍣","🍱","🥟","🍤","🍙","🍚","🍘","🍥","🥮","🥠","🍢","🍡","🍧","🍨","🍦","🥧","🍰","🎂","🍮","🍭","🍬","🍫","🍿","🧂","🍩","🍪","🌰","🥜","🍯","🥛","🍼","☕️","🍵","🥤","🍶","🍺","🍻","🥂","🍷","🥃","🍸","🍹","🍾","🥄","🍴","🍽","🥣","🥡","🥢"],sports:["⚽️","🏀","🏈","⚾️","🥎","🏐","🏉","🎾","🥏","🎱","🏓","🏸","🥅","🏒","🏑","🥍","🏏","⛳️","🏹","🎣","🥊","🥋","🎽","⛸","🥌","🛷","🛹","🎿","⛷","🏂","🏋️‍♀️","🏋️‍♂️","🤼‍♀️","🤼‍♂️","🤸‍♀️","🤸‍♂️","⛹️‍♀️","⛹️‍♂️","🤺","🤾‍♀️","🤾‍♂️","🏌️‍♀️","🏌️‍♂️","🏇","🧘‍♀️","🧘‍♂️","🏄‍♀️","🏄‍♂️","🏊‍♀️","🏊‍♂️","🤽‍♀️","🤽‍♂️","🚣‍♀️","🚣‍♂️","🧗‍♀️","🧗‍♂️","🚵‍♀️","🚵‍♂️","🚴‍♀️","🚴‍♂️","🏆","🥇","🥈","🥉","🏅","🎖","🏵","🎗","🎫","🎟","🎪","🤹‍♀️","🤹‍♂️","🎭","🎨","🎬","🎤","🎧","🎼","🎹","🥁","🎷","🎺","🎸","🎻","🎲","🧩","♟","🎯","🎳","🎮","🎰"],travel:["🚗","🚕","🚙","🚌","🚎","🏎","🚓","🚑","🚒","🚐","🚚","🚛","🚜","🛴","🚲","🛵","🏍","🚨","🚔","🚍","🚘","🚖","🚡","🚠","🚟","🚃","🚋","🚞","🚝","🚄","🚅","🚈","🚂","🚆","🚇","🚊","🚉","✈️","🛫","🛬","🛩","💺","🛰","🚀","🛸","🚁","🛶","⛵️","🚤","🛥","🛳","⛴","🚢","⚓️","⛽️","🚧","🚦","🚥","🚏","🗺","🗿","🗽","🗼","🏰","🏯","🏟","🎡","🎢","🎠","⛲️","⛱","🏖","🏝","🏜","🌋","⛰","🏔","🗻","🏕","⛺️","🏠","🏡","🏘","🏚","🏗","🏭","🏢","🏬","🏣","🏤","🏥","🏦","🏨","🏪","🏫","🏩","💒","🏛","⛪️","🕌","🕍","🕋","⛩","🛤","🛣","🗾","🎑","🏞","🌅","🌄","🌠","🎇","🎆","🌇","🌆","🏙","🌃","🌌","🌉","🌁"],objects:["⌚️","📱","📲","💻","⌨️","🖥","🖨","🖱","🖲","🕹","🗜","💽","💾","💿","📀","📼","📷","📸","📹","🎥","📽","🎞","📞","☎️","📟","📠","📺","📻","🎙","🎚","🎛","⏱","⏲","⏰","🕰","⌛️","⏳","📡","🔋","🔌","💡","🔦","🕯","🗑","🛢","💸","💵","💴","💶","💷","💰","💳","🧾","💎","⚖️","🔧","🔨","⚒","🛠","⛏","🔩","⚙️","⛓","🔫","💣","🔪","🗡","⚔️","🛡","🚬","⚰️","⚱️","🏺","🧭","🧱","🔮","🧿","🧸","📿","💈","⚗️","🔭","🧰","🧲","🧪","🧫","🧬","🧯","🔬","🕳","💊","💉","🌡","🚽","🚰","🚿","🛁","🛀","🛀🏻","🛀🏼","🛀🏽","🛀🏾","🛀🏿","🧴","🧵","🧶","🧷","🧹","🧺","🧻","🧼","🧽","🛎","🔑","🗝","🚪","🛋","🛏","🛌","🖼","🛍","🧳","🛒","🎁","🎈","🎏","🎀","🎊","🎉","🧨","🎎","🏮","🎐","🧧","✉️","📩","📨","📧","💌","📥","📤","📦","🏷","📪","📫","📬","📭","📮","📯","📜","📃","📄","📑","📊","📈","📉","🗒","🗓","📆","📅","📇","🗃","🗳","🗄","📋","📁","📂","🗂","🗞","📰","📓","📔","📒","📕","📗","📘","📙","📚","📖","🔖","🔗","📎","🖇","📐","📏","📌","📍","✂️","🖊","🖋","✒️","🖌","🖍","📝","✏️","🔍","🔎","🔏","🔐","🔒","🔓","❤️","🧡","💛","💚","💙","💜","🖤","💔","❣️","💕","💞","💓","💗","💖","💘","💝","💟","☮️","✝️","☪️","🕉","☸️","✡️","🔯","🕎","☯️","☦️","🛐","⛎","♈️","♉️","♊️","♋️","♌️","♍️","♎️","♏️","♐️","♑️","♒️","♓️","🆔","⚛️","🉑","☢️","☣️","📴","📳","🈶","🈚️","🈸","🈺","🈷️","✴️","🆚","💮","🉐","㊙️","㊗️","🈴","🈵","🈹","🈲","🅰️","🅱️","🆎","🆑","🅾️","🆘","❌","⭕️","🛑","⛔️","📛","🚫","💯","💢","♨️","🚷","🚯","🚳","🚱","🔞","📵","🚭","❗️","❕","❓","❔","‼️","⁉️","🔅","🔆","〽️","⚠️","🚸","🔱","⚜️","🔰","♻️","✅","🈯️","💹","❇️","✳️","❎","🌐","💠","Ⓜ️","🌀","💤","🏧","🚾","♿️","🅿️","🈳","🈂️","🛂","🛃","🛄","🛅","🚹","🚺","🚼","🚻","🚮","🎦","📶","🈁","🔣","ℹ️","🔤","🔡","🔠","🆖","🆗","🆙","🆒","🆕","🆓","0️⃣","1️⃣","2️⃣","3️⃣","4️⃣","5️⃣","6️⃣","7️⃣","8️⃣","9️⃣","🔟","🔢","#️⃣","*️⃣","⏏️","▶️","⏸","⏯","⏹","⏺","⏭","⏮","⏩","⏪","⏫","⏬","◀️","🔼","🔽","➡️","⬅️","⬆️","⬇️","↗️","↘️","↙️","↖️","↕️","↔️","↪️","↩️","⤴️","⤵️","🔀","🔁","🔂","🔄","🔃","🎵","🎶","➕","➖","➗","✖️","♾","💲","💱","™️","©️","®️","〰️","➰","➿","🔚","🔙","🔛","🔝","🔜","✔️","☑️","🔘","⚪️","⚫️","🔴","🔵","🔺","🔻","🔸","🔹","🔶","🔷","🔳","🔲","▪️","▫️","◾️","◽️","◼️","◻️","⬛️","⬜️","🔈","🔇","🔉","🔊","🔔","🔕","📣","📢","👁‍🗨","💬","💭","🗯","♠️","♣️","♥️","♦️","🃏","🎴","🀄️","🕐","🕑","🕒","🕓","🕔","🕕","🕖","🕗","🕘","🕙","🕚","🕛","🕜","🕝","🕞","🕟","🕠","🕡","🕢","🕣","🕤","🕥","🕦","🕧"],flags:["🏳️","🏴","🏁","🚩","🏳️‍🌈","🏴‍☠️","🇦🇫","🇦🇽","🇦🇱","🇩🇿","🇦🇸","🇦🇩","🇦🇴","🇦🇮","🇦🇶","🇦🇬","🇦🇷","🇦🇲","🇦🇼","🇦🇺","🇦🇹","🇦🇿","🇧🇸","🇧🇭","🇧🇩","🇧🇧","🇧🇾","🇧🇪","🇧🇿","🇧🇯","🇧🇲","🇧🇹","🇧🇴","🇧🇦","🇧🇼","🇧🇷","🇮🇴","🇻🇬","🇧🇳","🇧🇬","🇧🇫","🇧🇮","🇰🇭","🇨🇲","🇨🇦","🇮🇨","🇨🇻","🇧🇶","🇰🇾","🇨🇫","🇹🇩","🇨🇱","🇨🇳","🇨🇽","🇨🇨","🇨🇴","🇰🇲","🇨🇬","🇨🇩","🇨🇰","🇨🇷","🇨🇮","🇭🇷","🇨🇺","🇨🇼","🇨🇾","🇨🇿","🇩🇰","🇩🇯","🇩🇲","🇩🇴","🇪🇨","🇪🇬","🇸🇻","🇬🇶","🇪🇷","🇪🇪","🇪🇹","🇪🇺","🇫🇰","🇫🇴","🇫🇯","🇫🇮","🇫🇷","🇬🇫","🇵🇫","🇹🇫","🇬🇦","🇬🇲","🇬🇪","🇩🇪","🇬🇭","🇬🇮","🇬🇷","🇬🇱","🇬🇩","🇬🇵","🇬🇺","🇬🇹","🇬🇬","🇬🇳","🇬🇼","🇬🇾","🇭🇹","🇭🇳","🇭🇰","🇭🇺","🇮🇸","🇮🇳","🇮🇩","🇮🇷","🇮🇶","🇮🇪","🇮🇲","🇮🇱","🇮🇹","🇯🇲","🇯🇵","🎌","🇯🇪","🇯🇴","🇰🇿","🇰🇪","🇰🇮","🇽🇰","🇰🇼","🇰🇬","🇱🇦","🇱🇻","🇱🇧","🇱🇸","🇱🇷","🇱🇾","🇱🇮","🇱🇹","🇱🇺","🇲🇴","🇲🇰","🇲🇬","🇲🇼","🇲🇾","🇲🇻","🇲🇱","🇲🇹","🇲🇭","🇲🇶","🇲🇷","🇲🇺","🇾🇹","🇲🇽","🇫🇲","🇲🇩","🇲🇨","🇲🇳","🇲🇪","🇲🇸","🇲🇦","🇲🇿","🇲🇲","🇳🇦","🇳🇷","🇳🇵","🇳🇱","🇳🇨","🇳🇿","🇳🇮","🇳🇪","🇳🇬","🇳🇺","🇳🇫","🇰🇵","🇲🇵","🇳🇴","🇴🇲","🇵🇰","🇵🇼","🇵🇸","🇵🇦","🇵🇬","🇵🇾","🇵🇪","🇵🇭","🇵🇳","🇵🇱","🇵🇹","🇵🇷","🇶🇦","🇷🇪","🇷🇴","🇷🇺","🇷🇼","🇼🇸","🇸🇲","🇸🇦","🇸🇳","🇷🇸","🇸🇨","🇸🇱","🇸🇬","🇸🇽","🇸🇰","🇸🇮","🇬🇸","🇸🇧","🇸🇴","🇿🇦","🇰🇷","🇸🇸","🇪🇸","🇱🇰","🇧🇱","🇸🇭","🇰🇳","🇱🇨","🇵🇲","🇻🇨","🇸🇩","🇸🇷","🇸🇿","🇸🇪","🇨🇭","🇸🇾","🇹🇼","🇹🇯","🇹🇿","🇹🇭","🇹🇱","🇹🇬","🇹🇰","🇹🇴","🇹🇹","🇹🇳","🇹🇷","🇹🇲","🇹🇨","🇹🇻","🇻🇮","🇺🇬","🇺🇦","🇦🇪","🇬🇧","🏴󠁧󠁢󠁥󠁮󠁧󠁿","🏴󠁧󠁢󠁳󠁣󠁴󠁿","🏴󠁧󠁢󠁷󠁬󠁳󠁿","🇺🇳","🇺🇸","🇺🇾","🇺🇿","🇻🇺","🇻🇦","🇻🇪","🇻🇳","🇼🇫","🇪🇭","🇾🇪","🇿🇲","🇿🇼"]},xe=/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g;function ke(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Ne=new class{constructor(){ke(this,"stickerSets",new Map),ke(this,"onStickerNavClick",e=>{a(`.emoji_dropdown_list[data-set-id="${e.target.dataset.setId}"]`,this.dom.section_stickers).scrollIntoView()}),ke(this,"onStickersNavScroll",e=>{e.preventDefault();const t=e.currentTarget,n=Math.abs(e.deltaX)>Math.abs(e.deltaY)?e.deltaX:e.deltaY;t.scrollLeft+=n}),ke(this,"onTopNavClick",e=>{const t=e.currentTarget.dataset.jsLabel.replace(/^nav_/,"");this.setSection(t)}),ke(this,"onEmojiClick",e=>{e.target.classList.contains("emoji_dropdown_list_item")&&document.execCommand("insertText",!1,e.target.innerText)}),ke(this,"onEmojiNavClick",e=>{a(`.emoji_dropdown_list-${e.target.dataset.category}`,this.dom.section_emoji).scrollIntoView()}),ke(this,"onEmojiScroll",e=>{const t=e.currentTarget,n=t.offsetHeight,i=t.scrollTop;let s;for(const e of t.children){if(e.offsetTop>i+n/2)break;s=e}const o=s.dataset.category,r=a(".emoji_dropdown_bottom_nav_item-active",this.dom.section_emoji);r&&r.classList.remove("emoji_dropdown_bottom_nav_item-active"),a(`.emoji_dropdown_bottom_nav_item-${o}`,this.dom.section_emoji).classList.add("emoji_dropdown_bottom_nav_item-active")}),ke(this,"onStickersScroll",e=>{const t=e.currentTarget,n=t.offsetHeight,i=t.scrollTop,s=[];for(const e of t.children)if(!(e.offsetTop+e.offsetHeight<i-50)){if(e.offsetTop>i+n+50)break;s.push(e)}for(const e of s){const t=this.stickerSets.get(e.dataset.setId);this.loadStickersList(e,t)}}),ke(this,"onStickerClick",e=>{const t=e.target;if(t.classList.contains("emoji_dropdown_list_item")){const e=t.parentNode.dataset.setId,n=t.dataset.stickerIndex,i=this.stickerSets.get(e).documents[n];Ye.onStickerSend(i),this.hide()}}),ke(this,"onButtonClick",()=>{this.isShown()||this.show()}),ke(this,"onMouseEnter",()=>{clearTimeout(this.hideTimeout),this.isShown()||this.show()}),ke(this,"onMouseLeave",()=>{this.hideTimeout=setTimeout(()=>{this.isShown()&&this.hide(),this.hideTimeout=null},500)}),ke(this,"onGlobalClick",e=>{this.container.contains(e.target)||e.target===this.button?e.preventDefault():this.hide()})}init(){this.container=l('\n      <div class="emoji_dropdown" hidden>\n        <div class="emoji_dropdown_top_nav nav_tabs_container">\n          <div class="nav_tabs_item emoji_dropdown_top_nav_item" data-js-label="nav_emoji">\n            <div class="nav_tabs_item_label">Emoji</div>\n          </div>\n          <div class="nav_tabs_item emoji_dropdown_top_nav_item" data-js-label="nav_stickers">\n            <div class="nav_tabs_item_label">Stickers</div>\n          </div>\n          <div class="nav_tabs_item emoji_dropdown_top_nav_item" data-js-label="nav_gifs">\n            <div class="nav_tabs_item_label">GIFs</div>\n          </div>\n        </div>\n        <div class="emoji_dropdown_sections_wrap" data-js-label="sections_wrap">\n          <section class="emoji_dropdown_section emoji_dropdown_section-emoji" data-js-label="section_emoji">\n            <div class="emoji_dropdown_section_content"></div>\n            <div class="emoji_dropdown_bottom_nav"></div>\n          </section>\n          <section class="emoji_dropdown_section emoji_dropdown_section-stickers" data-js-label="section_stickers">\n            <div class="emoji_dropdown_section_content"></div>\n            <div class="emoji_dropdown_bottom_nav"></div>\n          </section>\n          <section class="emoji_dropdown_section emoji_dropdown_section-gifs" data-js-label="section_gifs"> \n            <div class="emoji_dropdown_section_content"></div>\n            <div class="emoji_dropdown_bottom_nav"></div>\n          </section>        \n        </div>\n      </div>\n    '),this.dom=d(this.container),this.dom.nav_emoji.addEventListener("click",this.onTopNavClick),this.dom.nav_stickers.addEventListener("click",this.onTopNavClick),this.initEmojiSection(),this.initStickersSection(),this.setSection("emoji")}initEmojiSection(){let e="",t="";for(const n in Pe){let i="";for(const e of Pe[n])i+=`<div class="emoji_dropdown_list_item">${e}</div>`;e+=`<div class="emoji_dropdown_list emoji_dropdown_list-${n}" data-category="${n}">${i}</div>`,t+=`<div class="emoji_dropdown_bottom_nav_item emoji_dropdown_bottom_nav_item-${n}" data-category="${n}"></div>`}const n=a(".emoji_dropdown_section_content",this.dom.section_emoji);n.innerHTML=e,n.addEventListener("click",this.onEmojiClick),n.addEventListener("scroll",this.onEmojiScroll);const i=a(".emoji_dropdown_bottom_nav",this.dom.section_emoji);i.innerHTML=t,i.addEventListener("click",this.onEmojiNavClick)}async initStickersSection(){let e=i.get("user_stickers"),t=0;e&&(t=e.hash);const n=await g.callMethod("messages.getAllStickers",{hash:t});"messages.allStickersNotModified"!==n._&&(e=n,i.set("user_stickers",e));const s=document.createDocumentFragment(),o=document.createDocumentFragment();let r=0;for(const t of e.sets){const e=l(`<div class="emoji_dropdown_list" data-set-id="${t.id}"></div>`);s.appendChild(e);const n=l(`<div class="emoji_dropdown_bottom_nav_item" data-set-id="${t.id}"></div>`);o.append(n),this.initStickerSet(t,e,n,r<3),r++}const c=a(".emoji_dropdown_section_content",this.dom.section_stickers);c.appendChild(s),c.addEventListener("scroll",this.onStickersScroll),c.addEventListener("click",this.onStickerClick);const u=a(".emoji_dropdown_bottom_nav",this.dom.section_stickers);u.append(o),u.addEventListener("click",this.onStickerNavClick),u.addEventListener("mousewheel",this.onStickersNavScroll)}async initStickerSet(e,t,n,i=!1){const s=await g.callMethod("messages.getStickerSet",{stickerset:{_:"inputStickerSetID",id:e.id,access_hash:e.access_hash}});this.stickerSets.set(e.id,s);const o=document.createDocumentFragment();s.documents.forEach((e,t)=>{const n=l(`<div class="emoji_dropdown_list_item" data-sticker-index="${t}"></div>`);o.appendChild(n)}),t.appendChild(o),i&&this.loadStickersList(t,s),this.loadStickerSetThumb(n,s)}loadStickersList(e,t){if(!e.dataset.loaded){e.dataset.loaded=1;for(const n of e.children){const e=t.documents[n.dataset.stickerIndex];this.loadStickerThumb(n,e)}}}async loadStickerThumb(e,t){const n=await FileApiManager.loadMessageDocumentThumb(t,"m",{cache:!0});e.innerHTML=`<img class="emoji_dropdown_sticker_img" src="${n}">`}async loadStickerSetThumb(e,t){if(!t.set.thumb)return this.loadStickerThumb(e,t.documents[0]);{const n=await FileApiManager.loadStickerSetThumb(t.set,{cache:!0});e.innerHTML=`<img class="emoji_dropdown_sticker_img" src="${n}">`}}setSection(e){if(e===this.section)return;this.section&&this.dom[`nav_${this.section}`].classList.remove("nav_tabs_item-active"),this.section=e,this.dom[`nav_${this.section}`].classList.add("nav_tabs_item-active");const t=420*-["emoji","stickers","gifs"].indexOf(e);this.dom.sections_wrap.style.transform=`translateX(${t}px)`}isShown(){return!this.container.hidden}show(){this.container.hidden=!1,this.button.classList.add("messages_form_emoji_button-active"),document.addEventListener("mousedown",this.onGlobalClick),this.input.focus();const e=this.container.querySelectorAll(".emoji_dropdown_section_content");for(const t of e)t.dispatchEvent(new Event("scroll"))}hide(){this.container.hidden=!0,this.button.classList.remove("messages_form_emoji_button-active"),document.removeEventListener("mousedown",this.onGlobalClick)}bind(e,t){this.button=e,this.input=t,e.addEventListener("mousedown",this.onButtonClick),e.addEventListener("mouseenter",this.onMouseEnter),e.addEventListener("mouseleave",this.onMouseLeave),this.container.addEventListener("mouseenter",this.onMouseEnter),this.container.addEventListener("mouseleave",this.onMouseLeave)}};function Fe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}window.EmojiDropdown=Ne;const Re=new class{constructor(){Fe(this,"onMenuItemClick",e=>{const t=e.currentTarget.dataset.type;if("media"===t||"file"===t){const e="media"===t,n=l(`<input type="file" multiple accept="${e?"image/*, video/*":"*/*"}">`);n.click(),n.onchange=()=>this.onFilesSelected(n.files,e)}}),Fe(this,"onMenuButtonClick",()=>{this.isMenuOpen()||this.showMenu()}),Fe(this,"onMenuMouseEnter",()=>{clearTimeout(this.hideTimeout),this.isMenuOpen()||this.showMenu()}),Fe(this,"onMenuMouseLeave",()=>{this.hideTimeout=setTimeout(()=>{this.isMenuOpen()&&this.hideMenu(),this.hideTimeout=null},500)}),Fe(this,"onGlobalClick",e=>{this.menu.contains(e.target)||this.hideMenu()})}init(){this.menu=l('\n      <div class="mdc-menu mdc-menu-surface messages_form_media_menu" hidden>\n        <ul class="mdc-list" role="menu" aria-hidden="true" aria-orientation="vertical" tabindex="-1">\n          <li class="mdc-list-item messages_form_media_menu_item messages_form_media_menu_item-media" data-type="media" role="menuitem">\n            <span class="mdc-list-item__text">Photo or Video</span>\n          </li>\n          <li class="mdc-list-item messages_form_media_menu_item messages_form_media_menu_item-file" data-type="file" role="menuitem">\n            <span class="mdc-list-item__text">Document</span>\n          </li>\n          <li class="mdc-list-item messages_form_media_menu_item messages_form_media_menu_item-poll" data-type="poll" role="menuitem">\n            <span class="mdc-list-item__text">Poll</span>\n          </li>\n        </ul>\n      </div>\n    ');for(const e of a(".mdc-list",this.menu).children)new Q(e).unbounded=!0,e.addEventListener("click",this.onMenuItemClick)}bind(e){e.parentNode.append(this.menu),e.addEventListener("mousedown",this.onMenuButtonClick),e.addEventListener("mouseenter",this.onMenuMouseEnter),e.addEventListener("mouseleave",this.onMenuMouseLeave),this.menu.addEventListener("mouseenter",this.onMenuMouseEnter),this.menu.addEventListener("mouseleave",this.onMenuMouseLeave),this.menuButton=e}isMenuOpen(){return!this.menu.hidden}showMenu(){this.menu.hidden=!1,this.menuButton.classList.add("messages_form_media_button-active"),document.addEventListener("mousedown",this.onGlobalClick)}hideMenu(){this.menu.hidden=!0,this.menuButton.classList.remove("messages_form_media_button-active"),document.removeEventListener("mousedown",this.onGlobalClick)}onFilesSelected(e,t){if(e.length)if(e.length>1)for(const n of e)Ye.onFileSend(n,t);else Ye.onFileSend(e[0],t)}showFilesUploadPopup(e){let t="";for(const n of e){n.name.split(".").pop();t+=`\n        <div class="messages_upload_popup_files_item">\n          <div class="messages_upload_popup_files_item_thumb"></div>\n          <div class="messages_upload_popup_files_item_name">${n.name}</div>\n          <div class="messages_upload_popup_files_item_size">${n.size}</div>\n        </div>\n      `}l(`\n      <div class="messages_upload_popup">\n        <div class="messages_upload_popup_header">${b.getPlural("messages_send_n_files",e.length)}</div>\n        <button class="messages_upload_popup_send_button">Send</button>\n        <button class="messages_upload_popup_close_button"></button>\n        ${t}\n        <input class="messages_upload_popup_caption_input">\n      </div>\n    `)}};window.FileUploadPopup=Re;
/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
var He={animationend:{cssProperty:"animation",prefixed:"webkitAnimationEnd",standard:"animationend"},animationiteration:{cssProperty:"animation",prefixed:"webkitAnimationIteration",standard:"animationiteration"},animationstart:{cssProperty:"animation",prefixed:"webkitAnimationStart",standard:"animationstart"},transitionend:{cssProperty:"transition",prefixed:"webkitTransitionEnd",standard:"transitionend"}};function Be(e){return Boolean(e.document)&&"function"==typeof e.document.createElement}function Ue(e,t){if(Be(e)&&t in He){var n=e.document.createElement("div"),i=He[t],s=i.standard,o=i.prefixed;return i.cssProperty in n.style?s:o}return t}
/**
 * @license
 * Copyright 2016 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var je={ANIM_CHECKED_INDETERMINATE:"mdc-checkbox--anim-checked-indeterminate",ANIM_CHECKED_UNCHECKED:"mdc-checkbox--anim-checked-unchecked",ANIM_INDETERMINATE_CHECKED:"mdc-checkbox--anim-indeterminate-checked",ANIM_INDETERMINATE_UNCHECKED:"mdc-checkbox--anim-indeterminate-unchecked",ANIM_UNCHECKED_CHECKED:"mdc-checkbox--anim-unchecked-checked",ANIM_UNCHECKED_INDETERMINATE:"mdc-checkbox--anim-unchecked-indeterminate",BACKGROUND:"mdc-checkbox__background",CHECKED:"mdc-checkbox--checked",CHECKMARK:"mdc-checkbox__checkmark",CHECKMARK_PATH:"mdc-checkbox__checkmark-path",DISABLED:"mdc-checkbox--disabled",INDETERMINATE:"mdc-checkbox--indeterminate",MIXEDMARK:"mdc-checkbox__mixedmark",NATIVE_CONTROL:"mdc-checkbox__native-control",ROOT:"mdc-checkbox",SELECTED:"mdc-checkbox--selected",UPGRADED:"mdc-checkbox--upgraded"},Ve={ARIA_CHECKED_ATTR:"aria-checked",ARIA_CHECKED_INDETERMINATE_VALUE:"mixed",NATIVE_CONTROL_SELECTOR:".mdc-checkbox__native-control",TRANSITION_STATE_CHECKED:"checked",TRANSITION_STATE_INDETERMINATE:"indeterminate",TRANSITION_STATE_INIT:"init",TRANSITION_STATE_UNCHECKED:"unchecked"},ze={ANIM_END_LATCH_MS:250},Ge=function(e){function t(n){var i=e.call(this,C({},t.defaultAdapter,n))||this;return i.currentCheckState_=Ve.TRANSITION_STATE_INIT,i.currentAnimationClass_="",i.animEndLatchTimer_=0,i.enableAnimationEndHandler_=!1,i}return E(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return je},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return Ve},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return ze},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},forceLayout:function(){},hasNativeControl:function(){return!1},isAttachedToDOM:function(){return!1},isChecked:function(){return!1},isIndeterminate:function(){return!1},removeClass:function(){},removeNativeControlAttr:function(){},setNativeControlAttr:function(){},setNativeControlDisabled:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.currentCheckState_=this.determineCheckState_(),this.updateAriaChecked_(),this.adapter_.addClass(je.UPGRADED)},t.prototype.destroy=function(){clearTimeout(this.animEndLatchTimer_)},t.prototype.setDisabled=function(e){this.adapter_.setNativeControlDisabled(e),e?this.adapter_.addClass(je.DISABLED):this.adapter_.removeClass(je.DISABLED)},t.prototype.handleAnimationEnd=function(){var e=this;this.enableAnimationEndHandler_&&(clearTimeout(this.animEndLatchTimer_),this.animEndLatchTimer_=setTimeout((function(){e.adapter_.removeClass(e.currentAnimationClass_),e.enableAnimationEndHandler_=!1}),ze.ANIM_END_LATCH_MS))},t.prototype.handleChange=function(){this.transitionCheckState_()},t.prototype.transitionCheckState_=function(){if(this.adapter_.hasNativeControl()){var e=this.currentCheckState_,t=this.determineCheckState_();if(e!==t){this.updateAriaChecked_();var n=Ve.TRANSITION_STATE_UNCHECKED,i=je.SELECTED;t===n?this.adapter_.removeClass(i):this.adapter_.addClass(i),this.currentAnimationClass_.length>0&&(clearTimeout(this.animEndLatchTimer_),this.adapter_.forceLayout(),this.adapter_.removeClass(this.currentAnimationClass_)),this.currentAnimationClass_=this.getTransitionAnimationClass_(e,t),this.currentCheckState_=t,this.adapter_.isAttachedToDOM()&&this.currentAnimationClass_.length>0&&(this.adapter_.addClass(this.currentAnimationClass_),this.enableAnimationEndHandler_=!0)}}},t.prototype.determineCheckState_=function(){var e=Ve.TRANSITION_STATE_INDETERMINATE,t=Ve.TRANSITION_STATE_CHECKED,n=Ve.TRANSITION_STATE_UNCHECKED;return this.adapter_.isIndeterminate()?e:this.adapter_.isChecked()?t:n},t.prototype.getTransitionAnimationClass_=function(e,n){var i=Ve.TRANSITION_STATE_INIT,s=Ve.TRANSITION_STATE_CHECKED,o=Ve.TRANSITION_STATE_UNCHECKED,r=t.cssClasses,a=r.ANIM_UNCHECKED_CHECKED,c=r.ANIM_UNCHECKED_INDETERMINATE,u=r.ANIM_CHECKED_UNCHECKED,d=r.ANIM_CHECKED_INDETERMINATE,l=r.ANIM_INDETERMINATE_CHECKED,_=r.ANIM_INDETERMINATE_UNCHECKED;switch(e){case i:return n===o?"":n===s?l:_;case o:return n===s?a:c;case s:return n===o?u:d;default:return n===s?l:_}},t.prototype.updateAriaChecked_=function(){this.adapter_.isIndeterminate()?this.adapter_.setNativeControlAttr(Ve.ARIA_CHECKED_ATTR,Ve.ARIA_CHECKED_INDETERMINATE_VALUE):this.adapter_.removeNativeControlAttr(Ve.ARIA_CHECKED_ATTR)},t}(S),Ke=["checked","indeterminate"],$e=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ripple_=t.createRipple_(),t}return E(t,e),t.attachTo=function(e){return new t(e)},Object.defineProperty(t.prototype,"ripple",{get:function(){return this.ripple_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"checked",{get:function(){return this.nativeControl_.checked},set:function(e){this.nativeControl_.checked=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"indeterminate",{get:function(){return this.nativeControl_.indeterminate},set:function(e){this.nativeControl_.indeterminate=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return this.nativeControl_.disabled},set:function(e){this.foundation_.setDisabled(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.nativeControl_.value},set:function(e){this.nativeControl_.value=e},enumerable:!0,configurable:!0}),t.prototype.initialSyncWithDOM=function(){var e=this;this.handleChange_=function(){return e.foundation_.handleChange()},this.handleAnimationEnd_=function(){return e.foundation_.handleAnimationEnd()},this.nativeControl_.addEventListener("change",this.handleChange_),this.listen(Ue(window,"animationend"),this.handleAnimationEnd_),this.installPropertyChangeHooks_()},t.prototype.destroy=function(){this.ripple_.destroy(),this.nativeControl_.removeEventListener("change",this.handleChange_),this.unlisten(Ue(window,"animationend"),this.handleAnimationEnd_),this.uninstallPropertyChangeHooks_(),e.prototype.destroy.call(this)},t.prototype.getDefaultFoundation=function(){var e=this;return new Ge({addClass:function(t){return e.root_.classList.add(t)},forceLayout:function(){return e.root_.offsetWidth},hasNativeControl:function(){return!!e.nativeControl_},isAttachedToDOM:function(){return Boolean(e.root_.parentNode)},isChecked:function(){return e.checked},isIndeterminate:function(){return e.indeterminate},removeClass:function(t){return e.root_.classList.remove(t)},removeNativeControlAttr:function(t){return e.nativeControl_.removeAttribute(t)},setNativeControlAttr:function(t,n){return e.nativeControl_.setAttribute(t,n)},setNativeControlDisabled:function(t){return e.nativeControl_.disabled=t}})},t.prototype.createRipple_=function(){var e=this,t=C({},Q.createAdapter(this),{deregisterInteractionHandler:function(t,n){return e.nativeControl_.removeEventListener(t,n,M())},isSurfaceActive:function(){return O(e.nativeControl_,":active")},isUnbounded:function(){return!0},registerInteractionHandler:function(t,n){return e.nativeControl_.addEventListener(t,n,M())}});return new Q(this.root_,new X(t))},t.prototype.installPropertyChangeHooks_=function(){var e=this,t=this.nativeControl_,n=Object.getPrototypeOf(t);Ke.forEach((function(i){var s=Object.getOwnPropertyDescriptor(n,i);if(We(s)){var o=s.get,r={configurable:s.configurable,enumerable:s.enumerable,get:o,set:function(n){s.set.call(t,n),e.foundation_.handleChange()}};Object.defineProperty(t,i,r)}}))},t.prototype.uninstallPropertyChangeHooks_=function(){var e=this.nativeControl_,t=Object.getPrototypeOf(e);Ke.forEach((function(n){var i=Object.getOwnPropertyDescriptor(t,n);We(i)&&Object.defineProperty(e,n,i)}))},Object.defineProperty(t.prototype,"nativeControl_",{get:function(){var e=Ge.strings.NATIVE_CONTROL_SELECTOR,t=this.root_.querySelector(e);if(!t)throw new Error("Checkbox component requires a "+e+" element");return t},enumerable:!0,configurable:!0}),t}(w);function We(e){return!!e&&"function"==typeof e.set}function qe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Xe=new class{constructor(){qe(this,"sharedSteps",{media:30,docs:15,links:15,audio:15}),qe(this,"close",()=>{this.container&&(this.container.hidden=!0,this.peerId=null,document.removeEventListener("keyup",this.onKeyUp))}),qe(this,"onKeyUp",e=>{27!==e.keyCode||De.isOpen()||this.close()}),qe(this,"onScroll",()=>{const e=this.scrollContainer,t=e.scrollTop+e.offsetHeight>e.scrollHeight-150;this.sharedLoading.loading[this.sharedSection]||this.sharedLoading.noMore[this.sharedSection]||!t||(this.sharedLoading.loading[this.sharedSection]=!0,this.loadMoreShared())}),qe(this,"onSharedTabClick",e=>{const t=e.currentTarget.dataset.jsLabel.replace(/^nav_/,"");this.setSharedSection(t)})}show(e){if(this.container=a(".right_sidebar"),this.container.hidden=!1,e===this.peerId)return;this.peerId=e,this.sharedSection=null,this.sharedLoading={loading:{media:!0,docs:!1,links:!1,audio:!1},noMore:{media:!1,docs:!1,links:!1,audio:!1},offsetMsgId:{media:0,docs:0,links:0,audio:0},scrollTop:{media:0,docs:0,links:0,audio:0}};const t=Ae.getPeerById(e),n=Ae.getPeerName(t),i=Ae.getPeerData(t);let s="";"user"===i._&&(s=tt.getUserStatusText(i)),this.container.innerHTML=`\n      <div class="right_sidebar_scroll_wrap">\n        <div class="sidebar_header">\n          <button type="button" class="sidebar_close_button mdc-icon-button"></button>\n          <div class="sidebar_header_title">Info</div>\n          <button type="button" class="sidebar_extra_menu_button mdc-icon-button"></button>\n        </div>\n        <div class="sidebar_user_info">\n          <div class="sidebar_user_photo"></div>\n          <div class="sidebar_user_name">${c(n)}</div>\n          <div class="sidebar_user_desc">${c(s)}</div>\n        </div>\n        <div class="chat_info_desc"></div>\n        <div class="nav_tabs_container chat_info_shared_media_nav">\n          <div class="nav_tabs_item chat_info_shared_media_nav_item" data-js-label="nav_media">\n            <div class="nav_tabs_item_label">Media</div>\n          </div>\n          <div class="nav_tabs_item chat_info_shared_media_nav_item" data-js-label="nav_docs">\n            <div class="nav_tabs_item_label">Docs</div>\n          </div>\n          <div class="nav_tabs_item chat_info_shared_media_nav_item" data-js-label="nav_links">\n            <div class="nav_tabs_item_label">Links</div>\n          </div>\n          <div class="nav_tabs_item chat_info_shared_media_nav_item" data-js-label="nav_audio">\n            <div class="nav_tabs_item_label">Audio</div>\n          </div>\n        </div>\n        <div class="chat_info_shared_wrap">\n          <div class="chat_info_shared chat_info_shared_media"></div>\n          <div class="chat_info_shared chat_info_shared_docs" hidden></div>\n          <div class="chat_info_shared chat_info_shared_links" hidden></div>\n          <div class="chat_info_shared chat_info_shared_audio" hidden></div>\n        </div>\n      </div>\n    `,this.scrollContainer=a(".right_sidebar_scroll_wrap",this.container),this.renderPeerPhoto(t),this.bindListeners(),this.loadPeerFullInfo(i).then(e=>{this.renderDesc(i,e)})}bindListeners(){const e=a(".sidebar_close_button",this.container);e.addEventListener("click",this.close),new Q(e).unbounded=!0,document.addEventListener("keyup",this.onKeyUp);const t=a(".sidebar_extra_menu_button",this.container);new Q(t).unbounded=!0,this.scrollContainer.addEventListener("scroll",this.onScroll),this.sharedTabsDom=d(this.container);for(let e in this.sharedTabsDom)this.sharedTabsDom[e].addEventListener("click",this.onSharedTabClick);this.setSharedSection("media")}getNotificationsCheckboxHtml(){return'\n      <div class="mdc-form-field">\n        <div class="mdc-checkbox">\n          <input type="checkbox" class="mdc-checkbox__native-control" id="checkbox-notifications"/>\n          <div class="mdc-checkbox__background">\n            <svg class="mdc-checkbox__checkmark" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n              <path class="mdc-checkbox__checkmark-path" fill="none" d="M1.73,12.91 8.1,19.28 22.79,4.59"/>\n            </svg>\n            <div class="mdc-checkbox__mixedmark"></div>\n          </div>\n          <div class="mdc-checkbox__ripple"></div>\n        </div>\n      </div>\n    '}renderDesc(e,t){const n=!t.notify_settings.pFlags.mute_until,i={bio:t.about,username:e.username,phone:e.phone?`+${e.phone}`:""};let s="";for(const e in i){const t=i[e];t&&(s+=`\n      <div class="chat_info_desc_row">\n        <div class="chat_info_desc_icon chat_info_desc_icon-${e}"></div>\n        <div class="chat_info_desc_row_block">\n          <div class="chat_info_desc_row_text">${c(t)}</div>\n          <div class="chat_info_desc_row_subtitle">${e}</div>\n        </div>\n      </div>\n    `)}s+=`\n      <div class="chat_info_desc_row">\n        <div class="chat_info_desc_checkbox">${this.getNotificationsCheckboxHtml()}</div>\n        <label for="checkbox-notifications" class="chat_info_desc_row_block">\n          <div class="chat_info_desc_row_text">Notifications</div>\n          <div class="chat_info_desc_row_subtitle">${n?"Enabled":"Disabled"}</div>\n        </label>\n      </div>\n    `,a(".chat_info_desc").innerHTML=s,new $e(document.querySelector(".mdc-checkbox")).checked=n}renderPeerPhoto(e){const t=a(".sidebar_user_photo",this.container);wt.loadPeerPhoto(t,e,!0)}async loadPeerFullInfo(e){return"user"===e._?await Ae.loadUserFull(this.peerId):await Ae.loadChatFull(this.peerId)}async loadMoreShared(){const e=this.sharedSection;let t;try{t=await g.callMethod("messages.search",{peer:Ae.getInputPeerById(this.peerId),filter:Ae.getInputMessagesFilter(e),limit:this.sharedSteps[e],offset_id:this.sharedLoading.offsetMsgId[e]})}finally{this.sharedLoading.loading[e]=!1}if((t.count<this.sharedSteps[e]||t.messages.length<this.sharedSteps[e])&&(this.sharedLoading.noMore[e]=!0,!t.messages.length))return;const n=t.messages;switch(this.sharedLoading.offsetMsgId[e]=n[n.length-1].id,Ae.updateMessages(n),e){case"media":return this.renderSharedMedia(n);case"docs":return this.renderSharedDocs(n);case"links":return this.renderSharedLinks(n)}}renderSharedMedia(e){const t=document.createDocumentFragment();for(const n of e){const e=l(`\n        <div class="chat_info_shared_media_item" data-message-id="${n.id}"></div>\n      `);e.addEventListener("click",tt.onThumbClick),t.append(e),this.loadMediaThumb(n,e)}a(".chat_info_shared_media").append(t)}renderSharedDocs(e){const t=document.createDocumentFragment();for(const n of e){const e=n.media.document,i=Se.getDocumentAttributes(e),s=i.file_name,o=this.getFileExtension(e.mime_type),r=this.getFileIconClass(o),u=this.getFileSizeFormatted(e.size),d=tt.formatMessageDateTime(n.date),_=l(`\n        <div class="chat_info_shared_docs_item" data-message-id="${n.id}">\n          <div class="chat_info_shared_docs_item_icon${r}">${o}</div>\n          <div class="chat_info_shared_docs_item_info">\n            <div class="chat_info_shared_docs_item_name">${c(s)}</div>\n            <div class="chat_info_shared_docs_item_desc">${u} &middot; ${d}</div>\n          </div>\n        </div>\n      `);_.addEventListener("click",tt.onFileClick),t.append(_),"image"===i.type&&this.loadDocThumb(n.media.document,a(".chat_info_shared_docs_item_icon",_))}a(".chat_info_shared_docs").append(t)}renderSharedLinks(e){const t=document.createDocumentFragment();for(const n of e){const e=tt.getMessageMediaThumb(n.media),i=n.media;let s="",o="",r="";if(i&&i.webpage&&"webPageEmpty"!==i.webpage._&&(s=i.webpage.title||i.webpage.site_name||"",o=i.webpage.description||"",r=i.webpage.url),!r&&!(r=this.getUrlFromText(n)))continue;const u=l(`\n        <a class="chat_info_shared_link_item" data-message-id="${n.id}" target="_blank" href="${r}">\n          <div class="chat_info_shared_link_item_image"></div>\n          <div class="chat_info_shared_link_item_info">\n            <div class="chat_info_shared_link_item_title">${c(s)}</div>\n            <div class="chat_info_shared_link_item_desc">${c(o)}</div>\n            <div class="chat_info_shared_link_item_url">${c(r)}</div>\n          </div>\n        </a>\n      `);t.append(u),e&&this.loadLinkThumb(e,a(".chat_info_shared_link_item_image",u))}a(".chat_info_shared_links").append(t)}async loadMediaThumb(e,t){const n=tt.getMessageMediaThumb(e.media),i=Se.choosePhotoSize(n.sizes,"m"),s=await FileApiManager.loadMessagePhoto(n.object,i.type,{cache:!0});t.style.backgroundImage=`url(${s})`}async loadDocThumb(e,t){const n=await FileApiManager.loadMessageDocumentThumb(e,e.type,{cache:!0});t.classList.add("chat_info_shared_docs_item_icon-thumb"),t.style.backgroundImage=`url(${n})`}async loadLinkThumb(e,t){const n=Se.choosePhotoSize(e.sizes,"m"),i=await FileApiManager.loadMessagePhoto(e.object,n.type,{cache:!0});t.style.backgroundImage=`url(${i})`}setSharedSection(e){const t=this.sharedSection;t!==e&&(t&&this.sharedTabsDom[`nav_${t}`].classList.remove("nav_tabs_item-active"),t&&(this.sharedLoading.scrollTop[t]=this.scrollContainer.scrollTop,a(`.chat_info_shared_${t}`).hidden=!0,a(`.chat_info_shared_${e}`).hidden=!1),this.sharedSection=e,this.sharedTabsDom[`nav_${e}`].classList.add("nav_tabs_item-active"),this.scrollContainer.scrollTop=this.sharedLoading.scrollTop[e],this.loadMoreShared())}getFileIconClass(e){const t=" chat_info_shared_docs_item_icon-";switch(e){case"pdf":return`${t}pdf`;case"doc":case"docx":case"xls":case"xlsx":case"ppt":case"pptx":case"odp":case"ods":case"odt":case"rtf":case"txt":case"epub":return`${t}doc`;case"zip":case"7z":case"tar.gz":return`${t}zip`}return""}getFileExtension(e){switch(e){case"image/jpeg":case"image/jpg":case"image/png":case"image/gif":case"image/webp":case"video/mp4":case"video/webm":case"video/mov":case"video/avi":case"video/mkv":case"application/pdf":case"application/json":case"application/zip":case"text/csv":case"text/html":case"multipart/x-zip":return e.split(/[.\-\/]/).pop();case"image/vnd.microsoft.icon":return"ico";case"image/svg+xml":return"svg";case"image/tiff":return"tiff";case"audio/ogg":return"ogg";case"audio/wav":return"wav";case"video/x-ms-wmv":return"wmv";case"video/quicktime":return"mov";case"application/doc":case"application/ms-doc":case"application/msword":return"doc";case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":return"docx";case"application/excel":case"application/vnd.ms-excel":case"application/x-excel":case"application/x-msexcel":return"xls";case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":return"xlsx";case"application/mspowerpoint":case"application/powerpoint":case"application/vnd.ms-powerpoint":case"application/x-mspowerpoint":return"ppt";case"application/vnd.openxmlformats-officedocument.presentationml.presentation":return"pptx";case"application/vnd.oasis.opendocument.presentation":return"odp";case"application/vnd.oasis.opendocument.spreadsheet":return"ods";case"application/vnd.oasis.opendocument.text":return"odt";case"text/rtf":case"application/wps-office.doc":return"rtf";case"text/plain":return"txt";case"application/epub+zip":return"epub";case"application/x-compressed-tar":return"tar.gz";case"application/x-7z-compressed":return"7z"}return""}getFileSizeFormatted(e){const t=0===e?0:Math.floor(Math.log(e)/Math.log(1024));return`${(e/Math.pow(1024,t)).toFixed(1)} ${["B","KB","MB","GB","TB"][t]}`}getUrlFromText(e){for(const t of e.entities)if("messageEntityUrl"===t._)return e.message.substring(t.offset,t.offset+t.length);return""}};function Qe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}window.ChatInfoController=Xe;const Ye=new class{constructor(){Qe(this,"onInput",()=>{const e=this.dom.input;e.style.height="",e.style.height=e.scrollHeight+"px";const t=e.value.trim();this.dom.submit_button.classList.toggle("messages_form_button-send",!!t),this.saveDraft(tt.dialog.peer,t)}),Qe(this,"onSubmit",()=>{const e=this.dom.input,t=e.value.trim();t&&(Ae.sendMessage(tt.dialog.peer,t),e.value="",this.onInput())}),Qe(this,"onKeyDown",e=>{13!==e.keyCode||e.shiftKey||(this.onSubmit(),e.preventDefault())})}init(){this.container=a(".messages_form"),this.dom=d(this.container),this.saveDraft=r((e,t)=>{Ae.saveDraft(e,t)});const e=this.dom.input;e.addEventListener("input",this.onInput),e.addEventListener("change",this.onInput),e.addEventListener("keydown",this.onKeyDown),this.dom.submit_button.addEventListener("click",this.onSubmit),new Q(this.dom.submit_button).unbounded=!0,Ne.init(),Ne.bind(this.dom.emoji_button,e),Re.init(),Re.bind(this.dom.media_button),e.parentNode.appendChild(Ne.container)}onStickerSend(e){const t={_:"inputMediaDocument",id:{_:"inputDocument",id:e.id,access_hash:e.access_hash,file_reference:e.file_reference}};Ae.sendMedia(tt.dialog.peer,t)}async onFileSend(e,t=!1){const n=tt.dialog.peer,i=new AbortController,s=this.buildFileUploadProgressElement(e.name,e.size),o=tt.appendPendingMessage(s);a(".document_icon",s).addEventListener("click",()=>{i.abort(),tt.removePendingMessage(o)});const r=await FileApiManager.uploadFile(e,e.name,{onProgress:t=>{const n=Math.round(t/e.size*100);a(".document_size_percent",s).innerText=`${n}%`,a(".document_icon_progress_path",s).style.strokeDasharray=`${n}, 100`},signal:i.signal});let c;c=t&&e.type.startsWith("image/")?{_:"inputMediaUploadedPhoto",file:r}:{_:"inputMediaUploadedDocument",file:r,mime_type:e.type,attributes:[{_:"documentAttributeFilename",file_name:e.name}]},await Ae.sendMedia(n,c),tt.removePendingMessage(o)}buildFileUploadProgressElement(e,t){return l(`\n      <div class="document">\n        <div class="document_col">\n          <div class="document_icon document_icon-loading">\n            <svg class="document_icon_progress_svg" viewBox="0 0 36 36" xmlns="http://www.w3.org/2000/svg">\n              <path class="document_icon_progress_path" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"/>\n            </svg>\n          </div>\n        </div>\n        <div class="document_col">\n          <div class="document_filename">${c(e)}</div>\n          <div class="document_size"><span class="document_size_percent">0%</span> &middot; ${Xe.getFileSizeFormatted(t)}</div>        \n        </div>\n      </div>\n    `)}};function Je(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}window.MessagesFormController=Ye;const Ze=new class{constructor(){Je(this,"close",()=>{this.container&&(this.container.hidden=!0,this.peerId=null)}),Je(this,"onInput",()=>{const e=this.input.value.trim();e?this.loadResults(e):this.listWrap.innerHTML=""})}show(e){if(this.container=a(".right_sidebar"),this.container.hidden=!1,e===this.peerId)return;this.peerId=e,this.container.innerHTML='\n      <div class="sidebar_header">\n        <button type="button" class="sidebar_close_button mdc-icon-button"></button>\n        <input class="sidebar_search messages_search_input" type="text" placeholder="Start typing...">\n      </div>\n      <div class="messages_search_results_list"></div>\n    ',a(".sidebar_close_button",this.container).addEventListener("click",this.close),this.input=a(".messages_search_input",this.container),this.input.addEventListener("input",r(this.onInput,100)),this.container.addEventListener("transitionend",()=>{this.input.focus()},{once:!0}),this.listWrap=a(".messages_search_results_list",this.container)}async loadResults(e){const t=await ApiClient.callMethod("messages.search",{peer:Ae.getInputPeerById(this.peerId),q:e,filter:{_:"inputMessagesFilterEmpty"},offset_id:0,limit:30});Ae.updateMessages(t.messages),Ae.updateChats(t.chats),Ae.updateUsers(t.users);const n=t.count||t.messages.length;this.listWrap.innerHTML="",this.renderResultsHeader(n),this.renderResults(t.messages)}renderResultsHeader(e){const t=b.getPlural("messages_search_n_results_found",e);this.listWrap.insertAdjacentHTML("afterbegin",`\n      <div class="messages_search_results_header">${t}</div>\n    `)}renderResults(e){const t=document.createDocumentFragment();for(const n of e){const e=n.from_id?Ae.getPeerById(n.from_id):Ae.getMessagePeer(n),i=Ae.getPeerName(e),s=wt.formatMessageDate(n),o=wt.getMessagePreview(n),r=l(`\n        <div class="messages_search_results_item">\n          <div class="messages_search_results_item_content mdc-ripple-surface">\n            <div class="messages_search_results_item_photo"></div>\n            <div class="messages_search_results_item_text">\n              <div class="messages_search_results_item_text_row">\n                <div class="messages_search_results_item_title">${c(i)}</div>\n                <div class="messages_search_results_item_date">${s}</div>\n              </div>\n              <div class="messages_search_results_item_text_row">\n                <div class="messages_search_results_item_message">${o}</div>\n              </div>\n            </div>      \n          </div>\n        </div>\n      `);this.loadMessagePeerPhoto(r,e),t.append(r)}a(".messages_search_results_list",this.container).append(t)}loadMessagePeerPhoto(e,t){const n=a(".messages_search_results_item_photo",e);wt.loadPeerPhoto(n,t)}};function et(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}window.MessagesSearchController=Ze;const tt=new class{constructor(){et(this,"dialog",null),et(this,"chatId",null),et(this,"messageElements",new Map),et(this,"offsetMsgId",0),et(this,"onChatMessagesUpdate",e=>{const{dialog:t,messages:n}=e.detail;t===this.dialog&&this.renderMessages(n)}),et(this,"onNewMessage",e=>{const{dialog:t,message:n}=e.detail;t===this.dialog&&this.renderNewMessage(n)}),et(this,"onEditMessage",e=>{const{dialog:t,message:n}=e.detail;if(t===this.dialog){let e=this.messageElements.get(n.id);e&&this.renderMessageContent(e,n)}}),et(this,"onDeleteMessage",e=>{const{dialog:t,message:n}=e.detail;if(t===this.dialog){const e=this.messageElements.get(n.id);e&&(e.remove(),this.messageElements.delete(n.id))}}),et(this,"onUserStatusUpdate",e=>{const{user:t}=e.detail;if(this.chatId===t.id){const e=a(".messages_header_peer_status",this.header);e.innerText=this.getUserStatusText(t),e.classList.toggle("messages_header_peer_status-online","userStatusOnline"===t.status._)}}),et(this,"onScroll",()=>{const e=this.scrollContainer;this.scrolling=e.scrollTop<e.scrollHeight-e.offsetHeight,!this.loading&&!this.noMore&&e.scrollTop<150&&this.loadMore()}),et(this,"onThumbClick",e=>{const t=e.currentTarget,n=+t.dataset.messageId||+t.closest(".messages_item").dataset.id,i=Ae.messages.get(n),s=this.getMessageMediaThumb(i.media);"photo"===s.type?De.showPhoto(s.object,t):"video"===s.type?De.showVideo(s.object,t):"gif"===s.type&&De.showGif(s.object,t)}),et(this,"onFileClick",e=>{const t=e.currentTarget;if(t.dataset.loading)return;t.dataset.loading=1;const n=+t.dataset.messageId||+t.closest(".messages_item").dataset.id,i=Ae.messages.get(n);if(!i)return;const s=i.media.document,o=new AbortController,r=()=>{o.abort(),c()},c=(e=null)=>{if(delete t.dataset.loading,t.removeEventListener("click",r),t.classList.remove("document_icon-loading"),t.innerHTML="",e){const t=Se.getDocumentAttributes(s),n=window.document.createElement("a");n.href=e,n.download=t.file_name,n.click()}};let u;t.classList.contains("document_icon")&&(t.classList.add("document_icon-loading"),t.innerHTML='\n        <svg class="document_icon_progress_svg" viewBox="0 0 36 36" xmlns="http://www.w3.org/2000/svg">\n          <path class="document_icon_progress_path" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"/>\n        </svg>\n      ',t.addEventListener("click",r),u=a(".document_icon_progress_path",t)),FileApiManager.loadMessageDocument(s,{onProgress:e=>{const t=Math.round(e/s.size*100);u&&(u.style.strokeDasharray=`${t}, 100`)},signal:o.signal}).then(c).catch(e=>{console.error(e),c()})})}init(){this.header=a(".messages_header"),this.footer=a(".messages_footer"),this.scrollContainer=a(".messages_scroll"),this.container=a(".messages_list"),this.loader=l('<div class="lds-ring"><div></div><div></div><div></div><div></div></div>'),this.scrollContainer.addEventListener("scroll",this.onScroll),this.initPlaceholder(),this.initBackground(),Ye.init(),Ae.emitter.on("chatMessagesUpdate",this.onChatMessagesUpdate),Ae.emitter.on("chatNewMessage",this.onNewMessage),Ae.emitter.on("chatEditMessage",this.onEditMessage),Ae.emitter.on("chatDeleteMessage",this.onDeleteMessage),Ae.emitter.on("userStatusUpdate",this.onUserStatusUpdate)}setChat(e){if(e===this.dialog)return void this.scrollToBottom();this.dialog&&this.exitChat(),this.dialog=e,this.chatId=Ae.getPeerId(e.peer),this.placeholder.remove(),this.showHeader(e),this.footer.hidden=!this.canSendMessage(e),this.container.append(this.loader),this.loadMore();const t=wt.chatElements.get(this.chatId);t&&t.classList.add("chats_item-selected")}exitChat(){const e=wt.chatElements.get(this.chatId);e&&e.classList.remove("chats_item-selected"),Xe.close(),Ze.close(),this.header.hidden=!0,this.footer.hidden=!0,this.messageElements.clear(),this.dialog=null,this.chatId=null,this.lastMsgId=null,this.offsetMsgId=null,this.container.innerHTML="",this.loading=!1,this.noMore=!1,this.scrolling=!1,De.abort()}initPlaceholder(){this.placeholder=l('\n      <div class="messages_placeholder">\n        <div class="messages_placeholder_title">Open chat<br>or create a new one</div>\n        <div class="messages_placeholder_actions">\n          <button class="messages_placeholder_action messages_placeholder_action-private mdc-icon-button"><div class="messages_placeholder_action_label">Private</div></button>\n          <button class="messages_placeholder_action messages_placeholder_action-group mdc-icon-button"><div class="messages_placeholder_action_label">Group</div></button>\n          <button class="messages_placeholder_action messages_placeholder_action-channel mdc-icon-button"><div class="messages_placeholder_action_label">Channel</div></button>  \n        </div>\n      </div>\n    '),this.container.append(this.placeholder)}showHeader(e){const t=e.peer,n=(Ae.getPeerId(e.peer),Ae.getPeerName(t));let i="",s="";if("peerUser"===t._){const e=Ae.getPeerData(t);i=this.getUserStatusText(e),e.status&&"userStatusOnline"===e.status._&&(s="messages_header_peer_status-online")}this.header.innerHTML=`\n      <div class="messages_header_peer">\n        <div class="messages_header_peer_photo"></div>\n        <div class="messages_header_peer_description">\n          <div class="messages_header_peer_name">${n}</div>\n          <div class="messages_header_peer_status ${s}">${i}</div>\n        </div>\n      </div>\n      <div class="messages_header_actions">\n        <button class="messages_header_action_search mdc-icon-button"></button>\n        <button class="messages_header_action_more mdc-icon-button"></button>\n      </div>\n    `,this.header.hidden=!1,a(".messages_header_peer").addEventListener("click",()=>{Ze.close(),Xe.show(this.chatId)});const o=a(".messages_header_peer_photo",this.header);if(wt.loadPeerPhoto(o,e.peer),"peerChannel"===t._||"peerChat"===t._){const e=t.channel_id||t.chat_id;Ae.loadChatFull(e).then(t=>{let n="";t.participants_count?n=Ae.isMegagroup(e)?`${this.formatCount(t.participants_count)} members, ${this.formatCount(t.online_count)} online`:`${this.formatCount(t.participants_count)} followers`:t.participants.participants&&(n=`${this.formatCount(t.participants.participants.length)} members`),a(".messages_header_peer_status",this.header).innerText=n})}Array.from(a(".messages_header_actions",this.header).children).forEach(e=>{new Q(e).unbounded=!0}),a(".messages_header_action_search",this.header).addEventListener("click",()=>{Xe.close(),Ze.show(this.chatId)})}loadMore(){this.loading=!0,Ae.loadChatMessages(this.dialog,this.offsetMsgId,30).then(e=>{e.length||(this.noMore=!0)}).catch(e=>{const t="An error occurred"+(e.error_message?": "+e.error_message:"");App.alert(t)}).finally(()=>{this.loading=!1})}canSendMessage(e){const t=Ae.getPeerData(e.peer);return!!t&&("user"===t._||"chat"===t._||"channel"===t._&&(t.pFlags.creator||t.pFlags.megagroup))}scrollToBottom(){this.scrollContainer.scrollTop=this.scrollContainer.scrollHeight}renderMessages(e){if(this.loader.remove(),!e.length)return;const t=this.scrollContainer.scrollHeight;if(this.lastMsgId){const t=document.createDocumentFragment();for(let n=0;e[n].id>this.lastMsgId;n++){const i=e[n],s=e[n-1],o=e[n+1],r=i.from_id&&s&&s.from_id===i.from_id,a=i.from_id&&o&&o.from_id===i.from_id,c=this.buildMessageEl(i,{stickToNext:r,stickToPrev:a});t.append(c)}this.container.prepend(t)}let n=!1;const i=document.createDocumentFragment();e.forEach((t,s)=>{if(this.offsetMsgId&&t.id>=this.offsetMsgId)return;const o=e[s-1],r=e[s+1];let a=t.from_id&&o&&o.from_id===t.from_id,c=t.from_id&&r&&r.from_id===t.from_id;const u=new Date(1e3*t.date).setHours(0,0,0,0)/1e3;let d="";if((!r||r.date<u)&&(d=this.buildDateMessageEl(t.date)),(!o||o.date>u+86400)&&(a=!1),!n){if(o&&!this.compareMessagesDate(t,o)){const e=this.container.lastElementChild;e.classList.contains("messages_item-type-service")&&e.remove()}n=!0}const l=this.buildMessageEl(t,{stickToNext:a,stickToPrev:c});i.append(l,d)}),this.container.append(i),this.lastMsgId=e[0].id,this.offsetMsgId=e[e.length-1].id,this.scrolling?this.scrollContainer.scrollTop=this.scrollContainer.scrollHeight-t:this.scrollContainer.scrollHeight<=this.scrollContainer.offsetHeight?this.loadMore():this.scrollToBottom(),this.dialog.unread_count&&Ae.readHistory(this.dialog,this.lastMsgId)}renderNewMessage(e){}buildMessageEl(e,t){const n=document.createElement("div");return"message"===e._?(n.className=this.getClasses({messages_item:!0,"messages_item-out":e.pFlags.out,"messages_item-stick-to-next":t.stickToNext,"messages_item-stick-to-prev":t.stickToPrev}),this.renderMessageContent(n,e,t)):"messageService"===e._&&(n.className="messages_item-type-service",n.innerText=this.getServiceMessageText(e)),n.dataset.id=e.id,this.messageElements.set(e.id,n),n}appendPendingMessage(e){const t=l('<div class="messages_item messages_item-out messages_item-stick-to-next messages_item-stick-to-prev"></div>');return t.append(e),a(".messages_pending_list").appendChild(t),this.scrollToBottom(),t}removePendingMessage(e){e.remove()}getClasses(e){let t="";for(const[n,i]of Object.entries(e))i&&(t+=" "+n);return t}renderMessageContent(e,t,n={}){const i=n.stickToPrev?"":this.formatAuthorName(t),s=this.getMessageMediaThumb(t.media);if(e.innerHTML=`\n      <div class="messages_item_content">\n        ${i}\n        ${this.formatMessageContent(t,s)}\n        <div class="messages_item_date" title="${this.formatMessageDate(t.date)}">${this.formatMessageTime(t.date)}</div>\n      </div>\n    `,s)this.loadMessageMediaThumb(e,s);else if(t.media&&t.media.document){const t=a(".document_icon",e);t&&t.addEventListener("click",this.onFileClick)}}formatAuthorName(e){if(e.from_id&&"peerUser"!==this.dialog.peer._){const t=e.from_id;return`<a class="messages_item_author" href="#user/${t}">${c(Ae.getPeerName({_:"peerUser",user_id:t}))}</a>`}return""}getMessageMediaThumb(e){if(e)switch(e._){case"messageMediaPhoto":const t=e.photo;return{type:"photo",object:t,sizes:t.sizes};case"messageMediaDocument":{const t=e.document,n=Se.getDocumentAttributes(t);if(["video","gif","sticker"].includes(n.type))return{type:n.type,object:t,sizes:t.thumbs}}break;case"messageMediaWebPage":if("photo"!==e.webpage.type&&e.webpage.document){const t=e.webpage.document;if("video"===e.webpage.type||"gif"===e.webpage.type)return{type:e.webpage.type,object:t,sizes:t.thumbs};{const e=Se.getDocumentAttributes(t);if("video"===e.type||"gif"===e.type)return{type:e.type,object:t,sizes:t.thumbs}}}if(e.webpage.photo){const t=e.webpage.photo;return{type:"photo",object:t,sizes:t.sizes}}}}getThumbWidthHeight(e){let t=200,n=Math.round(t*(e.w/e.h));return n>400&&(n=400,t=Math.round(n/(e.w/e.h))),[n,t]}async loadMessageMediaThumb(e,t){let n=a(".messages_item_media_thumb",e);if(!n)return;n.addEventListener("click",this.onThumbClick);const i=t.sizes;if(Se.choosePhotoSize(i,"i")){const e=Se.getPhotoStrippedSize(i);n.innerHTML=`<img class="messages_item_media_thumb_image messages_item_media_thumb_image-blurred" src="${e}">`}try{const e=Se.choosePhotoSize(i,"m");let s;s=Se.isCachedPhotoSize(e)?Se.getCachedPhotoSize(e):"document"===t.object._?await FileApiManager.loadMessageDocumentThumb(t.object,e.type,{cache:!0}):await FileApiManager.loadMessagePhoto(t.object,e.type,{cache:!0}),n.innerHTML=`<img class="messages_item_media_thumb_image" src="${s}">`}catch(e){console.log("thumb load error",e)}}formatMessageContent(e,t){const n=e.media,i=this.formatText(e);if(!n)return i;switch(n._){case"messageMediaPhoto":return this.formatThumb(t,i);case"messageMediaDocument":return this.formatDocument(n,t,i);case"messageMediaWebPage":return i+this.formatWebPage(n,t,i);case"messageMediaPoll":return i+"Poll";case"messageMediaGeo":return i+"Geo";case"messageMediaGeoLive":return i+"Live Geo";case"messageMediaContact":return i+"Contact";case"messageMediaUnsupported":return"Message unsupported";default:return i+"["+n._+"]"}}formatDocument(e,t,n){if(t)return this.formatThumb(t,n);const i=Se.getDocumentAttributes(e.document);switch(i.type){case"video":return"[video]";case"gif":return"[gif]";case"sticker":return"[sticker]"}return`\n      ${n}\n      <div class="document">\n        <div class="document_col">\n          <div class="document_icon"></div>\n        </div>\n        <div class="document_col">\n          <div class="document_filename">${c(i.file_name)}</div>\n          <div class="document_size">${this.formatDocSize(e.document.size)}</div>        \n        </div>      \n      </div>\n    `}formatDocSize(e){if(e){if(e<1024)return"1 KB";if(e<1048576)return Math.floor(e/1024)+" KB";if(e<1073741824)return Math.floor(e/1048576)+" MB"}return""}formatWebPage(e,t){const n=e.webpage;return"webPage"===n._?`\n        \x3c!--a href="${encodeURI(n.url)}" target="_blank">${n.display_url}</a--\x3e\n        <div class="webpage">${this.formatWebpageContent(n,t)}</div>\n      `:"webPagePending"===n._?'<div class="webpage_placeholder">Content is loading...</div>':'<div class="webpage_placeholder">Content not available</div>'}formatWebpageContent(e,t){const n=this.formatThumb(t);switch(e.type){case"telegram_message":case"article":return`\n          ${n}\n          <a class="wepbage_site_name" href="${encodeURI(e.url)}" target="_blank">${c(e.site_name)}</a>\n          <div class="wepbage_title">${c(e.title||"")}</div>\n          <div class="webpage_description">${this.replaceLineBreaks(c(e.description))}</div>\n        `}return n||"["+e.type+"]"}replaceLineBreaks(e=""){return e.replace(/\n/g,"<br>")}formatText(e){const t=e.message;let n="",i="";if(e.entities){let i=0;for(const s of e.entities){n+=c(t.substring(i,s.offset)),i=s.offset+s.length;const e=c(t.substr(s.offset,s.length));n+=this.processEntity(e,s)}n+=c(t.substring(i))}else n=c(t);if(n){if((n=this.replaceLineBreaks(n)).length<=12&&!e.media){const e=function(e){return e.match(xe)}(n);e&&e.length<=3&&e.join("").length===n.length&&(i+=" messages_item_text_emoji_big")}n=`<span class="messages_item_text ${i}">${n}</span>`}return n}processEntity(e,t){switch(t._){case"messageEntityUrl":return`<a href="${/^https?:\/\//.test(e)?e:"http://"+e}" target="_blank" rel="noopener" data-entity="url">${e}</a>`;case"messageEntityTextUrl":return`<a href="${t.url}" target="_blank" rel="noopener" data-entity="text_url">${e}</a>`;case"messageEntityBold":return`<b>${e}</b>`;case"messageEntityItalic":return`<i>${e}</i>`;case"messageEntityUnderline":return`<u>${e}</u>`;case"messageEntityStrike":return`<s>${e}</s>`;case"messageEntityCode":return`<code>${e}</code>`;case"messageEntityPre":return`<pre>${e}</pre>`;case"textEntityTypePreCode":return`<pre><code>${e}</code></pre>`;case"messageEntityMention":return`<a href="${e}" data-entity="mention">${e}</a>`;case"messageEntityMentionName":return`<a href="#user/${t.user_id}" data-entity="mention">${e}</a>`;case"messageEntityHashtag":return`<a href="${e}" data-entity="hashtag">${e}</a>`;case"messageEntityBotCommand":return`<a data-entity="bot_command">${e}</a>`;case"messageEntityEmail":return`<a href="mailto:${e}" data-entity="email_address">${e}</a>`;case"messageEntityPhone":return`<a href="tel:${e}" data-entity="phone_number">${e}</a>`;default:return e}}formatThumb(e,t){let n,i,s="";if(e){const o=Se.choosePhotoSize(e.sizes);[n,i]=this.getThumbWidthHeight(o),t&&t.length>100&&n<300&&(n=300),s+=`<div class="messages_item_media_thumb messages_item_media_thumb-${e.type}" style="width:${n}px;height:${i}px;"></div>`}if(t){s+=`<div class="messages_item_media_caption" style="${n?`width:${n}px;`:""}">${t}</div>`}return s}formatMessageTime(e){const t=new Date(1e3*e);return t.getHours()+":"+t.getMinutes().toString().padStart(2,"0")}formatMessageDate(e){return new Date(1e3*e).toLocaleString().replace(/\//g,".")}compareMessagesDate(e,t){const n=new Date(1e3*e.date),i=new Date(1e3*t.date);return n.toDateString()!==i.toDateString()?e.date>t.date?1:-1:0}formatMessageDateFull(e){const t=(new Date).setHours(0,0,0,0)/1e3;let n;if(e>t)n="Today";else if(e>t-86400)n="Yesterday";else{const t=new Date(1e3*e);n=["January","February","March","April","May","June","July","August","September","October","November","December"][t.getMonth()]+" "+t.getDate()}return n}formatMessageDateTime(e){return`${this.formatMessageDateFull(e)} at ${this.formatMessageTime(e)}`}buildDateMessageEl(e){return l(`\n      <div class="messages_item-type-service messages_item-type-date">${this.formatMessageDateFull(e)}</div>\n    `)}formatCount(e){let t="";do{let n=(e%1e3).toString();e>1e3&&(n=n.padStart(3,"0")),t=n+" "+t,e=Math.floor(e/1e3)}while(e);return t.trim()}getServiceMessageText(e){switch(e.action._){case"messageActionChatCreate":return"Chat created";case"messageActionChatEditTitle":return"Chat name changed";case"messageActionChatEditPhoto":return"Chat photo changed";case"messageActionChatDeletePhoto":return"Chat photo deleted";case"messageActionChatAddUser":return"New member in the group";case"messageActionChatDeleteUser":return"User left the group.";case"messageActionChatJoinedByLink":return"A user joined the chat via an invite link";case"messageActionChannelCreate":return"The channel was created";case"messageActionChatMigrateTo":case"messageActionChannelMigrateFrom":return"Chat was upgraded to supergroup";case"messageActionPinMessage":return"A message was pinned";case"messageActionHistoryClear":return"Chat history was cleared";case"messageActionGameScore":return"Someone scored in a game";case"messageActionPaymentSent":return"A payment was sent";case"messageActionPhoneCall":return"A phone call";case"messageActionScreenshotTaken":return"A screenshot was taken";case"messageActionContactSignUp":return"A contact just signed up to telegram"}return""}getUserStatusText(e){if(e.pFlags.bot)return"bot";if(e.status)switch(e.status._){case"userStatusOnline":return"online";case"userStatusOffline":return"offline";case"userStatusRecently":return"last seen recently";case"userStatusLastWeek":return"last seen last week";case"userStatusLastMonth":return"last seen last month"}return"last seen a long time ago"}initBackground(){const e=document.createElement("img");e.src="bg.jpg",e.onload=()=>{const t=document.createElement("canvas"),n=e.width/e.height;screen.width>screen.height?(t.width=screen.width,t.height=screen.width/n):(t.width=screen.height*n,t.height=screen.height);const i=t.getContext("2d");i.filter="blur(10px)",i.drawImage(e,0,0,t.width,t.height),t.toBlob(e=>{const t=URL.createObjectURL(e);a(".messages_container").style.backgroundImage=`url(${t})`})}}};window.MessagesController=tt;
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
var nt={LIST_ITEM_ACTIVATED_CLASS:"mdc-list-item--activated",LIST_ITEM_CLASS:"mdc-list-item",LIST_ITEM_DISABLED_CLASS:"mdc-list-item--disabled",LIST_ITEM_SELECTED_CLASS:"mdc-list-item--selected",ROOT:"mdc-list"},it={ACTION_EVENT:"MDCList:action",ARIA_CHECKED:"aria-checked",ARIA_CHECKED_CHECKBOX_SELECTOR:'[role="checkbox"][aria-checked="true"]',ARIA_CHECKED_RADIO_SELECTOR:'[role="radio"][aria-checked="true"]',ARIA_CURRENT:"aria-current",ARIA_DISABLED:"aria-disabled",ARIA_ORIENTATION:"aria-orientation",ARIA_ORIENTATION_HORIZONTAL:"horizontal",ARIA_ROLE_CHECKBOX_SELECTOR:'[role="checkbox"]',ARIA_SELECTED:"aria-selected",CHECKBOX_RADIO_SELECTOR:'input[type="checkbox"], input[type="radio"]',CHECKBOX_SELECTOR:'input[type="checkbox"]',CHILD_ELEMENTS_TO_TOGGLE_TABINDEX:"\n    ."+nt.LIST_ITEM_CLASS+" button:not(:disabled),\n    ."+nt.LIST_ITEM_CLASS+" a\n  ",FOCUSABLE_CHILD_ELEMENTS:"\n    ."+nt.LIST_ITEM_CLASS+" button:not(:disabled),\n    ."+nt.LIST_ITEM_CLASS+" a,\n    ."+nt.LIST_ITEM_CLASS+' input[type="radio"]:not(:disabled),\n    .'+nt.LIST_ITEM_CLASS+' input[type="checkbox"]:not(:disabled)\n  ',RADIO_SELECTOR:'input[type="radio"]'},st={UNSET_INDEX:-1},ot=["input","button","textarea","select"];var rt,at,ct=function(e){function t(n){var i=e.call(this,C({},t.defaultAdapter,n))||this;return i.wrapFocus_=!1,i.isVertical_=!0,i.isSingleSelectionList_=!1,i.selectedIndex_=st.UNSET_INDEX,i.focusedItemIndex_=st.UNSET_INDEX,i.useActivatedClass_=!1,i.ariaCurrentAttrValue_=null,i.isCheckboxList_=!1,i.isRadioList_=!1,i}return E(t,e),Object.defineProperty(t,"strings",{get:function(){return it},enumerable:!0,configurable:!0}),Object.defineProperty(t,"cssClasses",{get:function(){return nt},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return st},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClassForElementIndex:function(){},focusItemAtIndex:function(){},getAttributeForElementIndex:function(){return null},getFocusedElementIndex:function(){return 0},getListItemCount:function(){return 0},hasCheckboxAtIndex:function(){return!1},hasRadioAtIndex:function(){return!1},isCheckboxCheckedAtIndex:function(){return!1},isFocusInsideList:function(){return!1},isRootFocused:function(){return!1},listItemAtIndexHasClass:function(){return!1},notifyAction:function(){},removeClassForElementIndex:function(){},setAttributeForElementIndex:function(){},setCheckedCheckboxOrRadioAtIndex:function(){},setTabIndexForListItemChildren:function(){}}},enumerable:!0,configurable:!0}),t.prototype.layout=function(){0!==this.adapter_.getListItemCount()&&(this.adapter_.hasCheckboxAtIndex(0)?this.isCheckboxList_=!0:this.adapter_.hasRadioAtIndex(0)&&(this.isRadioList_=!0))},t.prototype.setWrapFocus=function(e){this.wrapFocus_=e},t.prototype.setVerticalOrientation=function(e){this.isVertical_=e},t.prototype.setSingleSelection=function(e){this.isSingleSelectionList_=e},t.prototype.setUseActivatedClass=function(e){this.useActivatedClass_=e},t.prototype.getSelectedIndex=function(){return this.selectedIndex_},t.prototype.setSelectedIndex=function(e){this.isIndexValid_(e)&&(this.isCheckboxList_?this.setCheckboxAtIndex_(e):this.isRadioList_?this.setRadioAtIndex_(e):this.setSingleSelectionAtIndex_(e))},t.prototype.handleFocusIn=function(e,t){t>=0&&this.adapter_.setTabIndexForListItemChildren(t,"0")},t.prototype.handleFocusOut=function(e,t){var n=this;t>=0&&this.adapter_.setTabIndexForListItemChildren(t,"-1"),setTimeout((function(){n.adapter_.isFocusInsideList()||n.setTabindexToFirstSelectedItem_()}),0)},t.prototype.handleKeydown=function(e,t,n){var i="ArrowLeft"===e.key||37===e.keyCode,s="ArrowUp"===e.key||38===e.keyCode,o="ArrowRight"===e.key||39===e.keyCode,r="ArrowDown"===e.key||40===e.keyCode,a="Home"===e.key||36===e.keyCode,c="End"===e.key||35===e.keyCode,u="Enter"===e.key||13===e.keyCode,d="Space"===e.key||32===e.keyCode;if(this.adapter_.isRootFocused())s||c?(e.preventDefault(),this.focusLastElement()):(r||a)&&(e.preventDefault(),this.focusFirstElement());else{var l=this.adapter_.getFocusedElementIndex();if(!(-1===l&&(l=n)<0)){var _;if(this.isVertical_&&r||!this.isVertical_&&o)this.preventDefaultEvent_(e),_=this.focusNextElement(l);else if(this.isVertical_&&s||!this.isVertical_&&i)this.preventDefaultEvent_(e),_=this.focusPrevElement(l);else if(a)this.preventDefaultEvent_(e),_=this.focusFirstElement();else if(c)this.preventDefaultEvent_(e),_=this.focusLastElement();else if((u||d)&&t){var h=e.target;if(h&&"A"===h.tagName&&u)return;this.preventDefaultEvent_(e),this.isSelectableList_()&&this.setSelectedIndexOnAction_(l),this.adapter_.notifyAction(l)}this.focusedItemIndex_=l,void 0!==_&&(this.setTabindexAtIndex_(_),this.focusedItemIndex_=_)}}},t.prototype.handleClick=function(e,t){e!==st.UNSET_INDEX&&(this.isSelectableList_()&&this.setSelectedIndexOnAction_(e,t),this.adapter_.notifyAction(e),this.setTabindexAtIndex_(e),this.focusedItemIndex_=e)},t.prototype.focusNextElement=function(e){var t=e+1;if(t>=this.adapter_.getListItemCount()){if(!this.wrapFocus_)return e;t=0}return this.adapter_.focusItemAtIndex(t),t},t.prototype.focusPrevElement=function(e){var t=e-1;if(t<0){if(!this.wrapFocus_)return e;t=this.adapter_.getListItemCount()-1}return this.adapter_.focusItemAtIndex(t),t},t.prototype.focusFirstElement=function(){return this.adapter_.focusItemAtIndex(0),0},t.prototype.focusLastElement=function(){var e=this.adapter_.getListItemCount()-1;return this.adapter_.focusItemAtIndex(e),e},t.prototype.setEnabled=function(e,t){this.isIndexValid_(e)&&(t?(this.adapter_.removeClassForElementIndex(e,nt.LIST_ITEM_DISABLED_CLASS),this.adapter_.setAttributeForElementIndex(e,it.ARIA_DISABLED,"false")):(this.adapter_.addClassForElementIndex(e,nt.LIST_ITEM_DISABLED_CLASS),this.adapter_.setAttributeForElementIndex(e,it.ARIA_DISABLED,"true")))},t.prototype.preventDefaultEvent_=function(e){var t=(""+e.target.tagName).toLowerCase();-1===ot.indexOf(t)&&e.preventDefault()},t.prototype.setSingleSelectionAtIndex_=function(e){if(this.selectedIndex_!==e){var t=nt.LIST_ITEM_SELECTED_CLASS;this.useActivatedClass_&&(t=nt.LIST_ITEM_ACTIVATED_CLASS),this.selectedIndex_!==st.UNSET_INDEX&&this.adapter_.removeClassForElementIndex(this.selectedIndex_,t),this.adapter_.addClassForElementIndex(e,t),this.setAriaForSingleSelectionAtIndex_(e),this.selectedIndex_=e}},t.prototype.setAriaForSingleSelectionAtIndex_=function(e){this.selectedIndex_===st.UNSET_INDEX&&(this.ariaCurrentAttrValue_=this.adapter_.getAttributeForElementIndex(e,it.ARIA_CURRENT));var t=null!==this.ariaCurrentAttrValue_,n=t?it.ARIA_CURRENT:it.ARIA_SELECTED;this.selectedIndex_!==st.UNSET_INDEX&&this.adapter_.setAttributeForElementIndex(this.selectedIndex_,n,"false");var i=t?this.ariaCurrentAttrValue_:"true";this.adapter_.setAttributeForElementIndex(e,n,i)},t.prototype.setRadioAtIndex_=function(e){this.adapter_.setCheckedCheckboxOrRadioAtIndex(e,!0),this.selectedIndex_!==st.UNSET_INDEX&&this.adapter_.setAttributeForElementIndex(this.selectedIndex_,it.ARIA_CHECKED,"false"),this.adapter_.setAttributeForElementIndex(e,it.ARIA_CHECKED,"true"),this.selectedIndex_=e},t.prototype.setCheckboxAtIndex_=function(e){for(var t=0;t<this.adapter_.getListItemCount();t++){var n=!1;e.indexOf(t)>=0&&(n=!0),this.adapter_.setCheckedCheckboxOrRadioAtIndex(t,n),this.adapter_.setAttributeForElementIndex(t,it.ARIA_CHECKED,n?"true":"false")}this.selectedIndex_=e},t.prototype.setTabindexAtIndex_=function(e){this.focusedItemIndex_===st.UNSET_INDEX&&0!==e?this.adapter_.setAttributeForElementIndex(0,"tabindex","-1"):this.focusedItemIndex_>=0&&this.focusedItemIndex_!==e&&this.adapter_.setAttributeForElementIndex(this.focusedItemIndex_,"tabindex","-1"),this.adapter_.setAttributeForElementIndex(e,"tabindex","0")},t.prototype.isSelectableList_=function(){return this.isSingleSelectionList_||this.isCheckboxList_||this.isRadioList_},t.prototype.setTabindexToFirstSelectedItem_=function(){var e=0;this.isSelectableList_()&&("number"==typeof this.selectedIndex_&&this.selectedIndex_!==st.UNSET_INDEX?e=this.selectedIndex_:this.selectedIndex_ instanceof Array&&this.selectedIndex_.length>0&&(e=this.selectedIndex_.reduce((function(e,t){return Math.min(e,t)})))),this.setTabindexAtIndex_(e)},t.prototype.isIndexValid_=function(e){var t=this;if(e instanceof Array){if(!this.isCheckboxList_)throw new Error("MDCListFoundation: Array of index is only supported for checkbox based list");return 0===e.length||e.some((function(e){return t.isIndexInRange_(e)}))}if("number"==typeof e){if(this.isCheckboxList_)throw new Error("MDCListFoundation: Expected array of index for checkbox based list but got number: "+e);return this.isIndexInRange_(e)}return!1},t.prototype.isIndexInRange_=function(e){var t=this.adapter_.getListItemCount();return e>=0&&e<t},t.prototype.setSelectedIndexOnAction_=function(e,t){void 0===t&&(t=!0),this.adapter_.listItemAtIndexHasClass(e,nt.LIST_ITEM_DISABLED_CLASS)||(this.isCheckboxList_?this.toggleCheckboxAtIndex_(e,t):this.setSelectedIndex(e))},t.prototype.toggleCheckboxAtIndex_=function(e,t){var n=this.adapter_.isCheckboxCheckedAtIndex(e);t&&(n=!n,this.adapter_.setCheckedCheckboxOrRadioAtIndex(e,n)),this.adapter_.setAttributeForElementIndex(e,it.ARIA_CHECKED,n?"true":"false");var i=this.selectedIndex_===st.UNSET_INDEX?[]:this.selectedIndex_.slice();n?i.push(e):i=i.filter((function(t){return t!==e})),this.selectedIndex_=i},t}(S),ut=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return E(t,e),Object.defineProperty(t.prototype,"vertical",{set:function(e){this.foundation_.setVerticalOrientation(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"listElements",{get:function(){return[].slice.call(this.root_.querySelectorAll("."+nt.LIST_ITEM_CLASS))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wrapFocus",{set:function(e){this.foundation_.setWrapFocus(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"singleSelection",{set:function(e){this.foundation_.setSingleSelection(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedIndex",{get:function(){return this.foundation_.getSelectedIndex()},set:function(e){this.foundation_.setSelectedIndex(e)},enumerable:!0,configurable:!0}),t.attachTo=function(e){return new t(e)},t.prototype.initialSyncWithDOM=function(){this.handleClick_=this.handleClickEvent_.bind(this),this.handleKeydown_=this.handleKeydownEvent_.bind(this),this.focusInEventListener_=this.handleFocusInEvent_.bind(this),this.focusOutEventListener_=this.handleFocusOutEvent_.bind(this),this.listen("keydown",this.handleKeydown_),this.listen("click",this.handleClick_),this.listen("focusin",this.focusInEventListener_),this.listen("focusout",this.focusOutEventListener_),this.layout(),this.initializeListType()},t.prototype.destroy=function(){this.unlisten("keydown",this.handleKeydown_),this.unlisten("click",this.handleClick_),this.unlisten("focusin",this.focusInEventListener_),this.unlisten("focusout",this.focusOutEventListener_)},t.prototype.layout=function(){var e=this.root_.getAttribute(it.ARIA_ORIENTATION);this.vertical=e!==it.ARIA_ORIENTATION_HORIZONTAL,[].slice.call(this.root_.querySelectorAll(".mdc-list-item:not([tabindex])")).forEach((function(e){e.setAttribute("tabindex","-1")})),[].slice.call(this.root_.querySelectorAll(it.FOCUSABLE_CHILD_ELEMENTS)).forEach((function(e){return e.setAttribute("tabindex","-1")})),this.foundation_.layout()},t.prototype.initializeListType=function(){var e=this,t=this.root_.querySelectorAll(it.ARIA_ROLE_CHECKBOX_SELECTOR),n=this.root_.querySelector("\n      ."+nt.LIST_ITEM_ACTIVATED_CLASS+",\n      ."+nt.LIST_ITEM_SELECTED_CLASS+"\n    "),i=this.root_.querySelector(it.ARIA_CHECKED_RADIO_SELECTOR);if(t.length){var s=this.root_.querySelectorAll(it.ARIA_CHECKED_CHECKBOX_SELECTOR);this.selectedIndex=[].map.call(s,(function(t){return e.listElements.indexOf(t)}))}else n?(n.classList.contains(nt.LIST_ITEM_ACTIVATED_CLASS)&&this.foundation_.setUseActivatedClass(!0),this.singleSelection=!0,this.selectedIndex=this.listElements.indexOf(n)):i&&(this.selectedIndex=this.listElements.indexOf(i))},t.prototype.setEnabled=function(e,t){this.foundation_.setEnabled(e,t)},t.prototype.getDefaultFoundation=function(){var e=this;return new ct({addClassForElementIndex:function(t,n){var i=e.listElements[t];i&&i.classList.add(n)},focusItemAtIndex:function(t){var n=e.listElements[t];n&&n.focus()},getAttributeForElementIndex:function(t,n){return e.listElements[t].getAttribute(n)},getFocusedElementIndex:function(){return e.listElements.indexOf(document.activeElement)},getListItemCount:function(){return e.listElements.length},hasCheckboxAtIndex:function(t){return!!e.listElements[t].querySelector(it.CHECKBOX_SELECTOR)},hasRadioAtIndex:function(t){return!!e.listElements[t].querySelector(it.RADIO_SELECTOR)},isCheckboxCheckedAtIndex:function(t){return e.listElements[t].querySelector(it.CHECKBOX_SELECTOR).checked},isFocusInsideList:function(){return e.root_.contains(document.activeElement)},isRootFocused:function(){return document.activeElement===e.root_},listItemAtIndexHasClass:function(t,n){return e.listElements[t].classList.contains(n)},notifyAction:function(t){e.emit(it.ACTION_EVENT,{index:t},!0)},removeClassForElementIndex:function(t,n){var i=e.listElements[t];i&&i.classList.remove(n)},setAttributeForElementIndex:function(t,n,i){var s=e.listElements[t];s&&s.setAttribute(n,i)},setCheckedCheckboxOrRadioAtIndex:function(t,n){var i=e.listElements[t].querySelector(it.CHECKBOX_RADIO_SELECTOR);i.checked=n;var s=document.createEvent("Event");s.initEvent("change",!0,!0),i.dispatchEvent(s)},setTabIndexForListItemChildren:function(t,n){var i=e.listElements[t];[].slice.call(i.querySelectorAll(it.CHILD_ELEMENTS_TO_TOGGLE_TABINDEX)).forEach((function(e){return e.setAttribute("tabindex",n)}))}})},t.prototype.getListItemIndex_=function(e){var t=L(e.target,"."+nt.LIST_ITEM_CLASS+", ."+nt.ROOT);return t&&O(t,"."+nt.LIST_ITEM_CLASS)?this.listElements.indexOf(t):-1},t.prototype.handleFocusInEvent_=function(e){var t=this.getListItemIndex_(e);this.foundation_.handleFocusIn(e,t)},t.prototype.handleFocusOutEvent_=function(e){var t=this.getListItemIndex_(e);this.foundation_.handleFocusOut(e,t)},t.prototype.handleKeydownEvent_=function(e){var t=this.getListItemIndex_(e),n=e.target;this.foundation_.handleKeydown(e,n.classList.contains(nt.LIST_ITEM_CLASS),t)},t.prototype.handleClickEvent_=function(e){var t=this.getListItemIndex_(e),n=!O(e.target,it.CHECKBOX_RADIO_SELECTOR);this.foundation_.handleClick(t,n)},t}(w),dt={ANCHOR:"mdc-menu-surface--anchor",ANIMATING_CLOSED:"mdc-menu-surface--animating-closed",ANIMATING_OPEN:"mdc-menu-surface--animating-open",FIXED:"mdc-menu-surface--fixed",OPEN:"mdc-menu-surface--open",ROOT:"mdc-menu-surface"},lt={CLOSED_EVENT:"MDCMenuSurface:closed",OPENED_EVENT:"MDCMenuSurface:opened",FOCUSABLE_ELEMENTS:["button:not(:disabled)",'[href]:not([aria-disabled="true"])',"input:not(:disabled)","select:not(:disabled)","textarea:not(:disabled)",'[tabindex]:not([tabindex="-1"]):not([aria-disabled="true"])'].join(", ")},_t={TRANSITION_OPEN_DURATION:120,TRANSITION_CLOSE_DURATION:75,MARGIN_TO_EDGE:32,ANCHOR_TO_MENU_SURFACE_WIDTH_RATIO:.67};!function(e){e[e.BOTTOM=1]="BOTTOM",e[e.CENTER=2]="CENTER",e[e.RIGHT=4]="RIGHT",e[e.FLIP_RTL=8]="FLIP_RTL"}(rt||(rt={})),function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=4]="TOP_RIGHT",e[e.BOTTOM_LEFT=1]="BOTTOM_LEFT",e[e.BOTTOM_RIGHT=5]="BOTTOM_RIGHT",e[e.TOP_START=8]="TOP_START",e[e.TOP_END=12]="TOP_END",e[e.BOTTOM_START=9]="BOTTOM_START",e[e.BOTTOM_END=13]="BOTTOM_END"}(at||(at={}));
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
var ht,pt=function(e){function t(n){var i=e.call(this,C({},t.defaultAdapter,n))||this;return i.isOpen_=!1,i.isQuickOpen_=!1,i.isHoistedElement_=!1,i.isFixedPosition_=!1,i.openAnimationEndTimerId_=0,i.closeAnimationEndTimerId_=0,i.animationRequestId_=0,i.anchorCorner_=at.TOP_START,i.anchorMargin_={top:0,right:0,bottom:0,left:0},i.position_={x:0,y:0},i}return E(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return dt},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return lt},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return _t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"Corner",{get:function(){return at},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},hasAnchor:function(){return!1},isElementInContainer:function(){return!1},isFocused:function(){return!1},isRtl:function(){return!1},getInnerDimensions:function(){return{height:0,width:0}},getAnchorDimensions:function(){return null},getWindowDimensions:function(){return{height:0,width:0}},getBodyDimensions:function(){return{height:0,width:0}},getWindowScroll:function(){return{x:0,y:0}},setPosition:function(){},setMaxHeight:function(){},setTransformOrigin:function(){},saveFocus:function(){},restoreFocus:function(){},notifyClose:function(){},notifyOpen:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){var e=t.cssClasses,n=e.ROOT,i=e.OPEN;if(!this.adapter_.hasClass(n))throw new Error(n+" class required in root element.");this.adapter_.hasClass(i)&&(this.isOpen_=!0)},t.prototype.destroy=function(){clearTimeout(this.openAnimationEndTimerId_),clearTimeout(this.closeAnimationEndTimerId_),cancelAnimationFrame(this.animationRequestId_)},t.prototype.setAnchorCorner=function(e){this.anchorCorner_=e},t.prototype.setAnchorMargin=function(e){this.anchorMargin_.top=e.top||0,this.anchorMargin_.right=e.right||0,this.anchorMargin_.bottom=e.bottom||0,this.anchorMargin_.left=e.left||0},t.prototype.setIsHoisted=function(e){this.isHoistedElement_=e},t.prototype.setFixedPosition=function(e){this.isFixedPosition_=e},t.prototype.setAbsolutePosition=function(e,t){this.position_.x=this.isFinite_(e)?e:0,this.position_.y=this.isFinite_(t)?t:0},t.prototype.setQuickOpen=function(e){this.isQuickOpen_=e},t.prototype.isOpen=function(){return this.isOpen_},t.prototype.open=function(){var e=this;this.adapter_.saveFocus(),this.isQuickOpen_||this.adapter_.addClass(t.cssClasses.ANIMATING_OPEN),this.animationRequestId_=requestAnimationFrame((function(){e.adapter_.addClass(t.cssClasses.OPEN),e.dimensions_=e.adapter_.getInnerDimensions(),e.autoPosition_(),e.isQuickOpen_?e.adapter_.notifyOpen():e.openAnimationEndTimerId_=setTimeout((function(){e.openAnimationEndTimerId_=0,e.adapter_.removeClass(t.cssClasses.ANIMATING_OPEN),e.adapter_.notifyOpen()}),_t.TRANSITION_OPEN_DURATION)})),this.isOpen_=!0},t.prototype.close=function(e){var n=this;void 0===e&&(e=!1),this.isQuickOpen_||this.adapter_.addClass(t.cssClasses.ANIMATING_CLOSED),requestAnimationFrame((function(){n.adapter_.removeClass(t.cssClasses.OPEN),n.isQuickOpen_?n.adapter_.notifyClose():n.closeAnimationEndTimerId_=setTimeout((function(){n.closeAnimationEndTimerId_=0,n.adapter_.removeClass(t.cssClasses.ANIMATING_CLOSED),n.adapter_.notifyClose()}),_t.TRANSITION_CLOSE_DURATION)})),this.isOpen_=!1,e||this.maybeRestoreFocus_()},t.prototype.handleBodyClick=function(e){var t=e.target;this.adapter_.isElementInContainer(t)||this.close()},t.prototype.handleKeydown=function(e){var t=e.keyCode;("Escape"===e.key||27===t)&&this.close()},t.prototype.autoPosition_=function(){var e;this.measurements_=this.getAutoLayoutMeasurements_();var t=this.getOriginCorner_(),n=this.getMenuSurfaceMaxHeight_(t),i=this.hasBit_(t,rt.BOTTOM)?"bottom":"top",s=this.hasBit_(t,rt.RIGHT)?"right":"left",o=this.getHorizontalOriginOffset_(t),r=this.getVerticalOriginOffset_(t),a=this.measurements_,c=a.anchorSize,u=a.surfaceSize,d=((e={})[s]=o,e[i]=r,e);c.width/u.width>_t.ANCHOR_TO_MENU_SURFACE_WIDTH_RATIO&&(s="center"),(this.isHoistedElement_||this.isFixedPosition_)&&this.adjustPositionForHoistedElement_(d),this.adapter_.setTransformOrigin(s+" "+i),this.adapter_.setPosition(d),this.adapter_.setMaxHeight(n?n+"px":"")},t.prototype.getAutoLayoutMeasurements_=function(){var e=this.adapter_.getAnchorDimensions(),t=this.adapter_.getBodyDimensions(),n=this.adapter_.getWindowDimensions(),i=this.adapter_.getWindowScroll();return e||(e={top:this.position_.y,right:this.position_.x,bottom:this.position_.y,left:this.position_.x,width:0,height:0}),{anchorSize:e,bodySize:t,surfaceSize:this.dimensions_,viewportDistance:{top:e.top,right:n.width-e.right,bottom:n.height-e.bottom,left:e.left},viewportSize:n,windowScroll:i}},t.prototype.getOriginCorner_=function(){var e=at.TOP_LEFT,t=this.measurements_,n=t.viewportDistance,i=t.anchorSize,s=t.surfaceSize,o=this.hasBit_(this.anchorCorner_,rt.BOTTOM),r=o?n.top+i.height+this.anchorMargin_.bottom:n.top+this.anchorMargin_.top,a=o?n.bottom-this.anchorMargin_.bottom:n.bottom+i.height-this.anchorMargin_.top,c=s.height-r,u=s.height-a;u>0&&c<u&&(e=this.setBit_(e,rt.BOTTOM));var d=this.adapter_.isRtl(),l=this.hasBit_(this.anchorCorner_,rt.FLIP_RTL),_=this.hasBit_(this.anchorCorner_,rt.RIGHT),h=_&&!d||!_&&l&&d,p=h?n.left+i.width+this.anchorMargin_.right:n.left+this.anchorMargin_.left,m=h?n.right-this.anchorMargin_.right:n.right+i.width-this.anchorMargin_.left,f=s.width-p,g=s.width-m;return(f<0&&h&&d||_&&!h&&f<0||g>0&&f<g)&&(e=this.setBit_(e,rt.RIGHT)),e},t.prototype.getMenuSurfaceMaxHeight_=function(e){var n=this.measurements_.viewportDistance,i=0,s=this.hasBit_(e,rt.BOTTOM),o=this.hasBit_(this.anchorCorner_,rt.BOTTOM),r=t.numbers.MARGIN_TO_EDGE;return s?(i=n.top+this.anchorMargin_.top-r,o||(i+=this.measurements_.anchorSize.height)):(i=n.bottom-this.anchorMargin_.bottom+this.measurements_.anchorSize.height-r,o&&(i-=this.measurements_.anchorSize.height)),i},t.prototype.getHorizontalOriginOffset_=function(e){var t=this.measurements_.anchorSize,n=this.hasBit_(e,rt.RIGHT),i=this.hasBit_(this.anchorCorner_,rt.RIGHT);if(n){var s=i?t.width-this.anchorMargin_.left:this.anchorMargin_.right;return this.isHoistedElement_||this.isFixedPosition_?s-(this.measurements_.viewportSize.width-this.measurements_.bodySize.width):s}return i?t.width-this.anchorMargin_.right:this.anchorMargin_.left},t.prototype.getVerticalOriginOffset_=function(e){var t=this.measurements_.anchorSize,n=this.hasBit_(e,rt.BOTTOM),i=this.hasBit_(this.anchorCorner_,rt.BOTTOM);return n?i?t.height-this.anchorMargin_.top:-this.anchorMargin_.bottom:i?t.height+this.anchorMargin_.bottom:this.anchorMargin_.top},t.prototype.adjustPositionForHoistedElement_=function(e){var t,n,i=this.measurements_,s=i.windowScroll,o=i.viewportDistance,r=Object.keys(e);try{for(var a=I(r),c=a.next();!c.done;c=a.next()){var u=c.value,d=e[u]||0;d+=o[u],this.isFixedPosition_||("top"===u?d+=s.y:"bottom"===u?d-=s.y:"left"===u?d+=s.x:d-=s.x),e[u]=d}}catch(e){t={error:e}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}},t.prototype.maybeRestoreFocus_=function(){var e=this.adapter_.isFocused(),t=document.activeElement&&this.adapter_.isElementInContainer(document.activeElement);(e||t)&&this.adapter_.restoreFocus()},t.prototype.hasBit_=function(e,t){return Boolean(e&t)},t.prototype.setBit_=function(e,t){return e|t},t.prototype.isFinite_=function(e){return"number"==typeof e&&isFinite(e)},t}(S);
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
var mt,ft=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return E(t,e),t.attachTo=function(e){return new t(e)},t.prototype.initialSyncWithDOM=function(){var e=this,t=this.root_.parentElement;this.anchorElement=t&&t.classList.contains(dt.ANCHOR)?t:null,this.root_.classList.contains(dt.FIXED)&&this.setFixedPosition(!0),this.handleKeydown_=function(t){return e.foundation_.handleKeydown(t)},this.handleBodyClick_=function(t){return e.foundation_.handleBodyClick(t)},this.registerBodyClickListener_=function(){return document.body.addEventListener("click",e.handleBodyClick_)},this.deregisterBodyClickListener_=function(){return document.body.removeEventListener("click",e.handleBodyClick_)},this.listen("keydown",this.handleKeydown_),this.listen(lt.OPENED_EVENT,this.registerBodyClickListener_),this.listen(lt.CLOSED_EVENT,this.deregisterBodyClickListener_)},t.prototype.destroy=function(){this.unlisten("keydown",this.handleKeydown_),this.unlisten(lt.OPENED_EVENT,this.registerBodyClickListener_),this.unlisten(lt.CLOSED_EVENT,this.deregisterBodyClickListener_),e.prototype.destroy.call(this)},t.prototype.isOpen=function(){return this.foundation_.isOpen()},t.prototype.open=function(){this.foundation_.open()},t.prototype.close=function(e){void 0===e&&(e=!1),this.foundation_.close(e)},Object.defineProperty(t.prototype,"quickOpen",{set:function(e){this.foundation_.setQuickOpen(e)},enumerable:!0,configurable:!0}),t.prototype.setIsHoisted=function(e){this.foundation_.setIsHoisted(e)},t.prototype.setMenuSurfaceAnchorElement=function(e){this.anchorElement=e},t.prototype.setFixedPosition=function(e){e?this.root_.classList.add(dt.FIXED):this.root_.classList.remove(dt.FIXED),this.foundation_.setFixedPosition(e)},t.prototype.setAbsolutePosition=function(e,t){this.foundation_.setAbsolutePosition(e,t),this.setIsHoisted(!0)},t.prototype.setAnchorCorner=function(e){this.foundation_.setAnchorCorner(e)},t.prototype.setAnchorMargin=function(e){this.foundation_.setAnchorMargin(e)},t.prototype.getDefaultFoundation=function(){var e=this;return new pt({addClass:function(t){return e.root_.classList.add(t)},removeClass:function(t){return e.root_.classList.remove(t)},hasClass:function(t){return e.root_.classList.contains(t)},hasAnchor:function(){return!!e.anchorElement},notifyClose:function(){return e.emit(pt.strings.CLOSED_EVENT,{})},notifyOpen:function(){return e.emit(pt.strings.OPENED_EVENT,{})},isElementInContainer:function(t){return e.root_.contains(t)},isRtl:function(){return"rtl"===getComputedStyle(e.root_).getPropertyValue("direction")},setTransformOrigin:function(t){var n=function(e,t){if(void 0===t&&(t=!1),void 0===ht||t){var n=e.document.createElement("div");ht="transform"in n.style?"transform":"webkitTransform"}return ht}(window)+"-origin";e.root_.style.setProperty(n,t)},isFocused:function(){return document.activeElement===e.root_},saveFocus:function(){e.previousFocus_=document.activeElement},restoreFocus:function(){e.root_.contains(document.activeElement)&&e.previousFocus_&&e.previousFocus_.focus&&e.previousFocus_.focus()},getInnerDimensions:function(){return{width:e.root_.offsetWidth,height:e.root_.offsetHeight}},getAnchorDimensions:function(){return e.anchorElement?e.anchorElement.getBoundingClientRect():null},getWindowDimensions:function(){return{width:window.innerWidth,height:window.innerHeight}},getBodyDimensions:function(){return{width:document.body.clientWidth,height:document.body.clientHeight}},getWindowScroll:function(){return{x:window.pageXOffset,y:window.pageYOffset}},setPosition:function(t){e.root_.style.left="left"in t?t.left+"px":"",e.root_.style.right="right"in t?t.right+"px":"",e.root_.style.top="top"in t?t.top+"px":"",e.root_.style.bottom="bottom"in t?t.bottom+"px":""},setMaxHeight:function(t){e.root_.style.maxHeight=t}})},t}(w),gt={MENU_SELECTED_LIST_ITEM:"mdc-menu-item--selected",MENU_SELECTION_GROUP:"mdc-menu__selection-group",ROOT:"mdc-menu"},yt={ARIA_CHECKED_ATTR:"aria-checked",ARIA_DISABLED_ATTR:"aria-disabled",CHECKBOX_SELECTOR:'input[type="checkbox"]',LIST_SELECTOR:".mdc-list",SELECTED_EVENT:"MDCMenu:selected"},bt={FOCUS_ROOT_INDEX:-1};
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */!function(e){e[e.NONE=0]="NONE",e[e.LIST_ROOT=1]="LIST_ROOT",e[e.FIRST_ITEM=2]="FIRST_ITEM",e[e.LAST_ITEM=3]="LAST_ITEM"}(mt||(mt={}));
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
var vt=function(e){function t(n){var i=e.call(this,C({},t.defaultAdapter,n))||this;return i.closeAnimationEndTimerId_=0,i.defaultFocusState_=mt.LIST_ROOT,i}return E(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return gt},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return yt},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return bt},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClassToElementAtIndex:function(){},removeClassFromElementAtIndex:function(){},addAttributeToElementAtIndex:function(){},removeAttributeFromElementAtIndex:function(){},elementContainsClass:function(){return!1},closeSurface:function(){},getElementIndex:function(){return-1},notifySelected:function(){},getMenuItemCount:function(){return 0},focusItemAtIndex:function(){},focusListRoot:function(){},getSelectedSiblingOfItemAtIndex:function(){return-1},isSelectableItemAtIndex:function(){return!1}}},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){this.closeAnimationEndTimerId_&&clearTimeout(this.closeAnimationEndTimerId_),this.adapter_.closeSurface()},t.prototype.handleKeydown=function(e){var t=e.key,n=e.keyCode;("Tab"===t||9===n)&&this.adapter_.closeSurface(!0)},t.prototype.handleItemAction=function(e){var t=this,n=this.adapter_.getElementIndex(e);n<0||(this.adapter_.notifySelected({index:n}),this.adapter_.closeSurface(),this.closeAnimationEndTimerId_=setTimeout((function(){var n=t.adapter_.getElementIndex(e);t.adapter_.isSelectableItemAtIndex(n)&&t.setSelectedIndex(n)}),pt.numbers.TRANSITION_CLOSE_DURATION))},t.prototype.handleMenuSurfaceOpened=function(){switch(this.defaultFocusState_){case mt.FIRST_ITEM:this.adapter_.focusItemAtIndex(0);break;case mt.LAST_ITEM:this.adapter_.focusItemAtIndex(this.adapter_.getMenuItemCount()-1);break;case mt.NONE:break;default:this.adapter_.focusListRoot()}},t.prototype.setDefaultFocusState=function(e){this.defaultFocusState_=e},t.prototype.setSelectedIndex=function(e){if(this.validatedIndex_(e),!this.adapter_.isSelectableItemAtIndex(e))throw new Error("MDCMenuFoundation: No selection group at specified index.");var t=this.adapter_.getSelectedSiblingOfItemAtIndex(e);t>=0&&(this.adapter_.removeAttributeFromElementAtIndex(t,yt.ARIA_CHECKED_ATTR),this.adapter_.removeClassFromElementAtIndex(t,gt.MENU_SELECTED_LIST_ITEM)),this.adapter_.addClassToElementAtIndex(e,gt.MENU_SELECTED_LIST_ITEM),this.adapter_.addAttributeToElementAtIndex(e,yt.ARIA_CHECKED_ATTR,"true")},t.prototype.setEnabled=function(e,t){this.validatedIndex_(e),t?(this.adapter_.removeClassFromElementAtIndex(e,nt.LIST_ITEM_DISABLED_CLASS),this.adapter_.addAttributeToElementAtIndex(e,yt.ARIA_DISABLED_ATTR,"false")):(this.adapter_.addClassToElementAtIndex(e,nt.LIST_ITEM_DISABLED_CLASS),this.adapter_.addAttributeToElementAtIndex(e,yt.ARIA_DISABLED_ATTR,"true"))},t.prototype.validatedIndex_=function(e){var t=this.adapter_.getMenuItemCount();if(!(e>=0&&e<t))throw new Error("MDCMenuFoundation: No list item at specified index.")},t}(S),Et=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return E(t,e),t.attachTo=function(e){return new t(e)},t.prototype.initialize=function(e,t){void 0===e&&(e=function(e){return new ft(e)}),void 0===t&&(t=function(e){return new ut(e)}),this.menuSurfaceFactory_=e,this.listFactory_=t},t.prototype.initialSyncWithDOM=function(){var e=this;this.menuSurface_=this.menuSurfaceFactory_(this.root_);var t=this.root_.querySelector(yt.LIST_SELECTOR);t?(this.list_=this.listFactory_(t),this.list_.wrapFocus=!0):this.list_=null,this.handleKeydown_=function(t){return e.foundation_.handleKeydown(t)},this.handleItemAction_=function(t){return e.foundation_.handleItemAction(e.items[t.detail.index])},this.handleMenuSurfaceOpened_=function(){return e.foundation_.handleMenuSurfaceOpened()},this.menuSurface_.listen(pt.strings.OPENED_EVENT,this.handleMenuSurfaceOpened_),this.listen("keydown",this.handleKeydown_),this.listen(ct.strings.ACTION_EVENT,this.handleItemAction_)},t.prototype.destroy=function(){this.list_&&this.list_.destroy(),this.menuSurface_.destroy(),this.menuSurface_.unlisten(pt.strings.OPENED_EVENT,this.handleMenuSurfaceOpened_),this.unlisten("keydown",this.handleKeydown_),this.unlisten(ct.strings.ACTION_EVENT,this.handleItemAction_),e.prototype.destroy.call(this)},Object.defineProperty(t.prototype,"open",{get:function(){return this.menuSurface_.isOpen()},set:function(e){e?this.menuSurface_.open():this.menuSurface_.close()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wrapFocus",{get:function(){return!!this.list_&&this.list_.wrapFocus},set:function(e){this.list_&&(this.list_.wrapFocus=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){return this.list_?this.list_.listElements:[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"quickOpen",{set:function(e){this.menuSurface_.quickOpen=e},enumerable:!0,configurable:!0}),t.prototype.setDefaultFocusState=function(e){this.foundation_.setDefaultFocusState(e)},t.prototype.setAnchorCorner=function(e){this.menuSurface_.setAnchorCorner(e)},t.prototype.setAnchorMargin=function(e){this.menuSurface_.setAnchorMargin(e)},t.prototype.setSelectedIndex=function(e){this.foundation_.setSelectedIndex(e)},t.prototype.setEnabled=function(e,t){this.foundation_.setEnabled(e,t)},t.prototype.getOptionByIndex=function(e){return e<this.items.length?this.items[e]:null},t.prototype.setFixedPosition=function(e){this.menuSurface_.setFixedPosition(e)},t.prototype.setIsHoisted=function(e){this.menuSurface_.setIsHoisted(e)},t.prototype.setAbsolutePosition=function(e,t){this.menuSurface_.setAbsolutePosition(e,t)},t.prototype.setAnchorElement=function(e){this.menuSurface_.anchorElement=e},t.prototype.getDefaultFoundation=function(){var e=this;return new vt({addClassToElementAtIndex:function(t,n){e.items[t].classList.add(n)},removeClassFromElementAtIndex:function(t,n){e.items[t].classList.remove(n)},addAttributeToElementAtIndex:function(t,n,i){e.items[t].setAttribute(n,i)},removeAttributeFromElementAtIndex:function(t,n){e.items[t].removeAttribute(n)},elementContainsClass:function(e,t){return e.classList.contains(t)},closeSurface:function(t){return e.menuSurface_.close(t)},getElementIndex:function(t){return e.items.indexOf(t)},notifySelected:function(t){return e.emit(yt.SELECTED_EVENT,{index:t.index,item:e.items[t.index]})},getMenuItemCount:function(){return e.items.length},focusItemAtIndex:function(t){return e.items[t].focus()},focusListRoot:function(){return e.root_.querySelector(yt.LIST_SELECTOR).focus()},isSelectableItemAtIndex:function(t){return!!L(e.items[t],"."+gt.MENU_SELECTION_GROUP)},getSelectedSiblingOfItemAtIndex:function(t){var n=L(e.items[t],"."+gt.MENU_SELECTION_GROUP).querySelector("."+gt.MENU_SELECTED_LIST_ITEM);return n?e.items.indexOf(n):-1}})},t}(w);function Ct(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const It=new class{constructor(){Ct(this,"onBack",e=>{this.container.remove(),e.currentTarget.hidden=!0}),Ct(this,"onExtraMenuClick",()=>{const e=a(".sidebar_extra_menu_list",this.container),t=new Et(e);t.open||(t.open=!0,t.setAbsolutePosition(239,57))}),Ct(this,"onLogoutClick",()=>{App.logOut()})}show(){this.leftSidebar=a(".left_sidebar");const e=App.getAuthUserId(),t=Ae.users.get(e),n=Ae.getUserName(t);this.container=l(`\n      <div class="settings_menu">\n        <div class="settings_menu_header">\n          <div class="sidebar_header_title">Settings</div>\n          <button type="button" class="sidebar_extra_menu_button mdc-icon-button"></button>\n          <div class="sidebar_extra_menu_list mdc-menu mdc-menu-surface">\n            <ul class="mdc-list" role="menu" aria-hidden="true" aria-orientation="vertical" tabindex="-1">\n              <li class="mdc-list-item settings_extra_menu_item-log_out" role="menuitem">\n                <span class="mdc-list-item__text">Log out</span>\n              </li>\n            </ul>\n          </div>\n        </div>\n        <div class="sidebar_user_info">\n          <div class="sidebar_user_photo"></div>\n          <div class="sidebar_user_name">${c(n)}</div>\n          <div class="sidebar_user_desc">+${t.phone}</div>\n        </div>\n        <ul class="settings_main_menu_list mdc-list">\n          <li class="mdc-list-item settings_main_menu_item-edit" tabindex="0">\n            <span class="mdc-list-item__text">Edit Profile</span>\n          </li>\n          <li class="mdc-list-item settings_main_menu_item-general">\n            <span class="mdc-list-item__text">General Settings</span>\n          </li>\n          <li class="mdc-list-item settings_main_menu_item-notifications">\n            <span class="mdc-list-item__text">Notifications</span>\n          </li>\n          <li class="mdc-list-item settings_main_menu_item-privacy">\n            <span class="mdc-list-item__text">Privacy and Security</span>\n          </li>\n          <li class="mdc-list-item settings_main_menu_item-language">\n            <span class="mdc-list-item__text">Language</span>\n          </li>\n        </ul>\n      </div>\n    `),this.leftSidebar.appendChild(this.container),this.loadUserPhoto(t),this.bindListeners()}bindListeners(){const e=a(".sidebar_back_button",this.leftSidebar);e.addEventListener("click",this.onBack,{once:!0}),e.hidden=!1,a(".sidebar_extra_menu_button",this.container).addEventListener("click",this.onExtraMenuClick),a(".settings_extra_menu_item-log_out",this.container).addEventListener("click",this.onLogoutClick)}loadUserPhoto(e){const t=a(".sidebar_user_photo",this.container),n=Ae.getUserPeer(e);wt.loadPeerPhoto(t,n,!0)}};function At(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}window.SettingsController=It;const Tt=new class{constructor(){At(this,"onBack",()=>{this.container.hidden=!0,wt.container.hidden=!1;const e=a(".left_sidebar .sidebar_back_button");e.hidden=!0,e.removeEventListener("click",this.onBack),a(".left_sidebar_menu_button").hidden=!1}),At(this,"onContactClick",e=>{const t=+e.currentTarget.dataset.userId;let n=Ae.getDialog(t);n?(tt.setChat(n),this.onDialogOpened()):Ae.loadPeerDialog(Ae.getPeerById(t)).then(e=>{e&&(tt.setChat(e),this.onDialogOpened())})})}show(){wt.container.hidden=!0,this.container=a(".contacts_sidebar"),this.container.innerHTML="",this.container.hidden=!1,this.loader=l('<div class="lds-ring"><div></div><div></div><div></div><div></div></div>'),this.container.append(this.loader);const e=a(".left_sidebar .sidebar_back_button");e.addEventListener("click",this.onBack),e.hidden=!1,a(".left_sidebar_menu_button").hidden=!0,ApiClient.callMethod("contacts.getContacts").then(e=>{Ae.updateUsers(e.users),this.loader.remove(),this.render(e.contacts)})}render(e){const t=document.createDocumentFragment();for(const n of e){const e=Ae.users.get(n.user_id),i=this.buildPreviewElement(e);t.append(i)}this.container.append(t)}buildPreviewElement(e){const t=l(`\n      <div class="contacts_item" data-user-id="${e.id}">\n        <div class="contacts_item_content mdc-ripple-surface">\n          <div class="contacts_item_photo"></div>\n          <div class="contacts_item_text"></div>      \n        </div>\n      </div>\n    `);return this.renderPreviewContent(t,e),this.loadContactPhoto(t,e),t.addEventListener("click",this.onContactClick),new Q(t.firstElementChild),t}loadContactPhoto(e,t){const n=a(".contacts_item_photo",e),i=Ae.getUserPeer(t);wt.loadPeerPhoto(n,i)}renderPreviewContent(e,t){const n=Ae.getUserName(t)||`+${t.phone}`,i=tt.getUserStatusText(t);a(".contacts_item_text",e).innerHTML=`\n      <div class="contacts_item_text_row">\n        <div class="contacts_item_title">${n}</div>\n      </div>\n      <div class="contacts_item_text_row">\n        <div class="contacts_item_status">${i}</div>\n      </div>\n    `}onDialogOpened(){this.onBack()}};function St(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}window.ContactsController=Tt;const wt=new class{constructor(){St(this,"chatElements",new Map),St(this,"onDialogsUpdate",e=>{const{dialogs:t}=e.detail;this.renderChats(t)}),St(this,"onDialogNewMessage",e=>{const{dialog:t,message:n}=e.detail;if("messageService"===n._)return;const i=Ae.getPeerId(t.peer);let s=this.chatElements.get(i);s?this.renderChatPreviewContent(s,t):this.buildChatPreviewElement(t)}),St(this,"onDialogOrderUpdate",e=>{const{dialog:t,index:n}=e.detail,i=Ae.getPeerId(t.peer);let s=this.chatElements.get(i);s||(s=this.buildChatPreviewElement(t)),this.container.insertBefore(s,this.container.children[n])}),St(this,"onDialogTopMessageUpdate",e=>{const{dialog:t}=e.detail,n=Ae.getPeerId(t.peer),i=this.chatElements.get(n);i&&this.renderChatPreviewContent(i,t)}),St(this,"onDialogUnreadCountUpdate",e=>{const{dialog:t}=e.detail,n=Ae.getPeerId(t.peer),i=this.chatElements.get(n);this.renderChatPreviewContent(i,t)}),St(this,"onScroll",()=>{const e=this.container;!this.loading&&!this.noMore&&e.scrollTop+e.offsetHeight>e.scrollHeight-150&&this.loadMore()}),St(this,"onChatClick",e=>{const t=+e.currentTarget.dataset.peerId,n=Ae.getDialog(t);tt.setChat(n)}),St(this,"onMainMenuClick",()=>{this.mainMenu.open||(this.mainMenu.open=!0,this.mainMenu.setAbsolutePosition(14,60))}),St(this,"onMenuContactsClick",()=>{Tt.show()}),St(this,"onMenuSettingsClick",()=>{It.show()})}init(){this.container=a(".chats_sidebar"),this.container.addEventListener("scroll",this.onScroll),this.initMenu(),Ae.emitter.on("dialogsUpdate",this.onDialogsUpdate),Ae.emitter.on("dialogOrderUpdate",this.onDialogOrderUpdate),Ae.emitter.on("dialogTopMessageUpdate",this.onDialogTopMessageUpdate),Ae.emitter.on("chatNewMessage",this.onDialogNewMessage),Ae.emitter.on("chatUnreadCountUpdate",this.onDialogUnreadCountUpdate),this.loader=l('<div class="lds-ring"><div></div><div></div><div></div><div></div></div>'),this.container.append(this.loader),this.loadMore()}initMenu(){const e=a(".main_menu_list");this.mainMenu=new Et(e),this.menuButton=a(".left_sidebar_menu_button"),this.menuButton.addEventListener("click",this.onMainMenuClick);for(const t of a(".mdc-list",e).children)new Q(t).unbounded=!0;new Q(this.menuButton).unbounded=!0,a(".main_menu_item-contacts",e).addEventListener("click",this.onMenuContactsClick),a(".main_menu_item-settings",e).addEventListener("click",this.onMenuSettingsClick)}loadMore(){this.loading=!0,Ae.loadDialogs(this.offset,20).then(e=>{e.length||(this.noMore=!0)}).catch(e=>{const t="An error occurred"+(e.error_message?": "+e.error_message:"");Qt.alert(t)}).finally(()=>{this.loading=!1})}renderChats(e){this.loader.remove();const t=document.createDocumentFragment();for(const n of e){const e=Ae.getPeerId(n.peer);if(this.chatElements.has(e))continue;const i=this.buildChatPreviewElement(n);t.append(i)}this.container.append(t);const n=e[e.length-1],i=Ae.messages.get(n.top_message);this.offset={id:n.top_message,peer:n.peer,date:i.date}}buildChatPreviewElement(e){const t=Ae.getPeerId(e.peer),n=l(`\n      <div class="chats_item ${e.pFlags.pinned?" chats_item_pinned":""}" data-peer-id="${t}">\n        <div class="chats_item_content mdc-ripple-surface">\n          <div class="chats_item_photo"></div>\n          <div class="chats_item_text"></div>        \n        </div>\n      </div>\n    `);return this.renderChatPreviewContent(n,e),this.loadChatPhoto(n,e),n.addEventListener("click",this.onChatClick),new Q(n.firstElementChild),this.chatElements.set(t,n),n}renderChatPreviewContent(e,t){const n=this.isPeerMe(t.peer)?"Saved Messages":Ae.getPeerName(t.peer),i=this.getChatBadge(t),s=this.formatDate(t),o=Ae.messages.get(t.top_message),r=o?this.getMessagePreview(o):"";a(".chats_item_text",e).innerHTML=`\n      <div class="chats_item_text_row">\n        <div class="chats_item_title">${c(n)}</div>\n        <div class="chats_item_date">${s}</div>\n      </div>\n      <div class="chats_item_text_row">\n        <div class="chats_item_message">${r}</div>\n        ${i}\n      </div>\n    `}formatDate(e){const t=Ae.messages.get(e.top_message);return t?this.formatMessageDate(t):""}formatMessageDate(e){const t=new Date(1e3*e.date),n=Date.now();return t.getTime()>n-864e5?tt.formatMessageTime(e.date):t.getTime()>n-5184e5?["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][t.getDay()]:t.getFullYear()===(new Date).getFullYear()?[t.getDate(),t.getMonth()+1].join("/"):[t.getDate(),t.getMonth()+1,t.getFullYear()].join("/")}getChatBadge(e){if(e.unread_count){let t,n="chats_item_badge chats_item_badge-unread";return e.notify_settings.mute_until&&(n+=" chats_item_badge-unread_muted"),`<span class="${n}">${t=e.unread_count>1e6?(e.unread_count/1e6).toFixed(1)+"M":e.unread_count>1e3?(e.unread_count/1e3).toFixed(1)+"K":e.unread_count}</span>`}return e.pFlags.pinned?'<span class="chats_item_badge chats_item_badge-pinned"></span>':""}getMessagePreview(e){if("messageService"===e._)return tt.getServiceMessageText(e);let t=c(e.message);if(!t){t=`<span class="chats_item_message_content_label">${this.getMessageContentTypeLabel(e.media)}</span>`}if("peerChannel"===e.to_id._&&e.from_id){t=c(Ae.users.get(e.from_id).first_name)+": "+t}else e.pFlags.out&&(t="You: "+t);return t}getMessageContentTypeLabel(e){if(!e)return"";switch(e._){case"messageMediaPhoto":return"Photo";case"messageMediaDocument":return this.getMessageContentDocumentLabel(e.document);case"messageMediaWebPage":return"Link";case"messageMediaPoll":return"Poll";case"messageMediaGeo":return"Geo";case"messageMediaGeoLive":return"Live Geo";case"messageMediaContact":return"Contact";case"messageMediaUnsupported":return"Message unsupported"}return""}getMessageContentDocumentLabel(e){const t=MediaApiManager.getDocumentAttributes(e);switch(t.type){case"video":return"Video";case"gif":return"Gif";case"sticker":return"Sticker"+(t.stickerEmoji?" "+t.stickerEmoji:"");case"voice":return"Voice";case"audio":return"Audio"}return"File"}loadChatPhoto(e,t){const n=a(".chats_item_photo",e);this.isPeerMe(t.peer)?n.classList.add("chats_item_photo_saved_messages"):this.loadPeerPhoto(n,t.peer)}loadPeerPhoto(e,t,n=!1){const i=Ae.getPeerId(t),s=Ae.getPeerPhoto(t);s&&"chatPhotoEmpty"!==s._?FileApiManager.loadPeerPhoto(t,s,n,s.dc_id,{priority:10,cache:!0}).then(t=>{e.innerHTML=`<img src="${t}" alt class="peer_photo_img">`}).catch(t=>{console.warn("chat photo load error",t),this.setChatPhotoPlaceholder(e,i)}):this.setChatPhotoPlaceholder(e,i)}setChatPhotoPlaceholder(e,t){const n=Ae.getPeerById(t),i=Ae.getPeerName(n);e.style.backgroundColor=this.getPlaceholderColor(t),e.innerHTML='<div class="peer_photo_placeholder">'+i.charAt(0)+"</div>"}getPlaceholderColor(e){const t=["#FFBF69","#247BA0","#EA526F","#2EC4B6","#F79256","#662C91","#049A8F","#06D6A0","#F25C54"];return t[e%t.length]}isPeerMe(e){return"peerUser"===e._&&e.user_id===Qt.getAuthUserId()}};window.ChatsController=wt;
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */
var Mt={CLOSING:"mdc-snackbar--closing",OPEN:"mdc-snackbar--open",OPENING:"mdc-snackbar--opening"},Lt={ACTION_SELECTOR:".mdc-snackbar__action",ARIA_LIVE_LABEL_TEXT_ATTR:"data-mdc-snackbar-label-text",CLOSED_EVENT:"MDCSnackbar:closed",CLOSING_EVENT:"MDCSnackbar:closing",DISMISS_SELECTOR:".mdc-snackbar__dismiss",LABEL_SELECTOR:".mdc-snackbar__label",OPENED_EVENT:"MDCSnackbar:opened",OPENING_EVENT:"MDCSnackbar:opening",REASON_ACTION:"action",REASON_DISMISS:"dismiss",SURFACE_SELECTOR:".mdc-snackbar__surface"},Ot={DEFAULT_AUTO_DISMISS_TIMEOUT_MS:5e3,INDETERMINATE:-1,MAX_AUTO_DISMISS_TIMEOUT_MS:1e4,MIN_AUTO_DISMISS_TIMEOUT_MS:4e3,SNACKBAR_ANIMATION_CLOSE_TIME_MS:75,SNACKBAR_ANIMATION_OPEN_TIME_MS:150,ARIA_LIVE_DELAY_MS:1e3},Dt=Mt.OPENING,Pt=Mt.OPEN,xt=Mt.CLOSING,kt=Lt.REASON_ACTION,Nt=Lt.REASON_DISMISS,Ft=function(e){function t(n){var i=e.call(this,C({},t.defaultAdapter,n))||this;return i.isOpen_=!1,i.animationFrame_=0,i.animationTimer_=0,i.autoDismissTimer_=0,i.autoDismissTimeoutMs_=Ot.DEFAULT_AUTO_DISMISS_TIMEOUT_MS,i.closeOnEscape_=!0,i}return E(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return Mt},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return Lt},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return Ot},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},announce:function(){},notifyClosed:function(){},notifyClosing:function(){},notifyOpened:function(){},notifyOpening:function(){},removeClass:function(){}}},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){this.clearAutoDismissTimer_(),cancelAnimationFrame(this.animationFrame_),this.animationFrame_=0,clearTimeout(this.animationTimer_),this.animationTimer_=0,this.adapter_.removeClass(Dt),this.adapter_.removeClass(Pt),this.adapter_.removeClass(xt)},t.prototype.open=function(){var e=this;this.clearAutoDismissTimer_(),this.isOpen_=!0,this.adapter_.notifyOpening(),this.adapter_.removeClass(xt),this.adapter_.addClass(Dt),this.adapter_.announce(),this.runNextAnimationFrame_((function(){e.adapter_.addClass(Pt),e.animationTimer_=setTimeout((function(){var t=e.getTimeoutMs();e.handleAnimationTimerEnd_(),e.adapter_.notifyOpened(),t!==Ot.INDETERMINATE&&(e.autoDismissTimer_=setTimeout((function(){e.close(Nt)}),t))}),Ot.SNACKBAR_ANIMATION_OPEN_TIME_MS)}))},t.prototype.close=function(e){var t=this;void 0===e&&(e=""),this.isOpen_&&(cancelAnimationFrame(this.animationFrame_),this.animationFrame_=0,this.clearAutoDismissTimer_(),this.isOpen_=!1,this.adapter_.notifyClosing(e),this.adapter_.addClass(Mt.CLOSING),this.adapter_.removeClass(Mt.OPEN),this.adapter_.removeClass(Mt.OPENING),clearTimeout(this.animationTimer_),this.animationTimer_=setTimeout((function(){t.handleAnimationTimerEnd_(),t.adapter_.notifyClosed(e)}),Ot.SNACKBAR_ANIMATION_CLOSE_TIME_MS))},t.prototype.isOpen=function(){return this.isOpen_},t.prototype.getTimeoutMs=function(){return this.autoDismissTimeoutMs_},t.prototype.setTimeoutMs=function(e){var t=Ot.MIN_AUTO_DISMISS_TIMEOUT_MS,n=Ot.MAX_AUTO_DISMISS_TIMEOUT_MS,i=Ot.INDETERMINATE;if(!(e===Ot.INDETERMINATE||e<=n&&e>=t))throw new Error("\n        timeoutMs must be an integer in the range "+t+"–"+n+"\n        (or "+i+" to disable), but got '"+e+"'");this.autoDismissTimeoutMs_=e},t.prototype.getCloseOnEscape=function(){return this.closeOnEscape_},t.prototype.setCloseOnEscape=function(e){this.closeOnEscape_=e},t.prototype.handleKeyDown=function(e){("Escape"===e.key||27===e.keyCode)&&this.getCloseOnEscape()&&this.close(Nt)},t.prototype.handleActionButtonClick=function(e){this.close(kt)},t.prototype.handleActionIconClick=function(e){this.close(Nt)},t.prototype.clearAutoDismissTimer_=function(){clearTimeout(this.autoDismissTimer_),this.autoDismissTimer_=0},t.prototype.handleAnimationTimerEnd_=function(){this.animationTimer_=0,this.adapter_.removeClass(Mt.OPENING),this.adapter_.removeClass(Mt.CLOSING)},t.prototype.runNextAnimationFrame_=function(e){var t=this;cancelAnimationFrame(this.animationFrame_),this.animationFrame_=requestAnimationFrame((function(){t.animationFrame_=0,clearTimeout(t.animationTimer_),t.animationTimer_=setTimeout(e,0)}))},t}(S),Rt=Ot.ARIA_LIVE_DELAY_MS,Ht=Lt.ARIA_LIVE_LABEL_TEXT_ATTR;function Bt(e,t){void 0===t&&(t=e);var n=e.getAttribute("aria-live"),i=t.textContent.trim();i&&n&&(e.setAttribute("aria-live","off"),t.textContent="",t.innerHTML='<span style="display: inline-block; width: 0; height: 1px;">&nbsp;</span>',t.setAttribute(Ht,i),setTimeout((function(){e.setAttribute("aria-live",n),t.removeAttribute(Ht),t.textContent=i}),Rt))}
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */var Ut=Lt.SURFACE_SELECTOR,jt=Lt.LABEL_SELECTOR,Vt=Lt.ACTION_SELECTOR,zt=Lt.DISMISS_SELECTOR,Gt=Lt.OPENING_EVENT,Kt=Lt.OPENED_EVENT,$t=Lt.CLOSING_EVENT,Wt=Lt.CLOSED_EVENT,qt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return E(t,e),t.attachTo=function(e){return new t(e)},t.prototype.initialize=function(e){void 0===e&&(e=function(){return Bt}),this.announce_=e()},t.prototype.initialSyncWithDOM=function(){var e=this;this.surfaceEl_=this.root_.querySelector(Ut),this.labelEl_=this.root_.querySelector(jt),this.actionEl_=this.root_.querySelector(Vt),this.handleKeyDown_=function(t){return e.foundation_.handleKeyDown(t)},this.handleSurfaceClick_=function(t){var n=t.target;e.isActionButton_(n)?e.foundation_.handleActionButtonClick(t):e.isActionIcon_(n)&&e.foundation_.handleActionIconClick(t)},this.registerKeyDownHandler_(this.handleKeyDown_),this.registerSurfaceClickHandler_(this.handleSurfaceClick_)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.deregisterKeyDownHandler_(this.handleKeyDown_),this.deregisterSurfaceClickHandler_(this.handleSurfaceClick_)},t.prototype.open=function(){this.foundation_.open()},t.prototype.close=function(e){void 0===e&&(e=""),this.foundation_.close(e)},t.prototype.getDefaultFoundation=function(){var e=this;return new Ft({addClass:function(t){return e.root_.classList.add(t)},announce:function(){return e.announce_(e.labelEl_)},notifyClosed:function(t){return e.emit(Wt,t?{reason:t}:{})},notifyClosing:function(t){return e.emit($t,t?{reason:t}:{})},notifyOpened:function(){return e.emit(Kt,{})},notifyOpening:function(){return e.emit(Gt,{})},removeClass:function(t){return e.root_.classList.remove(t)}})},Object.defineProperty(t.prototype,"timeoutMs",{get:function(){return this.foundation_.getTimeoutMs()},set:function(e){this.foundation_.setTimeoutMs(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"closeOnEscape",{get:function(){return this.foundation_.getCloseOnEscape()},set:function(e){this.foundation_.setCloseOnEscape(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isOpen",{get:function(){return this.foundation_.isOpen()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"labelText",{get:function(){return this.labelEl_.textContent},set:function(e){this.labelEl_.textContent=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"actionButtonText",{get:function(){return this.actionEl_.textContent},set:function(e){this.actionEl_.textContent=e},enumerable:!0,configurable:!0}),t.prototype.registerKeyDownHandler_=function(e){this.listen("keydown",e)},t.prototype.deregisterKeyDownHandler_=function(e){this.unlisten("keydown",e)},t.prototype.registerSurfaceClickHandler_=function(e){this.surfaceEl_.addEventListener("click",e)},t.prototype.deregisterSurfaceClickHandler_=function(e){this.surfaceEl_.removeEventListener("click",e)},t.prototype.isActionButton_=function(e){return Boolean(L(e,Vt))},t.prototype.isActionIcon_=function(e){return Boolean(L(e,zt))},t}(w);function Xt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Qt=new class{constructor(){Xt(this,"API_ID",884322),Xt(this,"API_HASH","77498db3367014eec55b317377f52779"),Xt(this,"APP_VERSION","0.0.1"),Xt(this,"auth_user_id",0);const e=i.get("api_auth");e?(this.auth_user_id=e.user_id,this.initMainView()):Ce.init(),ApiClient.emitter.on("updateConnectionState",e=>{const t=a(".header");if(!t)return;const n=e.detail;"connecting"===n?t.innerText="Connecting...":"connected"===n&&(t.innerText="")}),window.FileApiManager=Le}authDone(e){this.auth_user_id=e.user.id,i.set("api_auth",{user_id:e.user.id}),Ce.destroy(),this.initMainView()}getAuthUserId(){return this.auth_user_id}logOut(){ApiClient.callMethod("auth.logOut",{}).then(e=>{"boolTrue"===e._?this.logOutDone():this.alert("logout error")})}logOutDone(){localStorage.clear(),location.reload()}initMainView(){const e=u("main");document.body.append(e),wt.init(),tt.init()}alert(e){this.snackbar&&this.snackbar.destroy();const t=l(`\n      <div class="mdc-snackbar">\n        <div class="mdc-snackbar__surface">\n          <div class="mdc-snackbar__label">${e}</div>\n        </div>\n      </div>\n    `);document.body.append(t),this.snackbar=new qt(t),this.snackbar.open()}};window.App=Qt}]);